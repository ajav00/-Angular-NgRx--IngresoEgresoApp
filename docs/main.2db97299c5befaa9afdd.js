(self.webpackChunkingreso_egreso_app=self.webpackChunkingreso_egreso_app||[]).push([[179],{8255:Pe=>{function fe(V){return Promise.resolve().then(()=>{var w=new Error("Cannot find module '"+V+"'");throw w.code="MODULE_NOT_FOUND",w})}fe.keys=()=>[],fe.resolve=fe,fe.id=8255,Pe.exports=fe},8583:(Pe,fe,V)=>{"use strict";V.d(fe,{mr:()=>Qe,ez:()=>Ds,H9:()=>ks,K0:()=>ge,Do:()=>Ie,V_:()=>Y,Ye:()=>lt,S$:()=>it,sg:()=>Ge,O5:()=>mt,b0:()=>et,lw:()=>oe,EM:()=>jo,JF:()=>Ma,PM:()=>ri,w_:()=>ee,bD:()=>hs,q:()=>se,Mx:()=>Pr,HT:()=>pe});var w=V(7716);let x=null;function se(){return x}function pe(B){x||(x=B)}class ee{}const ge=new w.OlP("DocumentToken");let oe=(()=>{class B{historyGo(H){throw new Error("Not implemented")}}return B.\u0275fac=function(H){return new(H||B)},B.\u0275prov=(0,w.Yz7)({factory:le,token:B,providedIn:"platform"}),B})();function le(){return(0,w.LFG)(ie)}const Y=new w.OlP("Location Initialized");let ie=(()=>{class B extends oe{constructor(H){super(),this._doc=H,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return se().getBaseHref(this._doc)}onPopState(H){const te=se().getGlobalEventTarget(this._doc,"window");return te.addEventListener("popstate",H,!1),()=>te.removeEventListener("popstate",H)}onHashChange(H){const te=se().getGlobalEventTarget(this._doc,"window");return te.addEventListener("hashchange",H,!1),()=>te.removeEventListener("hashchange",H)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(H){this.location.pathname=H}pushState(H,te,Ce){Z()?this._history.pushState(H,te,Ce):this.location.hash=Ce}replaceState(H,te,Ce){Z()?this._history.replaceState(H,te,Ce):this.location.hash=Ce}forward(){this._history.forward()}back(){this._history.back()}historyGo(H=0){this._history.go(H)}getState(){return this._history.state}}return B.\u0275fac=function(H){return new(H||B)(w.LFG(ge))},B.\u0275prov=(0,w.Yz7)({factory:me,token:B,providedIn:"platform"}),B})();function Z(){return!!window.history.pushState}function me(){return new ie((0,w.LFG)(ge))}function Ke(B,Q){if(0==B.length)return Q;if(0==Q.length)return B;let H=0;return B.endsWith("/")&&H++,Q.startsWith("/")&&H++,2==H?B+Q.substring(1):1==H?B+Q:B+"/"+Q}function qe(B){const Q=B.match(/#|\?|$/),H=Q&&Q.index||B.length;return B.slice(0,H-("/"===B[H-1]?1:0))+B.slice(H)}function Me(B){return B&&"?"!==B[0]?"?"+B:B}let it=(()=>{class B{historyGo(H){throw new Error("Not implemented")}}return B.\u0275fac=function(H){return new(H||B)},B.\u0275prov=(0,w.Yz7)({factory:ce,token:B,providedIn:"root"}),B})();function ce(B){const Q=(0,w.LFG)(ge).location;return new et((0,w.LFG)(oe),Q&&Q.origin||"")}const Qe=new w.OlP("appBaseHref");let et=(()=>{class B extends it{constructor(H,te){if(super(),this._platformLocation=H,this._removeListenerFns=[],null==te&&(te=this._platformLocation.getBaseHrefFromDOM()),null==te)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=te}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}prepareExternalUrl(H){return Ke(this._baseHref,H)}path(H=!1){const te=this._platformLocation.pathname+Me(this._platformLocation.search),Ce=this._platformLocation.hash;return Ce&&H?`${te}${Ce}`:te}pushState(H,te,Ce,Xe){const ht=this.prepareExternalUrl(Ce+Me(Xe));this._platformLocation.pushState(H,te,ht)}replaceState(H,te,Ce,Xe){const ht=this.prepareExternalUrl(Ce+Me(Xe));this._platformLocation.replaceState(H,te,ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(H=0){var te,Ce;null===(Ce=(te=this._platformLocation).historyGo)||void 0===Ce||Ce.call(te,H)}}return B.\u0275fac=function(H){return new(H||B)(w.LFG(oe),w.LFG(Qe,8))},B.\u0275prov=w.Yz7({token:B,factory:B.\u0275fac}),B})(),Ie=(()=>{class B extends it{constructor(H,te){super(),this._platformLocation=H,this._baseHref="",this._removeListenerFns=[],null!=te&&(this._baseHref=te)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(H){this._removeListenerFns.push(this._platformLocation.onPopState(H),this._platformLocation.onHashChange(H))}getBaseHref(){return this._baseHref}path(H=!1){let te=this._platformLocation.hash;return null==te&&(te="#"),te.length>0?te.substring(1):te}prepareExternalUrl(H){const te=Ke(this._baseHref,H);return te.length>0?"#"+te:te}pushState(H,te,Ce,Xe){let ht=this.prepareExternalUrl(Ce+Me(Xe));0==ht.length&&(ht=this._platformLocation.pathname),this._platformLocation.pushState(H,te,ht)}replaceState(H,te,Ce,Xe){let ht=this.prepareExternalUrl(Ce+Me(Xe));0==ht.length&&(ht=this._platformLocation.pathname),this._platformLocation.replaceState(H,te,ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(H=0){var te,Ce;null===(Ce=(te=this._platformLocation).historyGo)||void 0===Ce||Ce.call(te,H)}}return B.\u0275fac=function(H){return new(H||B)(w.LFG(oe),w.LFG(Qe,8))},B.\u0275prov=w.Yz7({token:B,factory:B.\u0275fac}),B})(),lt=(()=>{class B{constructor(H,te){this._subject=new w.vpe,this._urlChangeListeners=[],this._platformStrategy=H;const Ce=this._platformStrategy.getBaseHref();this._platformLocation=te,this._baseHref=qe(xt(Ce)),this._platformStrategy.onPopState(Xe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Xe.state,type:Xe.type})})}path(H=!1){return this.normalize(this._platformStrategy.path(H))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(H,te=""){return this.path()==this.normalize(H+Me(te))}normalize(H){return B.stripTrailingSlash(function(B,Q){return B&&Q.startsWith(B)?Q.substring(B.length):Q}(this._baseHref,xt(H)))}prepareExternalUrl(H){return H&&"/"!==H[0]&&(H="/"+H),this._platformStrategy.prepareExternalUrl(H)}go(H,te="",Ce=null){this._platformStrategy.pushState(Ce,"",H,te),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Me(te)),Ce)}replaceState(H,te="",Ce=null){this._platformStrategy.replaceState(Ce,"",H,te),this._notifyUrlChangeListeners(this.prepareExternalUrl(H+Me(te)),Ce)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(H=0){var te,Ce;null===(Ce=(te=this._platformStrategy).historyGo)||void 0===Ce||Ce.call(te,H)}onUrlChange(H){this._urlChangeListeners.push(H),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(te=>{this._notifyUrlChangeListeners(te.url,te.state)}))}_notifyUrlChangeListeners(H="",te){this._urlChangeListeners.forEach(Ce=>Ce(H,te))}subscribe(H,te,Ce){return this._subject.subscribe({next:H,error:te,complete:Ce})}}return B.\u0275fac=function(H){return new(H||B)(w.LFG(it),w.LFG(oe))},B.normalizeQueryParams=Me,B.joinWithSlash=Ke,B.stripTrailingSlash=qe,B.\u0275prov=(0,w.Yz7)({factory:Mt,token:B,providedIn:"root"}),B})();function Mt(){return new lt((0,w.LFG)(it),(0,w.LFG)(oe))}function xt(B){return B.replace(/\/index.html$/,"")}const rt={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Be=(()=>((Be=Be||{})[Be.Decimal=0]="Decimal",Be[Be.Percent=1]="Percent",Be[Be.Currency=2]="Currency",Be[Be.Scientific=3]="Scientific",Be))(),Ae=(()=>((Ae=Ae||{})[Ae.Zero=0]="Zero",Ae[Ae.One=1]="One",Ae[Ae.Two=2]="Two",Ae[Ae.Few=3]="Few",Ae[Ae.Many=4]="Many",Ae[Ae.Other=5]="Other",Ae))(),Le=(()=>((Le=Le||{})[Le.Decimal=0]="Decimal",Le[Le.Group=1]="Group",Le[Le.List=2]="List",Le[Le.PercentSign=3]="PercentSign",Le[Le.PlusSign=4]="PlusSign",Le[Le.MinusSign=5]="MinusSign",Le[Le.Exponential=6]="Exponential",Le[Le.SuperscriptingExponent=7]="SuperscriptingExponent",Le[Le.PerMille=8]="PerMille",Le[Le.Infinity=9]="Infinity",Le[Le.NaN=10]="NaN",Le[Le.TimeSeparator=11]="TimeSeparator",Le[Le.CurrencyDecimal=12]="CurrencyDecimal",Le[Le.CurrencyGroup=13]="CurrencyGroup",Le))();function Lt(B,Q){const H=(0,w.cg1)(B),te=H[w.wAp.NumberSymbols][Q];if(void 0===te){if(Q===Le.CurrencyDecimal)return H[w.wAp.NumberSymbols][Le.Decimal];if(Q===Le.CurrencyGroup)return H[w.wAp.NumberSymbols][Le.Group]}return te}const Yn=w.kL8;const yn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Rr(B,Q,H,te,Ce){const ht=function(B,Q="-"){const H={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},te=B.split(";"),Ce=te[0],Xe=te[1],ht=-1!==Ce.indexOf(".")?Ce.split("."):[Ce.substring(0,Ce.lastIndexOf("0")+1),Ce.substring(Ce.lastIndexOf("0")+1)],F=ht[0],k=ht[1]||"";H.posPre=F.substr(0,F.indexOf("#"));for(let q=0;q<k.length;q++){const Ve=k.charAt(q);"0"===Ve?H.minFrac=H.maxFrac=q+1:"#"===Ve?H.maxFrac=q+1:H.posSuf+=Ve}const O=F.split(",");if(H.gSize=O[1]?O[1].length:0,H.lgSize=O[2]||O[1]?(O[2]||O[1]).length:0,Xe){const q=Ce.length-H.posPre.length-H.posSuf.length,Ve=Xe.indexOf("#");H.negPre=Xe.substr(0,Ve).replace(/'/g,""),H.negSuf=Xe.substr(Ve+q).replace(/'/g,"")}else H.negPre=Q+H.posPre,H.negSuf=H.posSuf;return H}(function(B,Q){return(0,w.cg1)(B)[w.wAp.NumberFormats][Q]}(Q,Be.Currency),Lt(Q,Le.MinusSign));return ht.minFrac=function(B){let Q;const H=rt[B];return H&&(Q=H[2]),"number"==typeof Q?Q:2}(te),ht.maxFrac=ht.minFrac,function(B,Q,H,te,Ce,Xe,ht=!1){let F="",k=!1;if(isFinite(B)){let O=function(B){let te,Ce,Xe,ht,F,Q=Math.abs(B)+"",H=0;for((Ce=Q.indexOf("."))>-1&&(Q=Q.replace(".","")),(Xe=Q.search(/e/i))>0?(Ce<0&&(Ce=Xe),Ce+=+Q.slice(Xe+1),Q=Q.substring(0,Xe)):Ce<0&&(Ce=Q.length),Xe=0;"0"===Q.charAt(Xe);Xe++);if(Xe===(F=Q.length))te=[0],Ce=1;else{for(F--;"0"===Q.charAt(F);)F--;for(Ce-=Xe,te=[],ht=0;Xe<=F;Xe++,ht++)te[ht]=Number(Q.charAt(Xe))}return Ce>22&&(te=te.splice(0,21),H=Ce-1,Ce=1),{digits:te,exponent:H,integerLen:Ce}}(B);ht&&(O=function(B){if(0===B.digits[0])return B;const Q=B.digits.length-B.integerLen;return B.exponent?B.exponent+=2:(0===Q?B.digits.push(0,0):1===Q&&B.digits.push(0),B.integerLen+=2),B}(O));let q=Q.minInt,Ve=Q.minFrac,pt=Q.maxFrac;if(Xe){const fs=Xe.match(yn);if(null===fs)throw new Error(`${Xe} is not a valid digit info`);const Zt=fs[1],Qi=fs[3],ha=fs[5];null!=Zt&&(q=ln(Zt)),null!=Qi&&(Ve=ln(Qi)),null!=ha?pt=ln(ha):null!=Qi&&Ve>pt&&(pt=Ve)}!function(B,Q,H){if(Q>H)throw new Error(`The minimum number of digits after fraction (${Q}) is higher than the maximum (${H}).`);let te=B.digits,Ce=te.length-B.integerLen;const Xe=Math.min(Math.max(Q,Ce),H);let ht=Xe+B.integerLen,F=te[ht];if(ht>0){te.splice(Math.max(B.integerLen,ht));for(let Ve=ht;Ve<te.length;Ve++)te[Ve]=0}else{Ce=Math.max(0,Ce),B.integerLen=1,te.length=Math.max(1,ht=Xe+1),te[0]=0;for(let Ve=1;Ve<ht;Ve++)te[Ve]=0}if(F>=5)if(ht-1<0){for(let Ve=0;Ve>ht;Ve--)te.unshift(0),B.integerLen++;te.unshift(1),B.integerLen++}else te[ht-1]++;for(;Ce<Math.max(0,Xe);Ce++)te.push(0);let k=0!==Xe;const O=Q+B.integerLen,q=te.reduceRight(function(Ve,pt,tn,Mn){return Mn[tn]=(pt+=Ve)<10?pt:pt-10,k&&(0===Mn[tn]&&tn>=O?Mn.pop():k=!1),pt>=10?1:0},0);q&&(te.unshift(q),B.integerLen++)}(O,Ve,pt);let tn=O.digits,Mn=O.integerLen;const Di=O.exponent;let Nr=[];for(k=tn.every(fs=>!fs);Mn<q;Mn++)tn.unshift(0);for(;Mn<0;Mn++)tn.unshift(0);Mn>0?Nr=tn.splice(Mn,tn.length):(Nr=tn,tn=[0]);const Ti=[];for(tn.length>=Q.lgSize&&Ti.unshift(tn.splice(-Q.lgSize,tn.length).join(""));tn.length>Q.gSize;)Ti.unshift(tn.splice(-Q.gSize,tn.length).join(""));tn.length&&Ti.unshift(tn.join("")),F=Ti.join(Lt(H,te)),Nr.length&&(F+=Lt(H,Ce)+Nr.join("")),Di&&(F+=Lt(H,Le.Exponential)+"+"+Di)}else F=Lt(H,Le.Infinity);return F=B<0&&!k?Q.negPre+F+Q.negSuf:Q.posPre+F+Q.posSuf,F}(B,ht,Q,Le.CurrencyGroup,Le.CurrencyDecimal,Ce).replace("\xa4",H).replace("\xa4","").trim()}function ln(B){const Q=parseInt(B);if(isNaN(Q))throw new Error("Invalid integer literal when parsing "+B);return Q}class Or{}let bs=(()=>{class B extends Or{constructor(H){super(),this.locale=H}getPluralCategory(H,te){switch(Yn(te||this.locale)(H)){case Ae.Zero:return"zero";case Ae.One:return"one";case Ae.Two:return"two";case Ae.Few:return"few";case Ae.Many:return"many";default:return"other"}}}return B.\u0275fac=function(H){return new(H||B)(w.LFG(w.soG))},B.\u0275prov=w.Yz7({token:B,factory:B.\u0275fac}),B})();function Pr(B,Q){Q=encodeURIComponent(Q);for(const H of B.split(";")){const te=H.indexOf("="),[Ce,Xe]=-1==te?[H,""]:[H.slice(0,te),H.slice(te+1)];if(Ce.trim()===Q)return decodeURIComponent(Xe)}return null}class ye{constructor(Q,H,te,Ce){this.$implicit=Q,this.ngForOf=H,this.index=te,this.count=Ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ge=(()=>{class B{constructor(H,te,Ce){this._viewContainer=H,this._template=te,this._differs=Ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(H){this._ngForOf=H,this._ngForOfDirty=!0}set ngForTrackBy(H){this._trackByFn=H}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(H){H&&(this._template=H)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const H=this._ngForOf;if(!this._differ&&H)try{this._differ=this._differs.find(H).create(this.ngForTrackBy)}catch(te){throw new Error(`Cannot find a differ supporting object '${H}' of type '${function(B){return B.name||typeof B}(H)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const H=this._differ.diff(this._ngForOf);H&&this._applyChanges(H)}}_applyChanges(H){const te=[];H.forEachOperation((Ce,Xe,ht)=>{if(null==Ce.previousIndex){const F=this._viewContainer.createEmbeddedView(this._template,new ye(null,this._ngForOf,-1,-1),null===ht?void 0:ht),k=new Ue(Ce,F);te.push(k)}else if(null==ht)this._viewContainer.remove(null===Xe?void 0:Xe);else if(null!==Xe){const F=this._viewContainer.get(Xe);this._viewContainer.move(F,ht);const k=new Ue(Ce,F);te.push(k)}});for(let Ce=0;Ce<te.length;Ce++)this._perViewChange(te[Ce].view,te[Ce].record);for(let Ce=0,Xe=this._viewContainer.length;Ce<Xe;Ce++){const ht=this._viewContainer.get(Ce);ht.context.index=Ce,ht.context.count=Xe,ht.context.ngForOf=this._ngForOf}H.forEachIdentityChange(Ce=>{this._viewContainer.get(Ce.currentIndex).context.$implicit=Ce.item})}_perViewChange(H,te){H.context.$implicit=te.item}static ngTemplateContextGuard(H,te){return!0}}return B.\u0275fac=function(H){return new(H||B)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),B})();class Ue{constructor(Q,H){this.record=Q,this.view=H}}let mt=(()=>{class B{constructor(H,te){this._viewContainer=H,this._context=new Ct,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=te}set ngIf(H){this._context.$implicit=this._context.ngIf=H,this._updateView()}set ngIfThen(H){un("ngIfThen",H),this._thenTemplateRef=H,this._thenViewRef=null,this._updateView()}set ngIfElse(H){un("ngIfElse",H),this._elseTemplateRef=H,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(H,te){return!0}}return B.\u0275fac=function(H){return new(H||B)(w.Y36(w.s_b),w.Y36(w.Rgc))},B.\u0275dir=w.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),B})();class Ct{constructor(){this.$implicit=null,this.ngIf=null}}function un(B,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,w.AaK)(Q)}'.`)}let ks=(()=>{class B{constructor(H,te="USD"){this._locale=H,this._defaultCurrencyCode=te}transform(H,te=this._defaultCurrencyCode,Ce="symbol",Xe,ht){if(!function(B){return!(null==B||""===B||B!=B)}(H))return null;ht=ht||this._locale,"boolean"==typeof Ce&&(Ce=Ce?"symbol":"code");let F=te||this._defaultCurrencyCode;"code"!==Ce&&(F="symbol"===Ce||"symbol-narrow"===Ce?function(B,Q,H="en"){const te=function(B){return(0,w.cg1)(B)[w.wAp.Currencies]}(H)[B]||rt[B]||[],Ce=te[1];return"narrow"===Q&&"string"==typeof Ce?Ce:te[0]||B}(F,"symbol"===Ce?"wide":"narrow",ht):Ce);try{return Rr(function(B){if("string"==typeof B&&!isNaN(Number(B)-parseFloat(B)))return Number(B);if("number"!=typeof B)throw new Error(`${B} is not a number`);return B}(H),ht,F,te,Xe)}catch(k){throw function(B,Q){return Error(`InvalidPipeArgument: '${Q}' for pipe '${(0,w.AaK)(B)}'`)}(B,k.message)}}}return B.\u0275fac=function(H){return new(H||B)(w.Y36(w.soG,16),w.Y36(w.EJc,16))},B.\u0275pipe=w.Yjl({name:"currency",type:B,pure:!0}),B})();let Ds=(()=>{class B{}return B.\u0275fac=function(H){return new(H||B)},B.\u0275mod=w.oAB({type:B}),B.\u0275inj=w.cJS({providers:[{provide:Or,useClass:bs}]}),B})();const hs="browser";function ri(B){return"server"===B}let jo=(()=>{class B{}return B.\u0275prov=(0,w.Yz7)({token:B,providedIn:"root",factory:()=>new Ui((0,w.LFG)(ge),window)}),B})();class Ui{constructor(Q,H){this.document=Q,this.window=H,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const H=function(B,Q){const H=B.getElementById(Q)||B.getElementsByName(Q)[0];if(H)return H;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const te=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let Ce=te.currentNode;for(;Ce;){const Xe=Ce.shadowRoot;if(Xe){const ht=Xe.getElementById(Q)||Xe.querySelector(`[name="${Q}"]`);if(ht)return ht}Ce=te.nextNode()}}return null}(this.document,Q);H&&(this.scrollToElement(H),this.attemptFocus(H))}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const H=this.window.history;H&&H.scrollRestoration&&(H.scrollRestoration=Q)}}scrollToElement(Q){const H=Q.getBoundingClientRect(),te=H.left+this.window.pageXOffset,Ce=H.top+this.window.pageYOffset,Xe=this.offset();this.window.scrollTo(te-Xe[0],Ce-Xe[1])}attemptFocus(Q){return Q.focus(),this.document.activeElement===Q}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=ui(this.window.history)||ui(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch(Q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Q){return!1}}}function ui(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class Ma{}},7716:(Pe,fe,V)=>{"use strict";V.d(fe,{deG:()=>yr,tb:()=>eC,AFp:()=>Q0,ip1:()=>hw,CZH:()=>jg,hGG:()=>kA,z2F:()=>g_,sBO:()=>EI,Sil:()=>p_,_Vd:()=>Mg,EJc:()=>nC,SBq:()=>Dd,qLn:()=>m,vpe:()=>Td,gxx:()=>Pc,tBr:()=>Vs,XFs:()=>Tt,OlP:()=>wr,zs3:()=>Mi,ZZ4:()=>xy,aQg:()=>Ry,soG:()=>jy,YKP:()=>WE,v3s:()=>pA,h0i:()=>kp,PXZ:()=>lA,R0b:()=>Iu,FiY:()=>vi,Lbi:()=>X0,g9A:()=>J0,Qsj:()=>oI,FYo:()=>Sy,JOm:()=>bo,Tiy:()=>Uv,q3G:()=>Jr,tp0:()=>yo,EAV:()=>yA,Rgc:()=>n_,dDg:()=>oC,DyG:()=>mo,q4F:()=>Bv,GfV:()=>LE,s_b:()=>My,ifc:()=>It,eFA:()=>dC,G48:()=>tA,Gpc:()=>ie,X6Q:()=>vw,_c5:()=>SA,VLi:()=>eA,c2e:()=>tC,zSh:()=>rf,wAp:()=>An,vHH:()=>qe,EiD:()=>Fd,mCW:()=>Ks,qzn:()=>cl,JVY:()=>qc,pB0:()=>Zc,eBb:()=>wi,L6k:()=>Af,LAX:()=>cr,cg1:()=>Rv,Tjo:()=>TA,kL8:()=>sE,yhl:()=>vo,dqk:()=>xn,sIi:()=>_p,CqO:()=>Bm,QGY:()=>Um,F4k:()=>iy,RDi:()=>Ts,AaK:()=>oe,z3N:()=>Ia,qOj:()=>oh,TTD:()=>Ds,_Bn:()=>PE,xp6:()=>gu,uIk:()=>Tm,ekj:()=>Sg,Suo:()=>x0,Xpm:()=>Fr,lG2:()=>li,Yz7:()=>rn,cJS:()=>Lt,oAB:()=>xs,Yjl:()=>yn,Y36:()=>Ap,_UZ:()=>ey,qZA:()=>Dg,TgZ:()=>Ig,EpF:()=>ry,n5z:()=>cn,Ikx:()=>xv,LFG:()=>Kr,$8M:()=>qn,NdJ:()=>jm,CRH:()=>R0,oxw:()=>Tg,ALo:()=>I0,lcZ:()=>D0,Q6J:()=>Fm,iGM:()=>S0,CHM:()=>pa,LSH:()=>Bs,kYT:()=>hn,YNc:()=>hf,_uU:()=>K,Oqu:()=>ae,hij:()=>Ee});var w=V(9765),x=V(5319),se=V(7574),De=V(6682),pe=V(8819);function ee(t){for(let n in t)if(t[n]===ee)return n;throw Error("Could not find renamed property on target object.")}function ge(t,n){for(const r in n)n.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=n[r])}function oe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(oe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return-1===r?n:n.substring(0,r)}function le(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Y=ee({__forward_ref__:ee});function ie(t){return t.__forward_ref__=ie,t.toString=function(){return oe(this())},t}function Z(t){return me(t)?t():t}function me(t){return"function"==typeof t&&t.hasOwnProperty(Y)&&t.__forward_ref__===ie}class qe extends Error{constructor(n,r){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,r)),this.code=n}}function ce(t){return"string"==typeof t?t:null==t?"":String(t)}function Qe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ce(t)}function Mt(t,n){const r=n?` in ${n}`:"";throw new qe("201",`No provider for ${Qe(t)} found${r}`)}function Ft(t,n){null==t&&function(t,n,r,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${r} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function rn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Lt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Kt(t){return Fn(t,Yn)||Fn(t,Nt)}function Fn(t,n){return t.hasOwnProperty(n)?t[n]:null}function Gn(t){return t&&(t.hasOwnProperty(Xr)||t.hasOwnProperty(Qn))?t[Xr]:null}const Yn=ee({\u0275prov:ee}),Xr=ee({\u0275inj:ee}),Nt=ee({ngInjectableDef:ee}),Qn=ee({ngInjectorDef:ee});var Tt=(()=>((Tt=Tt||{})[Tt.Default=0]="Default",Tt[Tt.Host=1]="Host",Tt[Tt.Self=2]="Self",Tt[Tt.SkipSelf=4]="SkipSelf",Tt[Tt.Optional=8]="Optional",Tt))();let ar;function jn(t){const n=ar;return ar=t,n}function Qt(t,n,r){const o=Kt(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:r&Tt.Optional?null:void 0!==n?n:void Mt(oe(t),"Injector")}function sn(t){return{toString:t}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),It=(()=>((It=It||{})[It.Emulated=0]="Emulated",It[It.None=2]="None",It[It.ShadowDom=3]="ShadowDom",It))();const yt="undefined"!=typeof globalThis&&globalThis,ei="undefined"!=typeof window&&window,bi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xn=yt||"undefined"!=typeof global&&global||ei||bi,Se={},_e=[],Re=ee({\u0275cmp:ee}),ot=ee({\u0275dir:ee}),je=ee({\u0275pipe:ee}),Ut=ee({\u0275mod:ee}),Vt=ee({\u0275loc:ee}),an=ee({\u0275fac:ee}),Cn=ee({__NG_ELEMENT_ID__:ee});let lr=0;function Fr(t){return sn(()=>{const r={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||_e,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||It.Emulated,id:"c",styles:t.styles||_e,_:null,setInput:null,schemas:t.schemas||null,tView:null},c=t.directives,f=t.features,_=t.pipes;return o.id+=lr++,o.inputs=Ki(t.inputs,r),o.outputs=Ki(t.outputs),f&&f.forEach(E=>E(o)),o.directiveDefs=c?()=>("function"==typeof c?c():c).map(Lr):null,o.pipeDefs=_?()=>("function"==typeof _?_():_).map(ai):null,o})}function Lr(t){return ur(t)||function(t){return t[ot]||null}(t)}function ai(t){return function(t){return t[je]||null}(t)}const zi={};function xs(t){return sn(()=>{const n={type:t.type,bootstrap:t.bootstrap||_e,declarations:t.declarations||_e,imports:t.imports||_e,exports:t.exports||_e,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(zi[t.id]=t.type),n})}function hn(t,n){return sn(()=>{const r=Sr(t,!0);r.declarations=n.declarations||_e,r.imports=n.imports||_e,r.exports=n.exports||_e})}function Ki(t,n){if(null==t)return Se;const r={};for(const o in t)if(t.hasOwnProperty(o)){let c=t[o],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),r[c]=o,n&&(n[c]=f)}return r}const li=Fr;function yn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ur(t){return t[Re]||null}function Sr(t,n){const r=t[Ut]||null;if(!r&&!0===n)throw new Error(`Type ${oe(t)} does not have '\u0275mod' property.`);return r}function er(t){return Array.isArray(t)&&"object"==typeof t[1]}function Zr(t){return Array.isArray(t)&&!0===t[1]}function Fi(t){return 0!=(8&t.flags)}function he(t){return 2==(2&t.flags)}function ls(t){return 1==(1&t.flags)}function ti(t){return null!==t.template}function rr(t){return 0!=(512&t[2])}function Mr(t,n){return t.hasOwnProperty(an)?t[an]:null}class Ii{constructor(n,r,o){this.previousValue=n,this.currentValue=r,this.firstChange=o}isFirstChange(){return this.firstChange}}function Ds(){return hs}function hs(t){return t.type.prototype.ngOnChanges&&(t.setInput=$s),uo}function uo(){const t=Dr(this),n=null==t?void 0:t.current;if(n){const r=t.previous;if(r===Se)t.previous=n;else for(let o in n)r[o]=n[o];t.current=null,this.ngOnChanges(n)}}function $s(t,n,r,o){const c=Dr(t)||function(t,n){return t[ni]=n}(t,{previous:Se,current:null}),f=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[r],A=_[E];f[E]=new Ii(A&&A.currentValue,n,_===Se),t[o]=n}Ds.ngInherit=!0;const ni="__ngSimpleChanges__";function Dr(t){return t[ni]||null}let ui;function Ts(t){ui=t}function B(t){return!!t.listen}const H={createRenderer:(t,n)=>void 0!==ui?ui:"undefined"!=typeof document?document:void 0};function Ce(t){for(;Array.isArray(t);)t=t[0];return t}function F(t,n){return Ce(n[t])}function k(t,n){return Ce(n[t.index])}function q(t,n){return t.data[n]}function pt(t,n){const r=n[t];return er(r)?r:r[0]}function tn(t){return 4==(4&t[2])}function Mn(t){return 128==(128&t[2])}function Nr(t,n){return null==n?null:t[n]}function Ti(t){t[18]=0}function fs(t,n){t[5]+=n;let r=t,o=t[3];for(;null!==o&&(1===n&&1===r[5]||-1===n&&0===r[5]);)o[5]+=n,r=o,o=o[3]}const Zt={lFrame:el(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function co(){return Zt.bindingsEnabled}function ft(){return Zt.lFrame.lView}function Nn(){return Zt.lFrame.tView}function pa(t){return Zt.lFrame.contextLView=t,t[8]}function Br(){let t=$o();for(;null!==t&&64===t.type;)t=t.parent;return t}function $o(){return Zt.lFrame.currentTNode}function Js(t,n){const r=Zt.lFrame;r.currentTNode=t,r.isParent=n}function Wo(){return Zt.lFrame.isParent}function Na(){return Zt.isInCheckNoChangesMode}function ma(t){Zt.isInCheckNoChangesMode=t}function _a(){return Zt.lFrame.bindingIndex++}function kr(t,n){const r=Zt.lFrame;r.bindingIndex=r.bindingRootIndex=t,Cl(n)}function Cl(t){Zt.lFrame.currentDirectiveIndex=t}function sc(){return Zt.lFrame.currentQueryIndex}function qo(t){Zt.lFrame.currentQueryIndex=t}function ka(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Fa(t,n,r){if(r&Tt.SkipSelf){let c=n,f=t;for(;!(c=c.parent,null!==c||r&Tt.Host||(c=ka(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;n=c,t=f}const o=Zt.lFrame=fo();return o.currentTNode=n,o.lView=t,!0}function ya(t){const n=fo(),r=t[1];Zt.lFrame=n,n.currentTNode=r.firstChild,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex,n.inI18n=!1}function fo(){const t=Zt.lFrame,n=null===t?null:t.child;return null===n?el(t):n}function el(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Xs(){const t=Zt.lFrame;return Zt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const bl=Xs;function tl(){const t=Xs();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Xi(){return Zt.lFrame.selectedIndex}function po(t){Zt.lFrame.selectedIndex=t}function mr(){const t=Zt.lFrame;return q(t.tView,t.selectedIndex)}function ir(t,n){for(let r=n.directiveStart,o=n.directiveEnd;r<o;r++){const f=t.data[r].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:A,ngAfterViewChecked:L,ngOnDestroy:G}=f;_&&(t.contentHooks||(t.contentHooks=[])).push(-r,_),E&&((t.contentHooks||(t.contentHooks=[])).push(r,E),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(r,E)),A&&(t.viewHooks||(t.viewHooks=[])).push(-r,A),L&&((t.viewHooks||(t.viewHooks=[])).push(r,L),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(r,L)),null!=G&&(t.destroyHooks||(t.destroyHooks=[])).push(r,G)}}function Zo(t,n,r){Si(t,n,3,r)}function La(t,n,r,o){(3&t[2])===r&&Si(t,n,r,o)}function So(t,n){let r=t[2];(3&r)===n&&(r&=2047,r+=1,t[2]=r)}function Si(t,n,r,o){const f=null!=o?o:-1,_=n.length-1;let E=0;for(let A=void 0!==o?65535&t[18]:0;A<_;A++)if("number"==typeof n[A+1]){if(E=n[A],null!=o&&E>=o)break}else n[A]<0&&(t[18]+=65536),(E<f||-1==f)&&(pr(t,r,n,A),t[18]=(4294901760&t[18])+A+2),A++}function pr(t,n,r,o){const c=r[o]<0,f=r[o+1],E=t[c?-r[o]:r[o]];if(c){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Hr{constructor(n,r,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=o}}function Bt(t,n,r){const o=B(t);let c=0;for(;c<r.length;){const f=r[c];if("number"==typeof f){if(0!==f)break;c++;const _=r[c++],E=r[c++],A=r[c++];o?t.setAttribute(n,E,A,_):n.setAttributeNS(_,E,A)}else{const _=f,E=r[++c];ji(_)?o&&t.setProperty(n,_,E):o?t.setAttribute(n,_,E):n.setAttribute(_,E),c++}}return c}function _r(t){return 3===t||4===t||6===t}function ji(t){return 64===t.charCodeAt(0)}function si(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let r=-1;for(let o=0;o<n.length;o++){const c=n[o];"number"==typeof c?r=c:0===r||es(t,r,c,null,-1===r||2===r?n[++o]:null)}}return t}function es(t,n,r,o,c){let f=0,_=t.length;if(-1===n)_=-1;else for(;f<t.length;){const E=t[f++];if("number"==typeof E){if(E===n){_=-1;break}if(E>n){_=f-1;break}}}for(;f<t.length;){const E=t[f];if("number"==typeof E)break;if(E===r){if(null===o)return void(null!==c&&(t[f+1]=c));if(o===t[f+1])return void(t[f+2]=c)}f++,null!==o&&f++,null!==c&&f++}-1!==_&&(t.splice(_,0,n),f=_+1),t.splice(f++,0,r),null!==o&&t.splice(f++,0,o),null!==c&&t.splice(f++,0,c)}function Wr(t){return-1!==t}function Il(t){return 32767&t}function rl(t,n){let r=function(t){return t>>16}(t),o=n;for(;r>0;)o=o[15],r--;return o}let Ws=!0;function On(t){const n=Ws;return Ws=t,n}let xi=0;function Hi(t,n){const r=sr(t,n);if(-1!==r)return r;const o=n[1];o.firstCreatePass&&(t.injectorIndex=n.length,bt(o.data,t),bt(n,null),bt(o.blueprint,null));const c=Yo(t,n),f=t.injectorIndex;if(Wr(c)){const _=Il(c),E=rl(c,n),A=E[1].data;for(let L=0;L<8;L++)n[f+L]=E[_+L]|A[_+L]}return n[f+8]=c,f}function bt(t,n){t.push(0,0,0,0,0,0,0,0,n)}function sr(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Yo(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let r=0,o=null,c=n;for(;null!==c;){const f=c[1],_=f.type;if(o=2===_?f.declTNode:1===_?c[6]:null,null===o)return-1;if(r++,c=c[15],-1!==o.injectorIndex)return o.injectorIndex|r<<16}return-1}function Qo(t,n,r){!function(t,n,r){let o;"string"==typeof r?o=r.charCodeAt(0)||0:r.hasOwnProperty(Cn)&&(o=r[Cn]),null==o&&(o=r[Cn]=xi++);const c=255&o;n.data[t+(c>>5)]|=1<<c}(t,n,r)}function bn(t,n,r){if(r&Tt.Optional)return t;Mt(n,"NodeInjector")}function P(t,n,r,o){if(r&Tt.Optional&&void 0===o&&(o=null),0==(r&(Tt.Self|Tt.Host))){const c=t[9],f=jn(void 0);try{return c?c.get(n,o,r&Tt.Optional):Qt(n,o,r&Tt.Optional)}finally{jn(f)}}return bn(o,n,r)}function I(t,n,r,o=Tt.Default,c){if(null!==t){const f=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Cn)?t[Cn]:void 0;return"number"==typeof n?n>=0?255&n:M:n}(r);if("function"==typeof f){if(!Fa(n,t,o))return o&Tt.Host?bn(c,r,o):P(n,r,o,c);try{const _=f(o);if(null!=_||o&Tt.Optional)return _;Mt(r)}finally{bl()}}else if("number"==typeof f){let _=null,E=sr(t,n),A=-1,L=o&Tt.Host?n[16][6]:null;for((-1===E||o&Tt.SkipSelf)&&(A=-1===E?Yo(t,n):n[E+8],-1!==A&&wt(o,!1)?(_=n[1],E=Il(A),n=rl(A,n)):E=-1);-1!==E;){const G=n[1];if(st(f,E,G.data)){const re=$(E,n,r,_,o,L);if(re!==C)return re}A=n[E+8],-1!==A&&wt(o,n[1].data[E+8]===L)&&st(f,E,n)?(_=G,E=Il(A),n=rl(A,n)):E=-1}}}return P(n,r,o,c)}const C={};function M(){return new $n(Br(),ft())}function $(t,n,r,o,c,f){const _=n[1],E=_.data[t+8],G=X(E,_,r,null==o?he(E)&&Ws:o!=_&&0!=(3&E.type),c&Tt.Host&&f===E);return null!==G?ve(n,_,G,E):C}function X(t,n,r,o,c){const f=t.providerIndexes,_=n.data,E=1048575&f,A=t.directiveStart,G=f>>20,ue=c?E+G:t.directiveEnd;for(let Te=o?E:E+G;Te<ue;Te++){const ke=_[Te];if(Te<A&&r===ke||Te>=A&&ke.type===r)return Te}if(c){const Te=_[A];if(Te&&ti(Te)&&Te.type===r)return A}return null}function ve(t,n,r,o){let c=t[r];const f=n.data;if(function(t){return t instanceof Hr}(c)){const _=c;_.resolving&&function(t,n){throw new qe("200",`Circular dependency in DI detected for ${t}`)}(Qe(f[r]));const E=On(_.canSeeViewProviders);_.resolving=!0;const A=_.injectImpl?jn(_.injectImpl):null;Fa(t,o,Tt.Default);try{c=t[r]=_.factory(void 0,f,t,o),n.firstCreatePass&&r>=o.directiveStart&&function(t,n,r){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:f}=n.type.prototype;if(o){const _=hs(n);(r.preOrderHooks||(r.preOrderHooks=[])).push(t,_),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,_)}c&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-t,c),f&&((r.preOrderHooks||(r.preOrderHooks=[])).push(t,f),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(t,f))}(r,f[r],n)}finally{null!==A&&jn(A),On(E),_.resolving=!1,bl()}}return c}function st(t,n,r){return!!(r[n+(t>>5)]&1<<t)}function wt(t,n){return!(t&Tt.Self||t&Tt.Host&&n)}class $n{constructor(n,r){this._tNode=n,this._lView=r}get(n,r,o){return I(this._tNode,this._lView,n,o,r)}}function cn(t){return sn(()=>{const n=t.prototype.constructor,r=n[an]||gr(n),o=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==o;){const f=c[an]||gr(c);if(f&&f!==r)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function gr(t){return me(t)?()=>{const n=gr(Z(t));return n&&n()}:Mr(t)}function qn(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const r=t.attrs;if(r){const o=r.length;let c=0;for(;c<o;){const f=r[c];if(_r(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<o&&"string"==typeof r[c];)c++;else{if(f===n)return r[c+1];c+=2}}}return null}(Br(),t)}const Gr="__parameters__";function mi(t,n,r){return sn(()=>{const o=function(t){return function(...r){if(t){const o=t(...r);for(const c in o)this[c]=o[c]}}}(n);function c(...f){if(this instanceof c)return o.apply(this,f),this;const _=new c(...f);return E.annotation=_,E;function E(A,L,G){const re=A.hasOwnProperty(Gr)?A[Gr]:Object.defineProperty(A,Gr,{value:[]})[Gr];for(;re.length<=G;)re.push(null);return(re[G]=re[G]||[]).push(_),A}}return r&&(c.prototype=Object.create(r.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}class wr{constructor(n,r){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=rn({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}toString(){return`InjectionToken ${this._desc}`}}const yr=new wr("AnalyzeForEntryComponents"),mo=Function;function yi(t,n){void 0===n&&(n=t);for(let r=0;r<t.length;r++){let o=t[r];Array.isArray(o)?(n===t&&(n=t.slice(0,r)),yi(o,n)):n!==t&&n.push(o)}return n}function _o(t,n){t.forEach(r=>Array.isArray(r)?_o(r,n):n(r))}function xo(t,n,r){n>=t.length?t.push(r):t.splice(n,0,r)}function sl(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function ns(t,n,r){let o=di(t,n);return o>=0?t[1|o]=r:(o=~o,function(t,n,r,o){let c=t.length;if(c==n)t.push(r,o);else if(1===c)t.push(o,t[0]),t[0]=r;else{for(c--,t.push(t[c-1],t[c]);c>n;)t[c]=t[c-2],c--;t[n]=r,t[n+1]=o}}(t,o,n,r)),o}function ol(t,n){const r=di(t,n);if(r>=0)return t[1|r]}function di(t,n){return function(t,n,r){let o=0,c=t.length>>r;for(;c!==o;){const f=o+(c-o>>1),_=t[f<<r];if(n===_)return f<<r;_>n?c=f:o=f+1}return~(c<<r)}(t,n,1)}const ba={},Tl="__NG_DI_FLAG__",Gs="ngTempTokenPath",If=/\n/gm,xd="__source",Xo=ee({provide:String,useValue:ee});let zs;function Al(t){const n=zs;return zs=t,n}function tu(t,n=Tt.Default){if(void 0===zs)throw new Error("inject() must be called from an injection context");return null===zs?Qt(t,void 0,n):zs.get(t,n&Tt.Optional?null:void 0,n)}function Kr(t,n=Tt.Default){return(ar||tu)(Z(t),n)}function tr(t){const n=[];for(let r=0;r<t.length;r++){const o=Z(t[r]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let c,f=Tt.Default;for(let _=0;_<o.length;_++){const E=o[_],A=al(E);"number"==typeof A?-1===A?c=E.token:f|=A:c=E}n.push(Kr(c,f))}else n.push(Kr(o))}return n}function As(t,n){return t[Tl]=n,t.prototype[Tl]=n,t}function al(t){return t[Tl]}function Sl(t,n,r,o){const c=t[Gs];throw n[xd]&&c.unshift(n[xd]),t.message=function(t,n,r,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let c=oe(n);if(Array.isArray(n))c=n.map(oe).join(" -> ");else if("object"==typeof n){let f=[];for(let _ in n)if(n.hasOwnProperty(_)){let E=n[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):oe(E)))}c=`{${f.join(", ")}}`}return`${r}${o?"("+o+")":""}[${c}]: ${t.replace(If,"\n  ")}`}("\n"+t.message,c,r,o),t.ngTokenPath=c,t[Gs]=null,t}const Vs=As(mi("Inject",t=>({token:t})),-1),vi=As(mi("Optional"),8),yo=As(mi("SkipSelf"),4);let Ba;function ll(t){var n;return(null===(n=function(){if(void 0===Ba&&(Ba=null,xn.trustedTypes))try{Ba=xn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return Ba}())||void 0===n?void 0:n.createHTML(t))||t}class ja{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Kc extends ja{getTypeName(){return"HTML"}}class Od extends ja{getTypeName(){return"Style"}}class Lu extends ja{getTypeName(){return"Script"}}class Ol extends ja{getTypeName(){return"URL"}}class Eh extends ja{getTypeName(){return"ResourceURL"}}function Ia(t){return t instanceof ja?t.changingThisBreaksApplicationSecurity:t}function cl(t,n){const r=vo(t);if(null!=r&&r!==n){if("ResourceURL"===r&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${r} (see https://g.co/ng/security#xss)`)}return r===n}function vo(t){return t instanceof ja&&t.getTypeName()||null}function qc(t){return new Kc(t)}function Af(t){return new Od(t)}function wi(t){return new Lu(t)}function cr(t){return new Ol(t)}function Zc(t){return new Eh(t)}class _s{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const r=(new window.DOMParser).parseFromString(ll(n),"text/html").body;return null===r?this.inertDocumentHelper.getInertBodyElement(n):(r.removeChild(r.firstChild),r)}catch(r){return null}}}class Vu{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const r=this.inertDocument.createElement("html");this.inertDocument.appendChild(r);const o=this.inertDocument.createElement("body");r.appendChild(o)}}getInertBodyElement(n){const r=this.inertDocument.createElement("template");if("content"in r)return r.innerHTML=ll(n),r;const o=this.inertDocument.createElement("body");return o.innerHTML=ll(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(o),o}stripCustomNsAttrs(n){const r=n.attributes;for(let c=r.length-1;0<c;c--){const _=r.item(c).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&n.removeAttribute(_)}let o=n.firstChild;for(;o;)o.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(o),o=o.nextSibling}}const Oi=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ch=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ks(t){return(t=String(t)).match(Oi)||t.match(Ch)?t:"unsafe:"+t}function Mo(t){const n={};for(const r of t.split(","))n[r]=!0;return n}function dc(...t){const n={};for(const r of t)for(const o in r)r.hasOwnProperty(o)&&(n[o]=!0);return n}const hc=Mo("area,br,col,hr,img,wbr"),su=Mo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Cr=Mo("rp,rt"),dl=dc(hc,dc(su,Mo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dc(Cr,Mo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dc(Cr,su)),ou=Mo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),au=Mo("srcset"),hl=dc(ou,au,Mo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Mo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Yc=Mo("script,style,template");class kd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let r=n.firstChild,o=!0;for(;r;)if(r.nodeType===Node.ELEMENT_NODE?o=this.startElement(r):r.nodeType===Node.TEXT_NODE?this.chars(r.nodeValue):this.sanitizedSomething=!0,o&&r.firstChild)r=r.firstChild;else for(;r;){r.nodeType===Node.ELEMENT_NODE&&this.endElement(r);let c=this.checkClobberedElement(r,r.nextSibling);if(c){r=c;break}r=this.checkClobberedElement(r,r.parentNode)}return this.buf.join("")}startElement(n){const r=n.nodeName.toLowerCase();if(!dl.hasOwnProperty(r))return this.sanitizedSomething=!0,!Yc.hasOwnProperty(r);this.buf.push("<"),this.buf.push(r);const o=n.attributes;for(let c=0;c<o.length;c++){const f=o.item(c),_=f.name,E=_.toLowerCase();if(!hl.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let A=f.value;ou[E]&&(A=Ks(A)),au[E]&&(t=A,A=(t=String(t)).split(",").map(n=>Ks(n.trim())).join(", ")),this.buf.push(" ",_,'="',pc(A),'"')}var t;return this.buf.push(">"),!0}endElement(n){const r=n.nodeName.toLowerCase();dl.hasOwnProperty(r)&&!hc.hasOwnProperty(r)&&(this.buf.push("</"),this.buf.push(r),this.buf.push(">"))}chars(n){this.buf.push(pc(n))}checkClobberedElement(n,r){if(r&&(n.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return r}}const Pl=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qc=/([^\#-~ |!])/g;function pc(t){return t.replace(/&/g,"&amp;").replace(Pl,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(Qc,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Da;function Fd(t,n){let r=null;try{Da=Da||function(t){const n=new Vu(t);return function(){try{return!!(new window.DOMParser).parseFromString(ll(""),"text/html")}catch(t){return!1}}()?new _s(n):n}(t);let o=n?String(n):"";r=Da.getInertBodyElement(o);let c=5,f=o;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,o=f,f=r.innerHTML,r=Da.getInertBodyElement(o)}while(o!==f);return ll((new kd).sanitizeChildren(Jc(r)||r))}finally{if(r){const o=Jc(r)||r;for(;o.firstChild;)o.removeChild(o.firstChild)}}}function Jc(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Jr=(()=>((Jr=Jr||{})[Jr.NONE=0]="NONE",Jr[Jr.HTML=1]="HTML",Jr[Jr.STYLE=2]="STYLE",Jr[Jr.SCRIPT=3]="SCRIPT",Jr[Jr.URL=4]="URL",Jr[Jr.RESOURCE_URL=5]="RESOURCE_URL",Jr))();function Bs(t){const n=function(){const t=ft();return t&&t[12]}();return n?n.sanitize(Jr.URL,t)||"":cl(t,"URL")?Ia(t):Ks(ce(t))}const mc="__ngContext__";function rs(t,n){t[mc]=n}function lu(t){const n=function(t){return t[mc]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function No(t){return t.ngOriginalError}function g(t,...n){t.error(...n)}class m{constructor(){this._console=console}handleError(n){const r=this._findOriginalError(n),o=this._findContext(n),c=(t=n)&&t.ngErrorLogger||g;var t;c(this._console,"ERROR",n),r&&c(this._console,"ORIGINAL ERROR",r),o&&c(this._console,"ERROR CONTEXT",o)}_findContext(n){return n?n.ngDebugContext||this._findContext(No(n)):null}_findOriginalError(n){let r=n&&No(n);for(;r&&No(r);)r=No(r);return r||null}}const yc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(xn))();function to(t){return t instanceof Function?t():t}var bo=(()=>((bo=bo||{})[bo.Important=1]="Important",bo[bo.DashCase=2]="DashCase",bo))();function ro(t,n){return undefined(t,n)}function ra(t){const n=t[3];return Zr(n)?n[3]:n}function Ah(t){return Rf(t[13])}function ud(t){return Rf(t[4])}function Rf(t){for(;null!==t&&!Zr(t);)t=t[4];return t}function pl(t,n,r,o,c){if(null!=o){let f,_=!1;Zr(o)?f=o:er(o)&&(_=!0,o=o[0]);const E=Ce(o);0===t&&null!==r?null==c?Gu(n,r,E):$a(n,r,E,c||null,!0):1===t&&null!==r?$a(n,r,E,c||null,!0):2===t?function(t,n,r){const o=gl(t,n);o&&function(t,n,r,o){B(t)?t.removeChild(n,r,o):n.removeChild(r)}(t,o,n,r)}(n,E,_):3===t&&n.destroyNode(E),null!=f&&function(t,n,r,o,c){const f=r[7];f!==Ce(r)&&pl(n,t,o,f,c);for(let E=10;E<r.length;E++){const A=r[E];bc(A[1],A,t,n,o,f)}}(n,t,f,r,c)}}function cd(t,n,r){return B(t)?t.createElement(n,r):null===r?t.createElement(n):t.createElementNS(r,n)}function Pf(t,n){const r=t[9],o=r.indexOf(n),c=n[3];1024&n[2]&&(n[2]&=-1025,fs(c,-1)),r.splice(o,1)}function xh(t,n){if(t.length<=10)return;const r=10+n,o=t[r];if(o){const c=o[17];null!==c&&c!==t&&Pf(c,o),n>0&&(t[r-1][4]=o[4]);const f=sl(t,10+n);!function(t,n){bc(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(o[1],o);const _=f[19];null!==_&&_.detachView(f[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function Io(t,n){if(!(256&n[2])){const r=n[11];B(r)&&r.destroyNode&&bc(t,n,r,3,null,null),function(t){let n=t[13];if(!n)return Rh(t[1],t);for(;n;){let r=null;if(er(n))r=n[13];else{const o=n[10];o&&(r=o)}if(!r){for(;n&&!n[4]&&n!==t;)er(n)&&Rh(n[1],n),n=n[3];null===n&&(n=t),er(n)&&Rh(n[1],n),r=n&&n[4]}n=r}}(n)}}function Rh(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let r;if(null!=t&&null!=(r=t.destroyHooks))for(let o=0;o<r.length;o+=2){const c=n[r[o]];if(!(c instanceof Hr)){const f=r[o+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=c[f[_]],A=f[_+1];try{A.call(E)}finally{}}else try{f.call(c)}finally{}}}}(t,n),function(t,n){const r=t.cleanup,o=n[7];let c=-1;if(null!==r)for(let f=0;f<r.length-1;f+=2)if("string"==typeof r[f]){const _=r[f+1],E="function"==typeof _?_(n):Ce(n[_]),A=o[c=r[f+2]],L=r[f+3];"boolean"==typeof L?E.removeEventListener(r[f],A,L):L>=0?o[c=L]():o[c=-L].unsubscribe(),f+=2}else{const _=o[c=r[f+1]];r[f].call(_)}if(null!==o){for(let f=c+1;f<o.length;f++)o[f]();n[7]=null}}(t,n),1===n[1].type&&B(n[11])&&n[11].destroy();const r=n[17];if(null!==r&&Zr(n[3])){r!==n[3]&&Pf(r,n);const o=n[19];null!==o&&o.detachView(t)}}}function Hd(t,n,r){return function(t,n,r){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return r[0];if(2&o.flags){const c=t.data[o.directiveStart].encapsulation;if(c===It.None||c===It.Emulated)return null}return k(o,r)}(t,n.parent,r)}function $a(t,n,r,o,c){B(t)?t.insertBefore(n,r,o,c):n.insertBefore(r,o,c)}function Gu(t,n,r){B(t)?t.appendChild(n,r):n.appendChild(r)}function Fo(t,n,r,o,c){null!==o?$a(t,n,r,o,c):Gu(t,n,r)}function gl(t,n){return B(t)?t.parentNode(n):n.parentNode}let Ph=function(t,n,r){return 40&t.type?k(t,r):null};function Gd(t,n,r,o){const c=Hd(t,o,n),f=n[11],E=function(t,n,r){return Ph(t,n,r)}(o.parent||n[6],o,n);if(null!=c)if(Array.isArray(r))for(let A=0;A<r.length;A++)Fo(f,c,r[A],E,!1);else Fo(f,c,r,E,!1)}function Ec(t,n){if(null!==n){const r=n.type;if(3&r)return k(n,t);if(4&r)return zu(-1,t[n.index]);if(8&r){const o=n.child;if(null!==o)return Ec(t,o);{const c=t[n.index];return Zr(c)?zu(-1,c):Ce(c)}}if(32&r)return ro(n,t)()||Ce(t[n.index]);{const o=Mh(t,n);return null!==o?Array.isArray(o)?o[0]:Ec(ra(t[16]),o):Ec(t,n.next)}}return null}function Mh(t,n){return null!==n?t[16][6].projection[n.projection]:null}function zu(t,n){const r=10+t+1;if(r<n.length){const o=n[r],c=o[1].firstChild;if(null!==c)return Ec(o,c)}return n[7]}function Nh(t,n,r,o,c,f,_){for(;null!=r;){const E=o[r.index],A=r.type;if(_&&0===n&&(E&&rs(Ce(E),o),r.flags|=4),64!=(64&r.flags))if(8&A)Nh(t,n,r.child,o,c,f,!1),pl(n,t,c,E,f);else if(32&A){const L=ro(r,o);let G;for(;G=L();)pl(n,t,c,G,f);pl(n,t,c,E,f)}else 16&A?kh(t,n,o,r,c,f):pl(n,t,c,E,f);r=_?r.projectionNext:r.next}}function bc(t,n,r,o,c,f){Nh(r,o,t.firstChild,n,c,f,!1)}function kh(t,n,r,o,c,f){const _=r[16],A=_[6].projection[o.projection];if(Array.isArray(A))for(let L=0;L<A.length;L++)pl(n,t,c,A[L],f);else Nh(t,n,A,_[3],c,f,!0)}function kf(t,n,r){B(t)?t.setAttribute(n,"style",r):n.style.cssText=r}function io(t,n,r){B(t)?""===r?t.removeAttribute(n,"class"):t.setAttribute(n,"class",r):n.className=r}function Ic(t,n,r){let o=t.length;for(;;){const c=t.indexOf(n,r);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const f=n.length;if(c+f===o||t.charCodeAt(c+f)<=32)return c}r=c+1}}const pu="ng-template";function Lo(t,n,r){let o=0;for(;o<t.length;){let c=t[o++];if(r&&"class"===c){if(c=t[o],-1!==Ic(c.toLowerCase(),n,0))return!0}else if(1===c){for(;o<t.length&&"string"==typeof(c=t[o++]);)if(c.toLowerCase()===n)return!0;return!1}}return!1}function Vl(t){return 4===t.type&&t.value!==pu}function jp(t,n,r){return n===(4!==t.type||r?t.value:pu)}function Ff(t,n,r){let o=4;const c=t.attrs||[],f=function(t){for(let n=0;n<t.length;n++)if(_r(t[n]))return n;return t.length}(c);let _=!1;for(let E=0;E<n.length;E++){const A=n[E];if("number"!=typeof A){if(!_)if(4&o){if(o=2|1&o,""!==A&&!jp(t,A,r)||""===A&&1===n.length){if(js(o))return!1;_=!0}}else{const L=8&o?A:n[++E];if(8&o&&null!==t.attrs){if(!Lo(t.attrs,L,r)){if(js(o))return!1;_=!0}continue}const re=Jg(8&o?"class":A,c,Vl(t),r);if(-1===re){if(js(o))return!1;_=!0;continue}if(""!==L){let ue;ue=re>f?"":c[re+1].toLowerCase();const Te=8&o?ue:null;if(Te&&-1!==Ic(Te,L,0)||2&o&&L!==ue){if(js(o))return!1;_=!0}}}}else{if(!_&&!js(o)&&!js(A))return!1;if(_&&js(A))continue;_=!1,o=A|1&o}}return js(o)||_}function js(t){return 0==(1&t)}function Jg(t,n,r,o){if(null===n)return-1;let c=0;if(o||!r){let f=!1;for(;c<n.length;){const _=n[c];if(_===t)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=n[++c];for(;"string"==typeof E;)E=n[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function(t,n){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){const o=t[r];if("number"==typeof o)return-1;if(o===n)return r;r++}return-1}(n,t)}function Hp(t,n,r=!1){for(let o=0;o<n.length;o++)if(Ff(t,n[o],r))return!0;return!1}function Vf(t,n){return t?":not("+n.trim()+")":n}function em(t){let n=t[0],r=1,o=2,c="",f=!1;for(;r<t.length;){let _=t[r];if("string"==typeof _)if(2&o){const E=t[++r];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&o?c+="."+_:4&o&&(c+=" "+_);else""!==c&&!js(_)&&(n+=Vf(f,c),c=""),o=_,f=f||!js(o);r++}return""!==c&&(n+=Vf(f,c)),n}const En={};function gu(t){qd(Nn(),ft(),Xi()+t,Na())}function qd(t,n,r,o){if(!o)if(3==(3&n[2])){const f=t.preOrderCheckHooks;null!==f&&Zo(n,f,r)}else{const f=t.preOrderHooks;null!==f&&La(n,f,0,r)}po(r)}function Ku(t,n){return t<<17|n<<2}function Sa(t){return t>>17&32767}function Vo(t){return 2|t}function Ul(t){return(131068&t)>>2}function Zd(t,n){return-131069&t|n<<2}function Yd(t){return 1|t}function Gf(t,n){const r=t.contentQueries;if(null!==r)for(let o=0;o<r.length;o+=2){const c=r[o],f=r[o+1];if(-1!==f){const _=t.data[f];qo(c),_.contentQueries(2,n[f],f)}}}function Ga(t,n,r,o,c,f,_,E,A,L){const G=n.blueprint.slice();return G[0]=c,G[2]=140|o,Ti(G),G[3]=G[15]=t,G[8]=r,G[10]=_||t&&t[10],G[11]=E||t&&t[11],G[12]=A||t&&t[12]||null,G[9]=L||t&&t[9]||null,G[6]=f,G[16]=2==n.type?t[16]:G,G}function Tc(t,n,r,o,c){let f=t.data[n];if(null===f)f=function(t,n,r,o,c){const f=$o(),_=Wo(),A=t.data[n]=function(t,n,r,o,c,f){return{type:r,index:o,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,r,n,o,c);return null===t.firstChild&&(t.firstChild=A),null!==f&&(_?null==f.child&&null!==A.parent&&(f.child=A):null===f.next&&(f.next=A)),A}(t,n,r,o,c),Zt.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=r,f.value=o,f.attrs=c;const _=function(){const t=Zt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Js(f,!0),f}function qu(t,n,r,o){if(0===r)return-1;const c=n.length;for(let f=0;f<r;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return c}function za(t,n,r){ya(n);try{const o=t.viewQuery;null!==o&&rh(1,o,r);const c=t.template;null!==c&&Zu(t,n,c,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Gf(t,n),t.staticViewQueries&&rh(2,t.viewQuery,r);const f=t.components;null!==f&&function(t,n){for(let r=0;r<n.length;r++)hm(t,n[r])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[2]&=-5,tl()}}function Pi(t,n,r,o){const c=n[2];if(256==(256&c))return;ya(n);const f=Na();try{Ti(n),function(t){Zt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==r&&Zu(t,n,r,2,o);const _=3==(3&c);if(!f)if(_){const L=t.preOrderCheckHooks;null!==L&&Zo(n,L,null)}else{const L=t.preOrderHooks;null!==L&&La(n,L,0,null),So(n,0)}if(function(t){for(let n=Ah(t);null!==n;n=ud(n)){if(!n[2])continue;const r=n[9];for(let o=0;o<r.length;o++){const c=r[o],f=c[3];0==(1024&c[2])&&fs(f,1),c[2]|=1024}}}(n),function(t){for(let n=Ah(t);null!==n;n=ud(n))for(let r=10;r<n.length;r++){const o=n[r],c=o[1];Mn(o)&&Pi(c,o,c.template,o[8])}}(n),null!==t.contentQueries&&Gf(t,n),!f)if(_){const L=t.contentCheckHooks;null!==L&&Zo(n,L)}else{const L=t.contentHooks;null!==L&&La(n,L,1),So(n,1)}!function(t,n){const r=t.hostBindingOpCodes;if(null!==r)try{for(let o=0;o<r.length;o++){const c=r[o];if(c<0)po(~c);else{const f=c,_=r[++o],E=r[++o];kr(_,f),E(2,n[f])}}}finally{po(-1)}}(t,n);const E=t.components;null!==E&&function(t,n){for(let r=0;r<n.length;r++)dm(t,n[r])}(n,E);const A=t.viewQuery;if(null!==A&&rh(2,A,o),!f)if(_){const L=t.viewCheckHooks;null!==L&&Zo(n,L)}else{const L=t.viewHooks;null!==L&&La(n,L,2),So(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),f||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,fs(n[3],-1))}finally{tl()}}function xa(t,n,r,o){const c=n[10],f=!Na(),_=tn(n);try{f&&!_&&c.begin&&c.begin(),_&&za(t,n,o),Pi(t,n,r,o)}finally{f&&!_&&c.end&&c.end()}}function Zu(t,n,r,o,c){const f=Xi(),_=2&o;try{po(-1),_&&n.length>20&&qd(t,n,20,Na()),r(o,c)}finally{po(f)}}function th(t,n,r){!co()||(function(t,n,r,o){const c=r.directiveStart,f=r.directiveEnd;t.firstCreatePass||Hi(r,n),rs(o,n);const _=r.initialInputs;for(let E=c;E<f;E++){const A=t.data[E],L=ti(A);L&&np(n,r,A);const G=ve(n,t,E,r);rs(G,n),null!==_&&rp(0,E-c,G,A,0,_),L&&(pt(r.index,n)[8]=G)}}(t,n,r,k(r,n)),128==(128&r.flags)&&function(t,n,r){const o=r.directiveStart,c=r.directiveEnd,_=r.index,E=Zt.lFrame.currentDirectiveIndex;try{po(_);for(let A=o;A<c;A++){const L=t.data[A],G=n[A];Cl(A),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&ig(L,G)}}finally{po(-1),Cl(E)}}(t,n,r))}function Kh(t,n,r=k){const o=n.localNames;if(null!==o){let c=n.index+1;for(let f=0;f<o.length;f+=2){const _=o[f+1],E=-1===_?r(n,t):t[_];t[c++]=E}}}function Ac(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Ka(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Ka(t,n,r,o,c,f,_,E,A,L){const G=20+o,re=G+c,ue=function(t,n){const r=[];for(let o=0;o<n;o++)r.push(o<t?null:En);return r}(G,re),Te="function"==typeof L?L():L;return ue[1]={type:t,blueprint:ue,template:r,queries:null,viewQuery:E,declTNode:n,data:ue.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:A,consts:Te,incompleteFirstPass:!1}}function qf(t,n,r,o){const c=Xh(n);null===r?c.push(o):(c.push(r),t.firstCreatePass&&dg(t).push(o,c.length-1))}function fd(t,n,r){for(let o in t)if(t.hasOwnProperty(o)){const c=t[o];(r=null===r?{}:r).hasOwnProperty(o)?r[o].push(n,c):r[o]=[n,c]}return r}function Uo(t,n,r,o,c,f,_,E){const A=k(n,r);let G,L=n.inputs;!E&&null!=L&&(G=L[o])?(tf(t,r,G,o,c),he(n)&&function(t,n){const r=pt(n,t);16&r[2]||(r[2]|=64)}(r,n.index)):3&n.type&&(o=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),c=null!=_?_(c,n.value||"",o):c,B(f)?f.setProperty(A,o,c):ji(o)||(A.setProperty?A.setProperty(o,c):A[o]=c))}function yu(t,n,r,o){let c=!1;if(co()){const f=function(t,n,r){const o=t.directiveRegistry;let c=null;if(o)for(let f=0;f<o.length;f++){const _=o[f];Hp(r,_.selectors,!1)&&(c||(c=[]),Qo(Hi(r,n),t,_.type),ti(_)?(Qh(t,r),c.unshift(_)):c.push(_))}return c}(t,n,r),_=null===o?null:{"":-1};if(null!==f){c=!0,jl(r,t.data.length,f.length);for(let G=0;G<f.length;G++){const re=f[G];re.providersResolver&&re.providersResolver(re)}let E=!1,A=!1,L=qu(t,n,f.length,null);for(let G=0;G<f.length;G++){const re=f[G];r.mergedAttrs=si(r.mergedAttrs,re.hostAttrs),Gi(t,r,n,L,re),tp(L,re,_),null!==re.contentQueries&&(r.flags|=8),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(r.flags|=128);const ue=re.type.prototype;!E&&(ue.ngOnChanges||ue.ngOnInit||ue.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(r.index),E=!0),!A&&(ue.ngOnChanges||ue.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(r.index),A=!0),L++}!function(t,n){const o=n.directiveEnd,c=t.data,f=n.attrs,_=[];let E=null,A=null;for(let L=n.directiveStart;L<o;L++){const G=c[L],re=G.inputs,ue=null===f||Vl(n)?null:Jh(re,f);_.push(ue),E=fd(re,L,E),A=fd(G.outputs,L,A)}null!==E&&(E.hasOwnProperty("class")&&(n.flags|=16),E.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=_,n.inputs=E,n.outputs=A}(t,r)}_&&function(t,n,r){if(n){const o=t.localNames=[];for(let c=0;c<n.length;c+=2){const f=r[n[c+1]];if(null==f)throw new qe("301",`Export of name '${n[c+1]}' not found!`);o.push(n[c],f)}}}(r,o,_)}return r.mergedAttrs=si(r.mergedAttrs,r.attrs),c}function Rc(t,n,r,o,c,f){const _=f.hostBindings;if(_){let E=t.hostBindingOpCodes;null===E&&(E=t.hostBindingOpCodes=[]);const A=~n.index;(function(t){let n=t.length;for(;n>0;){const r=t[--n];if("number"==typeof r&&r<0)return r}return 0})(E)!=A&&E.push(A),E.push(o,c,_)}}function ig(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Qh(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function tp(t,n,r){if(r){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)r[n.exportAs[o]]=t;ti(n)&&(r[""]=t)}}function jl(t,n,r){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+r,t.providerIndexes=n}function Gi(t,n,r,o,c){t.data[o]=c;const f=c.factory||(c.factory=Mr(c.type)),_=new Hr(f,ti(c),null);t.blueprint[o]=_,r[o]=_,Rc(t,n,0,o,qu(t,r,c.hostVars,En),c)}function np(t,n,r){const o=k(n,t),c=Ac(r),f=t[10],_=pd(t,Ga(t,c,null,r.onPush?64:16,o,n,f,f.createRenderer(o,r),null,null));t[n.index]=_}function Ra(t,n,r,o,c,f){const _=k(t,n);!function(t,n,r,o,c,f,_){if(null==f)B(t)?t.removeAttribute(n,c,r):n.removeAttribute(c);else{const E=null==_?ce(f):_(f,o||"",c);B(t)?t.setAttribute(n,c,E,r):r?n.setAttributeNS(r,c,E):n.setAttribute(c,E)}}(n[11],_,f,t.value,r,o,c)}function rp(t,n,r,o,c,f){const _=f[n];if(null!==_){const E=o.setInput;for(let A=0;A<_.length;){const L=_[A++],G=_[A++],re=_[A++];null!==E?o.setInput(r,re,L,G):r[G]=re}}}function Jh(t,n){let r=null,o=0;for(;o<n.length;){const c=n[o];if(0!==c)if(5!==c){if("number"==typeof c)break;t.hasOwnProperty(c)&&(null===r&&(r=[]),r.push(c,t[c],n[o+1])),o+=2}else o+=2;else o+=4}return r}function ip(t,n,r,o){return new Array(t,!0,!1,n,null,0,o,r,null,null)}function dm(t,n){const r=pt(n,t);if(Mn(r)){const o=r[1];80&r[2]?Pi(o,r,o.template,r[8]):r[5]>0&&sp(r)}}function sp(t){for(let o=Ah(t);null!==o;o=ud(o))for(let c=10;c<o.length;c++){const f=o[c];if(1024&f[2]){const _=f[1];Pi(_,f,_.template,f[8])}else f[5]>0&&sp(f)}const r=t[1].components;if(null!==r)for(let o=0;o<r.length;o++){const c=pt(r[o],t);Mn(c)&&c[5]>0&&sp(c)}}function hm(t,n){const r=pt(n,t),o=r[1];(function(t,n){for(let r=n.length;r<t.blueprint.length;r++)n.push(t.blueprint[r])})(o,r),za(o,r,r[8])}function pd(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function nh(t){for(;t;){t[2]|=64;const n=ra(t);if(rr(t)&&!n)return t;t=n}return null}function gd(t,n,r){const o=n[10];o.begin&&o.begin();try{Pi(t,n,t.template,r)}catch(c){throw lp(n,c),c}finally{o.end&&o.end()}}function ag(t){!function(t){for(let n=0;n<t.components.length;n++){const r=t.components[n],o=lu(r),c=o[1];xa(c,o,c.template,r)}}(t[8])}function rh(t,n,r){qo(0),n(t,r)}const cg=(()=>Promise.resolve(null))();function Xh(t){return t[7]||(t[7]=[])}function dg(t){return t.cleanup||(t.cleanup=[])}function lp(t,n){const r=t[9],o=r?r.get(m,null):null;o&&o.handleError(n)}function tf(t,n,r,o,c){for(let f=0;f<r.length;){const _=r[f++],E=r[f++],A=n[_],L=t.data[_];null!==L.setInput?L.setInput(A,c,o,E):A[E]=c}}function wu(t,n,r){const o=F(n,t);!function(t,n,r){B(t)?t.setValue(n,r):n.textContent=r}(t[11],o,r)}function md(t,n,r){let o=r?t.styles:null,c=r?t.classes:null,f=0;if(null!==n)for(let _=0;_<n.length;_++){const E=n[_];"number"==typeof E?f=E:1==f?c=le(c,E):2==f&&(o=le(o,E+": "+n[++_]+";"))}r?t.styles=o:t.stylesWithoutHost=o,r?t.classes=c:t.classesWithoutHost=c}const Pc=new wr("INJECTOR",-1);class nf{get(n,r=ba){if(r===ba){const o=new Error(`NullInjectorError: No provider for ${oe(n)}!`);throw o.name="NullInjectorError",o}return r}}const rf=new wr("Set Injector scope."),d={},u={};let l;function p(){return void 0===l&&(l=new nf),l}function S(t,n=null,r=null,o){return new U(t,r,n||p(),o)}class U{constructor(n,r,o,c=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];r&&_o(r,E=>this.processProvider(E,n,r)),_o([n],E=>this.processInjectorType(E,[],f)),this.records.set(Pc,ze(void 0,this));const _=this.records.get(rf);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof n?null:oe(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,r=ba,o=Tt.Default){this.assertNotDestroyed();const c=Al(this),f=jn(void 0);try{if(!(o&Tt.SkipSelf)){let E=this.records.get(n);if(void 0===E){const A=("function"==typeof(t=n)||"object"==typeof t&&t instanceof wr)&&Kt(n);E=A&&this.injectableDefInScope(A)?ze(J(n),d):null,this.records.set(n,E)}if(null!=E)return this.hydrate(n,E)}return(o&Tt.Self?p():this.parent).get(n,r=o&Tt.Optional&&r===ba?null:r)}catch(_){if("NullInjectorError"===_.name){if((_[Gs]=_[Gs]||[]).unshift(oe(n)),c)throw _;return Sl(_,n,"R3InjectorError",this.source)}throw _}finally{jn(f),Al(c)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((o,c)=>n.push(oe(c))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,r,o){if(!(n=Z(n)))return!1;let c=Gn(n);const f=null==c&&n.ngModule||void 0,_=void 0===f?n:f,E=-1!==o.indexOf(_);if(void 0!==f&&(c=Gn(f)),null==c)return!1;if(null!=c.imports&&!E){let G;o.push(_);try{_o(c.imports,re=>{this.processInjectorType(re,r,o)&&(void 0===G&&(G=[]),G.push(re))})}finally{}if(void 0!==G)for(let re=0;re<G.length;re++){const{ngModule:ue,providers:Te}=G[re];_o(Te,ke=>this.processProvider(ke,ue,Te||_e))}}this.injectorDefTypes.add(_);const A=Mr(_)||(()=>new _);this.records.set(_,ze(A,d));const L=c.providers;if(null!=L&&!E){const G=n;_o(L,re=>this.processProvider(re,G,L))}return void 0!==f&&void 0!==n.providers}processProvider(n,r,o){let c=or(n=Z(n))?n:Z(n&&n.provide);const f=ut(t=n)?ze(void 0,t.useValue):ze(Ye(t),d);var t;if(or(n)||!0!==n.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=ze(void 0,d,!0),_.factory=()=>tr(_.multi),this.records.set(c,_)),c=n,_.multi.push(n)}this.records.set(c,f)}hydrate(n,r){return r.value===d&&(r.value=u,r.value=r.factory()),"object"==typeof r.value&&r.value&&null!==(t=r.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(r.value),r.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const r=Z(n.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}function J(t){const n=Kt(t),r=null!==n?n.factory:Mr(t);if(null!==r)return r;if(t instanceof wr)throw new Error(`Token ${oe(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const o=function(t,n){const r=[];for(let o=0;o<t;o++)r.push(n);return r}(n,"?");throw new Error(`Can't resolve all parameters for ${oe(t)}: (${o.join(", ")}).`)}const r=function(t){const n=t&&(t[Yn]||t[Nt]);if(n){const r=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),n}return null}(t);return null!==r?()=>r.factory(t):()=>new t}(t);throw new Error("unreachable")}function Ye(t,n,r){let o;if(or(t)){const c=Z(t);return Mr(c)||J(c)}if(ut(t))o=()=>Z(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...tr(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))o=()=>Kr(Z(t.useExisting));else{const c=Z(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Mr(c)||J(c);o=()=>new c(...tr(t.deps))}return o}function ze(t,n,r=!1){return{factory:t,value:n,multi:r?[]:void 0}}function ut(t){return null!==t&&"object"==typeof t&&Xo in t}function or(t){return"function"==typeof t}const fg=function(t,n,r){return function(t,n=null,r=null,o){const c=S(t,n,r,o);return c._resolveInjectorDefTypes(),c}({name:r},n,t,r)};let Mi=(()=>{class t{static create(r,o){return Array.isArray(r)?fg(r,o,""):fg(r.providers,r.parent,r.name||"")}}return t.THROW_IF_NOT_FOUND=ba,t.NULL=new nf,t.\u0275prov=rn({token:t,providedIn:"any",factory:()=>Kr(Pc)}),t.__NG_ELEMENT_ID__=-1,t})();function Tr(t,n){ir(lu(t)[1],Br())}function oh(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),r=!0;const o=[t];for(;n;){let c;if(ti(t))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");c=n.\u0275dir}if(c){if(r){o.push(c);const _=t;_.inputs=Ci(t.inputs),_.declaredInputs=Ci(t.declaredInputs),_.outputs=Ci(t.outputs);const E=c.hostBindings;E&&N_(t,E);const A=c.viewQuery,L=c.contentQueries;if(A&&oa(t,A),L&&Ju(t,L),ge(t.inputs,c.inputs),ge(t.declaredInputs,c.declaredInputs),ge(t.outputs,c.outputs),ti(c)&&c.data.animation){const G=t.data;G.animation=(G.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(t),E===oh&&(r=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,r=null;for(let o=t.length-1;o>=0;o--){const c=t[o];c.hostVars=n+=c.hostVars,c.hostAttrs=si(c.hostAttrs,r=si(r,c.hostAttrs))}}(o)}function Ci(t){return t===Se?{}:t===_e?[]:t}function oa(t,n){const r=t.viewQuery;t.viewQuery=r?(o,c)=>{n(o,c),r(o,c)}:n}function Ju(t,n){const r=t.contentQueries;t.contentQueries=r?(o,c,f)=>{n(o,c,f),r(o,c,f)}:n}function N_(t,n){const r=t.hostBindings;t.hostBindings=r?(o,c)=>{n(o,c),r(o,c)}:n}let mp=null;function of(){if(!mp){const t=xn.Symbol;if(t&&t.iterator)mp=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let r=0;r<n.length;++r){const o=n[r];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(mp=o)}}}return mp}class Eu{constructor(n){this.wrapped=n}static wrap(n){return new Eu(n)}static unwrap(n){return Eu.isWrapped(n)?n.wrapped:n}static isWrapped(n){return n instanceof Eu}}function _p(t){return!!F_(t)&&(Array.isArray(t)||!(t instanceof Map)&&of()in t)}function F_(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function aa(t,n,r){return!Object.is(t[n],r)&&(t[n]=r,!0)}function Tm(t,n,r,o){const c=ft();return aa(c,_a(),n)&&(Nn(),Ra(mr(),c,t,n,r,o)),Tm}function hf(t,n,r,o,c,f,_,E){const A=ft(),L=Nn(),G=t+20,re=L.firstCreatePass?function(t,n,r,o,c,f,_,E,A){const L=n.consts,G=Tc(n,t,4,_||null,Nr(L,E));yu(n,r,G,Nr(L,A)),ir(n,G);const re=G.tViews=Ka(2,G,o,c,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,L);return null!==n.queries&&(n.queries.template(n,G),re.queries=n.queries.embeddedTView(G)),G}(G,L,A,n,r,o,c,f,_):L.data[G];Js(re,!1);const ue=A[11].createComment("");Gd(L,A,ue,re),rs(ue,A),pd(A,A[G]=ip(ue,A,ue,re)),ls(re)&&th(L,A,re),null!=_&&Kh(A,re,E)}function Ap(t,n=Tt.Default){const r=ft();return null===r?Kr(t,n):I(Br(),r,Z(t),n)}function Fm(t,n,r){const o=ft();return aa(o,_a(),n)&&Uo(Nn(),mr(),o,t,n,o[11],r,!1),Fm}function Lm(t,n,r,o,c){const _=c?"class":"style";tf(t,r,n.inputs[_],_,o)}function Ig(t,n,r,o){const c=ft(),f=Nn(),_=20+t,E=c[11],A=c[_]=cd(E,n,Zt.lFrame.currentNamespace),L=f.firstCreatePass?function(t,n,r,o,c,f,_){const E=n.consts,L=Tc(n,t,2,c,Nr(E,f));return yu(n,r,L,Nr(E,_)),null!==L.attrs&&md(L,L.attrs,!1),null!==L.mergedAttrs&&md(L,L.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,L),L}(_,f,c,0,n,r,o):f.data[_];Js(L,!0);const G=L.mergedAttrs;null!==G&&Bt(E,A,G);const re=L.classes;null!==re&&io(E,A,re);const ue=L.styles;null!==ue&&kf(E,A,ue),64!=(64&L.flags)&&Gd(f,c,A,L),0===Zt.lFrame.elementDepthCount&&rs(A,c),Zt.lFrame.elementDepthCount++,ls(L)&&(th(f,c,L),function(t,n,r){if(Fi(n)){const c=n.directiveEnd;for(let f=n.directiveStart;f<c;f++){const _=t.data[f];_.contentQueries&&_.contentQueries(1,r[f],f)}}}(f,L,c)),null!==o&&Kh(c,L)}function Dg(){let t=Br();Wo()?Zt.lFrame.isParent=!1:(t=t.parent,Js(t,!1));const n=t;Zt.lFrame.elementDepthCount--;const r=Nn();r.firstCreatePass&&(ir(r,t),Fi(t)&&r.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&Lm(r,n,ft(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&Lm(r,n,ft(),n.stylesWithoutHost,!1)}function ey(t,n,r,o){Ig(t,n,r,o),Dg()}function ry(){return ft()}function Um(t){return!!t&&"function"==typeof t.then}function iy(t){return!!t&&"function"==typeof t.subscribe}const Bm=iy;function jm(t,n,r,o){const c=ft(),f=Nn(),_=Br();return function(t,n,r,o,c,f,_,E){const A=ls(o),G=t.firstCreatePass&&dg(t),re=n[8],ue=Xh(n);let Te=!0;if(3&o.type||E){const We=k(o,n),St=E?E(We):We,ct=ue.length,vn=E?Pn=>E(Ce(Pn[o.index])):o.index;if(B(r)){let Pn=null;if(!E&&A&&(Pn=function(t,n,r,o){const c=t.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===r&&c[f+1]===o){const E=n[7],A=c[f+2];return E.length>A?E[A]:null}"string"==typeof _&&(f+=2)}return null}(t,n,c,o.index)),null!==Pn)(Pn.__ngLastListenerFn__||Pn).__ngNextListenerFn__=f,Pn.__ngLastListenerFn__=f,Te=!1;else{f=Hm(o,n,re,f,!1);const br=r.listen(St,c,f);ue.push(f,br),G&&G.push(c,vn,ct,ct+1)}}else f=Hm(o,n,re,f,!0),St.addEventListener(c,f,_),ue.push(f),G&&G.push(c,vn,ct,_)}else f=Hm(o,n,re,f,!1);const ke=o.outputs;let tt;if(Te&&null!==ke&&(tt=ke[c])){const We=tt.length;if(We)for(let St=0;St<We;St+=2){const Bo=n[tt[St]][tt[St+1]].subscribe(f),rc=ue.length;ue.push(f,Bo),G&&G.push(c,o.index,rc,-(rc+1))}}}(f,c,c[11],_,t,n,!!r,o),jm}function oy(t,n,r,o){try{return!1!==r(o)}catch(c){return lp(t,c),!1}}function Hm(t,n,r,o,c){return function f(_){if(_===Function)return o;const E=2&t.flags?pt(t.index,n):n;0==(32&n[2])&&nh(E);let A=oy(n,0,o,_),L=f.__ngNextListenerFn__;for(;L;)A=oy(n,0,L,_)&&A,L=L.__ngNextListenerFn__;return c&&!1===A&&(_.preventDefault(),_.returnValue=!1),A}}function Tg(t=1){return function(t){return(Zt.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,Zt.lFrame.contextLView))[8]}(t)}function gf(t,n,r,o,c){const f=t[r+1],_=null===n;let E=o?Sa(f):Ul(f),A=!1;for(;0!==E&&(!1===A||_);){const G=t[E+1];Rp(t[E],n)&&(A=!0,t[E+1]=o?Yd(G):Vo(G)),E=o?Sa(G):Ul(G)}A&&(t[r+1]=o?Vo(f):Yd(f))}function Rp(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&di(t,n)>=0}function Sg(t,n){return function(t,n,r,o){const c=ft(),f=Nn(),_=function(t){const n=Zt.lFrame,r=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,r}(2);f.firstUpdatePass&&function(t,n,r,o){const c=t.data;if(null===c[r+1]){const f=c[Xi()],_=function(t,n){return n>=t.expandoStartIndex}(t,r);(function(t,n){return 0!=(t.flags&(n?16:32))})(f,o)&&null===n&&!_&&(n=!1),n=function(t,n,r,o){const c=function(t){const n=Zt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===c)0===(o?n.classBindings:n.styleBindings)&&(r=Pp(r=xg(null,t,n,r,o),n.attrs,o),f=null);else{const _=n.directiveStylingLast;if(-1===_||t[_]!==c)if(r=xg(c,t,n,r,o),null===f){let A=function(t,n,r){const o=r?n.classBindings:n.styleBindings;if(0!==Ul(o))return t[Sa(o)]}(t,n,o);void 0!==A&&Array.isArray(A)&&(A=xg(null,t,n,A[1],o),A=Pp(A,n.attrs,o),function(t,n,r,o){t[Sa(r?n.classBindings:n.styleBindings)]=o}(t,n,o,A))}else f=function(t,n,r){let o;const c=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<c;f++)o=Pp(o,t[f].hostAttrs,r);return Pp(o,n.attrs,r)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),r}(c,f,n,o),function(t,n,r,o,c,f){let _=f?n.classBindings:n.styleBindings,E=Sa(_),A=Ul(_);t[o]=r;let G,L=!1;if(Array.isArray(r)){const re=r;G=re[1],(null===G||di(re,G)>0)&&(L=!0)}else G=r;if(c)if(0!==A){const ue=Sa(t[E+1]);t[o+1]=Ku(ue,E),0!==ue&&(t[ue+1]=Zd(t[ue+1],o)),t[E+1]=function(t,n){return 131071&t|n<<17}(t[E+1],o)}else t[o+1]=Ku(E,0),0!==E&&(t[E+1]=Zd(t[E+1],o)),E=o;else t[o+1]=Ku(A,0),0===E?E=o:t[A+1]=Zd(t[A+1],o),A=o;L&&(t[o+1]=Vo(t[o+1])),gf(t,G,o,!0),gf(t,G,o,!1),function(t,n,r,o,c){const f=c?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&di(f,n)>=0&&(r[o+1]=Yd(r[o+1]))}(n,G,t,o,f),_=Ku(E,A),f?n.classBindings=_:n.styleBindings=_}(c,f,n,r,_,o)}}(f,t,_,o),n!==En&&aa(c,_,n)&&function(t,n,r,o,c,f,_,E){if(!(3&n.type))return;const A=t.data,L=A[E+1];y(function(t){return 1==(1&t)}(L)?h(A,n,r,c,Ul(L),_):void 0)||(y(f)||function(t){return 2==(2&t)}(L)&&(f=h(A,null,r,c,E,_)),function(t,n,r,o,c){const f=B(t);if(n)c?f?t.addClass(r,o):r.classList.add(o):f?t.removeClass(r,o):r.classList.remove(o);else{let _=-1===o.indexOf("-")?void 0:bo.DashCase;if(null==c)f?t.removeStyle(r,o,_):r.style.removeProperty(o);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=bo.Important),f?t.setStyle(r,o,c,_):r.style.setProperty(o,c,E?"important":"")}}}(o,_,F(Xi(),r),c,f))}(f,f.data[Xi()],c,c[11],t,c[_+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=oe(Ia(t)))),t}(n,r),o,_)}(t,n,null,!0),Sg}function xg(t,n,r,o,c){let f=null;const _=r.directiveEnd;let E=r.directiveStylingLast;for(-1===E?E=r.directiveStart:E++;E<_&&(f=n[E],o=Pp(o,f.hostAttrs,c),f!==t);)E++;return null!==t&&(r.directiveStylingLast=E),o}function Pp(t,n,r){const o=r?1:2;let c=-1;if(null!==n)for(let f=0;f<n.length;f++){const _=n[f];"number"==typeof _?c=_:c===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ns(t,_,!!r||n[++f]))}return void 0===t?null:t}function h(t,n,r,o,c,f){const _=null===n;let E;for(;c>0;){const A=t[c],L=Array.isArray(A),G=L?A[1]:A,re=null===G;let ue=r[c+1];ue===En&&(ue=re?_e:void 0);let Te=re?ol(ue,o):G===o?ue:void 0;if(L&&!y(Te)&&(Te=ol(A,o)),y(Te)&&(E=Te,_))return E;const ke=t[c+1];c=_?Sa(ke):Ul(ke)}if(null!==n){let A=f?n.residualClasses:n.residualStyles;null!=A&&(E=ol(A,o))}return E}function y(t){return void 0!==t}function K(t,n=""){const r=ft(),o=Nn(),c=t+20,f=o.firstCreatePass?Tc(o,c,1,n,null):o.data[c],_=r[c]=function(t,n){return B(t)?t.createText(n):t.createTextNode(n)}(r[11],n);Gd(o,r,_,f),Js(f,!1)}function ae(t){return Ee("",t,""),ae}function Ee(t,n,r){const o=ft(),c=function(t,n,r,o){return aa(t,_a(),r)?n+ce(r)+o:En}(o,t,n,r);return c!==En&&wu(o,Xi(),c),Ee}function xv(t,n,r){const o=ft();return aa(o,_a(),n)&&Uo(Nn(),mr(),o,t,n,o[11],r,!0),xv}const Np=void 0;var nb=["en",[["a","p"],["AM","PM"],Np],[["AM","PM"],Np,Np],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Np,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Np,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Np,"{1} 'at' {0}",Np],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let Og={};function Rv(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let r=oE(n);if(r)return r;const o=n.split("-")[0];if(r=oE(o),r)return r;if("en"===o)return nb;throw new Error(`Missing locale data for the locale "${t}".`)}function sE(t){return Rv(t)[An.PluralCase]}function oE(t){return t in Og||(Og[t]=xn.ng&&xn.ng.common&&xn.ng.common.locales&&xn.ng.common.locales[t]),Og[t]}var An=(()=>((An=An||{})[An.LocaleId=0]="LocaleId",An[An.DayPeriodsFormat=1]="DayPeriodsFormat",An[An.DayPeriodsStandalone=2]="DayPeriodsStandalone",An[An.DaysFormat=3]="DaysFormat",An[An.DaysStandalone=4]="DaysStandalone",An[An.MonthsFormat=5]="MonthsFormat",An[An.MonthsStandalone=6]="MonthsStandalone",An[An.Eras=7]="Eras",An[An.FirstDayOfWeek=8]="FirstDayOfWeek",An[An.WeekendRange=9]="WeekendRange",An[An.DateFormat=10]="DateFormat",An[An.TimeFormat=11]="TimeFormat",An[An.DateTimeFormat=12]="DateTimeFormat",An[An.NumberSymbols=13]="NumberSymbols",An[An.NumberFormats=14]="NumberFormats",An[An.CurrencyCode=15]="CurrencyCode",An[An.CurrencySymbol=16]="CurrencySymbol",An[An.CurrencyName=17]="CurrencyName",An[An.Currencies=18]="Currencies",An[An.Directionality=19]="Directionality",An[An.PluralCase=20]="PluralCase",An[An.ExtraData=21]="ExtraData",An))();const Cy="en-US";let aE=Cy;function Ov(t){Ft(t,"Expected localeId to be defined"),"string"==typeof t&&(aE=t.toLowerCase().replace(/_/g,"-"))}function Nv(t,n,r,o,c){if(t=Z(t),Array.isArray(t))for(let f=0;f<t.length;f++)Nv(t[f],n,r,o,c);else{const f=Nn(),_=ft();let E=or(t)?t:Z(t.provide),A=Ye(t);const L=Br(),G=1048575&L.providerIndexes,re=L.directiveStart,ue=L.providerIndexes>>20;if(or(t)||!t.multi){const Te=new Hr(A,c,Ap),ke=Fv(E,n,c?G:G+ue,re);-1===ke?(Qo(Hi(L,_),f,E),kv(f,t,n.length),n.push(E),L.directiveStart++,L.directiveEnd++,c&&(L.providerIndexes+=1048576),r.push(Te),_.push(Te)):(r[ke]=Te,_[ke]=Te)}else{const Te=Fv(E,n,G+ue,re),ke=Fv(E,n,G,G+ue),tt=Te>=0&&r[Te],We=ke>=0&&r[ke];if(c&&!We||!c&&!tt){Qo(Hi(L,_),f,E);const St=function(t,n,r,o,c){const f=new Hr(t,r,Ap);return f.multi=[],f.index=n,f.componentProviders=0,OE(f,c,o&&!r),f}(c?Xb:Jb,r.length,c,o,A);!c&&We&&(r[ke].providerFactory=St),kv(f,t,n.length,0),n.push(E),L.directiveStart++,L.directiveEnd++,c&&(L.providerIndexes+=1048576),r.push(St),_.push(St)}else kv(f,t,Te>-1?Te:ke,OE(r[c?ke:Te],A,!c&&o));!c&&o&&We&&r[ke].componentProviders++}}}function kv(t,n,r,o){const c=or(n);if(c||function(t){return!!t.useClass}(n)){const _=(n.useClass||n).prototype.ngOnDestroy;if(_){const E=t.destroyHooks||(t.destroyHooks=[]);if(!c&&n.multi){const A=E.indexOf(r);-1===A?E.push(r,[o,_]):E[A+1].push(o,_)}else E.push(r,_)}}}function OE(t,n,r){return r&&t.componentProviders++,t.multi.push(n)-1}function Fv(t,n,r,o){for(let c=r;c<o;c++)if(n[c]===t)return c;return-1}function Jb(t,n,r,o){return Lv(this.multi,[])}function Xb(t,n,r,o){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=ve(r,r[1],this.providerFactory.index,o);f=E.slice(0,_),Lv(c,f);for(let A=_;A<E.length;A++)f.push(E[A])}else f=[],Lv(c,f);return f}function Lv(t,n){for(let r=0;r<t.length;r++)n.push((0,t[r])());return n}function PE(t,n=[]){return r=>{r.providersResolver=(o,c)=>function(t,n,r){const o=Nn();if(o.firstCreatePass){const c=ti(t);Nv(r,o.data,o.blueprint,c,!0),Nv(n,o.data,o.blueprint,c,!1)}}(o,c?c(t):t,n)}}class ME{}const kE="ngComponent";class nI{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${oe(t)}. Did you add it to @NgModule.entryComponents?`);return n[kE]=t,n}(n)}}let Mg=(()=>{class t{}return t.NULL=new nI,t})();function Ay(...t){}function Ng(t,n){return new Dd(k(t,n))}const sI=function(){return Ng(Br(),ft())};let Dd=(()=>{class t{constructor(r){this.nativeElement=r}}return t.__NG_ELEMENT_ID__=sI,t})();function FE(t){return t instanceof Dd?t.nativeElement:t}class Sy{}let oI=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>lI(),t})();const lI=function(){const t=ft(),r=pt(Br().index,t);return function(t){return t[11]}(er(r)?r:t)};let Uv=(()=>{class t{}return t.\u0275prov=rn({token:t,providedIn:"root",factory:()=>null}),t})();class LE{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Bv=new LE("12.2.15");class VE{constructor(){}supports(n){return _p(n)}create(n){return new hI(n)}}const dI=(t,n)=>n;class hI{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||dI}forEachItem(n){let r;for(r=this._itHead;null!==r;r=r._next)n(r)}forEachOperation(n){let r=this._itHead,o=this._removalsHead,c=0,f=null;for(;r||o;){const _=!o||r&&r.currentIndex<BE(o,c,f)?r:o,E=BE(_,c,f),A=_.currentIndex;if(_===o)c--,o=o._nextRemoved;else if(r=r._next,null==_.previousIndex)c++;else{f||(f=[]);const L=E-c,G=A-c;if(L!=G){for(let ue=0;ue<L;ue++){const Te=ue<f.length?f[ue]:f[ue]=0,ke=Te+ue;G<=ke&&ke<L&&(f[ue]=Te+1)}f[_.previousIndex]=G-L}}E!==A&&n(_,E,A)}}forEachPreviousItem(n){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachMovedItem(n){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}forEachIdentityChange(n){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)n(r)}diff(n){if(null==n&&(n=[]),!_p(n))throw new Error(`Error trying to diff '${oe(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,f,_,r=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let E=0;E<this.length;E++)f=n[E],_=this._trackByFn(E,f),null!==r&&Object.is(r.trackById,_)?(o&&(r=this._verifyReinsertion(r,f,_,E)),Object.is(r.item,f)||this._addIdentityChange(r,f)):(r=this._mismatch(r,f,_,E),o=!0),r=r._next}else c=0,function(t,n){if(Array.isArray(t))for(let r=0;r<t.length;r++)n(t[r]);else{const r=t[of()]();let o;for(;!(o=r.next()).done;)n(o.value)}}(n,E=>{_=this._trackByFn(c,E),null!==r&&Object.is(r.trackById,_)?(o&&(r=this._verifyReinsertion(r,E,_,c)),Object.is(r.item,E)||this._addIdentityChange(r,E)):(r=this._mismatch(r,E,_,c),o=!0),r=r._next,c++}),this.length=c;return this._truncate(r),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,r,o,c){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._reinsertAfter(n,f,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(n.item,r)||this._addIdentityChange(n,r),this._moveAfter(n,f,c)):n=this._addAfter(new fI(r,o),f,c),n}_verifyReinsertion(n,r,o,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const r=n._next;this._addToRemovals(this._unlink(n)),n=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,f=n._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(n,r,o),this._addToMoves(n,o),n}_moveAfter(n,r,o){return this._unlink(n),this._insertAfter(n,r,o),this._addToMoves(n,o),n}_addAfter(n,r,o){return this._insertAfter(n,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,r,o){const c=null===r?this._itHead:r._next;return n._next=c,n._prev=r,null===c?this._itTail=n:c._prev=n,null===r?this._itHead=n:r._next=n,null===this._linkedRecords&&(this._linkedRecords=new UE),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const r=n._prev,o=n._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,n}_addToMoves(n,r){return n.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new UE),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,r){return n.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class fI{constructor(n,r){this.item=n,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pI{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,r){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const r=n._prevDup,o=n._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}class UE{constructor(){this.map=new Map}put(n){const r=n.trackById;let o=this.map.get(r);o||(o=new pI,this.map.set(r,o)),o.add(n)}get(n,r){const c=this.map.get(n);return c?c.get(n,r):null}remove(n){const r=n.trackById;return this.map.get(r).remove(n)&&this.map.delete(r),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function BE(t,n,r){const o=t.previousIndex;if(null===o)return o;let c=0;return r&&o<r.length&&(c=r[o]),o+n+c}class jE{constructor(){}supports(n){return n instanceof Map||F_(n)}create(){return new gI}}class gI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let r;for(r=this._mapHead;null!==r;r=r._next)n(r)}forEachPreviousItem(n){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)n(r)}forEachChangedItem(n){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)n(r)}forEachAddedItem(n){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)n(r)}forEachRemovedItem(n){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)n(r)}diff(n){if(n){if(!(n instanceof Map||F_(n)))throw new Error(`Error trying to diff '${oe(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,c)=>{if(r&&r.key===c)this._maybeAddToChanges(r,o),this._appendAfter=r,r=r._next;else{const f=this._getOrCreateRecordForKey(c,o);r=this._insertBeforeOrAppend(r,f)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let o=r;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,r){if(n){const o=n._prev;return r._next=n,r._prev=o,n._prev=r,o&&(o._next=r),n===this._mapHead&&(this._mapHead=r),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(n,r){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,r);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const o=new mI(n);return this._records.set(n,o),o.currentValue=r,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,r){Object.is(r,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=r,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,r){n instanceof Map?n.forEach(r):Object.keys(n).forEach(o=>r(n[o],o))}}class mI{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function HE(){return new xy([new VE])}let xy=(()=>{class t{constructor(r){this.factories=r}static create(r,o){if(null!=o){const c=o.factories.slice();r=r.concat(c)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||HE()),deps:[[t,new yo,new vi]]}}find(r){const o=this.factories.find(c=>c.supports(r));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(t){return t.name||typeof t}(r)}'`)}}return t.\u0275prov=rn({token:t,providedIn:"root",factory:HE}),t})();function $E(){return new Ry([new jE])}let Ry=(()=>{class t{constructor(r){this.factories=r}static create(r,o){if(o){const c=o.factories.slice();r=r.concat(c)}return new t(r)}static extend(r){return{provide:t,useFactory:o=>t.create(r,o||$E()),deps:[[t,new yo,new vi]]}}find(r){const o=this.factories.find(c=>c.supports(r));if(o)return o;throw new Error(`Cannot find a differ supporting object '${r}'`)}}return t.\u0275prov=rn({token:t,providedIn:"root",factory:$E}),t})();function Oy(t,n,r,o,c=!1){for(;null!==r;){const f=n[r.index];if(null!==f&&o.push(Ce(f)),Zr(f))for(let E=10;E<f.length;E++){const A=f[E],L=A[1].firstChild;null!==L&&Oy(A[1],A,L,o)}const _=r.type;if(8&_)Oy(t,n,r.child,o);else if(32&_){const E=ro(r,n);let A;for(;A=E();)o.push(A)}else if(16&_){const E=Mh(n,r);if(Array.isArray(E))o.push(...E);else{const A=ra(n[16]);Oy(A[1],A,E,o,!0)}}r=c?r.projectionNext:r.next}return o}class t_{constructor(n,r){this._lView=n,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,r=n[1];return Oy(r,n,r.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Zr(n)){const r=n[8],o=r?r.indexOf(this):-1;o>-1&&(xh(n,o),sl(r,o))}this._attachedToViewContainer=!1}Io(this._lView[1],this._lView)}onDestroy(n){qf(this._lView[1],this._lView,null,n)}markForCheck(){nh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){gd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,r){ma(!0);try{gd(t,n,r)}finally{ma(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,bc(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class yI extends t_{constructor(n){super(n),this._view=n}detectChanges(){ag(this._view)}checkNoChanges(){!function(t){ma(!0);try{ag(t)}finally{ma(!1)}}(this._view)}get context(){return null}}const wI=function(t){return function(t,n,r){if(he(t)&&!r){const o=pt(t.index,n);return new t_(o,o)}return 47&t.type?new t_(n[16],n):null}(Br(),ft(),16==(16&t))};let EI=(()=>{class t{}return t.__NG_ELEMENT_ID__=wI,t})();const II=[new jE],TI=new xy([new VE]),AI=new Ry(II),xI=function(){return Py(Br(),ft())};let n_=(()=>{class t{}return t.__NG_ELEMENT_ID__=xI,t})();const RI=n_,OI=class extends RI{constructor(n,r,o){super(),this._declarationLView=n,this._declarationTContainer=r,this.elementRef=o}createEmbeddedView(n){const r=this._declarationTContainer.tViews,o=Ga(this._declarationLView,r,n,16,null,r.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(o[19]=f.createEmbeddedView(r)),za(r,o,n),new t_(o)}};function Py(t,n){return 4&t.type?new OI(n,t,Ng(t,n)):null}class kp{}class WE{}const NI=function(){return KE(Br(),ft())};let My=(()=>{class t{}return t.__NG_ELEMENT_ID__=NI,t})();const FI=My,GE=class extends FI{constructor(n,r,o){super(),this._lContainer=n,this._hostTNode=r,this._hostLView=o}get element(){return Ng(this._hostTNode,this._hostLView)}get injector(){return new $n(this._hostTNode,this._hostLView)}get parentInjector(){const n=Yo(this._hostTNode,this._hostLView);if(Wr(n)){const r=rl(n,this._hostLView),o=Il(n);return new $n(r[1].data[o+8],r)}return new $n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const r=zE(this._lContainer);return null!==r&&r[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,r,o){const c=n.createEmbeddedView(r||{});return this.insert(c,o),c}createComponent(n,r,o,c,f){const _=o||this.parentInjector;if(!f&&null==n.ngModule&&_){const A=_.get(kp,null);A&&(f=A)}const E=n.create(_,c,void 0,f);return this.insert(E.hostView,r),E}insert(n,r){const o=n._lView,c=o[1];if(Zr(o[3])){const G=this.indexOf(n);if(-1!==G)this.detach(G);else{const re=o[3],ue=new GE(re,re[6],re[3]);ue.detach(ue.indexOf(n))}}const f=this._adjustIndex(r),_=this._lContainer;!function(t,n,r,o){const c=10+o,f=r.length;o>0&&(r[c-1][4]=n),o<f-10?(n[4]=r[c],xo(r,10+o,n)):(r.push(n),n[4]=null),n[3]=r;const _=n[17];null!==_&&r!==_&&function(t,n){const r=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===r?t[9]=[n]:r.push(n)}(_,n);const E=n[19];null!==E&&E.insertView(t),n[2]|=128}(c,o,_,f);const E=zu(f,_),A=o[11],L=gl(A,_[7]);return null!==L&&function(t,n,r,o,c,f){o[0]=c,o[6]=n,bc(t,o,r,1,c,f)}(c,_[6],A,o,L,E),n.attachToViewContainerRef(),xo(jv(_),f,n),n}move(n,r){return this.insert(n,r)}indexOf(n){const r=zE(this._lContainer);return null!==r?r.indexOf(n):-1}remove(n){const r=this._adjustIndex(n,-1),o=xh(this._lContainer,r);o&&(sl(jv(this._lContainer),r),Io(o[1],o))}detach(n){const r=this._adjustIndex(n,-1),o=xh(this._lContainer,r);return o&&null!=sl(jv(this._lContainer),r)?new t_(o):null}_adjustIndex(n,r=0){return null==n?this.length+r:n}};function zE(t){return t[8]}function jv(t){return t[8]||(t[8]=[])}function KE(t,n){let r;const o=n[t.index];if(Zr(o))r=o;else{let c;if(8&t.type)c=Ce(o);else{const f=n[11];c=f.createComment("");const _=k(t,n);$a(f,gl(f,_),c,function(t,n){return B(t)?t.nextSibling(n):n.nextSibling}(f,_),!1)}n[t.index]=r=ip(o,n,c,t),pd(n,r)}return new GE(r,t,n)}const Vg={};class p0 extends Mg{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const r=ur(n);return new m0(r,this.ngModule)}}function g0(t){const n=[];for(let r in t)t.hasOwnProperty(r)&&n.push({propName:t[r],templateName:r});return n}const PD=new wr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>yc});class m0 extends ME{constructor(n,r){super(),this.componentDef=n,this.ngModule=r,this.componentType=n.type,this.selector=n.selectors.map(em).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!r}get inputs(){return g0(this.componentDef.inputs)}get outputs(){return g0(this.componentDef.outputs)}create(n,r,o,c){const f=(c=c||this.ngModule)?function(t,n){return{get:(r,o,c)=>{const f=t.get(r,Vg,c);return f!==Vg||o===Vg?f:n.get(r,o,c)}}}(n,c.injector):n,_=f.get(Sy,H),E=f.get(Uv,null),A=_.createRenderer(null,this.componentDef),L=this.componentDef.selectors[0][0]||"div",G=o?function(t,n,r){if(B(t))return t.selectRootElement(n,r===It.ShadowDom);let o="string"==typeof n?t.querySelector(n):n;return o.textContent="",o}(A,o,this.componentDef.encapsulation):cd(_.createRenderer(null,this.componentDef),L,function(t){const n=t.toLowerCase();return"svg"===n?"http://www.w3.org/2000/svg":"math"===n?"http://www.w3.org/1998/MathML/":null}(L)),re=this.componentDef.onPush?576:528,ue=function(t,n){return{components:[],scheduler:t||yc,clean:cg,playerHandler:n||null,flags:0}}(),Te=Ka(0,null,null,1,0,null,null,null,null,null),ke=Ga(null,Te,ue,re,null,null,_,A,E,f);let tt,We;ya(ke);try{const St=function(t,n,r,o,c,f){const _=r[1];r[20]=t;const A=Tc(_,20,2,"#host",null),L=A.mergedAttrs=n.hostAttrs;null!==L&&(md(A,L,!0),null!==t&&(Bt(c,t,L),null!==A.classes&&io(c,t,A.classes),null!==A.styles&&kf(c,t,A.styles)));const G=o.createRenderer(t,n),re=Ga(r,Ac(n),null,n.onPush?64:16,r[20],A,o,G,f||null,null);return _.firstCreatePass&&(Qo(Hi(A,r),_,n.type),Qh(_,A),jl(A,r.length,1)),pd(r,re),r[20]=re}(G,this.componentDef,ke,_,A);if(G)if(o)Bt(A,G,["ng-version",Bv.full]);else{const{attrs:ct,classes:vn}=function(t){const n=[],r=[];let o=1,c=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===c?""!==f&&n.push(f,t[++o]):8===c&&r.push(f);else{if(!js(c))break;c=f}o++}return{attrs:n,classes:r}}(this.componentDef.selectors[0]);ct&&Bt(A,G,ct),vn&&vn.length>0&&io(A,G,vn.join(" "))}if(We=q(Te,20),void 0!==r){const ct=We.projection=[];for(let vn=0;vn<this.ngContentSelectors.length;vn++){const Pn=r[vn];ct.push(null!=Pn?Array.from(Pn):null)}}tt=function(t,n,r,o,c){const f=r[1],_=function(t,n,r){const o=Br();t.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),Gi(t,o,n,qu(t,n,1,null),r));const c=ve(n,t,o.directiveStart,o);rs(c,n);const f=k(o,n);return f&&rs(f,n),c}(f,r,n);if(o.components.push(_),t[8]=_,c&&c.forEach(A=>A(_,n)),n.contentQueries){const A=Br();n.contentQueries(1,_,A.directiveStart)}const E=Br();return!f.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(po(E.index),Rc(r[1],E,0,E.directiveStart,E.directiveEnd,n),ig(n,_)),_}(St,this.componentDef,ke,ue,[Tr]),za(Te,ke,null)}finally{tl()}return new kD(this.componentType,tt,Ng(We,ke),ke,We)}}class kD extends class{}{constructor(n,r,o,c,f){super(),this.location=o,this._rootLView=c,this._tNode=f,this.instance=r,this.hostView=this.changeDetectorRef=new yI(c),this.componentType=n}get injector(){return new $n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}const Ug=new Map;class VD extends kp{constructor(n,r){super(),this._parent=r,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new p0(this);const o=Sr(n),c=n[Vt]||null;c&&Ov(c),this._bootstrapComponents=to(o.bootstrap),this._r3Injector=S(n,r,[{provide:kp,useValue:this},{provide:Mg,useValue:this.componentFactoryResolver}],oe(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,r=Mi.THROW_IF_NOT_FOUND,o=Tt.Default){return n===Mi||n===kp||n===Pc?this:this._r3Injector.get(n,r,o)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class ew extends WE{constructor(n){super(),this.moduleType=n,null!==Sr(n)&&function(t){const n=new Set;!function r(o){const c=Sr(o,!0),f=c.id;null!==f&&(function(t,n,r){if(n&&n!==r)throw new Error(`Duplicate module registered for ${t} - ${oe(n)} vs ${oe(n.name)}`)}(f,Ug.get(f),o),Ug.set(f,o));const _=to(c.imports);for(const E of _)n.has(E)||(n.add(E),r(E))}(t)}(n)}create(n){return new VD(this.moduleType,n)}}function v0(t,n,r,o,c,f){const _=n+r;return aa(t,_,c)?function(t,n,r){return t[n]=r}(t,_+1,f?o.call(f,c):o(c)):function(t,n){const r=t[n];return r===En?void 0:r}(t,_+1)}function I0(t,n){const r=Nn();let o;const c=t+20;r.firstCreatePass?(o=function(t,n){if(n)for(let r=n.length-1;r>=0;r--){const o=n[r];if(t===o.name)return o}throw new qe("302",`The pipe '${t}' could not be found!`)}(n,r.pipeRegistry),r.data[c]=o,o.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(c,o.onDestroy)):o=r.data[c];const f=o.factory||(o.factory=Mr(o.type)),_=jn(Ap);try{const E=On(!1),A=f();return On(E),function(t,n,r,o){r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),n[r]=o}(r,ft(),c,A),A}finally{jn(_)}}function D0(t,n,r){const o=t+20,c=ft(),f=function(t,n){return t[n]}(c,o);return function(t,n){Eu.isWrapped(n)&&(n=Eu.unwrap(n),t[Zt.lFrame.bindingIndex]=En);return n}(c,function(t,n){return t[1].data[n].pure}(c,o)?v0(c,function(){const t=Zt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}(),n,f.transform,r,f):f.transform(r))}function tw(t){return n=>{setTimeout(t,void 0,n)}}const Td=class extends w.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,r,o){var c,f,_;let E=n,A=r||(()=>null),L=o;if(n&&"object"==typeof n){const re=n;E=null===(c=re.next)||void 0===c?void 0:c.bind(re),A=null===(f=re.error)||void 0===f?void 0:f.bind(re),L=null===(_=re.complete)||void 0===_?void 0:_.bind(re)}this.__isAsync&&(A=tw(A),E&&(E=tw(E)),L&&(L=tw(L)));const G=super.subscribe({next:E,error:A,complete:L});return n instanceof x.w&&n.add(G),G}};function tT(){return this._results[of()]()}class Vy{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const r=of(),o=Vy.prototype;o[r]||(o[r]=tT)}get changes(){return this._changes||(this._changes=new Td)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,r){return this._results.reduce(n,r)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,r){const o=this;o.dirty=!1;const c=yi(n);(this._changesDetected=!function(t,n,r){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let c=t[o],f=n[o];if(r&&(c=r(c),f=r(f)),f!==c)return!1}return!0}(o._results,c,r))&&(o._results=c,o.length=c.length,o.last=c[this.length-1],o.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class nw{constructor(n){this.queryList=n,this.matches=null}clone(){return new nw(this.queryList)}setDirty(){this.queryList.setDirty()}}class rw{constructor(n=[]){this.queries=n}createEmbeddedView(n){const r=n.queries;if(null!==r){const o=null!==n.contentQueries?n.contentQueries[0]:r.length,c=[];for(let f=0;f<o;f++){const _=r.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new rw(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let r=0;r<this.queries.length;r++)null!==M0(n,r).matches&&this.queries[r].setDirty()}}class T0{constructor(n,r,o=null){this.predicate=n,this.flags=r,this.read=o}}class iw{constructor(n=[]){this.queries=n}elementStart(n,r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,r)}elementEnd(n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(n)}embeddedTView(n){let r=null;for(let o=0;o<this.length;o++){const c=null!==r?r.length:0,f=this.getByIndex(o).embeddedTView(n,c);f&&(f.indexInDeclarationView=o,null!==r?r.push(f):r=[f])}return null!==r?new iw(r):null}template(n,r){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,r)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class sw{constructor(n,r=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(n,r){this.isApplyingToNode(r)&&this.matchTNode(n,r)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,r){this.elementStart(n,r)}embeddedTView(n,r){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,r),new sw(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const r=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==r;)o=o.parent;return r===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,r){const o=this.metadata.predicate;if(Array.isArray(o))for(let c=0;c<o.length;c++){const f=o[c];this.matchTNodeWithReadOption(n,r,iT(r,f)),this.matchTNodeWithReadOption(n,r,X(r,n,f,!1,!1))}else o===n_?4&r.type&&this.matchTNodeWithReadOption(n,r,-1):this.matchTNodeWithReadOption(n,r,X(r,n,o,!1,!1))}matchTNodeWithReadOption(n,r,o){if(null!==o){const c=this.metadata.read;if(null!==c)if(c===Dd||c===My||c===n_&&4&r.type)this.addMatch(r.index,-2);else{const f=X(r,n,c,!1,!1);null!==f&&this.addMatch(r.index,f)}else this.addMatch(r.index,o)}}addMatch(n,r){null===this.matches?this.matches=[n,r]:this.matches.push(n,r)}}function iT(t,n){const r=t.localNames;if(null!==r)for(let o=0;o<r.length;o+=2)if(r[o]===n)return r[o+1];return null}function oT(t,n,r,o){return-1===r?function(t,n){return 11&t.type?Ng(t,n):4&t.type?Py(t,n):null}(n,t):-2===r?function(t,n,r){return r===Dd?Ng(n,t):r===n_?Py(n,t):r===My?KE(n,t):void 0}(t,n,o):ve(t,t[1],r,n)}function A0(t,n,r,o){const c=n[19].queries[o];if(null===c.matches){const f=t.data,_=r.matches,E=[];for(let A=0;A<_.length;A+=2){const L=_[A];E.push(L<0?null:oT(n,f[L],_[A+1],r.metadata.read))}c.matches=E}return c.matches}function ow(t,n,r,o){const c=t.queries.getByIndex(r),f=c.matches;if(null!==f){const _=A0(t,n,c,r);for(let E=0;E<f.length;E+=2){const A=f[E];if(A>0)o.push(_[E/2]);else{const L=f[E+1],G=n[-A];for(let re=10;re<G.length;re++){const ue=G[re];ue[17]===ue[3]&&ow(ue[1],ue,L,o)}if(null!==G[9]){const re=G[9];for(let ue=0;ue<re.length;ue++){const Te=re[ue];ow(Te[1],Te,L,o)}}}}}return o}function S0(t){const n=ft(),r=Nn(),o=sc();qo(o+1);const c=M0(r,o);if(t.dirty&&tn(n)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const f=c.crossesNgTemplate?ow(r,n,o,[]):A0(r,n,c,o);t.reset(f,FE),t.notifyOnChanges()}return!0}return!1}function x0(t,n,r,o){const c=Nn();if(c.firstCreatePass){const f=Br();(function(t,n,r){null===t.queries&&(t.queries=new iw),t.queries.track(new sw(n,r))})(c,new T0(n,r,o),f.index),function(t,n){const r=t.contentQueries||(t.contentQueries=[]);n!==(r.length?r[r.length-1]:-1)&&r.push(t.queries.length-1,n)}(c,t),2==(2&r)&&(c.staticContentQueries=!0)}!function(t,n,r){const o=new Vy(4==(4&r));qf(t,n,o,o.destroy),null===n[19]&&(n[19]=new rw),n[19].queries.push(new nw(o))}(c,ft(),r)}function R0(){return t=ft(),n=sc(),t[19].queries[n].queryList;var t,n}function M0(t,n){return t.queries.getByIndex(n)}const hw=new wr("Application Initializer");let jg=(()=>{class t{constructor(r){this.appInits=r,this.resolve=Ay,this.reject=Ay,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,c)=>{this.resolve=o,this.reject=c})}runInitializers(){if(this.initialized)return;const r=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Um(f))r.push(f);else if(Bm(f)){const _=new Promise((E,A)=>{f.subscribe({complete:E,error:A})});r.push(_)}}Promise.all(r).then(()=>{o()}).catch(c=>{this.reject(c)}),0===r.length&&o(),this.initialized=!0}}return t.\u0275fac=function(r){return new(r||t)(Kr(hw,8))},t.\u0275prov=rn({token:t,factory:t.\u0275fac}),t})();const Q0=new wr("AppId"),VT={provide:Q0,useFactory:function(){return`${fw()}${fw()}${fw()}`},deps:[]};function fw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const J0=new wr("Platform Initializer"),X0=new wr("Platform ID"),eC=new wr("appBootstrapListener");let tC=(()=>{class t{log(r){console.log(r)}warn(r){console.warn(r)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=rn({token:t,factory:t.\u0275fac}),t})();const jy=new wr("LocaleId"),nC=new wr("DefaultCurrencyCode");class BT{constructor(n,r){this.ngModuleFactory=n,this.componentFactories=r}}const pw=function(t){return new ew(t)},jT=pw,HT=function(t){return Promise.resolve(pw(t))},rC=function(t){const n=pw(t),o=to(Sr(t).declarations).reduce((c,f)=>{const _=ur(f);return _&&c.push(new m0(_)),c},[]);return new BT(n,o)},$T=rC,WT=function(t){return Promise.resolve(rC(t))};let p_=(()=>{class t{constructor(){this.compileModuleSync=jT,this.compileModuleAsync=HT,this.compileModuleAndAllComponentsSync=$T,this.compileModuleAndAllComponentsAsync=WT}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=rn({token:t,factory:t.\u0275fac}),t})();const KT=(()=>Promise.resolve(0))();function gw(t){"undefined"==typeof Zone?KT.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Iu{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Td(!1),this.onMicrotaskEmpty=new Td(!1),this.onStable=new Td(!1),this.onError=new Td(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&r,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let t=xn.requestAnimationFrame,n=xn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(xn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,_w(t),t.isCheckStableRunning=!0,mw(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),_w(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,o,c,f,_,E)=>{try{return iC(t),r.invokeTask(c,f,_,E)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),sC(t)}},onInvoke:(r,o,c,f,_,E,A)=>{try{return iC(t),r.invoke(c,f,_,E,A)}finally{t.shouldCoalesceRunChangeDetection&&n(),sC(t)}},onHasTask:(r,o,c,f)=>{r.hasTask(c,f),o===c&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,_w(t),mw(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(r,o,c,f)=>(r.handleError(c,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Iu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Iu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,r,o){return this._inner.run(n,r,o)}runTask(n,r,o,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,n,ZT,Ay,Ay);try{return f.runTask(_,r,o)}finally{f.cancelTask(_)}}runGuarded(n,r,o){return this._inner.runGuarded(n,r,o)}runOutsideAngular(n){return this._outer.run(n)}}const ZT={};function mw(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function _w(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function iC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sC(t){t._nesting--,mw(t)}class JT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Td,this.onMicrotaskEmpty=new Td,this.onStable=new Td,this.onError=new Td}run(n,r,o){return n.apply(r,o)}runGuarded(n,r,o){return n.apply(r,o)}runOutsideAngular(n){return n()}runTask(n,r,o,c){return n.apply(r,o)}}let oC=(()=>{class t{constructor(r){this._ngZone=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Iu.assertNotInAngularZone(),gw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gw(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(r)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,c){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),r(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:r,timeoutId:f,updateCb:c})}whenStable(r,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(r,o,c){return[]}}return t.\u0275fac=function(r){return new(r||t)(Kr(Iu))},t.\u0275prov=rn({token:t,factory:t.\u0275fac}),t})(),aC=(()=>{class t{constructor(){this._applications=new Map,yw.addToWindow(this)}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return yw.findTestabilityInTree(this,r,o)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=rn({token:t,factory:t.\u0275fac}),t})();class XT{addToWindow(n){}findTestabilityInTree(n,r,o){return null}}function eA(t){yw=t}let yw=new XT,lC=!0,uC=!1;function vw(){return uC=!0,lC}function tA(){if(uC)throw new Error("Cannot enable prod mode after platform setup.");lC=!1}let Fc;const cC=new wr("AllowMultipleToken");class lA{constructor(n,r){this.name=n,this.token=r}}function dC(t,n,r=[]){const o=`Platform: ${n}`,c=new wr(o);return(f=[])=>{let _=hC();if(!_||_.injector.get(cC,!1))if(t)t(r.concat(f).concat({provide:c,useValue:!0}));else{const E=r.concat(f).concat({provide:c,useValue:!0},{provide:rf,useValue:"platform"});!function(t){if(Fc&&!Fc.destroyed&&!Fc.injector.get(cC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Fc=t.get(fC);const n=t.get(J0,null);n&&n.forEach(r=>r())}(Mi.create({providers:E,name:o}))}return function(t){const n=hC();if(!n)throw new Error("No platform exists!");if(!n.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return n}(c)}}function hC(){return Fc&&!Fc.destroyed?Fc:null}let fC=(()=>{class t{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,o){const E=function(t,n){let r;return r="noop"===t?new JT:("zone.js"===t?void 0:t)||new Iu({enableLongStackTrace:vw(),shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),r}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),A=[{provide:Iu,useValue:E}];return E.run(()=>{const L=Mi.create({providers:A,parent:this.injector,name:r.moduleType.name}),G=r.create(L),re=G.injector.get(m,null);if(!re)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return E.runOutsideAngular(()=>{const ue=E.onError.subscribe({next:Te=>{re.handleError(Te)}});G.onDestroy(()=>{ww(this._modules,G),ue.unsubscribe()})}),function(t,n,r){try{const o=r();return Um(o)?o.catch(c=>{throw n.runOutsideAngular(()=>t.handleError(c)),c}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(re,E,()=>{const ue=G.injector.get(jg);return ue.runInitializers(),ue.donePromise.then(()=>(Ov(G.injector.get(jy,Cy)||Cy),this._moduleDoBootstrap(G),G))})})}bootstrapModule(r,o=[]){const c=pC({},o);return function(t,n,r){const o=new ew(r);return Promise.resolve(o)}(0,0,r).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(r){const o=r.injector.get(g_);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!r.instance.ngDoBootstrap)throw new Error(`The module ${oe(r.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);r.instance.ngDoBootstrap(o)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(r){return new(r||t)(Kr(Mi))},t.\u0275prov=rn({token:t,factory:t.\u0275fac}),t})();function pC(t,n){return Array.isArray(n)?n.reduce(pC,t):Object.assign(Object.assign({},t),n)}let g_=(()=>{class t{constructor(r,o,c,f,_){this._zone=r,this._injector=o,this._exceptionHandler=c,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new se.y(L=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{L.next(this._stable),L.complete()})}),A=new se.y(L=>{let G;this._zone.runOutsideAngular(()=>{G=this._zone.onStable.subscribe(()=>{Iu.assertNotInAngularZone(),gw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,L.next(!0))})})});const re=this._zone.onUnstable.subscribe(()=>{Iu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{L.next(!1)}))});return()=>{G.unsubscribe(),re.unsubscribe()}});this.isStable=(0,De.T)(E,A.pipe((0,pe.B)()))}bootstrap(r,o){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=r instanceof ME?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(c.componentType);const f=function(t){return t.isBoundToModule}(c)?void 0:this._injector.get(kp),E=c.create(Mi.NULL,[],o||c.selector,f),A=E.location.nativeElement,L=E.injector.get(oC,null),G=L&&E.injector.get(aC);return L&&G&&G.registerApplication(A,L),E.onDestroy(()=>{this.detachView(E.hostView),ww(this.components,E),G&&G.unregisterApplication(A)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(r))}finally{this._runningTick=!1}}attachView(r){const o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){const o=r;ww(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(eC,[]).concat(this._bootstrapListeners).forEach(c=>c(r))}ngOnDestroy(){this._views.slice().forEach(r=>r.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(r){return new(r||t)(Kr(Iu),Kr(Mi),Kr(m),Kr(Mg),Kr(jg))},t.\u0275prov=rn({token:t,factory:t.\u0275fac}),t})();function ww(t,n){const r=t.indexOf(n);r>-1&&t.splice(r,1)}class pA{}class mA{}const _A={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let yA=(()=>{class t{constructor(r,o){this._compiler=r,this._config=o||_A}load(r){return this.loadAndCompile(r)}loadAndCompile(r){let[o,c]=r.split("#");return void 0===c&&(c="default"),V(8255)(o).then(f=>f[c]).then(f=>yC(f,o,c)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(r){let[o,c]=r.split("#"),f="NgFactory";return void 0===c&&(c="default",f=""),V(8255)(this._config.factoryPathPrefix+o+this._config.factoryPathSuffix).then(_=>_[c+f]).then(_=>yC(_,o,c))}}return t.\u0275fac=function(r){return new(r||t)(Kr(p_),Kr(mA,8))},t.\u0275prov=rn({token:t,factory:t.\u0275fac}),t})();function yC(t,n,r){if(!t)throw new Error(`Cannot find '${r}' in '${n}'`);return t}const TA=function(t){return null},SA=dC(null,"core",[{provide:X0,useValue:"unknown"},{provide:fC,deps:[Mi]},{provide:aC,deps:[]},{provide:tC,deps:[]}]),MA=[{provide:g_,useClass:g_,deps:[Iu,Mi,m,Mg,jg]},{provide:PD,deps:[Iu],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(r){n.push(r)}}},{provide:jg,useClass:jg,deps:[[new vi,hw]]},{provide:p_,useClass:p_,deps:[]},VT,{provide:xy,useFactory:function(){return TI},deps:[]},{provide:Ry,useFactory:function(){return AI},deps:[]},{provide:jy,useFactory:function(t){return Ov(t=t||"undefined"!=typeof $localize&&$localize.locale||Cy),t},deps:[[new Vs(jy),new vi,new yo]]},{provide:nC,useValue:"USD"}];let kA=(()=>{class t{constructor(r){}}return t.\u0275fac=function(r){return new(r||t)(Kr(g_))},t.\u0275mod=xs({type:t}),t.\u0275inj=Lt({providers:MA}),t})()},2673:(Pe,fe,V)=>{"use strict";V.d(fe,{zQ:()=>Be,rT:()=>Wt,f7:()=>rt,L6:()=>lt,_Q:()=>Mt,lh:()=>xt,Qv:()=>Ie});var w=V(7716),x=V(9765),se=V(5917),De=V(7574),pe=V(4402),ee=V(6682),ge=V(8229);function oe($e,xe,He){let Le;return Le=$e&&"object"==typeof $e?$e:{bufferSize:$e,windowTime:xe,refCount:!1,scheduler:He},at=>at.lift(function({bufferSize:$e=Number.POSITIVE_INFINITY,windowTime:xe=Number.POSITIVE_INFINITY,refCount:He,scheduler:Le}){let at,zt,Ot=0,Dt=!1,Ft=!1;return function(dn){let nr;Ot++,!at||Dt?(Dt=!1,at=new ge.t($e,xe,Le),nr=at.subscribe(this),zt=dn.subscribe({next(Jt){at.next(Jt)},error(Jt){Dt=!0,at.error(Jt)},complete(){Ft=!0,zt=void 0,at.complete()}}),Ft&&(zt=void 0)):nr=at.subscribe(this),this.add(()=>{Ot--,nr.unsubscribe(),nr=void 0,zt&&!Ft&&He&&0===Ot&&(zt.unsubscribe(),zt=void 0,at=void 0)})}}(Le))}var Y=V(3190);function ie($e,xe){return xe?(0,Y.w)(()=>$e,xe):(0,Y.w)(()=>$e)}var Z=V(6136),me=V(8002),Ke=V(8049),qe=V(3101),Me=V(5435),it=V(9126),ce=V(9958),Qe=V(8583);const Ie=new w.OlP("angularfire2.auth.use-emulator"),lt=new w.OlP("angularfire2.auth.settings"),Mt=new w.OlP("angularfire2.auth.tenant-id"),Wt=new w.OlP("angularfire2.auth.langugage-code"),xt=new w.OlP("angularfire2.auth.use-device-language"),rt=new w.OlP("angularfire.auth.persistence");let Be=(()=>{class $e{constructor(He,Le,at,Ot,zt,Dt,Ft,Ht,dn,nr,Jt){const rn=new x.xQ,mn=(0,se.of)(void 0).pipe((0,Z.QV)(zt.outsideAngular),(0,Y.w)(()=>Ot.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,6094)))),(0,me.U)(()=>(0,ce.on)(He,Ot,Le)),(0,me.U)(Lt=>Ot.runOutsideAngular(()=>{const Kt=Dt,Fn=Ft;return(0,it.cc)(`${Lt.name}.auth`,"AngularFireAuth",Lt.name,()=>{const dr=Ot.runOutsideAngular(()=>Lt.auth());if(Kt&&dr.useEmulator(...Kt),Ht&&(dr.tenantId=Ht),dr.languageCode=dn,nr&&dr.useDeviceLanguage(),Fn)for(const[Gt,Gn]of Object.entries(Fn))dr.settings[Gt]=Gn;return Jt&&dr.setPersistence(Jt),dr},[Kt,Ht,dn,nr,Fn,Jt])})),oe({bufferSize:1,refCount:!1}));if((0,Qe.PM)(at))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,se.of)(null);else{mn.pipe((0,Ke.P)()).subscribe();const Kt=mn.pipe((0,Y.w)(Gt=>Gt.getRedirectResult().then(Gn=>Gn,()=>null)),it.iC,oe({bufferSize:1,refCount:!1})),Fn=mn.pipe((0,Y.w)(Gt=>new De.y(Gn=>({unsubscribe:Ot.runOutsideAngular(()=>Gt.onAuthStateChanged(Yn=>Gn.next(Yn),Yn=>Gn.error(Yn),()=>Gn.complete()))})))),dr=mn.pipe((0,Y.w)(Gt=>new De.y(Gn=>({unsubscribe:Ot.runOutsideAngular(()=>Gt.onIdTokenChanged(Yn=>Gn.next(Yn),Yn=>Gn.error(Yn),()=>Gn.complete()))}))));this.authState=Kt.pipe(ie(Fn),(0,qe.R)(zt.outsideAngular),(0,Z.QV)(zt.insideAngular)),this.user=Kt.pipe(ie(dr),(0,qe.R)(zt.outsideAngular),(0,Z.QV)(zt.insideAngular)),this.idToken=this.user.pipe((0,Y.w)(Gt=>Gt?(0,pe.D)(Gt.getIdToken()):(0,se.of)(null))),this.idTokenResult=this.user.pipe((0,Y.w)(Gt=>Gt?(0,pe.D)(Gt.getIdTokenResult()):(0,se.of)(null))),this.credential=(0,ee.T)(Kt,rn,this.authState.pipe((0,Me.h)(Gt=>!Gt))).pipe((0,me.U)(Gt=>(null==Gt?void 0:Gt.user)?Gt:null),(0,qe.R)(zt.outsideAngular),(0,Z.QV)(zt.insideAngular))}return(0,ce.pX)(this,mn,Ot,{spy:{apply:(Lt,Kt,Fn)=>{(Lt.startsWith("signIn")||Lt.startsWith("createUser"))&&Fn.then(dr=>rn.next(dr))}}})}}return $e.\u0275fac=function(He){return new(He||$e)(w.LFG(ce.Dh),w.LFG(ce.xv,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(it.HU),w.LFG(Ie,8),w.LFG(lt,8),w.LFG(Mt,8),w.LFG(Wt,8),w.LFG(xt,8),w.LFG(rt,8))},$e.\u0275prov=w.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"any"}),$e})()},2278:(Pe,fe,V)=>{"use strict";V.d(fe,{ST:()=>xg,yb:()=>Pp});var w=V(7716),x=V(3637),se=V(7574),De=V(4402),pe=V(5917),ee=V(9126),ge=V(7393);function oe(){return s=>s.lift(new le)}class le{call(e,i){return i.subscribe(new Y(e))}}class Y extends ge.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let i;this.hasPrev?i=[this.prev,e]:this.hasPrev=!0,this.prev=e,i&&this.destination.next(i)}}var Ae,ie=V(9761),Z=V(8002),me=V(2145),Ke=V(7519),qe=V(5435),Me=V(6136),it=V(9958),ce=V(8583),et=(V(6094),V(3394)),Ie=V(8239),lt=V(8026),Mt=V(3910),Wt=V(5422),xt=V(3854),rt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Be={},$e=$e||{},xe=rt||self;function He(){}function Le(s){var e=typeof s;return"array"==(e="object"!=e?e:s?Array.isArray(s)?"array":e:"null")||"object"==e&&"number"==typeof s.length}function at(s){var e=typeof s;return"object"==e&&null!=s||"function"==e}var zt="closure_uid_"+(1e9*Math.random()>>>0),Dt=0;function Ft(s,e,i){return s.call.apply(s.bind,arguments)}function Ht(s,e,i){if(!s)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(h,a),s.apply(e,h)}}return function(){return s.apply(e,arguments)}}function dn(s,e,i){return(dn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ft:Ht).apply(null,arguments)}function nr(s,e){var i=Array.prototype.slice.call(arguments,1);return function(){var a=i.slice();return a.push.apply(a,arguments),s.apply(this,a)}}function Jt(s,e){function i(){}i.prototype=e.prototype,s.Z=e.prototype,s.prototype=new i,s.prototype.constructor=s,s.Vb=function(a,h,y){for(var D=Array(arguments.length-2),j=2;j<arguments.length;j++)D[j-2]=arguments[j];return e.prototype[h].apply(a,D)}}function rn(){this.s=this.s,this.o=this.o}var Lt={};rn.prototype.s=!1,rn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var s=function(s){return Object.prototype.hasOwnProperty.call(s,zt)&&s[zt]||(s[zt]=++Dt)}(this);delete Lt[s]}},rn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Kt=Array.prototype.indexOf?function(s,e){return Array.prototype.indexOf.call(s,e,void 0)}:function(s,e){if("string"==typeof s)return"string"!=typeof e||1!=e.length?-1:s.indexOf(e,0);for(let i=0;i<s.length;i++)if(i in s&&s[i]===e)return i;return-1},Fn=Array.prototype.forEach?function(s,e,i){Array.prototype.forEach.call(s,e,i)}:function(s,e,i){const a=s.length,h="string"==typeof s?s.split(""):s;for(let y=0;y<a;y++)y in h&&e.call(i,h[y],y,s)};function Gt(s){return Array.prototype.concat.apply([],arguments)}function Gn(s){const e=s.length;if(0<e){const i=Array(e);for(let a=0;a<e;a++)i[a]=s[a];return i}return[]}function Yn(s){return/^[\s\xa0]*$/.test(s)}var Tt,Xr=String.prototype.trim?function(s){return s.trim()}:function(s){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(s)[1]};function Nt(s,e){return-1!=s.indexOf(e)}function Qn(s,e){return s<e?-1:s>e?1:0}e:{var ar=xe.navigator;if(ar){var zn=ar.userAgent;if(zn){Tt=zn;break e}}Tt=""}function jn(s,e,i){for(const a in s)e.call(i,s[a],a,s)}function Qt(s){const e={};for(const i in s)e[i]=s[i];return e}var jt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sn(s,e){let i,a;for(let h=1;h<arguments.length;h++){for(i in a=arguments[h],a)s[i]=a[i];for(let y=0;y<jt.length;y++)i=jt[y],Object.prototype.hasOwnProperty.call(a,i)&&(s[i]=a[i])}}function Dn(s){return Dn[" "](s),s}Dn[" "]=He;var qr,s,Sn=Nt(Tt,"Opera"),It=Nt(Tt,"Trident")||Nt(Tt,"MSIE"),yt=Nt(Tt,"Edge"),ei=yt||It,bi=Nt(Tt,"Gecko")&&!(Nt(Tt.toLowerCase(),"webkit")&&!Nt(Tt,"Edge"))&&!(Nt(Tt,"Trident")||Nt(Tt,"MSIE"))&&!Nt(Tt,"Edge"),Es=Nt(Tt.toLowerCase(),"webkit")&&!Nt(Tt,"Edge");function xn(){var s=xe.document;return s?s.documentMode:void 0}e:{var Ni="",Se=(s=Tt,bi?/rv:([^\);]+)(\)|;)/.exec(s):yt?/Edge\/([\d\.]+)/.exec(s):It?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(s):Es?/WebKit\/(\S+)/.exec(s):Sn?/(?:Version)[ \/]?(\S+)/.exec(s):void 0);if(Se&&(Ni=Se?Se[1]:""),It){var _e=xn();if(null!=_e&&_e>parseFloat(Ni)){qr=String(_e);break e}}qr=Ni}var Re={};function ot(){return e=Re,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let s=0;const e=Xr(String(qr)).split("."),i=Xr("9").split("."),a=Math.max(e.length,i.length);for(let D=0;0==s&&D<a;D++){var h=e[D]||"",y=i[D]||"";do{if(h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],0==h[0].length&&0==y[0].length)break;s=Qn(0==h[1].length?0:parseInt(h[1],10),0==y[1].length?0:parseInt(y[1],10))||Qn(0==h[2].length,0==y[2].length)||Qn(h[2],y[2]),h=h[3],y=y[3]}while(0==s)}return 0<=s}();var e}var Vt=xe.document&&It&&(xn()||parseInt(qr,10))||void 0,an=function(){if(!xe.addEventListener||!Object.defineProperty)return!1;var s=!1,e=Object.defineProperty({},"passive",{get:function(){s=!0}});try{xe.addEventListener("test",He,e),xe.removeEventListener("test",He,e)}catch(i){}return s}();function Cn(s,e){this.type=s,this.g=this.target=e,this.defaultPrevented=!1}function lr(s,e){if(Cn.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var i=this.type=s.type,a=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=e,e=s.relatedTarget){if(bi){e:{try{Dn(e.nodeName);var h=!0;break e}catch(y){}h=!1}h||(e=null)}}else"mouseover"==i?e=s.fromElement:"mouseout"==i&&(e=s.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType="string"==typeof s.pointerType?s.pointerType:Fr[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&lr.Z.h.call(this)}}Cn.prototype.h=function(){this.defaultPrevented=!0},Jt(lr,Cn);var Fr={2:"touch",3:"pen",4:"mouse"};lr.prototype.h=function(){lr.Z.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var _n="closure_listenable_"+(1e6*Math.random()|0),Lr=0;function ai(s,e,i,a,h){this.listener=s,this.proxy=null,this.src=e,this.type=i,this.capture=!!a,this.ia=h,this.key=++Lr,this.ca=this.fa=!1}function zi(s){s.ca=!0,s.listener=null,s.proxy=null,s.src=null,s.ia=null}function xs(s){this.src=s,this.g={},this.h=0}function hn(s,e){var i=e.type;if(i in s.g){var y,a=s.g[i],h=Kt(a,e);(y=0<=h)&&Array.prototype.splice.call(a,h,1),y&&(zi(e),0==s.g[i].length&&(delete s.g[i],s.h--))}}function Ki(s,e,i,a){for(var h=0;h<s.length;++h){var y=s[h];if(!y.ca&&y.listener==e&&y.capture==!!i&&y.ia==a)return h}return-1}xs.prototype.add=function(s,e,i,a,h){var y=s.toString();(s=this.g[y])||(s=this.g[y]=[],this.h++);var D=Ki(s,e,a,h);return-1<D?(e=s[D],i||(e.fa=!1)):((e=new ai(e,this.src,y,!!a,h)).fa=i,s.push(e)),e};var li="closure_lm_"+(1e6*Math.random()|0),yn={};function ur(s,e,i,a,h){if(a&&a.once)return Sr(s,e,i,a,h);if(Array.isArray(e)){for(var y=0;y<e.length;y++)ur(s,e[y],i,a,h);return null}return i=Ln(i),s&&s[_n]?s.N(e,i,at(a)?!!a.capture:!!a,h):hr(s,e,i,!1,a,h)}function hr(s,e,i,a,h,y){if(!e)throw Error("Invalid event type");var D=at(h)?!!h.capture:!!h,j=Rn(s);if(j||(s[li]=j=new xs(s)),(i=j.add(e,i,a,D,y)).proxy)return i;if(a=function(){var e=gn;return function s(i){return e.call(s.src,s.listener,i)}}(),i.proxy=a,a.src=s,a.listener=i,s.addEventListener)an||(h=D),void 0===h&&(h=!1),s.addEventListener(e.toString(),a,h);else if(s.attachEvent)s.attachEvent(vt(e.toString()),a);else{if(!s.addListener||!s.removeListener)throw Error("addEventListener and attachEvent are unavailable.");s.addListener(a)}return i}function Sr(s,e,i,a,h){if(Array.isArray(e)){for(var y=0;y<e.length;y++)Sr(s,e[y],i,a,h);return null}return i=Ln(i),s&&s[_n]?s.O(e,i,at(a)?!!a.capture:!!a,h):hr(s,e,i,!0,a,h)}function qi(s,e,i,a,h){if(Array.isArray(e))for(var y=0;y<e.length;y++)qi(s,e[y],i,a,h);else a=at(a)?!!a.capture:!!a,i=Ln(i),s&&s[_n]?(s=s.i,(e=String(e).toString())in s.g&&-1<(i=Ki(y=s.g[e],i,a,h))&&(zi(y[i]),Array.prototype.splice.call(y,i,1),0==y.length&&(delete s.g[e],s.h--))):s&&(s=Rn(s))&&(e=s.g[e.toString()],s=-1,e&&(s=Ki(e,i,a,h)),(i=-1<s?e[s]:null)&&Er(i))}function Er(s){if("number"!=typeof s&&s&&!s.ca){var e=s.src;if(e&&e[_n])hn(e.i,s);else{var i=s.type,a=s.proxy;e.removeEventListener?e.removeEventListener(i,a,s.capture):e.detachEvent?e.detachEvent(vt(i),a):e.addListener&&e.removeListener&&e.removeListener(a),(i=Rn(e))?(hn(i,s),0==i.h&&(i.src=null,e[li]=null)):zi(s)}}}function vt(s){return s in yn?yn[s]:yn[s]="on"+s}function gn(s,e){if(s.ca)s=!0;else{e=new lr(e,this);var i=s.listener,a=s.ia||s.src;s.fa&&Er(s),s=i.call(a,e)}return s}function Rn(s){return(s=s[li])instanceof xs?s:null}var Rr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ln(s){return"function"==typeof s?s:(s[Rr]||(s[Rr]=function(e){return s.handleEvent(e)}),s[Rr])}function wn(){rn.call(this),this.i=new xs(this),this.P=this,this.I=null}function Hn(s,e){var i,a=s.I;if(a)for(i=[];a;a=a.I)i.push(a);if(s=s.P,a=e.type||e,"string"==typeof e)e=new Cn(e,s);else if(e instanceof Cn)e.target=e.target||s;else{var h=e;sn(e=new Cn(a,s),h)}if(h=!0,i)for(var y=i.length-1;0<=y;y--){var D=e.g=i[y];h=Vn(D,a,!0,e)&&h}if(h=Vn(D=e.g=s,a,!0,e)&&h,h=Vn(D,a,!1,e)&&h,i)for(y=0;y<i.length;y++)h=Vn(D=e.g=i[y],a,!1,e)&&h}function Vn(s,e,i,a){if(!(e=s.i.g[String(e)]))return!0;e=e.concat();for(var h=!0,y=0;y<e.length;++y){var D=e[y];if(D&&!D.ca&&D.capture==i){var j=D.listener,K=D.ia||D.src;D.fa&&hn(s.i,D),h=!1!==j.call(K,a)&&h}}return h&&!a.defaultPrevented}Jt(wn,rn),wn.prototype[_n]=!0,wn.prototype.removeEventListener=function(s,e,i,a){qi(this,s,e,i,a)},wn.prototype.M=function(){if(wn.Z.M.call(this),this.i){var e,s=this.i;for(e in s.g){for(var i=s.g[e],a=0;a<i.length;a++)zi(i[a]);delete s.g[e],s.h--}}this.I=null},wn.prototype.N=function(s,e,i,a){return this.i.add(String(s),e,!1,i,a)},wn.prototype.O=function(s,e,i,a){return this.i.add(String(s),e,!0,i,a)};var Rs=xe.JSON.stringify;function Cs(){var s=ye;let e=null;return s.g&&(e=s.g,s.g=s.g.next,s.g||(s.h=null),e.next=null),e}var Pr,Or=new class{constructor(s,e){this.i=s,this.j=e,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}(()=>new os,s=>s.reset());class os{constructor(){this.next=this.g=this.h=null}set(e,i){this.h=e,this.g=i,this.next=null}reset(){this.next=this.g=this.h=null}}function bs(s){xe.setTimeout(()=>{throw s},0)}function Os(s,e){Pr||function(){var s=xe.Promise.resolve(void 0);Pr=function(){s.then(Ge)}}(),ki||(Pr(),ki=!0),ye.add(s,e)}var ki=!1,ye=new class{constructor(){this.h=this.g=null}add(e,i){const a=Or.get();a.set(e,i),this.h?this.h.next=a:this.g=a,this.h=a}};function Ge(){for(var s;s=Cs();){try{s.h.call(s.g)}catch(i){bs(i)}var e=Or;e.j(s),100>e.h&&(e.h++,s.next=e.g,e.g=s)}ki=!1}function Ue(s,e){wn.call(this),this.h=s||1,this.g=e||xe,this.j=dn(this.kb,this),this.l=Date.now()}function Je(s){s.da=!1,s.S&&(s.g.clearTimeout(s.S),s.S=null)}function mt(s,e,i){if("function"==typeof s)i&&(s=dn(s,i));else{if(!s||"function"!=typeof s.handleEvent)throw Error("Invalid listener argument");s=dn(s.handleEvent,s)}return 2147483647<Number(e)?-1:xe.setTimeout(s,e||0)}function Ct(s){s.g=mt(()=>{s.g=null,s.i&&(s.i=!1,Ct(s))},s.j);const e=s.h;s.h=null,s.m.apply(null,e)}Jt(Ue,wn),(Ae=Ue.prototype).da=!1,Ae.S=null,Ae.kb=function(){if(this.da){var s=Date.now()-this.l;0<s&&s<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-s):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Hn(this,"tick"),this.da&&(Je(this),this.start()))}},Ae.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ae.M=function(){Ue.Z.M.call(this),Je(this),delete this.g};class un extends rn{constructor(e,i){super(),this.m=e,this.j=i,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ct(this)}M(){super.M(),this.g&&(xe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Un(s){rn.call(this),this.h=s,this.g={}}Jt(Un,rn);var In=[];function Pt(s,e,i,a){Array.isArray(i)||(i&&(In[0]=i.toString()),i=In);for(var h=0;h<i.length;h++){var y=ur(e,i[h],a||s.handleEvent,!1,s.h||s);if(!y)break;s.g[y.key]=y}}function Xn(s){jn(s.g,function(e,i){this.g.hasOwnProperty(i)&&Er(e)},s),s.g={}}function er(){this.g=!0}function he(s,e,i,a){s.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(s,e){if(!s.g)return e;if(!e)return null;try{var i=JSON.parse(e);if(i)for(s=0;s<i.length;s++)if(Array.isArray(i[s])){var a=i[s];if(!(2>a.length)){var h=a[1];if(Array.isArray(h)&&!(1>h.length)){var y=h[0];if("noop"!=y&&"stop"!=y&&"close"!=y)for(var D=1;D<h.length;D++)h[D]=""}}}return Rs(i)}catch(j){return e}}(s,i)+(a?" "+a:"")})}Un.prototype.M=function(){Un.Z.M.call(this),Xn(this)},Un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},er.prototype.Aa=function(){this.g=!1},er.prototype.info=function(){};var rr={},oo=null;function Li(){return oo=oo||new wn}function Zi(s){Cn.call(this,rr.Ma,s)}function ao(s){const e=Li();Hn(e,new Zi(e,s))}function Ps(s,e){Cn.call(this,rr.STAT_EVENT,s),this.stat=e}function Ir(s){const e=Li();Hn(e,new Ps(e,s))}function Ms(s,e){Cn.call(this,rr.Na,s),this.size=e}function Vi(s,e){if("function"!=typeof s)throw Error("Fn must not be null and must be a function");return xe.setTimeout(function(){s()},e)}rr.Ma="serverreachability",Jt(Zi,Cn),rr.STAT_EVENT="statevent",Jt(Ps,Cn),rr.Na="timingevent",Jt(Ms,Cn);var us={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},da={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Is(){}function Yi(){}Is.prototype.h=null;var lo,Do={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Vr(){Cn.call(this,"d")}function cs(){Cn.call(this,"c")}function Yr(){}function Kn(s,e,i,a){this.l=s,this.j=e,this.m=i,this.X=a||1,this.V=new Un(this),this.P=ds,this.W=new Ue(s=ei?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ks}function ks(){this.i=null,this.g="",this.h=!1}Jt(Vr,Cn),Jt(cs,Cn),Jt(Yr,Is),Yr.prototype.g=function(){return new XMLHttpRequest},Yr.prototype.i=function(){return{}},lo=new Yr;var ds=45e3,Ys={},Mr={};function Ii(s,e,i){s.K=1,s.v=k(H(e)),s.s=i,s.U=!0,Ds(s,null)}function Ds(s,e){s.F=Date.now(),ni(s),s.A=H(s.v);var i=s.A,a=s.X;Array.isArray(a)||(a=[String(a)]),El(i.h,"t",a),s.C=0,i=s.l.H,s.h=new ks,s.g=R(s.l,i?e:null,!s.s),0<s.O&&(s.L=new un(dn(s.Ia,s,s.g),s.O)),Pt(s.V,s.g,"readystatechange",s.gb),e=s.H?Qt(s.H):{},s.s?(s.u||(s.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.s,e)):(s.u="GET",s.g.ea(s.A,s.u,null,e)),ao(1),function(s,e,i,a,h,y){s.info(function(){if(s.g)if(y)for(var D="",j=y.split("&"),K=0;K<j.length;K++){var ae=j[K].split("=");if(1<ae.length){var Ee=ae[0];ae=ae[1];var Fe=Ee.split("_");D=2<=Fe.length&&"type"==Fe[1]?D+(Ee+"=")+ae+"&":D+(Ee+"=redacted&")}}else D=null;else D=y;return"XMLHTTP REQ ("+a+") [attempt "+h+"]: "+e+"\n"+i+"\n"+D})}(s.j,s.u,s.A,s.m,s.X,s.s)}function hs(s){return!!s.g&&"GET"==s.u&&2!=s.K&&s.l.Ba}function uo(s,e,i){let h,a=!0;for(;!s.I&&s.C<i.length;){if(h=$s(s,i),h==Mr){4==e&&(s.o=4,Ir(14),a=!1),he(s.j,s.m,null,"[Incomplete Response]");break}if(h==Ys){s.o=4,Ir(15),he(s.j,s.m,i,"[Invalid Chunk]"),a=!1;break}he(s.j,s.m,h,null),ii(s,h)}hs(s)&&h!=Mr&&h!=Ys&&(s.h.g="",s.C=0),4!=e||0!=i.length||s.h.h||(s.o=1,Ir(16),a=!1),s.i=s.i&&a,a?0<i.length&&!s.aa&&(s.aa=!0,(e=s.l).g==s&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+i.length),So(e),e.L=!0,Ir(11))):(he(s.j,s.m,i,"[Invalid Chunked Response]"),Qs(s),Ur(s))}function $s(s,e){var i=s.C,a=e.indexOf("\n",i);return-1==a?Mr:(i=Number(e.substring(i,a)),isNaN(i)?Ys:(a+=1)+i>e.length?Mr:(e=e.substr(a,i),s.C=a+i,e))}function ni(s){s.Y=Date.now()+s.P,Dr(s,s.P)}function Dr(s,e){if(null!=s.B)throw Error("WatchDog timer not null");s.B=Vi(dn(s.eb,s),e)}function ri(s){s.B&&(xe.clearTimeout(s.B),s.B=null)}function Ur(s){0==s.l.G||s.I||nn(s.l,s)}function Qs(s){ri(s);var e=s.L;e&&"function"==typeof e.na&&e.na(),s.L=null,Je(s.W),Xn(s.V),s.g&&(e=s.g,s.g=null,e.abort(),e.na())}function ii(s,e){try{var i=s.l;if(0!=i.G&&(i.g==s||$o(i.i,s)))if(i.I=s.N,!s.J&&$o(i.i,s)&&3==i.G){try{var a=i.Ca.g.parse(e)}catch(ae){a=null}if(Array.isArray(a)&&3==a.length){var h=a;if(0==h[0])e:if(i.u)i.ta=h[1],0<i.ta-i.U&&37500>h[2]&&i.N&&0==i.A&&!i.v&&(i.v=Vi(dn(i.ab,i),6e3));else{if(i.g){if(!(i.g.F+3e3<s.F))break e;pr(i),mr(i)}La(i),Ir(18)}if(1>=Br(i.i)&&i.ka){try{i.ka()}catch(ae){}i.ka=void 0}}else ps(i,11)}else if((s.J||i.g==s)&&pr(i),!Yn(e))for(h=i.Ca.g.parse(e),e=0;e<h.length;e++){let ae=h[e];if(i.U=ae[0],ae=ae[1],2==i.G)if("c"==ae[0]){i.J=ae[1],i.la=ae[2];const Ee=ae[3];null!=Ee&&(i.ma=Ee,i.h.info("VER="+i.ma));const Fe=ae[4];null!=Fe&&(i.za=Fe,i.h.info("SVER="+i.za));const nt=ae[5];null!=nt&&"number"==typeof nt&&0<nt&&(i.K=a=1.5*nt,i.h.info("backChannelRequestTimeoutMs_="+a)),a=i;const _t=s.g;if(_t){const At=_t.g?_t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(At){var y=a.i;!y.g&&(Nt(At,"spdy")||Nt(At,"quic")||Nt(At,"h2"))&&(y.j=y.l,y.g=new Set,y.h&&(To(y,y.h),y.h=null))}if(a.D){const pn=_t.g?_t.g.getResponseHeader("X-HTTP-Session-Id"):null;pn&&(a.sa=pn,F(a.F,a.D,pn))}}i.G=3,i.j&&i.j.xa(),i.$&&(i.O=Date.now()-s.F,i.h.info("Handshake RTT: "+i.O+"ms"));var D=s;if((a=i).oa=$r(a,a.H?a.la:null,a.W),D.J){Js(a.i,D);var j=D,K=a.K;K&&j.setTimeout(K),j.B&&(ri(j),ni(j)),a.g=D}else Zo(a);0<i.l.length&&Bn(i)}else"stop"!=ae[0]&&"close"!=ae[0]||ps(i,7);else 3==i.G&&("stop"==ae[0]||"close"==ae[0]?"stop"==ae[0]?ps(i,7):po(i):"noop"!=ae[0]&&i.j&&i.j.wa(ae),i.A=0)}ao(4)}catch(ae){}}function Ui(s,e){if(s.forEach&&"function"==typeof s.forEach)s.forEach(e,void 0);else if(Le(s)||"string"==typeof s)Fn(s,e,void 0);else{if(s.T&&"function"==typeof s.T)var i=s.T();else if(s.R&&"function"==typeof s.R)i=void 0;else if(Le(s)||"string"==typeof s){i=[];for(var a=s.length,h=0;h<a;h++)i.push(h)}else for(h in i=[],a=0,s)i[a++]=h;h=(a=function(s){if(s.R&&"function"==typeof s.R)return s.R();if("string"==typeof s)return s.split("");if(Le(s)){for(var e=[],i=s.length,a=0;a<i;a++)e.push(s[a]);return e}for(a in e=[],i=0,s)e[i++]=s[a];return e}(s)).length;for(var y=0;y<h;y++)e.call(void 0,a[y],i&&i[y],s)}}function ui(s,e){this.h={},this.g=[],this.i=0;var i=arguments.length;if(1<i){if(i%2)throw Error("Uneven number of arguments");for(var a=0;a<i;a+=2)this.set(arguments[a],arguments[a+1])}else if(s)if(s instanceof ui)for(i=s.T(),a=0;a<i.length;a++)this.set(i[a],s.get(i[a]));else for(a in s)this.set(a,s[a])}function Ts(s){if(s.i!=s.g.length){for(var e=0,i=0;e<s.g.length;){var a=s.g[e];Bi(s.h,a)&&(s.g[i++]=a),e++}s.g.length=i}if(s.i!=s.g.length){var h={};for(i=e=0;e<s.g.length;)Bi(h,a=s.g[e])||(s.g[i++]=a,h[a]=1),e++;s.g.length=i}}function Bi(s,e){return Object.prototype.hasOwnProperty.call(s,e)}(Ae=Kn.prototype).setTimeout=function(s){this.P=s},Ae.gb=function(s){s=s.target;const e=this.L;e&&3==Xs(s)?e.l():this.Ia(s)},Ae.Ia=function(s){try{if(s==this.g)e:{const Ee=Xs(this.g);var e=this.g.Da();const Fe=this.g.ba();if(!(3>Ee)&&(3!=Ee||ei||this.g&&(this.h.h||this.g.ga()||bl(this.g)))){this.I||4!=Ee||7==e||ao(8==e||0>=Fe?3:2),ri(this);var i=this.g.ba();this.N=i;t:if(hs(this)){var a=bl(this.g);s="";var h=a.length,y=4==Xs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qs(this),Ur(this);var D="";break t}this.h.i=new xe.TextDecoder}for(e=0;e<h;e++)this.h.h=!0,s+=this.h.i.decode(a[e],{stream:y&&e==h-1});a.splice(0,h),this.h.g+=s,this.C=0,D=this.h.g}else D=this.g.ga();if(this.i=200==i,function(s,e,i,a,h,y,D){s.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+h+"]: "+e+"\n"+i+"\n"+y+" "+D})}(this.j,this.u,this.A,this.m,this.X,Ee,i),this.i){if(this.$&&!this.J){t:{if(this.g){var j,K=this.g;if((j=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yn(j)){var ae=j;break t}}ae=null}if(!(i=ae)){this.i=!1,this.o=3,Ir(12),Qs(this),Ur(this);break e}he(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ii(this,i)}this.U?(uo(this,Ee,D),ei&&this.i&&3==Ee&&(Pt(this.V,this.W,"tick",this.fb),this.W.start())):(he(this.j,this.m,D,null),ii(this,D)),4==Ee&&Qs(this),this.i&&!this.I&&(4==Ee?nn(this.l,this):(this.i=!1,ni(this)))}else 400==i&&0<D.indexOf("Unknown SID")?(this.o=3,Ir(12)):(this.o=0,Ir(13)),Qs(this),Ur(this)}}}catch(Ee){}},Ae.fb=function(){if(this.g){var s=Xs(this.g),e=this.g.ga();this.C<e.length&&(ri(this),uo(this,s,e),this.i&&4!=s&&ni(this))}},Ae.cancel=function(){this.I=!0,Qs(this)},Ae.eb=function(){this.B=null;const s=Date.now();0<=s-this.Y?(function(s,e){s.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ao(3),Ir(17)),Qs(this),this.o=2,Ur(this)):Dr(this,this.Y-s)},(Ae=ui.prototype).R=function(){Ts(this);for(var s=[],e=0;e<this.g.length;e++)s.push(this.h[this.g[e]]);return s},Ae.T=function(){return Ts(this),this.g.concat()},Ae.get=function(s,e){return Bi(this.h,s)?this.h[s]:e},Ae.set=function(s,e){Bi(this.h,s)||(this.i++,this.g.push(s)),this.h[s]=e},Ae.forEach=function(s,e){for(var i=this.T(),a=0;a<i.length;a++){var h=i[a],y=this.get(h);s.call(e,y,h,this)}};var Ma=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Q(s,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,s instanceof Q){this.g=void 0!==e?e:s.g,te(this,s.j),this.s=s.s,Ce(this,s.i),Xe(this,s.m),this.l=s.l,e=s.h;var i=new Zt;i.i=e.i,e.g&&(i.g=new ui(e.g),i.h=e.h),ht(this,i),this.o=s.o}else s&&(i=String(s).match(Ma))?(this.g=!!e,te(this,i[1]||"",!0),this.s=Ve(i[2]||""),Ce(this,i[3]||"",!0),Xe(this,i[4]),this.l=Ve(i[5]||"",!0),ht(this,i[6]||"",!0),this.o=Ve(i[7]||"")):(this.g=!!e,this.h=new Zt(null,this.g))}function H(s){return new Q(s)}function te(s,e,i){s.j=i?Ve(e,!0):e,s.j&&(s.j=s.j.replace(/:$/,""))}function Ce(s,e,i){s.i=i?Ve(e,!0):e}function Xe(s,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);s.m=e}else s.m=null}function ht(s,e,i){e instanceof Zt?(s.h=e,function(s,e){e&&!s.j&&(Qi(s),s.i=null,s.g.forEach(function(i,a){var h=a.toLowerCase();a!=h&&(ha(this,a),El(this,h,i))},s)),s.j=e}(s.h,s.g)):(i||(e=pt(e,Ti)),s.h=new Zt(e,s.g))}function F(s,e,i){s.h.set(e,i)}function k(s){return F(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function Ve(s,e){return s?e?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function pt(s,e,i){return"string"==typeof s?(s=encodeURI(s).replace(e,tn),i&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function tn(s){return"%"+((s=s.charCodeAt(0))>>4&15).toString(16)+(15&s).toString(16)}Q.prototype.toString=function(){var s=[],e=this.j;e&&s.push(pt(e,Mn,!0),":");var i=this.i;return(i||"file"==e)&&(s.push("//"),(e=this.s)&&s.push(pt(e,Mn,!0),"@"),s.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&s.push(":",String(i))),(i=this.l)&&(this.i&&"/"!=i.charAt(0)&&s.push("/"),s.push(pt(i,"/"==i.charAt(0)?Nr:Di,!0))),(i=this.h.toString())&&s.push("?",i),(i=this.o)&&s.push("#",pt(i,fs)),s.join("")};var Mn=/[#\/\?@]/g,Di=/[#\?:]/g,Nr=/[#\?]/g,Ti=/[#\?@]/g,fs=/#/g;function Zt(s,e){this.h=this.g=null,this.i=s||null,this.j=!!e}function Qi(s){s.g||(s.g=new ui,s.h=0,s.i&&function(s,e){if(s){s=s.split("&");for(var i=0;i<s.length;i++){var a=s[i].indexOf("="),h=null;if(0<=a){var y=s[i].substring(0,a);h=s[i].substring(a+1)}else y=s[i];e(y,h?decodeURIComponent(h.replace(/\+/g," ")):"")}}}(s.i,function(e,i){s.add(decodeURIComponent(e.replace(/\+/g," ")),i)}))}function ha(s,e){Qi(s),e=co(s,e),Bi(s.g.h,e)&&(s.i=null,s.h-=s.g.get(e).length,Bi((s=s.g).h,e)&&(delete s.h[e],s.i--,s.g.length>2*s.i&&Ts(s)))}function wl(s,e){return Qi(s),e=co(s,e),Bi(s.g.h,e)}function El(s,e,i){ha(s,e),0<i.length&&(s.i=null,s.g.set(co(s,e),Gn(i)),s.h+=i.length)}function co(s,e){return e=String(e),s.j&&(e=e.toLowerCase()),e}function ft(s){this.l=s||Nn,s=xe.PerformanceNavigationTiming?0<(s=xe.performance.getEntriesByType("navigation")).length&&("hq"==s[0].nextHopProtocol||"h2"==s[0].nextHopProtocol):!!(xe.g&&xe.g.Ea&&xe.g.Ea()&&xe.g.Ea().Zb),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ae=Zt.prototype).add=function(s,e){Qi(this),this.i=null,s=co(this,s);var i=this.g.get(s);return i||this.g.set(s,i=[]),i.push(e),this.h+=1,this},Ae.forEach=function(s,e){Qi(this),this.g.forEach(function(i,a){Fn(i,function(h){s.call(e,h,a,this)},this)},this)},Ae.T=function(){Qi(this);for(var s=this.g.R(),e=this.g.T(),i=[],a=0;a<e.length;a++)for(var h=s[a],y=0;y<h.length;y++)i.push(e[a]);return i},Ae.R=function(s){Qi(this);var e=[];if("string"==typeof s)wl(this,s)&&(e=Gt(e,this.g.get(co(this,s))));else{s=this.g.R();for(var i=0;i<s.length;i++)e=Gt(e,s[i])}return e},Ae.set=function(s,e){return Qi(this),this.i=null,wl(this,s=co(this,s))&&(this.h-=this.g.get(s).length),this.g.set(s,[e]),this.h+=1,this},Ae.get=function(s,e){return s&&0<(s=this.R(s)).length?String(s[0]):e},Ae.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var s=[],e=this.g.T(),i=0;i<e.length;i++){var a=e[i],h=encodeURIComponent(String(a));a=this.R(a);for(var y=0;y<a.length;y++){var D=h;""!==a[y]&&(D+="="+encodeURIComponent(String(a[y]))),s.push(D)}}return this.i=s.join("&")};var Nn=10;function pa(s){return!!s.h||!!s.g&&s.g.size>=s.j}function Br(s){return s.h?1:s.g?s.g.size:0}function $o(s,e){return s.h?s.h==e:!!s.g&&s.g.has(e)}function To(s,e){s.g?s.g.add(e):s.h=e}function Js(s,e){s.h&&s.h==e?s.h=null:s.g&&s.g.has(e)&&s.g.delete(e)}function Wo(s){if(null!=s.h)return s.i.concat(s.h.D);if(null!=s.g&&0!==s.g.size){let e=s.i;for(const i of s.g.values())e=e.concat(i.D);return e}return Gn(s.i)}function ga(){}function ic(){this.g=new ga}function Du(s,e,i){const a=i||"";try{Ui(s,function(h,y){let D=h;at(h)&&(D=Rs(h)),e.push(a+y+"="+encodeURIComponent(D))})}catch(h){throw e.push(a+"type="+encodeURIComponent("_badmap")),h}}function ma(s,e,i,a,h){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,h(a)}catch(y){}}function jr(s){this.l=s.$b||null,this.j=s.ib||!1}function gi(s,e){wn.call(this),this.D=s,this.u=e,this.m=void 0,this.readyState=Go,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ft.prototype.cancel=function(){if(this.i=Wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const s of this.g.values())s.cancel();this.g.clear()}},ga.prototype.stringify=function(s){return xe.JSON.stringify(s,void 0)},ga.prototype.parse=function(s){return xe.JSON.parse(s,void 0)},Jt(jr,Is),jr.prototype.g=function(){return new gi(this.l,this.j)},jr.prototype.i=function(s){return function(){return s}}({}),Jt(gi,wn);var Go=0;function _a(s){s.j.read().then(s.Sa.bind(s)).catch(s.ha.bind(s))}function Ji(s){s.readyState=4,s.l=null,s.j=null,s.A=null,ho(s)}function ho(s){s.onreadystatechange&&s.onreadystatechange.call(s)}(Ae=gi.prototype).open=function(s,e){if(this.readyState!=Go)throw this.abort(),Error("Error reopening a connection");this.C=s,this.B=e,this.readyState=1,ho(this)},Ae.send=function(s){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};s&&(e.body=s),(this.D||xe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ae.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ji(this)),this.readyState=Go},Ae.Va=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,ho(this)),this.g&&(this.readyState=3,ho(this),this.g)))if("arraybuffer"===this.responseType)s.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==xe.ReadableStream&&"body"in s){if(this.j=s.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_a(this)}else s.text().then(this.Ua.bind(this),this.ha.bind(this))},Ae.Sa=function(s){if(this.g){if(this.u&&s.value)this.response.push(s.value);else if(!this.u){var e=s.value?s.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!s.done}))&&(this.response=this.responseText+=e)}s.done?Ji(this):ho(this),3==this.readyState&&_a(this)}},Ae.Ua=function(s){this.g&&(this.response=this.responseText=s,Ji(this))},Ae.Ta=function(s){this.g&&(this.response=s,Ji(this))},Ae.ha=function(){this.g&&Ji(this)},Ae.setRequestHeader=function(s,e){this.v.append(s,e)},Ae.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},Ae.getAllResponseHeaders=function(){if(!this.h)return"";const s=[],e=this.h.entries();for(var i=e.next();!i.done;)s.push((i=i.value)[0]+": "+i[1]),i=e.next();return s.join("\r\n")},Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var zo=xe.JSON.parse;function kr(s){wn.call(this),this.headers=new ui,this.u=s||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Xa,this.K=this.L=!1}Jt(kr,wn);var Xa="",Cl=/^https?$/i,Ko=["POST","PUT"];function qo(s){return"content-type"==s.toLowerCase()}function ka(s,e){s.h=!1,s.g&&(s.l=!0,s.g.abort(),s.l=!1),s.j=e,s.m=5,Fa(s),fo(s)}function Fa(s){s.D||(s.D=!0,Hn(s,"complete"),Hn(s,"error"))}function ya(s){if(s.h&&void 0!==$e&&(!s.C[1]||4!=Xs(s)||2!=s.ba()))if(s.v&&4==Xs(s))mt(s.Fa,0,s);else if(Hn(s,"readystatechange"),4==Xs(s)){s.h=!1;try{const j=s.ba();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var i;if(!(i=e)){var a;if(a=0===j){var h=String(s.H).match(Ma)[1]||null;if(!h&&xe.self&&xe.self.location){var y=xe.self.location.protocol;h=y.substr(0,y.length-1)}a=!Cl.test(h?h.toLowerCase():"")}i=a}if(i)Hn(s,"complete"),Hn(s,"success");else{s.m=6;try{var D=2<Xs(s)?s.g.statusText:""}catch(K){D=""}s.j=D+" ["+s.ba()+"]",Fa(s)}}finally{fo(s)}}}function fo(s,e){if(s.g){el(s);const i=s.g,a=s.C[0]?He:null;s.g=null,s.C=null,e||Hn(s,"ready");try{i.onreadystatechange=a}catch(h){}}}function el(s){s.g&&s.K&&(s.g.ontimeout=null),s.A&&(xe.clearTimeout(s.A),s.A=null)}function Xs(s){return s.g?s.g.readyState:0}function bl(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.J){case Xa:case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch(e){return null}}function nl(s,e,i){e:{for(a in i){var a=!1;break e}a=!0}a||(i=function(s){let e="";return jn(s,function(i,a){e+=a,e+=":",e+=i,e+="\r\n"}),e}(i),"string"==typeof s?null!=i&&encodeURIComponent(String(i)):F(s,e,i))}function Ao(s,e,i){return i&&i.internalChannelParams&&i.internalChannelParams[s]||e}function Xi(s){this.za=0,this.l=[],this.h=new er,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ao("failFast",!1,s),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ao("baseRetryDelayMs",5e3,s),this.$a=Ao("retryDelaySeedMs",1e4,s),this.Ya=Ao("forwardChannelMaxRetries",2,s),this.ra=Ao("forwardChannelRequestTimeoutMs",2e4,s),this.qa=s&&s.xmlHttpFactory||void 0,this.Ba=s&&s.Yb||!1,this.K=void 0,this.H=s&&s.supportsCrossDomainXhr||!1,this.J="",this.i=new ft(s&&s.concurrentRequestLimit),this.Ca=new ic,this.ja=s&&s.fastHandshake||!1,this.Ra=s&&s.Wb||!1,s&&s.Aa&&this.h.Aa(),s&&s.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&s&&s.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!s||!1!==s.Xb}function po(s){if(zl(s),3==s.G){var e=s.V++,i=H(s.F);F(i,"SID",s.J),F(i,"RID",e),F(i,"TYPE","terminate"),Ai(s,i),(e=new Kn(s,s.h,e,void 0)).K=2,e.v=k(H(i)),i=!1,xe.navigator&&xe.navigator.sendBeacon&&(i=xe.navigator.sendBeacon(e.v.toString(),"")),!i&&xe.Image&&((new Image).src=e.v,i=!0),i||(e.g=R(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ni(e)}gs(s)}function mr(s){s.g&&(So(s),s.g.cancel(),s.g=null)}function zl(s){mr(s),s.u&&(xe.clearTimeout(s.u),s.u=null),pr(s),s.i.cancel(),s.m&&("number"==typeof s.m&&xe.clearTimeout(s.m),s.m=null)}function Kl(s,e){s.l.push(new class{constructor(s,e){this.h=s,this.g=e}}(s.Za++,e)),3==s.G&&Bn(s)}function Bn(s){pa(s.i)||s.m||(s.m=!0,Os(s.Ha,s),s.C=0)}function Tn(s,e){var i;i=e?e.m:s.V++;const a=H(s.F);F(a,"SID",s.J),F(a,"RID",i),F(a,"AID",s.U),Ai(s,a),s.o&&s.s&&nl(a,s.o,s.s),i=new Kn(s,s.h,i,s.C+1),null===s.o&&(i.H=s.s),e&&(s.l=e.D.concat(s.l)),e=ir(s,i,1e3),i.setTimeout(Math.round(.5*s.ra)+Math.round(.5*s.ra*Math.random())),To(s.i,i),Ii(i,a,e)}function Ai(s,e){s.j&&Ui({},function(i,a){F(e,a,i)})}function ir(s,e,i){i=Math.min(s.l.length,i);var a=s.j?dn(s.j.Oa,s.j,s):null;e:{var h=s.l;let y=-1;for(;;){const D=["count="+i];-1==y?0<i?(y=h[0].h,D.push("ofs="+y)):y=0:D.push("ofs="+y);let j=!0;for(let K=0;K<i;K++){let ae=h[K].h;const Ee=h[K].g;if(ae-=y,0>ae)y=Math.max(0,h[K].h-100),j=!1;else try{Du(Ee,D,"req"+ae+"_")}catch(Fe){a&&a(Ee)}}if(j){a=D.join("&");break e}}}return s=s.l.splice(0,i),e.D=s,a}function Zo(s){s.g||s.u||(s.Y=1,Os(s.Ga,s),s.A=0)}function La(s){return!(s.g||s.u||3<=s.A||(s.Y++,s.u=Vi(dn(s.Ga,s),Hr(s,s.A)),s.A++,0))}function So(s){null!=s.B&&(xe.clearTimeout(s.B),s.B=null)}function Si(s){s.g=new Kn(s,s.h,"rpc",s.Y),null===s.o&&(s.g.H=s.s),s.g.O=0;var e=H(s.oa);F(e,"RID","rpc"),F(e,"SID",s.J),F(e,"CI",s.N?"0":"1"),F(e,"AID",s.U),Ai(s,e),F(e,"TYPE","xmlhttp"),s.o&&s.s&&nl(e,s.o,s.s),s.K&&s.g.setTimeout(s.K);var i=s.g;s=s.la,i.K=1,i.v=k(H(e)),i.s=null,i.U=!0,Ds(i,s)}function pr(s){null!=s.v&&(xe.clearTimeout(s.v),s.v=null)}function nn(s,e){var i=null;if(s.g==e){pr(s),So(s),s.g=null;var a=2}else{if(!$o(s.i,e))return;i=e.D,Js(s.i,e),a=1}if(s.I=e.N,0!=s.G)if(e.i)if(1==a){i=e.s?e.s.length:0,e=Date.now()-e.F;var h=s.C;Hn(a=Li(),new Ms(a,i,e,h)),Bn(s)}else Zo(s);else if(3==(h=e.o)||0==h&&0<s.I||!(1==a&&function(s,e){return!(Br(s.i)>=s.i.j-(s.m?1:0)||(s.m?(s.l=e.D.concat(s.l),0):1==s.G||2==s.G||s.C>=(s.Xa?0:s.Ya)||(s.m=Vi(dn(s.Ha,s,e),Hr(s,s.C)),s.C++,0)))}(s,e)||2==a&&La(s)))switch(i&&0<i.length&&(e=s.i,e.i=e.i.concat(i)),h){case 1:ps(s,5);break;case 4:ps(s,10);break;case 3:ps(s,6);break;default:ps(s,2)}}function Hr(s,e){let i=s.Pa+Math.floor(Math.random()*s.$a);return s.j||(i*=2),i*e}function ps(s,e){if(s.h.info("Error code "+e),2==e){var i=null;s.j&&(i=null);var a=dn(s.jb,s);i||(i=new Q("//www.google.com/images/cleardot.gif"),xe.location&&"http"==xe.location.protocol||te(i,"https"),k(i)),function(s,e){const i=new er;if(xe.Image){const a=new Image;a.onload=nr(ma,i,a,"TestLoadImage: loaded",!0,e),a.onerror=nr(ma,i,a,"TestLoadImage: error",!1,e),a.onabort=nr(ma,i,a,"TestLoadImage: abort",!1,e),a.ontimeout=nr(ma,i,a,"TestLoadImage: timeout",!1,e),xe.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=s}else e(!1)}(i.toString(),a)}else Ir(2);s.G=0,s.j&&s.j.va(e),gs(s),zl(s)}function gs(s){s.G=0,s.I=-1,s.j&&((0!=Wo(s.i).length||0!=s.l.length)&&(s.i.i.length=0,Gn(s.l),s.l.length=0),s.j.ua())}function $r(s,e,i){let a=function(s){return s instanceof Q?H(s):new Q(s,void 0)}(i);if(""!=a.i)e&&Ce(a,e+"."+a.i),Xe(a,a.m);else{const h=xe.location;a=function(s,e,i,a){var h=new Q(null,void 0);return s&&te(h,s),e&&Ce(h,e),i&&Xe(h,i),a&&(h.l=a),h}(h.protocol,e?e+"."+h.hostname:h.hostname,+h.port,i)}return s.aa&&jn(s.aa,function(h,y){F(a,y,h)}),i=s.sa,(e=s.D)&&i&&F(a,e,i),F(a,"VER",s.ma),Ai(s,a),a}function R(s,e,i){if(e&&!s.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new kr(i&&s.Ba&&!s.qa?new jr({ib:!0}):s.qa)).L=s.H,e}function N(){}function z(){if(It&&!(10<=Number(Vt)))throw Error("Environmental error: no available transport.")}function we(s,e){wn.call(this),this.g=new Xi(e),this.l=s,this.h=e&&e.messageUrlParams||null,s=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.s=s,s=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(s?s["X-WebChannel-Content-Type"]=e.messageContentType:s={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(s?s["X-WebChannel-Client-Profile"]=e.ya:s={"X-WebChannel-Client-Profile":e.ya}),this.g.P=s,(s=e&&e.httpHeadersOverwriteParam)&&!Yn(s)&&(this.g.o=s),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yn(e)&&(this.g.D=e,null!==(s=this.h)&&e in s&&e in(s=this.h)&&delete s[e]),this.j=new _r(this)}function dt(s){Vr.call(this);var e=s.__sm__;if(e){e:{for(const i in e){s=i;break e}s=void 0}(this.i=s)&&(s=this.i,e=null!==e&&s in e?e[s]:void 0),this.data=e}else this.data=s}function Bt(){cs.call(this),this.status=1}function _r(s){this.g=s}(Ae=kr.prototype).ea=function(s,e,i,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+s);e=e?e.toUpperCase():"GET",this.H=s,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lo.g(),this.C=function(s){return s.h||(s.h=s.i())}(this.u?this.u:lo),this.g.onreadystatechange=dn(this.Fa,this);try{this.F=!0,this.g.open(e,String(s),!0),this.F=!1}catch(y){return void ka(this,y)}s=i||"";const h=new ui(this.headers);a&&Ui(a,function(y,D){h.set(D,y)}),a=function(s){e:{var e=qo;const i=s.length,a="string"==typeof s?s.split(""):s;for(let h=0;h<i;h++)if(h in a&&e.call(void 0,a[h],h,s)){e=h;break e}e=-1}return 0>e?null:"string"==typeof s?s.charAt(e):s[e]}(h.T()),i=xe.FormData&&s instanceof xe.FormData,!(0<=Kt(Ko,e))||a||i||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.forEach(function(y,D){this.g.setRequestHeader(D,y)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{el(this),0<this.B&&((this.K=function(s){return It&&ot()&&"number"==typeof s.timeout&&void 0!==s.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=dn(this.pa,this)):this.A=mt(this.pa,this.B,this)),this.v=!0,this.g.send(s),this.v=!1}catch(y){ka(this,y)}},Ae.pa=function(){void 0!==$e&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hn(this,"timeout"),this.abort(8))},Ae.abort=function(s){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=s||7,Hn(this,"complete"),Hn(this,"abort"),fo(this))},Ae.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fo(this,!0)),kr.Z.M.call(this)},Ae.Fa=function(){this.s||(this.F||this.v||this.l?ya(this):this.cb())},Ae.cb=function(){ya(this)},Ae.ba=function(){try{return 2<Xs(this)?this.g.status:-1}catch(s){return-1}},Ae.ga=function(){try{return this.g?this.g.responseText:""}catch(s){return""}},Ae.Qa=function(s){if(this.g){var e=this.g.responseText;return s&&0==e.indexOf(s)&&(e=e.substring(s.length)),zo(e)}},Ae.Da=function(){return this.m},Ae.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ae=Xi.prototype).ma=8,Ae.G=1,Ae.hb=function(s){try{this.h.info("Origin Trials invoked: "+s)}catch(e){}},Ae.Ha=function(s){if(this.m)if(this.m=null,1==this.G){if(!s){this.V=Math.floor(1e5*Math.random()),s=this.V++;const h=new Kn(this,this.h,s,void 0);let y=this.s;if(this.P&&(y?(y=Qt(y),sn(y,this.P)):y=this.P),null===this.o&&(h.H=y),this.ja)e:{for(var e=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=i;break e}if(4096===e||i===this.l.length-1){e=i+1;break e}}e=1e3}else e=1e3;e=ir(this,h,e),F(i=H(this.F),"RID",s),F(i,"CVER",22),this.D&&F(i,"X-HTTP-Session-Id",this.D),Ai(this,i),this.o&&y&&nl(i,this.o,y),To(this.i,h),this.Ra&&F(i,"TYPE","init"),this.ja?(F(i,"$req",e),F(i,"SID","null"),h.$=!0,Ii(h,i,null)):Ii(h,i,e),this.G=2}}else 3==this.G&&(s?Tn(this,s):0==this.l.length||pa(this.i)||Tn(this))},Ae.Ga=function(){if(this.u=null,Si(this),this.$&&!(this.L||null==this.g||0>=this.O)){var s=2*this.O;this.h.info("BP detection timer enabled: "+s),this.B=Vi(dn(this.bb,this),s)}},Ae.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ir(10),mr(this),Si(this))},Ae.ab=function(){null!=this.v&&(this.v=null,mr(this),La(this),Ir(19))},Ae.jb=function(s){s?(this.h.info("Successfully pinged google.com"),Ir(2)):(this.h.info("Failed to ping google.com"),Ir(1))},(Ae=N.prototype).xa=function(){},Ae.wa=function(){},Ae.va=function(){},Ae.ua=function(){},Ae.Oa=function(){},z.prototype.g=function(s,e){return new we(s,e)},Jt(we,wn),we.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var s=this.g,e=this.l,i=this.h||void 0;s.Wa&&(s.h.info("Origin Trials enabled."),Os(dn(s.hb,s,e))),Ir(0),s.W=e,s.aa=i||{},s.N=s.X,s.F=$r(s,null,s.W),Bn(s)},we.prototype.close=function(){po(this.g)},we.prototype.u=function(s){if("string"==typeof s){var e={};e.__data__=s,Kl(this.g,e)}else this.v?((e={}).__data__=Rs(s),Kl(this.g,e)):Kl(this.g,s)},we.prototype.M=function(){this.g.j=null,delete this.j,po(this.g),delete this.g,we.Z.M.call(this)},Jt(dt,Vr),Jt(Bt,cs),Jt(_r,N),_r.prototype.xa=function(){Hn(this.g,"a")},_r.prototype.wa=function(s){Hn(this.g,new dt(s))},_r.prototype.va=function(s){Hn(this.g,new Bt(s))},_r.prototype.ua=function(){Hn(this.g,"b")},z.prototype.createWebChannel=z.prototype.g,we.prototype.send=we.prototype.u,we.prototype.open=we.prototype.m,we.prototype.close=we.prototype.close,us.NO_ERROR=0,us.TIMEOUT=8,us.HTTP_ERROR=6,da.COMPLETE="complete",Yi.EventType=Do,Do.OPEN="a",Do.CLOSE="b",Do.ERROR="c",Do.MESSAGE="d",wn.prototype.listen=wn.prototype.N,kr.prototype.listenOnce=kr.prototype.O,kr.prototype.getLastError=kr.prototype.La,kr.prototype.getLastErrorCode=kr.prototype.Da,kr.prototype.getStatus=kr.prototype.ba,kr.prototype.getResponseJson=kr.prototype.Qa,kr.prototype.getResponseText=kr.prototype.ga,kr.prototype.send=kr.prototype.ea;var ji=Be.createWebChannelTransport=function(){return new z},si=Be.getStatEventTarget=function(){return Li()},es=Be.ErrorCode=us,Wr=Be.EventType=da,Il=Be.Event=rr,Tu=Be.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},rl=Be.FetchXmlHttpFactory=jr,Ws=Be.WebChannel=Yi,On=Be.XhrIo=kr;const Au="@firebase/firestore";class ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");let va="9.6.1";const xi=new Wt.Yd("@firebase/firestore");function il(){return xi.logLevel}function bt(s,...e){if(xi.logLevel<=Wt.in.DEBUG){const i=e.map(Qo);xi.debug(`Firestore (${va}): ${s}`,...i)}}function sr(s,...e){if(xi.logLevel<=Wt.in.ERROR){const i=e.map(Qo);xi.error(`Firestore (${va}): ${s}`,...i)}}function Yo(s,...e){if(xi.logLevel<=Wt.in.WARN){const i=e.map(Qo);xi.warn(`Firestore (${va}): ${s}`,...i)}}function Qo(s){if("string"==typeof s)return s;try{return JSON.stringify(s)}catch(i){return s}}function qt(s="Unexpected state"){const e=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: `+s;throw sr(e),new Error(e)}function bn(s,e){s||qt()}function I(s,e){return s}const C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends Error{constructor(e,i){super(i),this.code=e,this.message=i,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ${constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}class X{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ve{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(ci.UNAUTHENTICATED))}shutdown(){}}class Oe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class st{constructor(e){this.t=e,this.currentUser=ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){var a=this;let h=this.i;const y=ae=>this.i!==h?(h=this.i,i(ae)):Promise.resolve();let D=new $;this.o=()=>{this.i++,this.currentUser=this.u(),D.resolve(),D=new $,e.enqueueRetryable(()=>y(this.currentUser))};const j=()=>{const ae=D;e.enqueueRetryable((0,Ie.Z)(function*(){yield ae.promise,yield y(a.currentUser)}))},K=ae=>{bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ae,this.auth.addAuthTokenListener(this.o),j()};this.t.onInit(ae=>K(ae)),setTimeout(()=>{if(!this.auth){const ae=this.t.getImmediate({optional:!0});ae?K(ae):(bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),D.resolve(),D=new $)}},0),j()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(a=>this.i!==e?(bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(bn("string"==typeof a.accessToken),new X(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bn(null===e||"string"==typeof e),new ci(e)}}class wt{constructor(e,i,a){this.type="FirstParty",this.user=ci.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",i);const h=e.auth.getAuthHeaderValueForFirstParty([]);h&&this.headers.set("Authorization",h),a&&this.headers.set("X-Goog-Iam-Authorization-Token",a)}}class $n{constructor(e,i,a){this.h=e,this.l=i,this.m=a}getToken(){return Promise.resolve(new wt(this.h,this.l,this.m))}start(e,i){e.enqueueRetryable(()=>i(ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gr{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,i){this.o=h=>{e.enqueueRetryable(()=>{return null!=(y=h).error&&bt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${y.error.message}`),i(y.token);var y})};const a=h=>{bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.g.onInit(h=>a(h)),setTimeout(()=>{if(!this.appCheck){const h=this.g.getImmediate({optional:!0});h?a(h):bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(bn("string"==typeof i.token),new cn(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class vr{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.p(a),this.T=a=>i.writeSequenceNumber(a))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Gr(s){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(i);else for(let a=0;a<s;a++)i[a]=Math.floor(256*Math.random());return i}vr.I=-1;class Ri{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const h=Gr(40);for(let y=0;y<h.length;++y)a.length<20&&h[y]<i&&(a+=e.charAt(h[y]%e.length))}return a}}function Rt(s,e){return s<e?-1:s>e?1:0}function Fs(s,e,i){return s.length===e.length&&s.every((a,h)=>i(a,e[h]))}function mi(s){return s+"\0"}class $i{constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new M(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new M(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<-62135596800)throw new M(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $i.fromMillis(Date.now())}static fromDate(e){return $i.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*i));return new $i(i,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new $i(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Uc(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function Su(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function Bc(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class wr{constructor(e,i,a){void 0===i?i=0:i>e.length&&qt(),void 0===a?a=e.length-i:a>e.length-i&&qt(),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return 0===wr.comparator(this,e)}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof wr?e.forEach(a=>{i.push(a)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let h=0;h<a;h++){const y=e.get(h),D=i.get(h);if(y<D)return-1;if(y>D)return 1}return e.length<i.length?-1:e.length>i.length?1:0}}class yr extends wr{construct(e,i,a){return new yr(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new M(C.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter(h=>h.length>0))}return new yr(i)}static emptyPath(){return new yr([])}}const Ad=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ls extends wr{construct(e,i,a){return new Ls(e,i,a)}static isValidIdentifier(e){return Ad.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ls.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ls(["__name__"])}static fromServerFormat(e){const i=[];let a="",h=0;const y=()=>{if(0===a.length)throw new M(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let D=!1;for(;h<e.length;){const j=e[h];if("\\"===j){if(h+1===e.length)throw new M(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const K=e[h+1];if("\\"!==K&&"."!==K&&"`"!==K)throw new M(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=K,h+=2}else"`"===j?(D=!D,h++):"."!==j||D?(a+=j,h++):(y(),h++)}if(y(),D)throw new M(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ls(i)}static emptyPath(){return new Ls([])}}class ql{constructor(e){this.fields=e,e.sort(Ls.comparator)}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return Fs(this.fields,e.fields,(i,a)=>i.isEqual(a))}}class ts{constructor(e){this.binaryString=e}static fromBase64String(e){const i=atob(e);return new ts(i)}static fromUint8Array(e){const i=function(a){let h="";for(let y=0;y<a.length;++y)h+=String.fromCharCode(a[y]);return h}(e);return new ts(i)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ts.EMPTY_BYTE_STRING=new ts("");const Ef=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function go(s){if(bn(!!s),"string"==typeof s){let e=0;const i=Ef.exec(s);if(bn(!!i),i[1]){let h=i[1];h=(h+"000000000").substr(0,9),e=Number(h)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:_i(s.seconds),nanos:_i(s.nanos)}}function _i(s){return"number"==typeof s?s:"string"==typeof s?Number(s):0}function wa(s){return"string"==typeof s?ts.fromBase64String(s):ts.fromUint8Array(s)}function oc(s){var e,i;return"server_timestamp"===(null===(i=((null===(e=null==s?void 0:s.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function Va(s){const e=s.mapValue.fields.__previous_value__;return oc(e)?Va(e):e}function Dl(s){const e=go(s.mapValue.fields.__local_write_time__.timestampValue);return new $i(e.seconds,e.nanos)}function zr(s){return null==s}function mo(s){return 0===s&&1/s==-1/0}function Ea(s){return"number"==typeof s&&Number.isInteger(s)&&!mo(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}class Xt{constructor(e){this.path=e}static fromPath(e){return new Xt(yr.fromString(e))}static fromName(e){return new Xt(yr.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===yr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,i){return yr.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xt(new yr(e.slice()))}}function Zl(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?oc(s)?4:10:qt()}function yi(s,e){const i=Zl(s);if(i!==Zl(e))return!1;switch(i){case 0:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Dl(s).isEqual(Dl(e));case 3:return function(a,h){if("string"==typeof a.timestampValue&&"string"==typeof h.timestampValue&&a.timestampValue.length===h.timestampValue.length)return a.timestampValue===h.timestampValue;const y=go(a.timestampValue),D=go(h.timestampValue);return y.seconds===D.seconds&&y.nanos===D.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return h=e,wa(s.bytesValue).isEqual(wa(h.bytesValue));case 7:return s.referenceValue===e.referenceValue;case 8:return function(a,h){return _i(a.geoPointValue.latitude)===_i(h.geoPointValue.latitude)&&_i(a.geoPointValue.longitude)===_i(h.geoPointValue.longitude)}(s,e);case 2:return function(a,h){if("integerValue"in a&&"integerValue"in h)return _i(a.integerValue)===_i(h.integerValue);if("doubleValue"in a&&"doubleValue"in h){const y=_i(a.doubleValue),D=_i(h.doubleValue);return y===D?mo(y)===mo(D):isNaN(y)&&isNaN(D)}return!1}(s,e);case 9:return Fs(s.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:return function(a,h){const y=a.mapValue.fields||{},D=h.mapValue.fields||{};if(Uc(y)!==Uc(D))return!1;for(const j in y)if(y.hasOwnProperty(j)&&(void 0===D[j]||!yi(y[j],D[j])))return!1;return!0}(s,e);default:return qt()}var h}function _o(s,e){return void 0!==(s.values||[]).find(i=>yi(i,e))}function xo(s,e){const i=Zl(s),a=Zl(e);if(i!==a)return Rt(i,a);switch(i){case 0:return 0;case 1:return Rt(s.booleanValue,e.booleanValue);case 2:return function(h,y){const D=_i(h.integerValue||h.doubleValue),j=_i(y.integerValue||y.doubleValue);return D<j?-1:D>j?1:D===j?0:isNaN(D)?isNaN(j)?0:-1:1}(s,e);case 3:return sl(s.timestampValue,e.timestampValue);case 4:return sl(Dl(s),Dl(e));case 5:return Rt(s.stringValue,e.stringValue);case 6:return function(h,y){const D=wa(h),j=wa(y);return D.compareTo(j)}(s.bytesValue,e.bytesValue);case 7:return function(h,y){const D=h.split("/"),j=y.split("/");for(let K=0;K<D.length&&K<j.length;K++){const ae=Rt(D[K],j[K]);if(0!==ae)return ae}return Rt(D.length,j.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,y){const D=Rt(_i(h.latitude),_i(y.latitude));return 0!==D?D:Rt(_i(h.longitude),_i(y.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return function(h,y){const D=h.values||[],j=y.values||[];for(let K=0;K<D.length&&K<j.length;++K){const ae=xo(D[K],j[K]);if(ae)return ae}return Rt(D.length,j.length)}(s.arrayValue,e.arrayValue);case 10:return function(h,y){const D=h.fields||{},j=Object.keys(D),K=y.fields||{},ae=Object.keys(K);j.sort(),ae.sort();for(let Ee=0;Ee<j.length&&Ee<ae.length;++Ee){const Fe=Rt(j[Ee],ae[Ee]);if(0!==Fe)return Fe;const nt=xo(D[j[Ee]],K[ae[Ee]]);if(0!==nt)return nt}return Rt(j.length,ae.length)}(s.mapValue,e.mapValue);default:throw qt()}}function sl(s,e){if("string"==typeof s&&"string"==typeof e&&s.length===e.length)return Rt(s,e);const i=go(s),a=go(e),h=Rt(i.seconds,a.seconds);return 0!==h?h:Rt(i.nanos,a.nanos)}function Ro(s){return ac(s)}function ac(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(a){const h=go(a);return`time(${h.seconds},${h.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?wa(s.bytesValue).toBase64():"referenceValue"in s?Xt.fromName(s.referenceValue).toString():"geoPointValue"in s?`geo(${(e=s.geoPointValue).latitude},${e.longitude})`:"arrayValue"in s?function(a){let h="[",y=!0;for(const D of a.values||[])y?y=!1:h+=",",h+=ac(D);return h+"]"}(s.arrayValue):"mapValue"in s?function(a){const h=Object.keys(a.fields||{}).sort();let y="{",D=!0;for(const j of h)D?D=!1:y+=",",y+=`${j}:${ac(a.fields[j])}`;return y+"}"}(s.mapValue):qt();var e}function Yl(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function xu(s){return!!s&&"integerValue"in s}function jc(s){return!!s&&"arrayValue"in s}function Hc(s){return!!s&&"nullValue"in s}function Ua(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ns(s){return!!s&&"mapValue"in s}function ol(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&"object"==typeof s.timestampValue)return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Su(s.mapValue.fields,(i,a)=>e.mapValue.fields[i]=ol(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=ol(s.arrayValue.values[i]);return e}return Object.assign({},s)}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!ns(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=ol(i)}setAll(e){let i=Ls.emptyPath(),a={},h=[];e.forEach((D,j)=>{if(!i.isImmediateParentOf(j)){const K=this.getFieldsMap(i);this.applyChanges(K,a,h),a={},h=[],i=j.popLast()}D?a[j.lastSegment()]=ol(D):h.push(j.lastSegment())});const y=this.getFieldsMap(i);this.applyChanges(y,a,h)}delete(e){const i=this.field(e.popLast());ns(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let h=i.mapValue.fields[e.get(a)];ns(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=h),i=h}return i.mapValue.fields}applyChanges(e,i,a){Su(i,(h,y)=>e[h]=y);for(const h of a)delete e[h]}clone(){return new di(ol(this.value))}}function Cf(s){const e=[];return Su(s.fields,(i,a)=>{const h=new Ls([i]);if(ns(a)){const y=Cf(a.mapValue).fields;if(0===y.length)e.push(h);else for(const D of y)e.push(h.child(D))}else e.push(h)}),new ql(e)}class Qr{constructor(e,i,a,h,y){this.key=e,this.documentType=i,this.version=a,this.data=h,this.documentState=y}static newInvalidDocument(e){return new Qr(e,0,Yt.min(),di.empty(),0)}static newFoundDocument(e,i,a){return new Qr(e,1,i,a,0)}static newNoDocument(e,i){return new Qr(e,2,i,di.empty(),0)}static newUnknownDocument(e,i){return new Qr(e,3,i,di.empty(),2)}convertToFoundDocument(e,i){return this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Qr(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sd{constructor(e,i=null,a=[],h=[],y=null,D=null,j=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=h,this.limit=y,this.startAt=D,this.endAt=j,this.R=null}}function $c(s,e=null,i=[],a=[],h=null,y=null,D=null){return new Sd(s,e,i,a,h,y,D)}function Ql(s){const e=I(s);if(null===e.R){let i=e.path.canonicalString();null!==e.collectionGroup&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(a=>function(s){return s.field.canonicalString()+s.op.toString()+Ro(s.value)}(a)).join(","),i+="|ob:",i+=e.orderBy.map(a=>{return(h=a).field.canonicalString()+h.dir;var h}).join(","),zr(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=Xo(e.startAt)),e.endAt&&(i+="|ub:",i+=Xo(e.endAt)),e.R=i}return e.R}function Jl(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let h=0;h<s.orderBy.length;h++)if(!Al(s.orderBy[h],e.orderBy[h]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let h=0;h<s.filters.length;h++)if((i=s.filters[h]).op!==(a=e.filters[h]).op||!i.field.isEqual(a.field)||!yi(i.value,a.value))return!1;var i,a;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Kr(s.startAt,e.startAt)&&Kr(s.endAt,e.endAt)}function Ca(s){return Xt.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length}class ms extends class{}{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?"in"===i||"not-in"===i?this.P(e,i,a):new Ru(e,i,a):"array-contains"===i?new bf(e,a):"in"===i?new If(e,a):"not-in"===i?new eu(e,a):"array-contains-any"===i?new xd(e,a):new ms(e,i,a)}static P(e,i,a){return"in"===i?new ba(e,a):new Tl(e,a)}matches(e){const i=e.data.field(this.field);return"!="===this.op?null!==i&&this.v(xo(i,this.value)):null!==i&&Zl(this.value)===Zl(i)&&this.v(xo(i,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qt()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ru extends ms{constructor(e,i,a){super(e,i,a),this.key=Xt.fromName(a.referenceValue)}matches(e){const i=Xt.comparator(e.key,this.key);return this.v(i)}}class ba extends ms{constructor(e,i){super(e,"in",i),this.keys=Gs(0,i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class Tl extends ms{constructor(e,i){super(e,"not-in",i),this.keys=Gs(0,i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function Gs(s,e){var i;return((null===(i=e.arrayValue)||void 0===i?void 0:i.values)||[]).map(a=>Xt.fromName(a.referenceValue))}class bf extends ms{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return jc(i)&&_o(i.arrayValue,this.value)}}class If extends ms{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return null!==i&&_o(this.value.arrayValue,i)}}class eu extends ms{constructor(e,i){super(e,"not-in",i)}matches(e){if(_o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return null!==i&&!_o(this.value.arrayValue,i)}}class xd extends ms{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!jc(i)||!i.arrayValue.values)&&i.arrayValue.values.some(a=>_o(this.value.arrayValue,a))}}class Ou{constructor(e,i){this.position=e,this.before=i}}function Xo(s){return`${s.before?"b":"a"}:${s.position.map(e=>Ro(e)).join(",")}`}class zs{constructor(e,i="asc"){this.field=e,this.dir=i}}function Al(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}function tu(s,e,i){let a=0;for(let h=0;h<s.position.length;h++){const y=e[h],D=s.position[h];if(a=y.field.isKeyField()?Xt.comparator(Xt.fromName(D.referenceValue),i.key):xo(D,i.data.field(y.field)),"desc"===y.dir&&(a*=-1),0!==a)break}return s.before?a<=0:a<0}function Kr(s,e){if(null===s)return null===e;if(null===e||s.before!==e.before||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!yi(s.position[i],e.position[i]))return!1;return!0}class Oo{constructor(e,i=null,a=[],h=[],y=null,D="F",j=null,K=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=h,this.limit=y,this.limitType=D,this.startAt=j,this.endAt=K,this.S=null,this.D=null}}function ph(s,e,i,a,h,y,D,j){return new Oo(s,e,i,a,h,y,D,j)}function tr(s){return new Oo(s)}function As(s){return!zr(s.limit)&&"F"===s.limitType}function al(s){return!zr(s.limit)&&"L"===s.limitType}function Sl(s){return s.explicitOrderBy.length>0?s.explicitOrderBy[0].field:null}function lc(s){for(const e of s.filters)if(e.V())return e.field;return null}function Wc(s){return null!==s.collectionGroup}function Vs(s){const e=I(s);if(null===e.S){e.S=[];const i=lc(e),a=Sl(e);if(null!==i&&null===a)i.isKeyField()||e.S.push(new zs(i)),e.S.push(new zs(Ls.keyField(),"asc"));else{let h=!1;for(const y of e.explicitOrderBy)e.S.push(y),y.field.isKeyField()&&(h=!0);if(!h){const y=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new zs(Ls.keyField(),y))}}}return e.S}function vi(s){const e=I(s);if(!e.D)if("F"===e.limitType)e.D=$c(e.path,e.collectionGroup,Vs(e),e.filters,e.limit,e.startAt,e.endAt);else{const i=[];for(const y of Vs(e))i.push(new zs(y.field,"desc"===y.dir?"asc":"desc"));const a=e.endAt?new Ou(e.endAt.position,!e.endAt.before):null,h=e.startAt?new Ou(e.startAt.position,!e.startAt.before):null;e.D=$c(e.path,e.collectionGroup,i,e.filters,e.limit,a,h)}return e.D}function ea(s,e,i){return new Oo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function yo(s,e){return Jl(vi(s),vi(e))&&s.limitType===e.limitType}function xl(s){return`${Ql(vi(s))}|lt:${s.limitType}`}function uc(s){return`Query(target=${function(s){let e=s.path.canonicalString();return null!==s.collectionGroup&&(e+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(e+=`, filters: [${s.filters.map(i=>{return`${(a=i).field.canonicalString()} ${a.op} ${Ro(a.value)}`;var a}).join(", ")}]`),zr(s.limit)||(e+=", limit: "+s.limit),s.orderBy.length>0&&(e+=`, orderBy: [${s.orderBy.map(i=>{return`${(a=i).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),s.startAt&&(e+=", startAt: "+Xo(s.startAt)),s.endAt&&(e+=", endAt: "+Xo(s.endAt)),`Target(${e})`}(vi(s))}; limitType=${s.limitType})`}function Po(s,e){return e.isFoundDocument()&&function(i,a){const h=a.key.path;return null!==i.collectionGroup?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(h):Xt.isDocumentKey(i.path)?i.path.isEqual(h):i.path.isImmediateParentOf(h)}(s,e)&&function(i,a){for(const h of i.explicitOrderBy)if(!h.field.isKeyField()&&null===a.data.field(h.field))return!1;return!0}(s,e)&&function(i,a){for(const h of i.filters)if(!h.matches(a))return!1;return!0}(s,e)&&(a=e,!((i=s).startAt&&!tu(i.startAt,Vs(i),a)||i.endAt&&tu(i.endAt,Vs(i),a)));var i,a}function cc(s){return(e,i)=>{let a=!1;for(const h of Vs(s)){const y=gh(h,e,i);if(0!==y)return y;a=a||h.field.isKeyField()}return 0}}function gh(s,e,i){const a=s.field.isKeyField()?Xt.comparator(e.key,i.key):function(h,y,D){const j=y.data.field(h),K=D.data.field(h);return null!==j&&null!==K?xo(j,K):qt()}(s.field,e,i);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return qt()}}function mh(s,e){if(s.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mo(e)?"-0":e}}function _h(s){return{integerValue:""+s}}function nu(s,e){return Ea(e)?_h(e):mh(s,e)}class Rl{constructor(){this._=void 0}}function Df(s,e,i){return s instanceof Mu?function(a,h){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return h&&(y.fields.__previous_value__=h),{mapValue:y}}(i,e):s instanceof Nu?yh(s,e):s instanceof ru?vh(s,e):function(a,h){const y=Pu(a,h),D=iu(y)+iu(a.N);return xu(y)&&xu(a.N)?_h(D):mh(a.k,D)}(s,e)}function Tf(s,e,i){return s instanceof Nu?yh(s,e):s instanceof ru?vh(s,e):i}function Pu(s,e){return s instanceof Ba?xu(i=e)||(a=i)&&"doubleValue"in a?e:{integerValue:0}:null;var a,i}class Mu extends Rl{}class Nu extends Rl{constructor(e){super(),this.elements=e}}function yh(s,e){const i=ll(e);for(const a of s.elements)i.some(h=>yi(h,a))||i.push(a);return{arrayValue:{values:i}}}class ru extends Rl{constructor(e){super(),this.elements=e}}function vh(s,e){let i=ll(e);for(const a of s.elements)i=i.filter(h=>!yi(h,a));return{arrayValue:{values:i}}}class Ba extends Rl{constructor(e,i){super(),this.k=e,this.N=i}}function iu(s){return _i(s.integerValue||s.doubleValue)}function ll(s){return jc(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class ku{constructor(e,i){this.field=e,this.transform=i}}class wh{constructor(e,i){this.version=e,this.transformResults=i}}class oi{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ul(s,e){return void 0!==s.updateTime?e.isFoundDocument()&&e.version.isEqual(s.updateTime):void 0===s.exists||s.exists===e.isFoundDocument()}class Fu{}function Rd(s,e,i){s instanceof Lu?function(a,h,y){const D=a.value.clone(),j=Ia(a.fieldTransforms,h,y.transformResults);D.setAll(j),h.convertToFoundDocument(y.version,D).setHasCommittedMutations()}(s,e,i):s instanceof Ol?function(a,h,y){if(!ul(a.precondition,h))return void h.convertToUnknownDocument(y.version);const D=Ia(a.fieldTransforms,h,y.transformResults),j=h.data;j.setAll(Eh(a)),j.setAll(D),h.convertToFoundDocument(y.version,j).setHasCommittedMutations()}(s,e,i):e.convertToNoDocument(i.version).setHasCommittedMutations()}function zc(s,e,i){var h;s instanceof Lu?function(a,h,y){if(!ul(a.precondition,h))return;const D=a.value.clone(),j=cl(a.fieldTransforms,y,h);D.setAll(j),h.convertToFoundDocument(Od(h),D).setHasLocalMutations()}(s,e,i):s instanceof Ol?function(a,h,y){if(!ul(a.precondition,h))return;const D=cl(a.fieldTransforms,y,h),j=h.data;j.setAll(Eh(a)),j.setAll(D),h.convertToFoundDocument(Od(h),j).setHasLocalMutations()}(s,e,i):ul(s.precondition,h=e)&&h.convertToNoDocument(Yt.min())}function ja(s,e){let i=null;for(const a of s.fieldTransforms){const h=e.data.field(a.field),y=Pu(a.transform,h||null);null!=y&&(null==i&&(i=di.empty()),i.set(a.field,y))}return i||null}function Kc(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(i=s.fieldTransforms)&&void 0===a||i&&a&&Fs(i,a,(h,y)=>function(s,e){return s.field.isEqual(e.field)&&(a=e.transform,(i=s.transform)instanceof Nu&&a instanceof Nu||i instanceof ru&&a instanceof ru?Fs(i.elements,a.elements,yi):i instanceof Ba&&a instanceof Ba?yi(i.N,a.N):i instanceof Mu&&a instanceof Mu);var i,a}(h,y))))&&(0===s.type?s.value.isEqual(e.value):1!==s.type||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask));var i,a}function Od(s){return s.isFoundDocument()?s.version:Yt.min()}class Lu extends Fu{constructor(e,i,a,h=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=h,this.type=0}}class Ol extends Fu{constructor(e,i,a,h,y=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=h,this.fieldTransforms=y,this.type=1}}function Eh(s){const e=new Map;return s.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const a=s.data.field(i);e.set(i,a)}}),e}function Ia(s,e,i){const a=new Map;bn(s.length===i.length);for(let h=0;h<i.length;h++){const y=s[h],D=y.transform,j=e.data.field(y.field);a.set(y.field,Tf(D,j,i[h]))}return a}function cl(s,e,i){const a=new Map;for(const h of s){const y=h.transform,D=i.data.field(h.field);a.set(h.field,Df(y,D,e))}return a}class vo extends Fu{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}}class qc extends Fu{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}}class Af{constructor(e){this.count=e}}var wi,cr;function Zc(s){switch(s){default:return qt();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function Pd(s){if(void 0===s)return sr("GRPC error has no .code"),C.UNKNOWN;switch(s){case wi.OK:return C.OK;case wi.CANCELLED:return C.CANCELLED;case wi.UNKNOWN:return C.UNKNOWN;case wi.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case wi.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case wi.INTERNAL:return C.INTERNAL;case wi.UNAVAILABLE:return C.UNAVAILABLE;case wi.UNAUTHENTICATED:return C.UNAUTHENTICATED;case wi.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case wi.NOT_FOUND:return C.NOT_FOUND;case wi.ALREADY_EXISTS:return C.ALREADY_EXISTS;case wi.PERMISSION_DENIED:return C.PERMISSION_DENIED;case wi.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case wi.ABORTED:return C.ABORTED;case wi.OUT_OF_RANGE:return C.OUT_OF_RANGE;case wi.UNIMPLEMENTED:return C.UNIMPLEMENTED;case wi.DATA_LOSS:return C.DATA_LOSS;default:return qt()}}(cr=wi||(wi={}))[cr.OK=0]="OK",cr[cr.CANCELLED=1]="CANCELLED",cr[cr.UNKNOWN=2]="UNKNOWN",cr[cr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cr[cr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cr[cr.NOT_FOUND=5]="NOT_FOUND",cr[cr.ALREADY_EXISTS=6]="ALREADY_EXISTS",cr[cr.PERMISSION_DENIED=7]="PERMISSION_DENIED",cr[cr.UNAUTHENTICATED=16]="UNAUTHENTICATED",cr[cr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cr[cr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cr[cr.ABORTED=10]="ABORTED",cr[cr.OUT_OF_RANGE=11]="OUT_OF_RANGE",cr[cr.UNIMPLEMENTED=12]="UNIMPLEMENTED",cr[cr.INTERNAL=13]="INTERNAL",cr[cr.UNAVAILABLE=14]="UNAVAILABLE",cr[cr.DATA_LOSS=15]="DATA_LOSS";class _s{constructor(e,i){this.comparator=e,this.root=i||Us.EMPTY}insert(e,i){return new _s(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Us.BLACK,null,null))}remove(e){return new _s(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Us.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const h=this.comparator(e,a.key);if(0===h)return i+a.left.size;h<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,a)=>(e(i,a),!1))}toString(){const e=[];return this.inorderTraversal((i,a)=>(e.push(`${i}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vu(this.root,e,this.comparator,!0)}}class Vu{constructor(e,i,a,h){this.isReverse=h,this.nodeStack=[];let y=1;for(;!e.isEmpty();)if(y=i?a(e.key,i):1,h&&(y*=-1),y<0)e=this.isReverse?e.left:e.right;else{if(0===y){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Us{constructor(e,i,a,h,y){this.key=e,this.value=i,this.color=null!=a?a:Us.RED,this.left=null!=h?h:Us.EMPTY,this.right=null!=y?y:Us.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,h,y){return new Us(null!=e?e:this.key,null!=i?i:this.value,null!=a?a:this.color,null!=h?h:this.left,null!=y?y:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let h=this;const y=a(e,h.key);return h=y<0?h.copy(null,null,null,h.left.insert(e,i,a),null):0===y?h.copy(null,i,null,null,null):h.copy(null,null,null,null,h.right.insert(e,i,a)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Us.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,h=this;if(i(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,i),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),0===i(e,h.key)){if(h.right.isEmpty())return Us.EMPTY;a=h.right.min(),h=h.copy(a.key,a.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,i))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Us.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw qt();const e=this.left.check();if(e!==this.right.check())throw qt();return e+(this.isRed()?0:1)}}Us.EMPTY=null,Us.RED=!0,Us.BLACK=!1,Us.EMPTY=new class{constructor(){this.size=0}get key(){throw qt()}get value(){throw qt()}get color(){throw qt()}get left(){throw qt()}get right(){throw qt()}copy(s,e,i,a,h){return this}insert(s,e,i){return new Us(s,e)}remove(s,e){return this}isEmpty(){return!0}inorderTraversal(s){return!1}reverseTraversal(s){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Oi{constructor(e){this.comparator=e,this.data=new _s(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,a)=>(e(i),!1))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const h=a.getNext();if(this.comparator(h.key,e[1])>=0)return;i(h.key)}}forEachWhile(e,i){let a;for(a=void 0!==i?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new Md(this.data.getIterator())}getIteratorFrom(e){return new Md(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(a=>{i=i.add(a)}),i}isEqual(e){if(!(e instanceof Oi)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const h=i.getNext().key,y=a.getNext().key;if(0!==this.comparator(h,y))return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new Oi(this.comparator);return i.data=e,i}}class Md{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Ch=new _s(Xt.comparator);function Ks(){return Ch}const Nd=new _s(Xt.comparator);function Mo(){return Nd}const dc=new _s(Xt.comparator);function hc(){return dc}const su=new Oi(Xt.comparator);function Cr(...s){let e=su;for(const i of s)e=e.add(i);return e}const Bp=new Oi(Rt);function fc(){return Bp}class Uu{constructor(e,i,a,h,y){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=h,this.resolvedLimboDocuments=y}static createSynthesizedRemoteEventForCurrentChange(e,i){const a=new Map;return a.set(e,dl.createSynthesizedTargetChangeForCurrentChange(e,i)),new Uu(Yt.min(),a,fc(),Ks(),Cr())}}class dl{constructor(e,i,a,h,y){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=h,this.removedDocuments=y}static createSynthesizedTargetChangeForCurrentChange(e,i){return new dl(ts.EMPTY_BYTE_STRING,i,Cr(),Cr(),Cr())}}class ou{constructor(e,i,a,h){this.$=e,this.removedTargetIds=i,this.key=a,this.F=h}}class au{constructor(e,i){this.targetId=e,this.O=i}}class Sf{constructor(e,i,a=ts.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=h}}class bh{constructor(){this.M=0,this.L=kd(),this.B=ts.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=Cr(),i=Cr(),a=Cr();return this.L.forEach((h,y)=>{switch(y){case 0:e=e.add(h);break;case 2:i=i.add(h);break;case 1:a=a.add(h);break;default:qt()}}),new dl(this.B,this.U,e,i,a)}H(){this.q=!1,this.L=kd()}J(e,i){this.q=!0,this.L=this.L.insert(e,i)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class hl{constructor(e){this.et=e,this.nt=new Map,this.st=Ks(),this.it=Yc(),this.rt=new Oi(Rt)}ot(e){for(const i of e.$)e.F&&e.F.isFoundDocument()?this.at(i,e.F):this.ct(i,e.key,e.F);for(const i of e.removedTargetIds)this.ct(i,e.key,e.F)}ut(e){this.forEachTarget(e,i=>{const a=this.ht(i);switch(e.state){case 0:this.lt(i)&&a.W(e.resumeToken);break;case 1:a.Z(),a.K||a.H(),a.W(e.resumeToken);break;case 2:a.Z(),a.K||this.removeTarget(i);break;case 3:this.lt(i)&&(a.tt(),a.W(e.resumeToken));break;case 4:this.lt(i)&&(this.ft(i),a.W(e.resumeToken));break;default:qt()}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.nt.forEach((a,h)=>{this.lt(h)&&i(h)})}dt(e){const i=e.targetId,a=e.O.count,h=this.wt(i);if(h){const y=h.target;if(Ca(y))if(0===a){const D=new Xt(y.path);this.ct(i,D,Qr.newNoDocument(D,Yt.min()))}else bn(1===a);else this._t(i)!==a&&(this.ft(i),this.rt=this.rt.add(i))}}gt(e){const i=new Map;this.nt.forEach((y,D)=>{const j=this.wt(D);if(j){if(y.current&&Ca(j.target)){const K=new Xt(j.target.path);null!==this.st.get(K)||this.yt(D,K)||this.ct(D,K,Qr.newNoDocument(K,e))}y.j&&(i.set(D,y.G()),y.H())}});let a=Cr();this.it.forEach((y,D)=>{let j=!0;D.forEachWhile(K=>{const ae=this.wt(K);return!ae||2===ae.purpose||(j=!1,!1)}),j&&(a=a.add(y))});const h=new Uu(e,i,this.rt,this.st,a);return this.st=Ks(),this.it=Yc(),this.rt=new Oi(Rt),h}at(e,i){if(!this.lt(e))return;const a=this.yt(e,i.key)?2:0;this.ht(e).J(i.key,a),this.st=this.st.insert(i.key,i),this.it=this.it.insert(i.key,this.Tt(i.key).add(e))}ct(e,i,a){if(!this.lt(e))return;const h=this.ht(e);this.yt(e,i)?h.J(i,1):h.Y(i),this.it=this.it.insert(i,this.Tt(i).delete(e)),a&&(this.st=this.st.insert(i,a))}removeTarget(e){this.nt.delete(e)}_t(e){const i=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let i=this.nt.get(e);return i||(i=new bh,this.nt.set(e,i)),i}Tt(e){let i=this.it.get(e);return i||(i=new Oi(Rt),this.it=this.it.insert(e,i)),i}lt(e){const i=null!==this.wt(e);return i||bt("WatchChangeAggregator","Detected inactive target",e),i}wt(e){const i=this.nt.get(e);return i&&i.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new bh),this.et.getRemoteKeysForTarget(e).forEach(i=>{this.ct(e,i,null)})}yt(e,i){return this.et.getRemoteKeysForTarget(e).has(i)}}function Yc(){return new _s(Xt.comparator)}function kd(){return new _s(Xt.comparator)}const Pl={asc:"ASCENDING",desc:"DESCENDING"},Qc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class pc{constructor(e,i){this.databaseId=e,this.C=i}}function Da(s,e){return s.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fd(s,e){return s.C?e.toBase64():e.toUint8Array()}function Jc(s,e){return Da(s,e.toTimestamp())}function ys(s){return bn(!!s),Yt.fromTimestamp(function(e){const i=go(e);return new $i(i.seconds,i.nanos)}(s))}function Jr(s,e){return(i=s,new yr(["projects",i.projectId,"databases",i.database])).child("documents").child(e).canonicalString();var i}function Ih(s){const e=yr.fromString(s);return bn(Wu(e)),e}function ta(s,e){return Jr(s.databaseId,e.path)}function Bs(s,e){const i=Ih(e);if(i.get(1)!==s.databaseId.projectId)throw new M(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new M(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new Xt(ed(i))}function Bu(s,e){return Jr(s.databaseId,e)}function Xc(s){const e=Ih(s);return 4===e.length?yr.emptyPath():ed(e)}function ju(s){return new yr(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function ed(s){return bn(s.length>4&&"documents"===s.get(4)),s.popFirst(5)}function td(s,e,i){return{name:ta(s,e),fields:i.value.mapValue.fields}}function wo(s,e,i){const a=Bs(s,e.name),h=ys(e.updateTime),y=new di({mapValue:{fields:e.fields}}),D=Qr.newFoundDocument(a,h,y);return i&&D.setHasCommittedMutations(),i?D.setHasCommittedMutations():D}function Ml(s,e){let i;if(e instanceof Lu)i={update:td(s,e.key,e.value)};else if(e instanceof vo)i={delete:ta(s,e.key)};else if(e instanceof Ol)i={update:td(s,e.key,e.data),updateMask:Ta(e.fieldMask)};else{if(!(e instanceof qc))return qt();i={verify:ta(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(a=>function(h,y){const D=y.transform;if(D instanceof Mu)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(D instanceof Nu)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:D.elements}};if(D instanceof ru)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:D.elements}};if(D instanceof Ba)return{fieldPath:y.field.canonicalString(),increment:D.N};throw qt()}(0,a))),e.precondition.isNone||(i.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Jc(s,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:qt()),i;var h}function Ei(s,e){const i=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?oi.updateTime(ys(h.updateTime)):void 0!==h.exists?oi.exists(h.exists):oi.none():oi.none(),a=e.updateTransforms?e.updateTransforms.map(h=>function(y,D){let j=null;"setToServerValue"in D?(bn("REQUEST_TIME"===D.setToServerValue),j=new Mu):"appendMissingElements"in D?j=new Nu(D.appendMissingElements.values||[]):"removeAllFromArray"in D?j=new ru(D.removeAllFromArray.values||[]):"increment"in D?j=new Ba(y,D.increment):qt();const K=Ls.fromServerFormat(D.fieldPath);return new ku(K,j)}(s,h)):[];var h;if(e.update){const h=Bs(s,e.update.name),y=new di({mapValue:{fields:e.update.fields}});if(e.updateMask){const D=new ql((e.updateMask.fieldPaths||[]).map(ae=>Ls.fromServerFormat(ae)));return new Ol(h,y,D,i,a)}return new Lu(h,y,i,a)}if(e.delete){const h=Bs(s,e.delete);return new vo(h,i)}if(e.verify){const h=Bs(s,e.verify);return new qc(h,i)}return qt()}function rd(s,e){return{documents:[Bu(s,e.path)]}}function mc(s,e){const i={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(i.parent=Bu(s,a),i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i.parent=Bu(s,a.popLast()),i.structuredQuery.from=[{collectionId:a.lastSegment()}]);const h=function(j){if(0===j.length)return;const K=j.map(ae=>function(Ee){if("=="===Ee.op){if(Ua(Ee.value))return{unaryFilter:{field:is(Ee.field),op:"IS_NAN"}};if(Hc(Ee.value))return{unaryFilter:{field:is(Ee.field),op:"IS_NULL"}}}else if("!="===Ee.op){if(Ua(Ee.value))return{unaryFilter:{field:is(Ee.field),op:"IS_NOT_NAN"}};if(Hc(Ee.value))return{unaryFilter:{field:is(Ee.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(Ee.field),op:$u(Ee.op),value:Ee.value}}}(ae));return 1===K.length?K[0]:{compositeFilter:{op:"AND",filters:K}}}(e.filters);h&&(i.structuredQuery.where=h);const y=function(j){if(0!==j.length)return j.map(K=>{return{field:is((ae=K).field),direction:Dh(ae.dir)};var ae})}(e.orderBy);y&&(i.structuredQuery.orderBy=y);const D=(K=e.limit,s.C||zr(K)?K:{value:K});var K;return null!==D&&(i.structuredQuery.limit=D),e.startAt&&(i.structuredQuery.startAt=id(e.startAt)),e.endAt&&(i.structuredQuery.endAt=id(e.endAt)),i}function rs(s){let e=Xc(s.parent);const i=s.structuredQuery,a=i.from?i.from.length:0;let h=null;if(a>0){bn(1===a);const Ee=i.from[0];Ee.allDescendants?h=Ee.collectionId:e=e.child(Ee.collectionId)}let y=[];i.where&&(y=lu(i.where));let D=[];i.orderBy&&(D=i.orderBy.map(Ee=>{return new zs(Nl((Fe=Ee).field),function(nt){switch(nt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Fe.direction));var Fe}));let j=null;i.limit&&(j=function(Ee){let Fe;return Fe="object"==typeof Ee?Ee.value:Ee,zr(Fe)?null:Fe}(i.limit));let K=null;i.startAt&&(K=sd(i.startAt));let ae=null;return i.endAt&&(ae=sd(i.endAt)),ph(e,h,D,y,j,"F",K,ae)}function lu(s){return s?void 0!==s.unaryFilter?[Ld(s)]:void 0!==s.fieldFilter?[od(s)]:void 0!==s.compositeFilter?s.compositeFilter.filters.map(e=>lu(e)).reduce((e,i)=>e.concat(i)):qt():[]}function id(s){return{before:s.before,values:s.position}}function sd(s){return new Ou(s.values||[],!!s.before)}function Dh(s){return Pl[s]}function $u(s){return Qc[s]}function is(s){return{fieldPath:s.canonicalString()}}function Nl(s){return Ls.fromServerFormat(s.fieldPath)}function od(s){return ms.create(Nl(s.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qt()}}(s.fieldFilter.op),s.fieldFilter.value)}function Ld(s){switch(s.unaryFilter.op){case"IS_NAN":const e=Nl(s.unaryFilter.field);return ms.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=Nl(s.unaryFilter.field);return ms.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Nl(s.unaryFilter.field);return ms.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Nl(s.unaryFilter.field);return ms.create(h,"!=",{nullValue:"NULL_VALUE"});default:return qt()}}function Ta(s){const e=[];return s.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function Wu(s){return s.length>=4&&"projects"===s.get(0)&&"databases"===s.get(2)}function Eo(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=_c(e)),e=ad(s.get(i),e);return _c(e)}function ad(s,e){let i=e;const a=s.length;for(let h=0;h<a;h++){const y=s.charAt(h);switch(y){case"\0":i+="\x01\x10";break;case"\x01":i+="\x01\x11";break;default:i+=y}}return i}function _c(s){return s+"\x01\x01"}function Ha(s){const e=s.length;if(bn(e>=2),2===e)return bn("\x01"===s.charAt(0)&&"\x01"===s.charAt(1)),yr.emptyPath();const i=e-2,a=[];let h="";for(let y=0;y<e;){const D=s.indexOf("\x01",y);switch((D<0||D>i)&&qt(),s.charAt(D+1)){case"\x01":const j=s.substring(y,D);let K;0===h.length?K=j:(h+=j,K=h,h=""),a.push(K);break;case"\x10":h+=s.substring(y,D),h+="\0";break;case"\x11":h+=s.substring(y,D+1);break;default:qt()}y=D+2}return new yr(a)}class Th{constructor(e,i){this.seconds=e,this.nanoseconds=i}}class qs{constructor(e,i,a){this.ownerId=e,this.allowTabSynchronization=i,this.leaseTimestampMs=a}}qs.store="owner",qs.key="owner";class No{constructor(e,i,a){this.userId=e,this.lastAcknowledgedBatchId=i,this.lastStreamToken=a}}No.store="mutationQueues",No.keyPath="userId";class b{constructor(e,i,a,h,y){this.userId=e,this.batchId=i,this.localWriteTimeMs=a,this.baseMutations=h,this.mutations=y}}b.store="mutations",b.keyPath="batchId",b.userMutationsIndex="userMutationsIndex",b.userMutationsKeyPath=["userId","batchId"];class g{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,i){return[e,Eo(i)]}static key(e,i,a){return[e,Eo(i),a]}}g.store="documentMutations",g.PLACEHOLDER=new g;class m{constructor(e,i){this.path=e,this.readTime=i}}class T{constructor(e,i){this.path=e,this.version=i}}class W{constructor(e,i,a,h,y,D){this.unknownDocument=e,this.noDocument=i,this.document=a,this.hasCommittedMutations=h,this.readTime=y,this.parentPath=D}}W.store="remoteDocuments",W.readTimeIndex="readTimeIndex",W.readTimeIndexPath="readTime",W.collectionReadTimeIndex="collectionReadTimeIndex",W.collectionReadTimeIndexPath=["parentPath","readTime"];class ne{constructor(e){this.byteSize=e}}ne.store="remoteDocumentGlobal",ne.key="remoteDocumentGlobalKey";class Ne{constructor(e,i,a,h,y,D,j){this.targetId=e,this.canonicalId=i,this.readTime=a,this.resumeToken=h,this.lastListenSequenceNumber=y,this.lastLimboFreeSnapshotVersion=D,this.query=j}}Ne.store="targets",Ne.keyPath="targetId",Ne.queryTargetsIndexName="queryTargetsIndex",Ne.queryTargetsKeyPath=["canonicalId","targetId"];class Ze{constructor(e,i,a){this.targetId=e,this.path=i,this.sequenceNumber=a}}Ze.store="targetDocuments",Ze.keyPath=["targetId","path"],Ze.documentTargetsIndex="documentTargetsIndex",Ze.documentTargetsKeyPath=["path","targetId"];class Et{constructor(e,i,a,h){this.highestTargetId=e,this.highestListenSequenceNumber=i,this.lastRemoteSnapshotVersion=a,this.targetCount=h}}Et.key="targetGlobalKey",Et.store="targetGlobal";class kt{constructor(e,i){this.collectionId=e,this.parent=i}}kt.store="collectionParents",kt.keyPath=["collectionId","parent"];class on{constructor(e,i,a,h){this.clientId=e,this.updateTimeMs=i,this.networkEnabled=a,this.inForeground=h}}on.store="clientMetadata",on.keyPath="clientId";class en{constructor(e,i,a){this.bundleId=e,this.createTime=i,this.version=a}}en.store="bundles",en.keyPath="bundleId";class hi{constructor(e,i,a){this.name=e,this.readTime=i,this.bundledQuery=a}}hi.store="namedQueries",hi.keyPath="name";const Co=[No.store,b.store,g.store,W.store,Ne.store,qs.store,Et.store,Ze.store,on.store,ne.store,kt.store,en.store,hi.store],uu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class gt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new gt((a,h)=>{this.nextCallback=y=>{this.wrapSuccess(e,y).next(a,h)},this.catchCallback=y=>{this.wrapFailure(i,y).next(a,h)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof gt?i:gt.resolve(i)}catch(i){return gt.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):gt.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):gt.reject(i)}static resolve(e){return new gt((i,a)=>{i(e)})}static reject(e){return new gt((i,a)=>{a(e)})}static waitFor(e){return new gt((i,a)=>{let h=0,y=0,D=!1;e.forEach(j=>{++h,j.next(()=>{++y,D&&y===h&&i()},K=>a(K))}),D=!0,y===h&&i()})}static or(e){let i=gt.resolve(!1);for(const a of e)i=i.next(h=>h?gt.resolve(h):a());return i}static forEach(e,i){const a=[];return e.forEach((h,y)=>{a.push(i.call(this,h,y))}),this.waitFor(a)}}class fl{constructor(e,i){this.action=e,this.transaction=i,this.aborted=!1,this.It=new $,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{i.error?this.It.reject(new to(e,i.error)):this.It.resolve()},this.transaction.onerror=a=>{const h=bo(a.target.error);this.It.reject(new to(e,h))}}static open(e,i,a,h){try{return new fl(i,e.transaction(h,a))}catch(y){throw new to(i,y)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(bt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const i=this.transaction.objectStore(e);return new ld(i)}}class Wi{constructor(e,i,a){this.name=e,this.version=i,this.Rt=a,12.2===Wi.Pt((0,xt.z$)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return bt("SimpleDb","Removing database:",e),ko(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,xt.hl)())return!1;if(Wi.vt())return!0;const e=(0,xt.z$)(),i=Wi.Pt(e),a=0<i&&i<10,h=Wi.Vt(e),y=0<h&&h<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||y)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,i){return e.store(i)}static Pt(e){const i=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=i?i[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static Vt(e){const i=e.match(/Android ([\d.]+)/i),a=i?i[1].split(".").slice(0,2).join("."):"-1";return Number(a)}Ct(e){var i=this;return(0,Ie.Z)(function*(){return i.db||(bt("SimpleDb","Opening database:",i.name),i.db=yield new Promise((a,h)=>{const y=indexedDB.open(i.name,i.version);y.onsuccess=D=>{a(D.target.result)},y.onblocked=()=>{h(new to(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},y.onerror=D=>{const j=D.target.error;h("VersionError"===j.name?new M(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===j.name?new M(C.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+j):new to(e,j))},y.onupgradeneeded=D=>{bt("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',D.oldVersion),i.Rt.Nt(D.target.result,y.transaction,D.oldVersion,i.version).next(()=>{bt("SimpleDb","Database upgrade to version "+i.version+" complete")})}})),i.kt&&(i.db.onversionchange=a=>i.kt(a)),i.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=i=>e(i))}runTransaction(e,i,a,h){var y=this;return(0,Ie.Z)(function*(){const D="readonly"===i;let j=0;for(;;){++j;try{y.db=yield y.Ct(e);const K=fl.open(y.db,e,D?"readonly":"readwrite",a),ae=h(K).catch(Ee=>(K.abort(Ee),gt.reject(Ee))).toPromise();return ae.catch(()=>{}),yield K.At,ae}catch(K){const ae="FirebaseError"!==K.name&&j<3;if(bt("SimpleDb","Transaction failed with error:",K.message,"Retrying:",ae),y.close(),!ae)return Promise.reject(K)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class na{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return ko(this.$t.delete())}}class to extends M{constructor(e,i){super(C.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${i}`),this.name="IndexedDbTransactionError"}}function kl(s){return"IndexedDbTransactionError"===s.name}class ld{constructor(e){this.store=e}put(e,i){let a;return void 0!==i?(bt("SimpleDb","PUT",this.store.name,e,i),a=this.store.put(i,e)):(bt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),ko(a)}add(e){return bt("SimpleDb","ADD",this.store.name,e,e),ko(this.store.add(e))}get(e){return ko(this.store.get(e)).next(i=>(void 0===i&&(i=null),bt("SimpleDb","GET",this.store.name,e,i),i))}delete(e){return bt("SimpleDb","DELETE",this.store.name,e),ko(this.store.delete(e))}count(){return bt("SimpleDb","COUNT",this.store.name),ko(this.store.count())}Bt(e,i){const a=this.cursor(this.options(e,i)),h=[];return this.Ut(a,(y,D)=>{h.push(D)}).next(()=>h)}qt(e,i){bt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,i);a.Kt=!1;const h=this.cursor(a);return this.Ut(h,(y,D,j)=>j.delete())}jt(e,i){let a;i?a=e:(a={},i=e);const h=this.cursor(a);return this.Ut(h,i)}Qt(e){const i=this.cursor({});return new gt((a,h)=>{i.onerror=y=>{const D=bo(y.target.error);h(D)},i.onsuccess=y=>{const D=y.target.result;D?e(D.primaryKey,D.value).next(j=>{j?D.continue():a()}):a()}})}Ut(e,i){const a=[];return new gt((h,y)=>{e.onerror=D=>{y(D.target.error)},e.onsuccess=D=>{const j=D.target.result;if(!j)return void h();const K=new na(j),ae=i(j.primaryKey,j.value,K);if(ae instanceof gt){const Ee=ae.catch(Fe=>(K.done(),gt.reject(Fe)));a.push(Ee)}K.isDone?h():null===K.Mt?j.continue():j.continue(K.Mt)}}).next(()=>gt.waitFor(a))}options(e,i){let a;return void 0!==e&&("string"==typeof e?a=e:i=e),{index:a,range:i}}cursor(e){let i="next";if(e.reverse&&(i="prev"),e.index){const a=this.store.index(e.index);return e.Kt?a.openKeyCursor(e.range,i):a.openCursor(e.range,i)}return this.store.openCursor(e.range,i)}}function ko(s){return new gt((e,i)=>{s.onsuccess=a=>{e(a.target.result)},s.onerror=a=>{const h=bo(a.target.error);i(h)}})}let vc=!1;function bo(s){const e=Wi.Pt((0,xt.z$)());if(e>=12.2&&e<13){const i="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(i)>=0){const a=new M("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${i}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vc||(vc=!0,setTimeout(()=>{throw a},0)),a}}return s}class no extends yc{constructor(e,i){super(),this.Wt=e,this.currentSequenceNumber=i}}function ro(s,e){const i=I(s);return Wi.Dt(i.Wt,e)}class xf{constructor(e,i,a,h){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=h}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let h=0;h<this.mutations.length;h++){const y=this.mutations[h];y.key.isEqual(e.key)&&Rd(y,e,a[h])}}applyToLocalView(e){for(const i of this.baseMutations)i.key.isEqual(e.key)&&zc(i,e,this.localWriteTime);for(const i of this.mutations)i.key.isEqual(e.key)&&zc(i,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(i=>{const a=e.get(i.key),h=a;this.applyToLocalView(h),a.isValidDocument()||h.convertToNoDocument(Yt.min())})}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),Cr())}isEqual(e){return this.batchId===e.batchId&&Fs(this.mutations,e.mutations,(i,a)=>Kc(i,a))&&Fs(this.baseMutations,e.baseMutations,(i,a)=>Kc(i,a))}}class wc{constructor(e,i,a,h){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=h}static from(e,i,a){bn(e.mutations.length===a.length);let h=hc();const y=e.mutations;for(let D=0;D<y.length;D++)h=h.insert(y[D].key,a[D].version);return new wc(e,i,a,h)}}class ra{constructor(e,i,a,h,y=Yt.min(),D=Yt.min(),j=ts.EMPTY_BYTE_STRING){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=h,this.snapshotVersion=y,this.lastLimboFreeSnapshotVersion=D,this.resumeToken=j}withSequenceNumber(e){return new ra(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,i){return new ra(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ra(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ia{constructor(e){this.Gt=e}}function Vd(s,e){if(e.document)return wo(s.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const i=Xt.fromSegments(e.noDocument.path),a=pl(e.noDocument.readTime),h=Qr.newNoDocument(i,a);return e.hasCommittedMutations?h.setHasCommittedMutations():h}if(e.unknownDocument){const i=Xt.fromSegments(e.unknownDocument.path),a=pl(e.unknownDocument.version);return Qr.newUnknownDocument(i,a)}return qt()}function Ah(s,e,i){const a=ud(i),h=e.key.path.popLast().toArray();if(e.isFoundDocument()){const y={name:ta(j=s.Gt,(K=e).key),fields:K.data.value.mapValue.fields,updateTime:Da(j,K.version.toTimestamp())};return new W(null,null,y,e.hasCommittedMutations,a,h)}var j,K;if(e.isNoDocument()){const y=e.key.path.toArray(),D=Ud(e.version),j=e.hasCommittedMutations;return new W(null,new m(y,D),null,j,a,h)}if(e.isUnknownDocument()){const y=e.key.path.toArray(),D=Ud(e.version);return new W(new T(y,D),null,null,!0,a,h)}return qt()}function ud(s){const e=s.toTimestamp();return[e.seconds,e.nanoseconds]}function Rf(s){const e=new $i(s[0],s[1]);return Yt.fromTimestamp(e)}function Ud(s){const e=s.toTimestamp();return new Th(e.seconds,e.nanoseconds)}function pl(s){const e=new $i(s.seconds,s.nanoseconds);return Yt.fromTimestamp(e)}function cu(s,e){const i=(e.baseMutations||[]).map(y=>Ei(s.Gt,y));for(let y=0;y<e.mutations.length-1;++y){const D=e.mutations[y];y+1<e.mutations.length&&void 0!==e.mutations[y+1].transform&&(D.updateTransforms=e.mutations[y+1].transform.fieldTransforms,e.mutations.splice(y+1,1),++y)}const a=e.mutations.map(y=>Ei(s.Gt,y)),h=$i.fromMillis(e.localWriteTimeMs);return new xf(e.batchId,h,i,a)}function Fl(s){const e=pl(s.readTime),i=void 0!==s.lastLimboFreeSnapshotVersion?pl(s.lastLimboFreeSnapshotVersion):Yt.min();let a;var h;return void 0!==s.query.documents?(bn(1===(h=s.query).documents.length),a=vi(tr(Xc(h.documents[0])))):a=vi(rs(s.query)),new ra(a,s.targetId,0,s.lastListenSequenceNumber,e,i,ts.fromBase64String(s.resumeToken))}function Of(s,e){const i=Ud(e.snapshotVersion),a=Ud(e.lastLimboFreeSnapshotVersion);let h;h=Ca(e.target)?rd(s.Gt,e.target):mc(s.Gt,e.target);const y=e.resumeToken.toBase64();return new Ne(e.targetId,Ql(e.target),i,y,e.sequenceNumber,a,h)}function cd(s){const e=rs({parent:s.parent,structuredQuery:s.structuredQuery});return"LAST"===s.limitType?ea(e,e.limit,"L"):e}class Kg{getBundleMetadata(e,i){return Sh(e).get(i).next(a=>{if(a)return{id:(h=a).bundleId,createTime:pl(h.createTime),version:h.version};var h})}saveBundleMetadata(e,i){return Sh(e).put({bundleId:(a=i).id,createTime:Ud(ys(a.createTime)),version:a.version});var a}getNamedQuery(e,i){return Bd(e).get(i).next(a=>{if(a)return{name:(h=a).name,query:cd(h.bundledQuery),readTime:pl(h.readTime)};var h})}saveNamedQuery(e,i){return Bd(e).put({name:(a=i).name,readTime:Ud(ys(a.readTime)),bundledQuery:a.bundledQuery});var a}}function Sh(s){return ro(s,en.store)}function Bd(s){return ro(s,hi.store)}class qg{constructor(){this.zt=new jd}addToCollectionParentIndex(e,i){return this.zt.add(i),gt.resolve()}getCollectionParents(e,i){return gt.resolve(this.zt.getEntries(i))}}class jd{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),h=this.index[i]||new Oi(yr.comparator),y=!h.has(a);return this.index[i]=h.add(a),y}has(e){const i=e.lastSegment(),a=e.popLast(),h=this.index[i];return h&&h.has(a)}getEntries(e){return(this.index[e]||new Oi(yr.comparator)).toArray()}}class Zg{constructor(){this.Ht=new jd}addToCollectionParentIndex(e,i){if(!this.Ht.has(i)){const a=i.lastSegment(),h=i.popLast();e.addOnCommittedListener(()=>{this.Ht.add(i)});const y={collectionId:a,parent:Eo(h)};return Pf(e).put(y)}return gt.resolve()}getCollectionParents(e,i){const a=[],h=IDBKeyRange.bound([i,""],[mi(i),""],!1,!0);return Pf(e).Bt(h).next(y=>{for(const D of y){if(D.collectionId!==i)break;a.push(Ha(D.parent))}return a})}}function Pf(s){return ro(s,kt.store)}const xh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Io{constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Io(e,Io.DEFAULT_COLLECTION_PERCENTILE,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Rh(s,e,i){const a=s.store(b.store),h=s.store(g.store),y=[],D=IDBKeyRange.only(i.batchId);let j=0;const K=a.jt({range:D},(Ee,Fe,nt)=>(j++,nt.delete()));y.push(K.next(()=>{bn(1===j)}));const ae=[];for(const Ee of i.mutations){const Fe=g.key(e,Ee.key.path,i.batchId);y.push(h.delete(Fe)),ae.push(Ee.key)}return gt.waitFor(y).next(()=>ae)}function Oh(s){if(!s)return 0;let e;if(s.document)e=s.document;else if(s.unknownDocument)e=s.unknownDocument;else{if(!s.noDocument)throw qt();e=s.noDocument}return JSON.stringify(e).length}Io.DEFAULT_COLLECTION_PERCENTILE=10,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Io.DEFAULT=new Io(41943040,Io.DEFAULT_COLLECTION_PERCENTILE,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Io.DISABLED=new Io(-1,0,0);class Mf{constructor(e,i,a,h){this.userId=e,this.k=i,this.Jt=a,this.referenceDelegate=h,this.Yt={}}static Xt(e,i,a,h){bn(""!==e.uid);const y=e.isAuthenticated()?e.uid:"";return new Mf(y,i,a,h)}checkEmpty(e){let i=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ll(e).jt({index:b.userMutationsIndex,range:a},(h,y,D)=>{i=!1,D.done()}).next(()=>i)}addMutationBatch(e,i,a,h){const y=$a(e),D=Ll(e);return D.add({}).next(j=>{bn("number"==typeof j);const K=new xf(j,i,a,h),ae=function(nt,_t,At){const pn=At.baseMutations.map(Ss=>Ml(nt.Gt,Ss)),kn=At.mutations.map(Ss=>Ml(nt.Gt,Ss));return new b(_t,At.batchId,At.localWriteTime.toMillis(),pn,kn)}(this.k,this.userId,K),Ee=[];let Fe=new Oi((nt,_t)=>Rt(nt.canonicalString(),_t.canonicalString()));for(const nt of h){const _t=g.key(this.userId,nt.key.path,j);Fe=Fe.add(nt.key.path.popLast()),Ee.push(D.put(ae)),Ee.push(y.put(_t,g.PLACEHOLDER))}return Fe.forEach(nt=>{Ee.push(this.Jt.addToCollectionParentIndex(e,nt))}),e.addOnCommittedListener(()=>{this.Yt[j]=K.keys()}),gt.waitFor(Ee).next(()=>K)})}lookupMutationBatch(e,i){return Ll(e).get(i).next(a=>a?(bn(a.userId===this.userId),cu(this.k,a)):null)}Zt(e,i){return this.Yt[i]?gt.resolve(this.Yt[i]):this.lookupMutationBatch(e,i).next(a=>{if(a){const h=a.keys();return this.Yt[i]=h,h}return null})}getNextMutationBatchAfterBatchId(e,i){const a=i+1,h=IDBKeyRange.lowerBound([this.userId,a]);let y=null;return Ll(e).jt({index:b.userMutationsIndex,range:h},(D,j,K)=>{j.userId===this.userId&&(bn(j.batchId>=a),y=cu(this.k,j)),K.done()}).next(()=>y)}getHighestUnacknowledgedBatchId(e){const i=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Ll(e).jt({index:b.userMutationsIndex,range:i,reverse:!0},(h,y,D)=>{a=y.batchId,D.done()}).next(()=>a)}getAllMutationBatches(e){const i=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ll(e).Bt(b.userMutationsIndex,i).next(a=>a.map(h=>cu(this.k,h)))}getAllMutationBatchesAffectingDocumentKey(e,i){const a=g.prefixForPath(this.userId,i.path),h=IDBKeyRange.lowerBound(a),y=[];return $a(e).jt({range:h},(D,j,K)=>{const[ae,Ee,Fe]=D,nt=Ha(Ee);if(ae===this.userId&&i.path.isEqual(nt))return Ll(e).get(Fe).next(_t=>{if(!_t)throw qt();bn(_t.userId===this.userId),y.push(cu(this.k,_t))});K.done()}).next(()=>y)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new Oi(Rt);const h=[];return i.forEach(y=>{const D=g.prefixForPath(this.userId,y.path),j=IDBKeyRange.lowerBound(D),K=$a(e).jt({range:j},(ae,Ee,Fe)=>{const[nt,_t,At]=ae,pn=Ha(_t);nt===this.userId&&y.path.isEqual(pn)?a=a.add(At):Fe.done()});h.push(K)}),gt.waitFor(h).next(()=>this.te(e,a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,h=a.length+1,y=g.prefixForPath(this.userId,a),D=IDBKeyRange.lowerBound(y);let j=new Oi(Rt);return $a(e).jt({range:D},(K,ae,Ee)=>{const[Fe,nt,_t]=K,At=Ha(nt);Fe===this.userId&&a.isPrefixOf(At)?At.length===h&&(j=j.add(_t)):Ee.done()}).next(()=>this.te(e,j))}te(e,i){const a=[],h=[];return i.forEach(y=>{h.push(Ll(e).get(y).next(D=>{if(null===D)throw qt();bn(D.userId===this.userId),a.push(cu(this.k,D))}))}),gt.waitFor(h).next(()=>a)}removeMutationBatch(e,i){return Rh(e.Wt,this.userId,i).next(a=>(e.addOnCommittedListener(()=>{this.ee(i.batchId)}),gt.forEach(a,h=>this.referenceDelegate.markPotentiallyOrphaned(e,h))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(i=>{if(!i)return gt.resolve();const a=IDBKeyRange.lowerBound(g.prefixForUser(this.userId)),h=[];return $a(e).jt({range:a},(y,D,j)=>{if(y[0]===this.userId){const K=Ha(y[1]);h.push(K)}else j.done()}).next(()=>{bn(0===h.length)})})}containsKey(e,i){return Hd(e,this.userId,i)}ne(e){return Gu(e).get(this.userId).next(i=>i||new No(this.userId,-1,""))}}function Hd(s,e,i){const a=g.prefixForPath(e,i.path),h=a[1],y=IDBKeyRange.lowerBound(a);let D=!1;return $a(s).jt({range:y,Kt:!0},(j,K,ae)=>{const[Ee,Fe,nt]=j;Ee===e&&Fe===h&&(D=!0),ae.done()}).next(()=>D)}function Ll(s){return ro(s,b.store)}function $a(s){return ro(s,g.store)}function Gu(s){return ro(s,No.store)}class Fo{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new Fo(0)}static re(){return new Fo(-1)}}class Yg{constructor(e,i){this.referenceDelegate=e,this.k=i}allocateTargetId(e){return this.oe(e).next(i=>{const a=new Fo(i.highestTargetId);return i.highestTargetId=a.next(),this.ae(e,i).next(()=>i.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(i=>Yt.fromTimestamp(new $i(i.lastRemoteSnapshotVersion.seconds,i.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(i=>i.highestListenSequenceNumber)}setTargetsMetadata(e,i,a){return this.oe(e).next(h=>(h.highestListenSequenceNumber=i,a&&(h.lastRemoteSnapshotVersion=a.toTimestamp()),i>h.highestListenSequenceNumber&&(h.highestListenSequenceNumber=i),this.ae(e,h)))}addTargetData(e,i){return this.ce(e,i).next(()=>this.oe(e).next(a=>(a.targetCount+=1,this.ue(i,a),this.ae(e,a))))}updateTargetData(e,i){return this.ce(e,i)}removeTargetData(e,i){return this.removeMatchingKeysForTargetId(e,i.targetId).next(()=>gl(e).delete(i.targetId)).next(()=>this.oe(e)).next(a=>(bn(a.targetCount>0),a.targetCount-=1,this.ae(e,a)))}removeTargets(e,i,a){let h=0;const y=[];return gl(e).jt((D,j)=>{const K=Fl(j);K.sequenceNumber<=i&&null===a.get(K.targetId)&&(h++,y.push(this.removeTargetData(e,K)))}).next(()=>gt.waitFor(y)).next(()=>h)}forEachTarget(e,i){return gl(e).jt((a,h)=>{const y=Fl(h);i(y)})}oe(e){return $d(e).get(Et.key).next(i=>(bn(null!==i),i))}ae(e,i){return $d(e).put(Et.key,i)}ce(e,i){return gl(e).put(Of(this.k,i))}ue(e,i){let a=!1;return e.targetId>i.highestTargetId&&(i.highestTargetId=e.targetId,a=!0),e.sequenceNumber>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.oe(e).next(i=>i.targetCount)}getTargetData(e,i){const a=Ql(i),h=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let y=null;return gl(e).jt({range:h,index:Ne.queryTargetsIndexName},(D,j,K)=>{const ae=Fl(j);Jl(i,ae.target)&&(y=ae,K.done())}).next(()=>y)}addMatchingKeys(e,i,a){const h=[],y=du(e);return i.forEach(D=>{const j=Eo(D.path);h.push(y.put(new Ze(a,j))),h.push(this.referenceDelegate.addReference(e,a,D))}),gt.waitFor(h)}removeMatchingKeys(e,i,a){const h=du(e);return gt.forEach(i,y=>{const D=Eo(y.path);return gt.waitFor([h.delete([a,D]),this.referenceDelegate.removeReference(e,a,y)])})}removeMatchingKeysForTargetId(e,i){const a=du(e),h=IDBKeyRange.bound([i],[i+1],!1,!0);return a.delete(h)}getMatchingKeysForTargetId(e,i){const a=IDBKeyRange.bound([i],[i+1],!1,!0),h=du(e);let y=Cr();return h.jt({range:a,Kt:!0},(D,j,K)=>{const ae=Ha(D[1]),Ee=new Xt(ae);y=y.add(Ee)}).next(()=>y)}containsKey(e,i){const a=Eo(i.path),h=IDBKeyRange.bound([a],[mi(a)],!1,!0);let y=0;return du(e).jt({index:Ze.documentTargetsIndex,Kt:!0,range:h},([D,j],K,ae)=>{0!==D&&(y++,ae.done())}).next(()=>y>0)}Et(e,i){return gl(e).get(i).next(a=>a?Fl(a):null)}}function gl(s){return ro(s,Ne.store)}function $d(s){return ro(s,Et.store)}function du(s){return ro(s,Ze.store)}function Aa(s){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,Ie.Z)(function*(s){if(s.code!==C.FAILED_PRECONDITION||s.message!==uu)throw s;bt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Wd([s,e],[i,a]){const h=Rt(s,i);return 0===h?Rt(e,a):h}class Nf{constructor(e){this.he=e,this.buffer=new Oi(Wd),this.le=0}fe(){return++this.le}de(e){const i=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();Wd(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class Gd{constructor(e,i){this.garbageCollector=e,this.asyncQueue=i,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var i=this;const a=this.we?3e5:6e4;bt("LruGarbageCollector",`Garbage collection scheduled in ${a}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,(0,Ie.Z)(function*(){i._e=null,i.we=!0;try{yield e.collectGarbage(i.garbageCollector)}catch(h){kl(h)?bt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",h):yield Aa(h)}yield i.me(e)}))}}class Ec{constructor(e,i){this.ge=e,this.params=i}calculateTargetCount(e,i){return this.ge.ye(e).next(a=>Math.floor(i/100*a))}nthSequenceNumber(e,i){if(0===i)return gt.resolve(vr.I);const a=new Nf(i);return this.ge.forEachTarget(e,h=>a.de(h.sequenceNumber)).next(()=>this.ge.pe(e,h=>a.de(h))).next(()=>a.maxValue)}removeTargets(e,i,a){return this.ge.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.ge.removeOrphanedDocuments(e,i)}collect(e,i){return-1===this.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector","Garbage collection skipped; disabled"),gt.resolve(xh)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(bt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xh):this.Te(e,i))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,i){let a,h,y,D,j,K,ae;const Ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Fe=>(Fe>this.params.maximumSequenceNumbersToCollect?(bt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Fe}`),h=this.params.maximumSequenceNumbersToCollect):h=Fe,D=Date.now(),this.nthSequenceNumber(e,h))).next(Fe=>(a=Fe,j=Date.now(),this.removeTargets(e,a,i))).next(Fe=>(y=Fe,K=Date.now(),this.removeOrphanedDocuments(e,a))).next(Fe=>(ae=Date.now(),il()<=Wt.in.DEBUG&&bt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${D-Ee}ms\n\tDetermined least recently used ${h} in `+(j-D)+`ms\n\tRemoved ${y} targets in `+(K-j)+`ms\n\tRemoved ${Fe} documents in `+(ae-K)+`ms\nTotal Duration: ${ae-Ee}ms`),gt.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:y,documentsRemoved:Fe})))}}class Mh{constructor(e,i){this.db=e,this.garbageCollector=new Ec(this,i)}ye(e){const i=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(a=>i.next(h=>a+h))}Ee(e){let i=0;return this.pe(e,a=>{i++}).next(()=>i)}forEachTarget(e,i){return this.db.getTargetCache().forEachTarget(e,i)}pe(e,i){return this.Ie(e,(a,h)=>i(h))}addReference(e,i,a){return zu(e,a)}removeReference(e,i,a){return zu(e,a)}removeTargets(e,i,a){return this.db.getTargetCache().removeTargets(e,i,a)}markPotentiallyOrphaned(e,i){return zu(e,i)}Ae(e,i){return function(a,h){let y=!1;return Gu(a).Qt(D=>Hd(a,D,h).next(j=>(j&&(y=!0),gt.resolve(!j)))).next(()=>y)}(e,i)}removeOrphanedDocuments(e,i){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),h=[];let y=0;return this.Ie(e,(D,j)=>{if(j<=i){const K=this.Ae(e,D).next(ae=>{if(!ae)return y++,a.getEntry(e,D).next(()=>(a.removeEntry(D),du(e).delete([0,Eo(D.path)])))});h.push(K)}}).next(()=>gt.waitFor(h)).next(()=>a.apply(e)).next(()=>y)}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,i){return zu(e,i)}Ie(e,i){const a=du(e);let h,y=vr.I;return a.jt({index:Ze.documentTargetsIndex},([D,j],{path:K,sequenceNumber:ae})=>{0===D?(y!==vr.I&&i(new Xt(Ha(h)),y),y=ae,h=K):y=vr.I}).next(()=>{y!==vr.I&&i(new Xt(Ha(h)),y)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zu(s,e){return du(s).put((a=s.currentSequenceNumber,new Ze(0,Eo(e.path),a)));var a}class Cc{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={}}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0!==a)for(const[h,y]of a)if(this.equalsFn(h,e))return y}has(e){return void 0!==this.get(e)}set(e,i){const a=this.mapKeyFn(e),h=this.inner[a];if(void 0!==h){for(let y=0;y<h.length;y++)if(this.equalsFn(h[y][0],e))return void(h[y]=[e,i]);h.push([e,i])}else this.inner[a]=[[e,i]]}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return!1;for(let h=0;h<a.length;h++)if(this.equalsFn(a[h][0],e))return 1===a.length?delete this.inner[i]:a.splice(h,1),!0;return!1}forEach(e){Su(this.inner,(i,a)=>{for(const[h,y]of a)e(h,y)})}isEmpty(){return Bc(this.inner)}}class Nh{constructor(){this.changes=new Cc(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}getReadTime(e){const i=this.changes.get(e);return i?i.readTime:Yt.min()}addEntry(e,i){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:i})}removeEntry(e,i=null){this.assertNotApplied(),this.changes.set(e,{document:Qr.newInvalidDocument(e),readTime:i})}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return void 0!==a?gt.resolve(a.document):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bc{constructor(e,i){this.k=e,this.Jt=i}addEntry(e,i,a){return hu(e).put(zd(i),a)}removeEntry(e,i){const a=hu(e),h=zd(i);return a.delete(h)}updateMetadata(e,i){return this.getMetadata(e).next(a=>(a.byteSize+=i,this.Re(e,a)))}getEntry(e,i){return hu(e).get(zd(i)).next(a=>this.Pe(i,a))}be(e,i){return hu(e).get(zd(i)).next(a=>({document:this.Pe(i,a),size:Oh(a)}))}getEntries(e,i){let a=Ks();return this.ve(e,i,(h,y)=>{const D=this.Pe(h,y);a=a.insert(h,D)}).next(()=>a)}Ve(e,i){let a=Ks(),h=new _s(Xt.comparator);return this.ve(e,i,(y,D)=>{const j=this.Pe(y,D);a=a.insert(y,j),h=h.insert(y,Oh(D))}).next(()=>({documents:a,Se:h}))}ve(e,i,a){if(i.isEmpty())return gt.resolve();const h=IDBKeyRange.bound(i.first().path.toArray(),i.last().path.toArray()),y=i.getIterator();let D=y.getNext();return hu(e).jt({range:h},(j,K,ae)=>{const Ee=Xt.fromSegments(j);for(;D&&Xt.comparator(D,Ee)<0;)a(D,null),D=y.getNext();D&&D.isEqual(Ee)&&(a(D,K),D=y.hasNext()?y.getNext():null),D?ae.Lt(D.path.toArray()):ae.done()}).next(()=>{for(;D;)a(D,null),D=y.hasNext()?y.getNext():null})}getDocumentsMatchingQuery(e,i,a){let h=Ks();const y=i.path.length+1,D={};if(a.isEqual(Yt.min())){const j=i.path.toArray();D.range=IDBKeyRange.lowerBound(j)}else{const j=i.path.toArray(),K=ud(a);D.range=IDBKeyRange.lowerBound([j,K],!0),D.index=W.collectionReadTimeIndex}return hu(e).jt(D,(j,K,ae)=>{if(j.length!==y)return;const Ee=Vd(this.k,K);i.path.isPrefixOf(Ee.key.path)?Po(i,Ee)&&(h=h.insert(Ee.key,Ee)):ae.done()}).next(()=>h)}newChangeBuffer(e){return new Qg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(i=>i.byteSize)}getMetadata(e){return kh(e).get(ne.key).next(i=>(bn(!!i),i))}Re(e,i){return kh(e).put(ne.key,i)}Pe(e,i){if(i){const a=Vd(this.k,i);if(!a.isNoDocument()||!a.version.isEqual(Yt.min()))return a}return Qr.newInvalidDocument(e)}}class Qg extends Nh{constructor(e,i){super(),this.De=e,this.trackRemovals=i,this.Ce=new Cc(a=>a.toString(),(a,h)=>a.isEqual(h))}applyChanges(e){const i=[];let a=0,h=new Oi((y,D)=>Rt(y.canonicalString(),D.canonicalString()));return this.changes.forEach((y,D)=>{const j=this.Ce.get(y);if(D.document.isValidDocument()){const K=Ah(this.De.k,D.document,this.getReadTime(y));h=h.add(y.path.popLast()),a+=Oh(K)-j,i.push(this.De.addEntry(e,y,K))}else if(a-=j,this.trackRemovals){const K=Ah(this.De.k,Qr.newNoDocument(y,Yt.min()),this.getReadTime(y));i.push(this.De.addEntry(e,y,K))}else i.push(this.De.removeEntry(e,y))}),h.forEach(y=>{i.push(this.De.Jt.addToCollectionParentIndex(e,y))}),i.push(this.De.updateMetadata(e,a)),gt.waitFor(i)}getFromCache(e,i){return this.De.be(e,i).next(a=>(this.Ce.set(i,a.size),a.document))}getAllFromCache(e,i){return this.De.Ve(e,i).next(({documents:a,Se:h})=>(h.forEach((y,D)=>{this.Ce.set(y,D)}),a))}}function kh(s){return ro(s,ne.store)}function hu(s){return ro(s,W.store)}function zd(s){return s.path.toArray()}class kf{constructor(e){this.k=e}Nt(e,i,a,h){bn(a<h&&a>=0&&h<=11);const y=new fl("createOrUpgrade",i);var j;a<1&&h>=1&&(e.createObjectStore(qs.store),(j=e).createObjectStore(No.store,{keyPath:No.keyPath}),j.createObjectStore(b.store,{keyPath:b.keyPath,autoIncrement:!0}).createIndex(b.userMutationsIndex,b.userMutationsKeyPath,{unique:!0}),j.createObjectStore(g.store),io(e),function(j){j.createObjectStore(W.store)}(e));let D=gt.resolve();return a<3&&h>=3&&(0!==a&&(function(j){j.deleteObjectStore(Ze.store),j.deleteObjectStore(Ne.store),j.deleteObjectStore(Et.store)}(e),io(e)),D=D.next(()=>function(j){const K=j.store(Et.store),ae=new Et(0,0,Yt.min().toTimestamp(),0);return K.put(Et.key,ae)}(y))),a<4&&h>=4&&(0!==a&&(D=D.next(()=>function(j,K){return K.store(b.store).Bt().next(ae=>{j.deleteObjectStore(b.store),j.createObjectStore(b.store,{keyPath:b.keyPath,autoIncrement:!0}).createIndex(b.userMutationsIndex,b.userMutationsKeyPath,{unique:!0});const Ee=K.store(b.store),Fe=ae.map(nt=>Ee.put(nt));return gt.waitFor(Fe)})}(e,y))),D=D.next(()=>{!function(j){j.createObjectStore(on.store,{keyPath:on.keyPath})}(e)})),a<5&&h>=5&&(D=D.next(()=>this.Ne(y))),a<6&&h>=6&&(D=D.next(()=>(function(j){j.createObjectStore(ne.store)}(e),this.ke(y)))),a<7&&h>=7&&(D=D.next(()=>this.xe(y))),a<8&&h>=8&&(D=D.next(()=>this.$e(e,y))),a<9&&h>=9&&(D=D.next(()=>{(function(j){j.objectStoreNames.contains("remoteDocumentChanges")&&j.deleteObjectStore("remoteDocumentChanges")})(e),function(j){const K=j.objectStore(W.store);K.createIndex(W.readTimeIndex,W.readTimeIndexPath,{unique:!1}),K.createIndex(W.collectionReadTimeIndex,W.collectionReadTimeIndexPath,{unique:!1})}(i)})),a<10&&h>=10&&(D=D.next(()=>this.Fe(y))),a<11&&h>=11&&(D=D.next(()=>{(function(j){j.createObjectStore(en.store,{keyPath:en.keyPath})})(e),function(j){j.createObjectStore(hi.store,{keyPath:hi.keyPath})}(e)})),D}ke(e){let i=0;return e.store(W.store).jt((a,h)=>{i+=Oh(h)}).next(()=>{const a=new ne(i);return e.store(ne.store).put(ne.key,a)})}Ne(e){const i=e.store(No.store),a=e.store(b.store);return i.Bt().next(h=>gt.forEach(h,y=>{const D=IDBKeyRange.bound([y.userId,-1],[y.userId,y.lastAcknowledgedBatchId]);return a.Bt(b.userMutationsIndex,D).next(j=>gt.forEach(j,K=>{bn(K.userId===y.userId);const ae=cu(this.k,K);return Rh(e,y.userId,ae).next(()=>{})}))}))}xe(e){const i=e.store(Ze.store),a=e.store(W.store);return e.store(Et.store).get(Et.key).next(h=>{const y=[];return a.jt((D,j)=>{const K=new yr(D),ae=[0,Eo(K)];y.push(i.get(ae).next(Ee=>Ee?gt.resolve():i.put(new Ze(0,Eo(K),h.highestListenSequenceNumber))))}).next(()=>gt.waitFor(y))})}$e(e,i){e.createObjectStore(kt.store,{keyPath:kt.keyPath});const a=i.store(kt.store),h=new jd,y=D=>{if(h.add(D)){const j=D.lastSegment(),K=D.popLast();return a.put({collectionId:j,parent:Eo(K)})}};return i.store(W.store).jt({Kt:!0},(D,j)=>{const K=new yr(D);return y(K.popLast())}).next(()=>i.store(g.store).jt({Kt:!0},([D,j,K],ae)=>{const Ee=Ha(j);return y(Ee.popLast())}))}Fe(e){const i=e.store(Ne.store);return i.jt((a,h)=>{const y=Fl(h),D=Of(this.k,y);return i.put(D)})}}function io(s){s.createObjectStore(Ze.store,{keyPath:Ze.keyPath}).createIndex(Ze.documentTargetsIndex,Ze.documentTargetsKeyPath,{unique:!0}),s.createObjectStore(Ne.store,{keyPath:Ne.keyPath}).createIndex(Ne.queryTargetsIndexName,Ne.queryTargetsKeyPath,{unique:!0}),s.createObjectStore(Et.store)}const Ic="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fu{constructor(e,i,a,h,y,D,j,K,ae,Ee){if(this.allowTabSynchronization=e,this.persistenceKey=i,this.clientId=a,this.Oe=y,this.window=D,this.document=j,this.Me=ae,this.Le=Ee,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=Fe=>Promise.resolve(),!fu.bt())throw new M(C.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mh(this,h),this.Ge=i+"main",this.k=new ia(K),this.ze=new Wi(this.Ge,11,new kf(this.k)),this.He=new Yg(this.referenceDelegate,this.k),this.Jt=new Zg,this.Je=new bc(this.k,this.Jt),this.Ye=new Kg,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===Ee&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new M(C.FAILED_PRECONDITION,Ic);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new vr(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var i=this;return this.We=function(){var a=(0,Ie.Z)(function*(h){if(i.started)return e(h)});return function(h){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var i=(0,Ie.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return i.apply(this,arguments)}}())}setNetworkEnabled(e){var i=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Ie.Z)(function*(){i.started&&(yield i.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lo(e).put(new on(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(i=>{i||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(i=>this.isPrimary&&!i?this.an(e).next(()=>!1):!!i&&this.cn(e).next(()=>!0))).catch(e=>{if(kl(e))return bt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return bt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return pu(e).get(qs.key).next(i=>gt.resolve(this.un(i)))}hn(e){return Lo(e).delete(this.clientId)}ln(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const i=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const h=ro(a,on.store);return h.Bt().next(y=>{const D=e.dn(y,18e5),j=y.filter(K=>-1===D.indexOf(K));return gt.forEach(j,K=>h.delete(K.clientId)).next(()=>j)})}).catch(()=>[]);if(e.Xe)for(const a of i)e.Xe.removeItem(e.wn(a.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?gt.resolve(!0):pu(e).get(qs.key).next(i=>{if(null!==i&&this.fn(i.leaseTimestampMs,5e3)&&!this._n(i.ownerId)){if(this.un(i)&&this.networkEnabled)return!0;if(!this.un(i)){if(!i.allowTabSynchronization)throw new M(C.FAILED_PRECONDITION,Ic);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lo(e).Bt().next(a=>void 0===this.dn(a,5e3).find(h=>{if(this.clientId!==h.clientId){const D=!this.inForeground&&h.inForeground,j=this.networkEnabled===h.networkEnabled;if(!this.networkEnabled&&h.networkEnabled||D&&j)return!0}return!1}))}).next(i=>(this.isPrimary!==i&&bt("IndexedDbPersistence",`Client ${i?"is":"is not"} eligible for a primary lease.`),i))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[qs.store,on.store],i=>{const a=new no(i,vr.I);return e.an(a).next(()=>e.hn(a))}),e.ze.close(),e.pn()})()}dn(e,i){return e.filter(a=>this.fn(a.updateTimeMs,i)&&!this._n(a.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>Lo(e).Bt().next(i=>this.dn(i,18e5).map(a=>a.clientId)))}get started(){return this.Ue}getMutationQueue(e){return Mf.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,i,a){let y;return bt("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===i?"readonly":"readwrite",Co,D=>(y=new no(D,this.Be?this.Be.next():vr.I),"readwrite-primary"===i?this.rn(y).next(j=>!!j||this.on(y)).next(j=>{if(!j)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new M(C.FAILED_PRECONDITION,uu);return a(y)}).next(j=>this.cn(y).next(()=>j)):this.En(y).next(()=>a(y)))).then(D=>(y.raiseOnCommittedEvent(),D))}En(e){return pu(e).get(qs.key).next(i=>{if(null!==i&&this.fn(i.leaseTimestampMs,5e3)&&!this._n(i.ownerId)&&!this.un(i)&&!(this.Le||this.allowTabSynchronization&&i.allowTabSynchronization))throw new M(C.FAILED_PRECONDITION,Ic)})}cn(e){const i=new qs(this.clientId,this.allowTabSynchronization,Date.now());return pu(e).put(qs.key,i)}static bt(){return Wi.bt()}an(e){const i=pu(e);return i.get(qs.key).next(a=>this.un(a)?(bt("IndexedDbPersistence","Releasing primary lease."),i.delete(qs.key)):gt.resolve())}fn(e,i){const a=Date.now();return!(e<a-i||e>a&&(sr(`Detected an update time that is in the future: ${e} > ${a}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var i;try{const a=null!==(null===(i=this.Xe)||void 0===i?void 0:i.getItem(this.wn(e)));return bt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return sr("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pu(s){return ro(s,qs.store)}function Lo(s){return ro(s,on.store)}function Vl(s,e){let i=s.projectId;return s.isDefaultDatabase||(i+="."+s.database),"firestore/"+e+"/"+i+"/"}class jp{constructor(e,i){this.progress=e,this.In=i}}class Ff{constructor(e,i,a){this.Je=e,this.An=i,this.Jt=a}Rn(e,i){return this.An.getAllMutationBatchesAffectingDocumentKey(e,i).next(a=>this.Pn(e,i,a))}Pn(e,i,a){return this.Je.getEntry(e,i).next(h=>{for(const y of a)y.applyToLocalView(h);return h})}bn(e,i){e.forEach((a,h)=>{for(const y of i)y.applyToLocalView(h)})}vn(e,i){return this.Je.getEntries(e,i).next(a=>this.Vn(e,a).next(()=>a))}Vn(e,i){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,i).next(a=>this.bn(i,a))}getDocumentsMatchingQuery(e,i,a){return Xt.isDocumentKey((h=i).path)&&null===h.collectionGroup&&0===h.filters.length?this.Sn(e,i.path):Wc(i)?this.Dn(e,i,a):this.Cn(e,i,a);var h}Sn(e,i){return this.Rn(e,new Xt(i)).next(a=>{let h=Mo();return a.isFoundDocument()&&(h=h.insert(a.key,a)),h})}Dn(e,i,a){const h=i.collectionGroup;let y=Mo();return this.Jt.getCollectionParents(e,h).next(D=>gt.forEach(D,j=>{const K=(ae=i,Ee=j.child(h),new Oo(Ee,null,ae.explicitOrderBy.slice(),ae.filters.slice(),ae.limit,ae.limitType,ae.startAt,ae.endAt));var ae,Ee;return this.Cn(e,K,a).next(ae=>{ae.forEach((Ee,Fe)=>{y=y.insert(Ee,Fe)})})}).next(()=>y))}Cn(e,i,a){let h,y;return this.Je.getDocumentsMatchingQuery(e,i,a).next(D=>(h=D,this.An.getAllMutationBatchesAffectingQuery(e,i))).next(D=>(y=D,this.Nn(e,y,h).next(j=>{h=j;for(const K of y)for(const ae of K.mutations){const Ee=ae.key;let Fe=h.get(Ee);null==Fe&&(Fe=Qr.newInvalidDocument(Ee),h=h.insert(Ee,Fe)),zc(ae,Fe,K.localWriteTime),Fe.isFoundDocument()||(h=h.remove(Ee))}}))).next(()=>(h.forEach((D,j)=>{Po(i,j)||(h=h.remove(D))}),h))}Nn(e,i,a){let h=Cr();for(const D of i)for(const j of D.mutations)j instanceof Ol&&null===a.get(j.key)&&(h=h.add(j.key));let y=a;return this.Je.getEntries(e,h).next(D=>(D.forEach((j,K)=>{K.isFoundDocument()&&(y=y.insert(j,K))}),y))}}class js{constructor(e,i,a,h){this.targetId=e,this.fromCache=i,this.kn=a,this.xn=h}static $n(e,i){let a=Cr(),h=Cr();for(const y of i.docChanges)switch(y.type){case 0:a=a.add(y.doc.key);break;case 1:h=h.add(y.doc.key)}return new js(e,i.fromCache,a,h)}}class Jg{Fn(e){this.On=e}getDocumentsMatchingQuery(e,i,a,h){return 0===(y=i).filters.length&&null===y.limit&&null==y.startAt&&null==y.endAt&&(0===y.explicitOrderBy.length||1===y.explicitOrderBy.length&&y.explicitOrderBy[0].field.isKeyField())||a.isEqual(Yt.min())?this.Mn(e,i):this.On.vn(e,h).next(y=>{const D=this.Ln(i,y);return(As(i)||al(i))&&this.Bn(i.limitType,D,h,a)?this.Mn(e,i):(il()<=Wt.in.DEBUG&&bt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),uc(i)),this.On.getDocumentsMatchingQuery(e,i,a).next(j=>(D.forEach(K=>{j=j.insert(K.key,K)}),j)))});var y}Ln(e,i){let a=new Oi(cc(e));return i.forEach((h,y)=>{Po(e,y)&&(a=a.add(y))}),a}Bn(e,i,a,h){if(a.size!==i.size)return!0;const y="F"===e?i.last():i.first();return!!y&&(y.hasPendingWrites||y.version.compareTo(h)>0)}Mn(e,i){return il()<=Wt.in.DEBUG&&bt("QueryEngine","Using full collection scan to execute query:",uc(i)),this.On.getDocumentsMatchingQuery(e,i,Yt.min())}}class Hp{constructor(e,i,a,h){this.persistence=e,this.Un=i,this.k=h,this.qn=new _s(Rt),this.Kn=new Cc(y=>Ql(y),Jl),this.jn=Yt.min(),this.An=e.getMutationQueue(a),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Ff(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.qn))}}function $p(s,e,i,a){return new Hp(s,e,i,a)}function Fh(s,e){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,Ie.Z)(function*(s,e){const i=I(s);let a=i.An,h=i.Wn;const y=yield i.persistence.runTransaction("Handle user change","readonly",D=>{let j;return i.An.getAllMutationBatches(D).next(K=>(j=K,a=i.persistence.getMutationQueue(e),h=new Ff(i.Qn,a,i.persistence.getIndexManager()),a.getAllMutationBatches(D))).next(K=>{const ae=[],Ee=[];let Fe=Cr();for(const nt of j){ae.push(nt.batchId);for(const _t of nt.mutations)Fe=Fe.add(_t.key)}for(const nt of K){Ee.push(nt.batchId);for(const _t of nt.mutations)Fe=Fe.add(_t.key)}return h.vn(D,Fe).next(nt=>({Gn:nt,removedBatchIds:ae,addedBatchIds:Ee}))})});return i.An=a,i.Wn=h,i.Un.Fn(i.Wn),y})).apply(this,arguments)}function Xg(s,e){const i=I(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const h=e.batch.keys(),y=i.Qn.newChangeBuffer({trackRemovals:!0});return function(D,j,K,ae){const Ee=K.batch,Fe=Ee.keys();let nt=gt.resolve();return Fe.forEach(_t=>{nt=nt.next(()=>ae.getEntry(j,_t)).next(At=>{const pn=K.docVersions.get(_t);bn(null!==pn),At.version.compareTo(pn)<0&&(Ee.applyToRemoteDocument(At,K),At.isValidDocument()&&ae.addEntry(At,K.commitVersion))})}),nt.next(()=>D.An.removeMutationBatch(j,Ee))}(i,a,e,y).next(()=>y.apply(a)).next(()=>i.An.performConsistencyCheck(a)).next(()=>i.Wn.vn(a,h))})}function Vf(s){const e=I(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.He.getLastRemoteSnapshotVersion(i))}function em(s,e){const i=I(s),a=e.snapshotVersion;let h=i.qn;return i.persistence.runTransaction("Apply remote event","readwrite-primary",y=>{const D=i.Qn.newChangeBuffer({trackRemovals:!0});h=i.qn;const j=[];e.targetChanges.forEach((ae,Ee)=>{const Fe=h.get(Ee);if(!Fe)return;j.push(i.He.removeMatchingKeys(y,ae.removedDocuments,Ee).next(()=>i.He.addMatchingKeys(y,ae.addedDocuments,Ee)));const nt=ae.resumeToken;if(nt.approximateByteSize()>0){const _t=Fe.withResumeToken(nt,a).withSequenceNumber(y.currentSequenceNumber);h=h.insert(Ee,_t),At=Fe,kn=ae,bn((pn=_t).resumeToken.approximateByteSize()>0),(0===At.resumeToken.approximateByteSize()||pn.snapshotVersion.toMicroseconds()-At.snapshotVersion.toMicroseconds()>=3e8||kn.addedDocuments.size+kn.modifiedDocuments.size+kn.removedDocuments.size>0)&&j.push(i.He.updateTargetData(y,_t))}var At,pn,kn});let K=Ks();if(e.documentUpdates.forEach((ae,Ee)=>{e.resolvedLimboDocuments.has(ae)&&j.push(i.persistence.referenceDelegate.updateLimboDocument(y,ae))}),j.push(Kd(y,D,e.documentUpdates,a,void 0).next(ae=>{K=ae})),!a.isEqual(Yt.min())){const ae=i.He.getLastRemoteSnapshotVersion(y).next(Ee=>i.He.setTargetsMetadata(y,y.currentSequenceNumber,a));j.push(ae)}return gt.waitFor(j).next(()=>D.apply(y)).next(()=>i.Wn.Vn(y,K)).next(()=>K)}).then(y=>(i.qn=h,y))}function Kd(s,e,i,a,h){let y=Cr();return i.forEach(D=>y=y.add(D)),e.getEntries(s,y).next(D=>{let j=Ks();return i.forEach((K,ae)=>{const Ee=D.get(K),Fe=(null==h?void 0:h.get(K))||a;ae.isNoDocument()&&ae.version.isEqual(Yt.min())?(e.removeEntry(K,Fe),j=j.insert(K,ae)):!Ee.isValidDocument()||ae.version.compareTo(Ee.version)>0||0===ae.version.compareTo(Ee.version)&&Ee.hasPendingWrites?(e.addEntry(ae,Fe),j=j.insert(K,ae)):bt("LocalStore","Ignoring outdated watch update for ",K,". Current version:",Ee.version," Watch version:",ae.version)}),j})}function Lh(s,e){const i=I(s);return i.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),i.An.getNextMutationBatchAfterBatchId(a,e)))}function En(s,e){const i=I(s);return i.persistence.runTransaction("Allocate target","readwrite",a=>{let h;return i.He.getTargetData(a,e).next(y=>y?(h=y,gt.resolve(h)):i.He.allocateTargetId(a).next(D=>(h=new ra(e,D,0,a.currentSequenceNumber),i.He.addTargetData(a,h).next(()=>h))))}).then(a=>{const h=i.qn.get(a.targetId);return(null===h||a.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(i.qn=i.qn.insert(a.targetId,a),i.Kn.set(e,a.targetId)),a})}function gu(s,e,i){return qd.apply(this,arguments)}function qd(){return(qd=(0,Ie.Z)(function*(s,e,i){const a=I(s),h=a.qn.get(e),y=i?"readwrite":"readwrite-primary";try{i||(yield a.persistence.runTransaction("Release target",y,D=>a.persistence.referenceDelegate.removeTarget(D,h)))}catch(D){if(!kl(D))throw D;bt("LocalStore",`Failed to update sequence numbers for target ${e}: ${D}`)}a.qn=a.qn.remove(e),a.Kn.delete(h.target)})).apply(this,arguments)}function Ku(s,e,i){const a=I(s);let h=Yt.min(),y=Cr();return a.persistence.runTransaction("Execute query","readonly",D=>function(j,K,ae){const Ee=I(j),Fe=Ee.Kn.get(ae);return void 0!==Fe?gt.resolve(Ee.qn.get(Fe)):Ee.He.getTargetData(K,ae)}(a,D,vi(e)).next(j=>{if(j)return h=j.lastLimboFreeSnapshotVersion,a.He.getMatchingKeysForTargetId(D,j.targetId).next(K=>{y=K})}).next(()=>a.Un.getDocumentsMatchingQuery(D,e,i?h:Yt.min(),i?y:Cr())).next(j=>({documents:j,zn:y})))}function Sa(s,e){const i=I(s),a=I(i.He),h=i.qn.get(e);return h?Promise.resolve(h.target):i.persistence.runTransaction("Get target data","readonly",y=>a.Et(y,e).next(D=>D?D.target:null))}function Vh(s){const e=I(s);return e.persistence.runTransaction("Get new document changes","readonly",i=>function(a,h,y){const D=I(a);let j=Ks(),K=ud(y);const ae=hu(h),Ee=IDBKeyRange.lowerBound(K,!0);return ae.jt({index:W.readTimeIndex,range:Ee},(Fe,nt)=>{const _t=Vd(D.k,nt);j=j.insert(_t.key,_t),K=nt.readTime}).next(()=>({In:j,readTime:Rf(K)}))}(e.Qn,i,e.jn)).then(({In:i,readTime:a})=>(e.jn=a,i))}function Vo(){return(Vo=(0,Ie.Z)(function*(s){const e=I(s);return e.persistence.runTransaction("Synchronize last document change read time","readonly",i=>function(a){const h=hu(a);let y=Yt.min();return h.jt({index:W.readTimeIndex,reverse:!0},(D,j,K)=>{j.readTime&&(y=Rf(j.readTime)),K.done()}).next(()=>y)}(i)).then(i=>{e.jn=i})})).apply(this,arguments)}function Zd(){return(Zd=(0,Ie.Z)(function*(s,e,i,a){const h=I(s);let y=Cr(),D=Ks(),j=hc();for(const Ee of i){const Fe=e.Hn(Ee.metadata.name);Ee.document&&(y=y.add(Fe)),D=D.insert(Fe,e.Jn(Ee)),j=j.insert(Fe,e.Yn(Ee.metadata.readTime))}const K=h.Qn.newChangeBuffer({trackRemovals:!0}),ae=yield En(h,(Ee=a,vi(tr(yr.fromString(`__bundle__/docs/${Ee}`)))));var Ee;return h.persistence.runTransaction("Apply bundle documents","readwrite",Ee=>Kd(Ee,K,D,Yt.min(),j).next(Fe=>(K.apply(Ee),Fe)).next(Fe=>h.He.removeMatchingKeysForTargetId(Ee,ae.targetId).next(()=>h.He.addMatchingKeys(Ee,y,ae.targetId)).next(()=>h.Wn.Vn(Ee,Fe)).next(()=>Fe)))})).apply(this,arguments)}function Gp(s,e){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,Ie.Z)(function*(s,e,i=Cr()){const a=yield En(s,vi(cd(e.bundledQuery))),h=I(s);return h.persistence.runTransaction("Save named query","readwrite",y=>{const D=ys(e.readTime);if(a.snapshotVersion.compareTo(D)>=0)return h.Ye.saveNamedQuery(y,e);const j=a.withResumeToken(ts.EMPTY_BYTE_STRING,D);return h.qn=h.qn.insert(j.targetId,j),h.He.updateTargetData(y,j).next(()=>h.He.removeMatchingKeysForTargetId(y,a.targetId)).next(()=>h.He.addMatchingKeys(y,i,a.targetId)).next(()=>h.Ye.saveNamedQuery(y,e))})})).apply(this,arguments)}class tm{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,i){return gt.resolve(this.Xn.get(i))}saveBundleMetadata(e,i){var a;return this.Xn.set(i.id,{id:(a=i).id,version:a.version,createTime:ys(a.createTime)}),gt.resolve()}getNamedQuery(e,i){return gt.resolve(this.Zn.get(i))}saveNamedQuery(e,i){return this.Zn.set(i.name,{name:(a=i).name,query:cd(a.bundledQuery),readTime:ys(a.readTime)}),gt.resolve();var a}}class Uh{constructor(){this.ts=new Oi(so.es),this.ns=new Oi(so.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,i){const a=new so(e,i);this.ts=this.ts.add(a),this.ns=this.ns.add(a)}rs(e,i){e.forEach(a=>this.addReference(a,i))}removeReference(e,i){this.os(new so(e,i))}cs(e,i){e.forEach(a=>this.removeReference(a,i))}us(e){const i=new Xt(new yr([])),a=new so(i,e),h=new so(i,e+1),y=[];return this.ns.forEachInRange([a,h],D=>{this.os(D),y.push(D.key)}),y}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const i=new Xt(new yr([])),a=new so(i,e),h=new so(i,e+1);let y=Cr();return this.ns.forEachInRange([a,h],D=>{y=y.add(D.key)}),y}containsKey(e){const i=new so(e,0),a=this.ts.firstAfterOrEqual(i);return null!==a&&e.isEqual(a.key)}}class so{constructor(e,i){this.key=e,this.fs=i}static es(e,i){return Xt.comparator(e.key,i.key)||Rt(e.fs,i.fs)}static ss(e,i){return Rt(e.fs,i.fs)||Xt.comparator(e.key,i.key)}}class mu{constructor(e,i){this.Jt=e,this.referenceDelegate=i,this.An=[],this.ds=1,this.ws=new Oi(so.es)}checkEmpty(e){return gt.resolve(0===this.An.length)}addMutationBatch(e,i,a,h){const y=this.ds;this.ds++;const D=new xf(y,i,a,h);this.An.push(D);for(const j of h)this.ws=this.ws.add(new so(j.key,y)),this.Jt.addToCollectionParentIndex(e,j.key.path.popLast());return gt.resolve(D)}lookupMutationBatch(e,i){return gt.resolve(this._s(i))}getNextMutationBatchAfterBatchId(e,i){const h=this.gs(i+1),y=h<0?0:h;return gt.resolve(this.An.length>y?this.An[y]:null)}getHighestUnacknowledgedBatchId(){return gt.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return gt.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new so(i,0),h=new so(i,Number.POSITIVE_INFINITY),y=[];return this.ws.forEachInRange([a,h],D=>{const j=this._s(D.fs);y.push(j)}),gt.resolve(y)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new Oi(Rt);return i.forEach(h=>{const y=new so(h,0),D=new so(h,Number.POSITIVE_INFINITY);this.ws.forEachInRange([y,D],j=>{a=a.add(j.fs)})}),gt.resolve(this.ys(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,h=a.length+1;let y=a;Xt.isDocumentKey(y)||(y=y.child(""));const D=new so(new Xt(y),0);let j=new Oi(Rt);return this.ws.forEachWhile(K=>{const ae=K.key.path;return!!a.isPrefixOf(ae)&&(ae.length===h&&(j=j.add(K.fs)),!0)},D),gt.resolve(this.ys(j))}ys(e){const i=[];return e.forEach(a=>{const h=this._s(a);null!==h&&i.push(h)}),i}removeMutationBatch(e,i){bn(0===this.ps(i.batchId,"removed")),this.An.shift();let a=this.ws;return gt.forEach(i.mutations,h=>{const y=new so(h.key,i.batchId);return a=a.delete(y),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.ws=a})}ee(e){}containsKey(e,i){const a=new so(i,0),h=this.ws.firstAfterOrEqual(a);return gt.resolve(i.isEqual(h&&h.key))}performConsistencyCheck(e){return gt.resolve()}ps(e,i){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const i=this.gs(e);return i<0||i>=this.An.length?null:this.An[i]}}class Bh{constructor(e,i){this.Jt=e,this.Ts=i,this.docs=new _s(Xt.comparator),this.size=0}addEntry(e,i,a){const h=i.key,y=this.docs.get(h),D=y?y.size:0,j=this.Ts(i);return this.docs=this.docs.insert(h,{document:i.clone(),size:j,readTime:a}),this.size+=j-D,this.Jt.addToCollectionParentIndex(e,h.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return gt.resolve(a?a.document.clone():Qr.newInvalidDocument(i))}getEntries(e,i){let a=Ks();return i.forEach(h=>{const y=this.docs.get(h);a=a.insert(h,y?y.document.clone():Qr.newInvalidDocument(h))}),gt.resolve(a)}getDocumentsMatchingQuery(e,i,a){let h=Ks();const y=new Xt(i.path.child("")),D=this.docs.getIteratorFrom(y);for(;D.hasNext();){const{key:j,value:{document:K,readTime:ae}}=D.getNext();if(!i.path.isPrefixOf(j.path))break;ae.compareTo(a)<=0||Po(i,K)&&(h=h.insert(K.key,K.clone()))}return gt.resolve(h)}Es(e,i){return gt.forEach(this.docs,a=>i(a))}newChangeBuffer(e){return new jh(this)}getSize(e){return gt.resolve(this.size)}}class jh extends Nh{constructor(e){super(),this.De=e}applyChanges(e){const i=[];return this.changes.forEach((a,h)=>{h.document.isValidDocument()?i.push(this.De.addEntry(e,h.document,this.getReadTime(a))):this.De.removeEntry(a)}),gt.waitFor(i)}getFromCache(e,i){return this.De.getEntry(e,i)}getAllFromCache(e,i){return this.De.getEntries(e,i)}}class Uf{constructor(e){this.persistence=e,this.Is=new Cc(i=>Ql(i),Jl),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.As=0,this.Rs=new Uh,this.targetCount=0,this.Ps=Fo.ie()}forEachTarget(e,i){return this.Is.forEach((a,h)=>i(h)),gt.resolve()}getLastRemoteSnapshotVersion(e){return gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return gt.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),gt.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.As&&(this.As=i),gt.resolve()}ce(e){this.Is.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.Ps=new Fo(i),this.highestTargetId=i),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,i){return this.ce(i),this.targetCount+=1,gt.resolve()}updateTargetData(e,i){return this.ce(i),gt.resolve()}removeTargetData(e,i){return this.Is.delete(i.target),this.Rs.us(i.targetId),this.targetCount-=1,gt.resolve()}removeTargets(e,i,a){let h=0;const y=[];return this.Is.forEach((D,j)=>{j.sequenceNumber<=i&&null===a.get(j.targetId)&&(this.Is.delete(D),y.push(this.removeMatchingKeysForTargetId(e,j.targetId)),h++)}),gt.waitFor(y).next(()=>h)}getTargetCount(e){return gt.resolve(this.targetCount)}getTargetData(e,i){const a=this.Is.get(i)||null;return gt.resolve(a)}addMatchingKeys(e,i,a){return this.Rs.rs(i,a),gt.resolve()}removeMatchingKeys(e,i,a){this.Rs.cs(i,a);const h=this.persistence.referenceDelegate,y=[];return h&&i.forEach(D=>{y.push(h.markPotentiallyOrphaned(e,D))}),gt.waitFor(y)}removeMatchingKeysForTargetId(e,i){return this.Rs.us(i),gt.resolve()}getMatchingKeysForTargetId(e,i){const a=this.Rs.ls(i);return gt.resolve(a)}containsKey(e,i){return gt.resolve(this.Rs.containsKey(i))}}class E_{constructor(e,i){this.bs={},this.Be=new vr(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new Uf(this),this.Jt=new qg,this.Je=new Bh(this.Jt,a=>this.referenceDelegate.vs(a)),this.k=new ia(i),this.Ye=new tm(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let i=this.bs[e.toKey()];return i||(i=new mu(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=i),i}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,i,a){bt("MemoryPersistence","Starting transaction:",e);const h=new nm(this.Be.next());return this.referenceDelegate.Vs(),a(h).next(y=>this.referenceDelegate.Ss(h).next(()=>y)).toPromise().then(y=>(h.raiseOnCommittedEvent(),y))}Ds(e,i){return gt.or(Object.values(this.bs).map(a=>()=>a.containsKey(e,i)))}}class nm extends yc{constructor(e){super(),this.currentSequenceNumber=e}}class Hh{constructor(e){this.persistence=e,this.Cs=new Uh,this.Ns=null}static ks(e){return new Hh(e)}get xs(){if(this.Ns)return this.Ns;throw qt()}addReference(e,i,a){return this.Cs.addReference(a,i),this.xs.delete(a.toString()),gt.resolve()}removeReference(e,i,a){return this.Cs.removeReference(a,i),this.xs.add(a.toString()),gt.resolve()}markPotentiallyOrphaned(e,i){return this.xs.add(i.toString()),gt.resolve()}removeTarget(e,i){this.Cs.us(i.targetId).forEach(h=>this.xs.add(h.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next(h=>{h.forEach(y=>this.xs.add(y.toString()))}).next(()=>a.removeTargetData(e,i))}Vs(){this.Ns=new Set}Ss(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gt.forEach(this.xs,a=>{const h=Xt.fromPath(a);return this.$s(e,h).next(y=>{y||i.removeEntry(h)})}).next(()=>(this.Ns=null,i.apply(e)))}updateLimboDocument(e,i){return this.$s(e,i).next(a=>{a?this.xs.delete(i.toString()):this.xs.add(i.toString())})}vs(e){return 0}$s(e,i){return gt.or([()=>gt.resolve(this.Cs.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ds(e,i)])}}function rm(s,e){return`firestore_clients_${s}_${e}`}function zp(s,e,i){let a=`firestore_mutations_${s}_${i}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function Kp(s,e){return`firestore_targets_${s}_${e}`}class Qd{constructor(e,i,a,h){this.user=e,this.batchId=i,this.state=a,this.error=h}static Fs(e,i,a){const h=JSON.parse(a);let y,D="object"==typeof h&&-1!==["pending","acknowledged","rejected"].indexOf(h.state)&&(void 0===h.error||"object"==typeof h.error);return D&&h.error&&(D="string"==typeof h.error.message&&"string"==typeof h.error.code,D&&(y=new M(h.error.code,h.error.message))),D?new Qd(e,i,h.state,y):(sr("SharedClientState",`Failed to parse mutation state for ID '${i}': ${a}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dd{constructor(e,i,a){this.targetId=e,this.state=i,this.error=a}static Fs(e,i){const a=JSON.parse(i);let h,y="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return y&&a.error&&(y="string"==typeof a.error.message&&"string"==typeof a.error.code,y&&(h=new M(a.error.code,a.error.message))),y?new dd(e,a.state,h):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${i}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $h{constructor(e,i){this.clientId=e,this.activeTargetIds=i}static Fs(e,i){const a=JSON.parse(i);let h="object"==typeof a&&a.activeTargetIds instanceof Array,y=fc();for(let D=0;h&&D<a.activeTargetIds.length;++D)h=Ea(a.activeTargetIds[D]),y=y.add(a.activeTargetIds[D]);return h?new $h(e,y):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${i}`),null)}}class Jd{constructor(e,i){this.clientId=e,this.onlineState=i}static Fs(e){const i=JSON.parse(e);return"object"==typeof i&&-1!==["Unknown","Online","Offline"].indexOf(i.onlineState)&&"string"==typeof i.clientId?new Jd(i.clientId,i.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qp{constructor(){this.activeTargetIds=fc()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wa{constructor(e,i,a,h,y){this.window=e,this.Oe=i,this.persistenceKey=a,this.Bs=h,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new _s(Rt),this.started=!1,this.js=[];const D=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=y,this.Qs=rm(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new qp),this.Gs=new RegExp(`^firestore_clients_${D}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${D}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${D}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(j){return`firestore_bundle_loaded_${j}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const i=yield e.syncEngine.Tn();for(const h of i){if(h===e.Bs)continue;const y=e.getItem(rm(e.persistenceKey,h));if(y){const D=$h.Fs(h,y);D&&(e.Ks=e.Ks.insert(D.clientId,D))}}e.Xs();const a=e.storage.getItem(e.Js);if(a){const h=e.Zs(a);h&&e.ti(h)}for(const h of e.js)e.qs(h);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let i=!1;return this.Ks.forEach((a,h)=>{h.activeTargetIds.has(e)&&(i=!0)}),i}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,i,a){this.ni(e,i,a),this.si(e)}addLocalQueryTarget(e){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Kp(this.persistenceKey,e));if(a){const h=dd.Fs(e,a);h&&(i=h.state)}}return this.ii.Ms(e),this.Xs(),i}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kp(this.persistenceKey,e))}updateQueryState(e,i,a){this.ri(e,i,a)}handleUserChange(e,i,a){i.forEach(h=>{this.si(h)}),this.currentUser=e,a.forEach(h=>{this.addPendingMutation(h)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const i=this.storage.getItem(e);return bt("SharedClientState","READ",e,i),i}setItem(e,i){bt("SharedClientState","SET",e,i),this.storage.setItem(e,i)}removeItem(e){bt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var i=this;const a=e;if(a.storageArea===this.storage){if(bt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.Qs)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ie.Z)(function*(){if(i.started){if(null!==a.key)if(i.Gs.test(a.key)){if(null==a.newValue){const h=i.ci(a.key);return i.ui(h,null)}{const h=i.hi(a.key,a.newValue);if(h)return i.ui(h.clientId,h)}}else if(i.zs.test(a.key)){if(null!==a.newValue){const h=i.li(a.key,a.newValue);if(h)return i.fi(h)}}else if(i.Hs.test(a.key)){if(null!==a.newValue){const h=i.di(a.key,a.newValue);if(h)return i.wi(h)}}else if(a.key===i.Js){if(null!==a.newValue){const h=i.Zs(a.newValue);if(h)return i.ti(h)}}else if(a.key===i.Ws){const h=function(y){let D=vr.I;if(null!=y)try{const j=JSON.parse(y);bn("number"==typeof j),D=j}catch(j){sr("SharedClientState","Failed to read sequence number from WebStorage",j)}return D}(a.newValue);h!==vr.I&&i.sequenceNumberHandler(h)}else if(a.key===i.Ys)return i.syncEngine._i()}else i.js.push(a)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,i,a){const h=new Qd(this.currentUser,e,i,a),y=zp(this.persistenceKey,this.currentUser,e);this.setItem(y,h.Os())}si(e){const i=zp(this.persistenceKey,this.currentUser,e);this.removeItem(i)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,i,a){const h=Kp(this.persistenceKey,e),y=new dd(e,i,a);this.setItem(h,y.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const i=this.Gs.exec(e);return i?i[1]:null}hi(e,i){const a=this.ci(e);return $h.Fs(a,i)}li(e,i){const a=this.zs.exec(e),h=Number(a[1]);return Qd.Fs(new ci(void 0!==a[2]?a[2]:null),h,i)}di(e,i){const a=this.Hs.exec(e),h=Number(a[1]);return dd.Fs(h,i)}Zs(e){return Jd.Fs(e)}fi(e){var i=this;return(0,Ie.Z)(function*(){if(e.user.uid===i.currentUser.uid)return i.syncEngine.mi(e.batchId,e.state,e.error);bt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,i){const a=i?this.Ks.insert(e,i):this.Ks.remove(e),h=this.ei(this.Ks),y=this.ei(a),D=[],j=[];return y.forEach(K=>{h.has(K)||D.push(K)}),h.forEach(K=>{y.has(K)||j.push(K)}),this.syncEngine.yi(D,j).then(()=>{this.Ks=a})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let i=fc();return e.forEach((a,h)=>{i=i.unionWith(h.activeTargetIds)}),i}}class im{constructor(){this.pi=new qp,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,i,a){this.Ti[e]=i}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new qp,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Zp{Ei(e){}shutdown(){}}class Yp{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){bt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){bt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const C_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class sm{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class b_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,i,a,h,y){const D=this.Ui(e,i);bt("RestConnection","Sending: ",D,a);const j={};return this.qi(j,h,y),this.Ki(e,D,j,a).then(K=>(bt("RestConnection","Received: ",K),K),K=>{throw Yo("RestConnection",`${e} failed with error: `,K,"url: ",D,"request:",a),K})}ji(e,i,a,h,y){return this.Bi(e,i,a,h,y)}qi(e,i,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+va,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((h,y)=>e[y]=h),a&&a.headers.forEach((h,y)=>e[y]=h)}Ui(e,i){return`${this.Mi}/v1/${i}:${C_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,i,a,h){return new Promise((y,D)=>{const j=new On;j.listenOnce(Wr.COMPLETE,()=>{try{switch(j.getLastErrorCode()){case es.NO_ERROR:const ae=j.getResponseJson();bt("Connection","XHR received:",JSON.stringify(ae)),y(ae);break;case es.TIMEOUT:bt("Connection",'RPC "'+e+'" timed out'),D(new M(C.DEADLINE_EXCEEDED,"Request time out"));break;case es.HTTP_ERROR:const Ee=j.getStatus();if(bt("Connection",'RPC "'+e+'" failed with status:',Ee,"response text:",j.getResponseText()),Ee>0){const Fe=j.getResponseJson().error;if(Fe&&Fe.status&&Fe.message){const nt=function(_t){const At=_t.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(At)>=0?At:C.UNKNOWN}(Fe.status);D(new M(nt,Fe.message))}else D(new M(C.UNKNOWN,"Server responded with status "+j.getStatus()))}else D(new M(C.UNAVAILABLE,"Connection failed."));break;default:qt()}}finally{bt("Connection",'RPC "'+e+'" completed.')}});const K=JSON.stringify(h);j.send(i,"POST",K,a,15)})}Qi(e,i,a){const h=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=ji(),D=si(),j={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(j.xmlHttpFactory=new rl({})),this.qi(j.initMessageHeaders,i,a),(0,xt.uI)()||(0,xt.b$)()||(0,xt.d)()||(0,xt.w1)()||(0,xt.Mn)()||(0,xt.ru)()||(j.httpHeadersOverwriteParam="$httpHeaders");const K=h.join("");bt("Connection","Creating WebChannel: "+K,j);const ae=y.createWebChannel(K,j);let Ee=!1,Fe=!1;const nt=new sm({Vi:At=>{Fe?bt("Connection","Not sending because WebChannel is closed:",At):(Ee||(bt("Connection","Opening WebChannel transport."),ae.open(),Ee=!0),bt("Connection","WebChannel sending:",At),ae.send(At))},Si:()=>ae.close()}),_t=(At,pn,kn)=>{At.listen(pn,Ss=>{try{kn(Ss)}catch(ws){setTimeout(()=>{throw ws},0)}})};return _t(ae,Ws.EventType.OPEN,()=>{Fe||bt("Connection","WebChannel transport opened.")}),_t(ae,Ws.EventType.CLOSE,()=>{Fe||(Fe=!0,bt("Connection","WebChannel transport closed"),nt.Fi())}),_t(ae,Ws.EventType.ERROR,At=>{Fe||(Fe=!0,Yo("Connection","WebChannel transport errored:",At),nt.Fi(new M(C.UNAVAILABLE,"The operation could not be completed")))}),_t(ae,Ws.EventType.MESSAGE,At=>{var pn;if(!Fe){const kn=At.data[0];bn(!!kn);const Ss=kn,ws=Ss.error||(null===(pn=Ss[0])||void 0===pn?void 0:pn.error);if(ws){bt("Connection","WebChannel received error:",ws);const Id=ws.status;let la=function(Mp){const Rg=wi[Mp];if(void 0!==Rg)return Pd(Rg)}(Id),Ya=ws.message;void 0===la&&(la=C.INTERNAL,Ya="Unknown error status: "+Id+" with message "+ws.message),Fe=!0,nt.Fi(new M(la,Ya)),ae.close()}else bt("Connection","WebChannel received:",kn),nt.Oi(kn)}}),_t(D,Il.STAT_EVENT,At=>{At.stat===Tu.PROXY?bt("Connection","Detected buffering proxy"):At.stat===Tu.NOPROXY&&bt("Connection","Detected no buffering proxy")}),setTimeout(()=>{nt.$i()},0),nt}}function om(){return"undefined"!=typeof window?window:null}function Bf(){return"undefined"!=typeof document?document:null}function Wh(s){return new pc(s,!0)}class _u{constructor(e,i,a=1e3,h=1.5,y=6e4){this.Oe=e,this.timerId=i,this.Wi=a,this.Gi=h,this.zi=y,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const i=Math.floor(this.Hi+this.tr()),a=Math.max(0,Date.now()-this.Yi),h=Math.max(0,i-a);h>0&&bt("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Hi} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,h,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class Gh{constructor(e,i,a,h,y,D,j,K){this.Oe=e,this.nr=a,this.sr=h,this.ir=y,this.authCredentialsProvider=D,this.appCheckCredentialsProvider=j,this.listener=K,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new _u(e,i)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,Ie.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,Ie.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,i){var a=this;return(0,Ie.Z)(function*(){a.yr(),a.pr(),a.ur.cancel(),a.rr++,4!==e?a.ur.reset():i&&i.code===C.RESOURCE_EXHAUSTED?(sr(i.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),a.ur.Xi()):i&&i.code===C.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Tr(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.Ni(i)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),i=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,h])=>{this.rr===i&&this.Ir(a,h)},a=>{e(()=>{const h=new M(C.UNKNOWN,"Fetching auth token failed: "+a.message);return this.Ar(h)})})}Ir(e,i){const a=this.Er(this.rr);this.stream=this.Rr(e,i),this.stream.Di(()=>{a(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(h=>{a(()=>this.Ar(h))}),this.stream.onMessage(h=>{a(()=>this.onMessage(h))})}dr(){var e=this;this.state=5,this.ur.Zi((0,Ie.Z)(function*(){e.state=0,e.start()}))}Ar(e){return bt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return i=>{this.Oe.enqueueAndForget(()=>this.rr===e?i():(bt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class am extends Gh{constructor(e,i,a,h,y,D){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,h,D),this.k=y}Rr(e,i){return this.ir.Qi("Listen",e,i)}onMessage(e){this.ur.reset();const i=function(s,e){let i;if("targetChange"in e){const a="NO_CHANGE"===(K=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===K?1:"REMOVE"===K?2:"CURRENT"===K?3:"RESET"===K?4:qt(),h=e.targetChange.targetIds||[],y=function(K,ae){return K.C?(bn(void 0===ae||"string"==typeof ae),ts.fromBase64String(ae||"")):(bn(void 0===ae||ae instanceof Uint8Array),ts.fromUint8Array(ae||new Uint8Array))}(s,e.targetChange.resumeToken),D=e.targetChange.cause,j=D&&function(K){const ae=void 0===K.code?C.UNKNOWN:Pd(K.code);return new M(ae,K.message||"")}(D);i=new Sf(a,h,y,j||null)}else if("documentChange"in e){const a=e.documentChange,h=Bs(s,a.document.name),y=ys(a.document.updateTime),D=new di({mapValue:{fields:a.document.fields}}),j=Qr.newFoundDocument(h,y,D);i=new ou(a.targetIds||[],a.removedTargetIds||[],j.key,j)}else if("documentDelete"in e){const a=e.documentDelete,h=Bs(s,a.document),y=a.readTime?ys(a.readTime):Yt.min(),D=Qr.newNoDocument(h,y);i=new ou([],a.removedTargetIds||[],D.key,D)}else if("documentRemove"in e){const a=e.documentRemove,h=Bs(s,a.document);i=new ou([],a.removedTargetIds||[],h,null)}else{if(!("filter"in e))return qt();{const a=e.filter,y=new Af(a.count||0);i=new au(a.targetId,y)}}var K;return i}(this.k,e),a=function(h){if(!("targetChange"in h))return Yt.min();const y=h.targetChange;return y.targetIds&&y.targetIds.length?Yt.min():y.readTime?ys(y.readTime):Yt.min()}(e);return this.listener.Pr(i,a)}br(e){const i={};i.database=ju(this.k),i.addTarget=function(h,y){let D;const j=y.target;return D=Ca(j)?{documents:rd(h,j)}:{query:mc(h,j)},D.targetId=y.targetId,y.resumeToken.approximateByteSize()>0?D.resumeToken=Fd(h,y.resumeToken):y.snapshotVersion.compareTo(Yt.min())>0&&(D.readTime=Da(h,y.snapshotVersion.toTimestamp())),D}(this.k,e);const a=function(s,e){const i=function(a,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return qt()}}(0,e.purpose);return null==i?null:{"goog-listen-tags":i}}(0,e);a&&(i.labels=a),this.gr(i)}vr(e){const i={};i.database=ju(this.k),i.removeTarget=e,this.gr(i)}}class Qp extends Gh{constructor(e,i,a,h,y,D){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,h,D),this.k=y,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,i){return this.ir.Qi("Write",e,i)}onMessage(e){if(bn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const i=function(s,e){return s&&s.length>0?(bn(void 0!==e),s.map(i=>function(a,h){let y=ys(a.updateTime?a.updateTime:h);return y.isEqual(Yt.min())&&(y=ys(h)),new wh(y,a.transformResults||[])}(i,e))):[]}(e.writeResults,e.commitTime),a=ys(e.commitTime);return this.listener.Cr(a,i)}return bn(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=ju(this.k),this.gr(e)}Dr(e){const i={streamToken:this.lastStreamToken,writes:e.map(a=>Ml(this.k,a))};this.gr(i)}}class jf extends class{}{constructor(e,i,a,h){super(),this.authCredentials=e,this.appCheckCredentials=i,this.ir=a,this.k=h,this.$r=!1}Fr(){if(this.$r)throw new M(C.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,i,a){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,y])=>this.ir.Bi(e,i,a,h,y)).catch(h=>{throw"FirebaseError"===h.name?(h.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new M(C.UNKNOWN,h.toString())})}ji(e,i,a){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,y])=>this.ir.ji(e,i,a,h,y)).catch(h=>{throw"FirebaseError"===h.name?(h.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new M(C.UNKNOWN,h.toString())})}terminate(){this.$r=!0}}class Jp{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const i=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(sr(i),this.Lr=!1):bt("OnlineStateTracker",i)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class Hf{constructor(e,i,a,h,y){var D=this;this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=y,this.Hr.Ei(j=>{a.enqueueAndForget((0,Ie.Z)(function*(){var K;Ga(D)&&(bt("RemoteStore","Restarting streams for network reachability change."),yield(K=(0,Ie.Z)(function*(ae){const Ee=I(ae);Ee.Gr.add(4),yield Dc(Ee),Ee.Jr.set("Unknown"),Ee.Gr.delete(4),yield Xd(Ee)}),function(ae){return K.apply(this,arguments)})(D))}))}),this.Jr=new Jp(a,h)}}function Xd(s){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,Ie.Z)(function*(s){if(Ga(s))for(const e of s.zr)yield e(!0)})).apply(this,arguments)}function Dc(s){return $f.apply(this,arguments)}function $f(){return($f=(0,Ie.Z)(function*(s){for(const e of s.zr)yield e(!1)})).apply(this,arguments)}function Xp(s,e){const i=I(s);i.Wr.has(e.targetId)||(i.Wr.set(e.targetId,e),zh(i)?zf(i):Sc(i).lr()&&Wf(i,e))}function hd(s,e){const i=I(s),a=Sc(i);i.Wr.delete(e),a.lr()&&Gf(i,e),0===i.Wr.size&&(a.lr()?a._r():Ga(i)&&i.Jr.set("Unknown"))}function Wf(s,e){s.Yr.X(e.targetId),Sc(s).br(e)}function Gf(s,e){s.Yr.X(e),Sc(s).vr(e)}function zf(s){s.Yr=new hl({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>s.Wr.get(e)||null}),Sc(s).start(),s.Jr.Br()}function zh(s){return Ga(s)&&!Sc(s).hr()&&s.Wr.size>0}function Ga(s){return 0===I(s).Gr.size}function Tc(s){s.Yr=void 0}function Kf(s){return qu.apply(this,arguments)}function qu(){return(qu=(0,Ie.Z)(function*(s){s.Wr.forEach((e,i)=>{Wf(s,e)})})).apply(this,arguments)}function za(s,e){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,Ie.Z)(function*(s,e){Tc(s),zh(s)?(s.Jr.Kr(e),zf(s)):s.Jr.set("Unknown")})).apply(this,arguments)}function xa(s,e,i){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,Ie.Z)(function*(s,e,i){if(s.Jr.set("Online"),e instanceof Sf&&2===e.state&&e.cause)try{yield(a=(0,Ie.Z)(function*(h,y){const D=y.cause;for(const j of y.targetIds)h.Wr.has(j)&&(yield h.remoteSyncer.rejectListen(j,D),h.Wr.delete(j),h.Yr.removeTarget(j))}),function(h,y){return a.apply(this,arguments)})(s,e)}catch(a){bt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield eh(s,a)}else if(e instanceof ou?s.Yr.ot(e):e instanceof au?s.Yr.dt(e):s.Yr.ut(e),!i.isEqual(Yt.min()))try{const a=yield Vf(s.localStore);i.compareTo(a)>=0&&(yield function(h,y){const D=h.Yr.gt(y);return D.targetChanges.forEach((j,K)=>{if(j.resumeToken.approximateByteSize()>0){const ae=h.Wr.get(K);ae&&h.Wr.set(K,ae.withResumeToken(j.resumeToken,y))}}),D.targetMismatches.forEach(j=>{const K=h.Wr.get(j);if(!K)return;h.Wr.set(j,K.withResumeToken(ts.EMPTY_BYTE_STRING,K.snapshotVersion)),Gf(h,j);const ae=new ra(K.target,j,1,K.sequenceNumber);Wf(h,ae)}),h.remoteSyncer.applyRemoteEvent(D)}(s,i))}catch(a){bt("RemoteStore","Failed to raise snapshot:",a),yield eh(s,a)}var a})).apply(this,arguments)}function eh(s,e,i){return th.apply(this,arguments)}function th(){return(th=(0,Ie.Z)(function*(s,e,i){if(!kl(e))throw e;s.Gr.add(1),yield Dc(s),s.Jr.set("Offline"),i||(i=()=>Vf(s.localStore)),s.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){bt("RemoteStore","Retrying IndexedDB access"),yield i(),s.Gr.delete(1),yield Xd(s)}))})).apply(this,arguments)}function Kh(s,e){return e().catch(i=>eh(s,i,e))}function Ac(s){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,Ie.Z)(function*(s){const e=I(s),i=xc(e);let a=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;lm(e);)try{const h=yield Lh(e.localStore,a);if(null===h){0===e.Qr.length&&i._r();break}a=h.batchId,eg(e,h)}catch(h){yield eh(e,h)}tg(e)&&qh(e)})).apply(this,arguments)}function lm(s){return Ga(s)&&s.Qr.length<10}function eg(s,e){s.Qr.push(e);const i=xc(s);i.lr()&&i.Sr&&i.Dr(e.mutations)}function tg(s){return Ga(s)&&!xc(s).hr()&&s.Qr.length>0}function qh(s){xc(s).start()}function qf(s){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,Ie.Z)(function*(s){xc(s).kr()})).apply(this,arguments)}function fd(s){return Zf.apply(this,arguments)}function Zf(){return(Zf=(0,Ie.Z)(function*(s){const e=xc(s);for(const i of s.Qr)e.Dr(i.mutations)})).apply(this,arguments)}function ng(s,e,i){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,Ie.Z)(function*(s,e,i){const a=s.Qr.shift(),h=wc.from(a,e,i);yield Kh(s,()=>s.remoteSyncer.applySuccessfulWrite(h)),yield Ac(s)})).apply(this,arguments)}function um(s,e){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,Ie.Z)(function*(s,e){var i;e&&xc(s).Sr&&(yield(i=(0,Ie.Z)(function*(a,h){if(Zc(y=h.code)&&y!==C.ABORTED){const D=a.Qr.shift();xc(a).wr(),yield Kh(a,()=>a.remoteSyncer.rejectFailedWrite(D.batchId,h)),yield Ac(a)}var y}),function(a,h){return i.apply(this,arguments)})(s,e)),tg(s)&&qh(s)})).apply(this,arguments)}function Yf(s,e){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,Ie.Z)(function*(s,e){const i=I(s);e?(i.Gr.delete(2),yield Xd(i)):e||(i.Gr.add(2),yield Dc(i),i.Jr.set("Unknown"))})).apply(this,arguments)}function Sc(s){return s.Xr||(s.Xr=function(e,i,a){const h=I(e);return h.Fr(),new am(i,h.ir,h.authCredentials,h.appCheckCredentials,h.k,a)}(s.datastore,s.asyncQueue,{Di:Kf.bind(null,s),Ni:za.bind(null,s),Pr:xa.bind(null,s)}),s.zr.push(function(){var e=(0,Ie.Z)(function*(i){i?(s.Xr.wr(),zh(s)?zf(s):s.Jr.set("Unknown")):(yield s.Xr.stop(),Tc(s))});return function(i){return e.apply(this,arguments)}}())),s.Xr}function xc(s){return s.Zr||(s.Zr=function(e,i,a){const h=I(e);return h.Fr(),new Qp(i,h.ir,h.authCredentials,h.appCheckCredentials,h.k,a)}(s.datastore,s.asyncQueue,{Di:qf.bind(null,s),Ni:um.bind(null,s),Nr:fd.bind(null,s),Cr:ng.bind(null,s)}),s.zr.push(function(){var e=(0,Ie.Z)(function*(i){i?(s.Zr.wr(),yield Ac(s)):(yield s.Zr.stop(),s.Qr.length>0&&(bt("RemoteStore",`Stopping write stream with ${s.Qr.length} pending writes`),s.Qr=[]))});return function(i){return e.apply(this,arguments)}}())),s.Zr}class Jf{constructor(e,i,a,h,y){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=h,this.removalCallback=y,this.deferred=new $,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(D=>{})}static createAndSchedule(e,i,a,h,y){const D=Date.now()+a,j=new Jf(e,i,D,h,y);return j.start(a),j}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new M(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yu(s,e){if(sr("AsyncQueue",`${e}: ${s}`),kl(s))return new M(C.UNAVAILABLE,`${e}: ${s}`);throw s}class Rc{constructor(e){this.comparator=e?(i,a)=>e(i,a)||Xt.comparator(i.key,a.key):(i,a)=>Xt.comparator(i.key,a.key),this.keyedMap=Mo(),this.sortedSet=new _s(this.comparator)}static emptySet(e){return new Rc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,a)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Rc)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const h=i.getNext().key,y=a.getNext().key;if(!h.isEqual(y))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,i){const a=new Rc;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}class rg{constructor(){this.eo=new _s(Xt.comparator)}track(e){const i=e.doc.key,a=this.eo.get(i);a?0!==e.type&&3===a.type?this.eo=this.eo.insert(i,e):3===e.type&&1!==a.type?this.eo=this.eo.insert(i,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.eo=this.eo.insert(i,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.eo=this.eo.insert(i,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.eo=this.eo.remove(i):1===e.type&&2===a.type?this.eo=this.eo.insert(i,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.eo=this.eo.insert(i,{type:2,doc:e.doc}):qt():this.eo=this.eo.insert(i,e)}no(){const e=[];return this.eo.inorderTraversal((i,a)=>{e.push(a)}),e}}class Oc{constructor(e,i,a,h,y,D,j,K){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=h,this.mutatedKeys=y,this.fromCache=D,this.syncStateChanged=j,this.excludesMetadataChanges=K}static fromInitialDocuments(e,i,a,h){const y=[];return i.forEach(D=>{y.push({type:0,doc:D})}),new Oc(e,i,Rc.emptySet(i),y,a,h,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let h=0;h<i.length;h++)if(i[h].type!==a[h].type||!i[h].doc.isEqual(a[h].doc))return!1;return!0}}class cm{constructor(){this.so=void 0,this.listeners=[]}}class ig{constructor(){this.queries=new Cc(e=>xl(e),yo),this.onlineState="Unknown",this.io=new Set}}function Xf(s,e){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,Ie.Z)(function*(s,e){const i=I(s),a=e.query;let h=!1,y=i.queries.get(a);if(y||(h=!0,y=new cm),h)try{y.so=yield i.onListen(a)}catch(D){const j=yu(D,`Initialization of query '${uc(e.query)}' failed`);return void e.onError(j)}i.queries.set(a,y),y.listeners.push(e),e.ro(i.onlineState),y.so&&e.oo(y.so)&&np(i)})).apply(this,arguments)}function ep(s,e){return tp.apply(this,arguments)}function tp(){return(tp=(0,Ie.Z)(function*(s,e){const i=I(s),a=e.query;let h=!1;const y=i.queries.get(a);if(y){const D=y.listeners.indexOf(e);D>=0&&(y.listeners.splice(D,1),h=0===y.listeners.length)}if(h)return i.queries.delete(a),i.onUnlisten(a)})).apply(this,arguments)}function jl(s,e){const i=I(s);let a=!1;for(const h of e){const D=i.queries.get(h.query);if(D){for(const j of D.listeners)j.oo(h)&&(a=!0);D.so=h}}a&&np(i)}function Gi(s,e,i){const a=I(s),h=a.queries.get(e);if(h)for(const y of h.listeners)y.onError(i);a.queries.delete(e)}function np(s){s.io.forEach(e=>{e.next()})}class Ra{constructor(e,i,a){this.query=e,this.ao=i,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=a||{}}oo(e){if(!this.options.includeMetadataChanges){const a=[];for(const h of e.docChanges)3!==h.type&&a.push(h);e=new Oc(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let i=!1;return this.co?this.ho(e)&&(this.ao.next(e),i=!0):this.lo(e,this.onlineState)&&(this.fo(e),i=!0),this.uo=e,i}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let i=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),i=!0),i}lo(e,i){return!e.fromCache||!(this.options.wo&&"Offline"!==i||e.docs.isEmpty()&&"Offline"!==i)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=Oc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class Yu{constructor(e,i){this.payload=e,this.byteLength=i}_o(){return"metadata"in this.payload}}class rp{constructor(e){this.k=e}Hn(e){return Bs(this.k,e)}Jn(e){return e.metadata.exists?wo(this.k,e.document,!1):Qr.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return ys(e)}}class Jh{constructor(e,i,a){this.mo=e,this.localStore=i,this.k=a,this.queries=[],this.documents=[],this.progress=vu(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let i=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++i):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++i),i!==this.progress.documentsLoaded?(this.progress.documentsLoaded=i,Object.assign({},this.progress)):null}po(e){const i=new Map,a=new rp(this.k);for(const h of e)if(h.metadata.queries){const y=a.Hn(h.metadata.name);for(const D of h.metadata.queries){const j=(i.get(D)||Cr()).add(y);i.set(D,j)}}return i}complete(){var e=this;return(0,Ie.Z)(function*(){const i=yield function(s,e,i,a){return Zd.apply(this,arguments)}(e.localStore,new rp(e.k),e.documents,e.mo.id),a=e.po(e.documents);for(const h of e.queries)yield Gp(e.localStore,h,a.get(h.name));return e.progress.taskState="Success",new jp(Object.assign({},e.progress),i)})()}}function vu(s){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:s.totalDocuments,totalBytes:s.totalBytes}}class ip{constructor(e){this.key=e}}class sg{constructor(e){this.key=e}}class og{constructor(e,i){this.query=e,this.To=i,this.Eo=null,this.current=!1,this.Io=Cr(),this.mutatedKeys=Cr(),this.Ao=cc(e),this.Ro=new Rc(this.Ao)}get Po(){return this.To}bo(e,i){const a=i?i.vo:new rg,h=i?i.Ro:this.Ro;let y=i?i.mutatedKeys:this.mutatedKeys,D=h,j=!1;const K=As(this.query)&&h.size===this.query.limit?h.last():null,ae=al(this.query)&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((Ee,Fe)=>{const nt=h.get(Ee),_t=Po(this.query,Fe)?Fe:null,At=!!nt&&this.mutatedKeys.has(nt.key),pn=!!_t&&(_t.hasLocalMutations||this.mutatedKeys.has(_t.key)&&_t.hasCommittedMutations);let kn=!1;nt&&_t?nt.data.isEqual(_t.data)?At!==pn&&(a.track({type:3,doc:_t}),kn=!0):this.Vo(nt,_t)||(a.track({type:2,doc:_t}),kn=!0,(K&&this.Ao(_t,K)>0||ae&&this.Ao(_t,ae)<0)&&(j=!0)):!nt&&_t?(a.track({type:0,doc:_t}),kn=!0):nt&&!_t&&(a.track({type:1,doc:nt}),kn=!0,(K||ae)&&(j=!0)),kn&&(_t?(D=D.add(_t),y=pn?y.add(Ee):y.delete(Ee)):(D=D.delete(Ee),y=y.delete(Ee)))}),As(this.query)||al(this.query))for(;D.size>this.query.limit;){const Ee=As(this.query)?D.last():D.first();D=D.delete(Ee.key),y=y.delete(Ee.key),a.track({type:1,doc:Ee})}return{Ro:D,vo:a,Bn:j,mutatedKeys:y}}Vo(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a){const h=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const y=e.vo.no();y.sort((ae,Ee)=>function(Fe,nt){const _t=At=>{switch(At){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qt()}};return _t(Fe)-_t(nt)}(ae.type,Ee.type)||this.Ao(ae.doc,Ee.doc)),this.So(a);const D=i?this.Do():[],j=0===this.Io.size&&this.current?1:0,K=j!==this.Eo;return this.Eo=j,0!==y.length||K?{snapshot:new Oc(this.query,e.Ro,h,y,e.mutatedKeys,0===j,K,!1),Co:D}:{Co:D}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new rg,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(i=>this.To=this.To.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.To=this.To.delete(i)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=Cr(),this.Ro.forEach(a=>{this.No(a.key)&&(this.Io=this.Io.add(a.key))});const i=[];return e.forEach(a=>{this.Io.has(a)||i.push(new sg(a))}),this.Io.forEach(a=>{e.has(a)||i.push(new ip(a))}),i}ko(e){this.To=e.zn,this.Io=Cr();const i=this.bo(e.documents);return this.applyChanges(i,!0)}xo(){return Oc.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class dm{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class sp{constructor(e){this.key=e,this.$o=!1}}class hm{constructor(e,i,a,h,y,D){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=h,this.currentUser=y,this.maxConcurrentLimboResolutions=D,this.Fo={},this.Oo=new Cc(j=>xl(j),yo),this.Mo=new Map,this.Lo=new Set,this.Bo=new _s(Xt.comparator),this.Uo=new Map,this.qo=new Uh,this.Ko={},this.jo=new Map,this.Qo=Fo.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function fm(s,e){return pd.apply(this,arguments)}function pd(){return(pd=(0,Ie.Z)(function*(s,e){const i=fg(s);let a,h;const y=i.Oo.get(e);if(y)a=y.targetId,i.sharedClientState.addLocalQueryTarget(a),h=y.view.xo();else{const D=yield En(i.localStore,vi(e)),j=i.sharedClientState.addLocalQueryTarget(D.targetId);a=D.targetId,h=yield nh(i,e,a,"current"===j),i.isPrimaryClient&&Xp(i.remoteStore,D)}return h})).apply(this,arguments)}function nh(s,e,i,a){return op.apply(this,arguments)}function op(){return(op=(0,Ie.Z)(function*(s,e,i,a){s.Go=(Ee,Fe,nt)=>{return(_t=(0,Ie.Z)(function*(At,pn,kn,Ss){let ws=pn.view.bo(kn);ws.Bn&&(ws=yield Ku(At.localStore,pn.query,!1).then(({documents:Ya})=>pn.view.bo(Ya,ws)));const Id=Ss&&Ss.targetChanges.get(pn.targetId),la=pn.view.applyChanges(ws,At.isPrimaryClient,Id);return nf(At,pn.targetId,la.Co),la.snapshot}),function(At,pn,kn,Ss){return _t.apply(this,arguments)})(s,Ee,Fe,nt);var _t};const h=yield Ku(s.localStore,e,!0),y=new og(e,h.zn),D=y.bo(h.documents),j=dl.createSynthesizedTargetChangeForCurrentChange(i,a&&"Offline"!==s.onlineState),K=y.applyChanges(D,s.isPrimaryClient,j);nf(s,i,K.Co);const ae=new dm(e,i,y);return s.Oo.set(e,ae),s.Mo.has(i)?s.Mo.get(i).push(e):s.Mo.set(i,[e]),K.snapshot})).apply(this,arguments)}function ap(s,e){return gd.apply(this,arguments)}function gd(){return(gd=(0,Ie.Z)(function*(s,e){const i=I(s),a=i.Oo.get(e),h=i.Mo.get(a.targetId);if(h.length>1)return i.Mo.set(a.targetId,h.filter(y=>!yo(y,e))),void i.Oo.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||(yield gu(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),hd(i.remoteStore,a.targetId),ih(i,a.targetId)}).catch(Aa))):(ih(i,a.targetId),yield gu(i.localStore,a.targetId,!0))})).apply(this,arguments)}function lg(){return(lg=(0,Ie.Z)(function*(s,e,i){const a=Mi(s);try{const h=yield function(y,D){const j=I(y),K=$i.now(),ae=D.reduce((Fe,nt)=>Fe.add(nt.key),Cr());let Ee;return j.persistence.runTransaction("Locally write mutations","readwrite",Fe=>j.Wn.vn(Fe,ae).next(nt=>{Ee=nt;const _t=[];for(const At of D){const pn=ja(At,Ee.get(At.key));null!=pn&&_t.push(new Ol(At.key,pn,Cf(pn.value.mapValue),oi.exists(!0)))}return j.An.addMutationBatch(Fe,K,_t,D)})).then(Fe=>(Fe.applyToLocalDocumentSet(Ee),{batchId:Fe.batchId,changes:Ee}))}(a.localStore,e);a.sharedClientState.addPendingMutation(h.batchId),function(y,D,j){let K=y.Ko[y.currentUser.toKey()];K||(K=new _s(Rt)),K=K.insert(D,j),y.Ko[y.currentUser.toKey()]=K}(a,h.batchId,i),yield u(a,h.changes),yield Ac(a.remoteStore)}catch(h){const y=yu(h,"Failed to persist write");i.reject(y)}})).apply(this,arguments)}function ug(s,e){return rh.apply(this,arguments)}function rh(){return(rh=(0,Ie.Z)(function*(s,e){const i=I(s);try{const a=yield em(i.localStore,e);e.targetChanges.forEach((h,y)=>{const D=i.Uo.get(y);D&&(bn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?D.$o=!0:h.modifiedDocuments.size>0?bn(D.$o):h.removedDocuments.size>0&&(bn(D.$o),D.$o=!1))}),yield u(i,a,e)}catch(a){yield Aa(a)}})).apply(this,arguments)}function pm(s,e,i){const a=I(s);if(a.isPrimaryClient&&0===i||!a.isPrimaryClient&&1===i){const h=[];a.Oo.forEach((y,D)=>{const j=D.view.ro(e);j.snapshot&&h.push(j.snapshot)}),function(y,D){const j=I(y);j.onlineState=D;let K=!1;j.queries.forEach((ae,Ee)=>{for(const Fe of Ee.listeners)Fe.ro(D)&&(K=!0)}),K&&np(j)}(a.eventManager,e),h.length&&a.Fo.Pr(h),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function cg(s,e,i){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,Ie.Z)(function*(s,e,i){const a=I(s);a.sharedClientState.updateQueryState(e,"rejected",i);const h=a.Uo.get(e),y=h&&h.key;if(y){let D=new _s(Xt.comparator);D=D.insert(y,Qr.newNoDocument(y,Yt.min()));const j=Cr().add(y),K=new Uu(Yt.min(),new Map,new Oi(Rt),D,j);yield ug(a,K),a.Bo=a.Bo.remove(y),a.Uo.delete(e),d(a)}else yield gu(a.localStore,e,!1).then(()=>ih(a,e,i)).catch(Aa)})).apply(this,arguments)}function dg(s,e){return ef.apply(this,arguments)}function ef(){return(ef=(0,Ie.Z)(function*(s,e){const i=I(s),a=e.batch.batchId;try{const h=yield Xg(i.localStore,e);cp(i,a,null),up(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),yield u(i,h)}catch(h){yield Aa(h)}})).apply(this,arguments)}function lp(s,e,i){return tf.apply(this,arguments)}function tf(){return(tf=(0,Ie.Z)(function*(s,e,i){const a=I(s);try{const h=yield function(y,D){const j=I(y);return j.persistence.runTransaction("Reject batch","readwrite-primary",K=>{let ae;return j.An.lookupMutationBatch(K,D).next(Ee=>(bn(null!==Ee),ae=Ee.keys(),j.An.removeMutationBatch(K,Ee))).next(()=>j.An.performConsistencyCheck(K)).next(()=>j.Wn.vn(K,ae))})}(a.localStore,e);cp(a,e,i),up(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),yield u(a,h)}catch(h){yield Aa(h)}})).apply(this,arguments)}function md(){return(md=(0,Ie.Z)(function*(s,e){const i=I(s);Ga(i.remoteStore)||bt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(y){const D=I(y);return D.persistence.runTransaction("Get highest unacknowledged batch id","readonly",j=>D.An.getHighestUnacknowledgedBatchId(j))}(i.localStore);if(-1===a)return void e.resolve();const h=i.jo.get(a)||[];h.push(e),i.jo.set(a,h)}catch(a){const h=yu(a,"Initialization of waitForPendingWrites() operation failed");e.reject(h)}})).apply(this,arguments)}function up(s,e){(s.jo.get(e)||[]).forEach(i=>{i.resolve()}),s.jo.delete(e)}function cp(s,e,i){const a=I(s);let h=a.Ko[a.currentUser.toKey()];if(h){const y=h.get(e);y&&(i?y.reject(i):y.resolve(),h=h.remove(e)),a.Ko[a.currentUser.toKey()]=h}}function ih(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Mo.get(e))s.Oo.delete(a),i&&s.Fo.zo(a,i);s.Mo.delete(e),s.isPrimaryClient&&s.qo.us(e).forEach(a=>{s.qo.containsKey(a)||Pc(s,a)})}function Pc(s,e){s.Lo.delete(e.path.canonicalString());const i=s.Bo.get(e);null!==i&&(hd(s.remoteStore,i),s.Bo=s.Bo.remove(e),s.Uo.delete(i),d(s))}function nf(s,e,i){for(const a of i)a instanceof ip?(s.qo.addReference(a.key,e),rf(s,a)):a instanceof sg?(bt("SyncEngine","Document no longer in limbo: "+a.key),s.qo.removeReference(a.key,e),s.qo.containsKey(a.key)||Pc(s,a.key)):qt()}function rf(s,e){const i=e.key,a=i.path.canonicalString();s.Bo.get(i)||s.Lo.has(a)||(bt("SyncEngine","New document in limbo: "+i),s.Lo.add(a),d(s))}function d(s){for(;s.Lo.size>0&&s.Bo.size<s.maxConcurrentLimboResolutions;){const e=s.Lo.values().next().value;s.Lo.delete(e);const i=new Xt(yr.fromString(e)),a=s.Qo.next();s.Uo.set(a,new sp(i)),s.Bo=s.Bo.insert(i,a),Xp(s.remoteStore,new ra(vi(tr(i.path)),a,2,vr.I))}}function u(s,e,i){return l.apply(this,arguments)}function l(){return(l=(0,Ie.Z)(function*(s,e,i){const a=I(s),h=[],y=[],D=[];var j;a.Oo.isEmpty()||(a.Oo.forEach((j,K)=>{D.push(a.Go(K,e,i).then(ae=>{if(ae){a.isPrimaryClient&&a.sharedClientState.updateQueryState(K.targetId,ae.fromCache?"not-current":"current"),h.push(ae);const Ee=js.$n(K.targetId,ae);y.push(Ee)}}))}),yield Promise.all(D),a.Fo.Pr(h),yield(j=(0,Ie.Z)(function*(K,ae){const Ee=I(K);try{yield Ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",Fe=>gt.forEach(ae,nt=>gt.forEach(nt.kn,_t=>Ee.persistence.referenceDelegate.addReference(Fe,nt.targetId,_t)).next(()=>gt.forEach(nt.xn,_t=>Ee.persistence.referenceDelegate.removeReference(Fe,nt.targetId,_t)))))}catch(Fe){if(!kl(Fe))throw Fe;bt("LocalStore","Failed to update sequence numbers: "+Fe)}for(const Fe of ae){const nt=Fe.targetId;if(!Fe.fromCache){const _t=Ee.qn.get(nt),pn=_t.withLastLimboFreeSnapshotVersion(_t.snapshotVersion);Ee.qn=Ee.qn.insert(nt,pn)}}}),function(K,ae){return j.apply(this,arguments)})(a.localStore,y))})).apply(this,arguments)}function p(s,e){return v.apply(this,arguments)}function v(){return(v=(0,Ie.Z)(function*(s,e){const i=I(s);if(!i.currentUser.isEqual(e)){bt("SyncEngine","User change. New user:",e.toKey());const a=yield Fh(i.localStore,e);i.currentUser=e,(h=i).jo.forEach(D=>{D.forEach(j=>{j.reject(new M(C.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.jo.clear(),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield u(i,a.Gn)}var h})).apply(this,arguments)}function S(s,e){const i=I(s),a=i.Uo.get(e);if(a&&a.$o)return Cr().add(a.key);{let h=Cr();const y=i.Mo.get(e);if(!y)return h;for(const D of y){const j=i.Oo.get(D);h=h.unionWith(j.view.Po)}return h}}function U(s,e){return J.apply(this,arguments)}function J(){return(J=(0,Ie.Z)(function*(s,e){const i=I(s),a=yield Ku(i.localStore,e.query,!0),h=e.view.ko(a);return i.isPrimaryClient&&nf(i,e.targetId,h.Co),h})).apply(this,arguments)}function de(s){return be.apply(this,arguments)}function be(){return(be=(0,Ie.Z)(function*(s){const e=I(s);return Vh(e.localStore).then(i=>u(e,i))})).apply(this,arguments)}function Ye(s,e,i,a){return ze.apply(this,arguments)}function ze(){return(ze=(0,Ie.Z)(function*(s,e,i,a){const h=I(s),y=yield function(D,j){const K=I(D),ae=I(K.An);return K.persistence.runTransaction("Lookup mutation documents","readonly",Ee=>ae.Zt(Ee,j).next(Fe=>Fe?K.Wn.vn(Ee,Fe):gt.resolve(null)))}(h.localStore,e);var j;null!==y?("pending"===i?yield Ac(h.remoteStore):"acknowledged"===i||"rejected"===i?(cp(h,e,a||null),up(h,e),j=e,I(I(h.localStore).An).ee(j)):qt(),yield u(h,y)):bt("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function $t(){return($t=(0,Ie.Z)(function*(s,e){const i=I(s);if(fg(i),Mi(i),!0===e&&!0!==i.Wo){const a=i.sharedClientState.getAllActiveQueryTargets(),h=yield fn(i,a.toArray());i.Wo=!0,yield Yf(i.remoteStore,!0);for(const y of h)Xp(i.remoteStore,y)}else if(!1===e&&!1!==i.Wo){const a=[];let h=Promise.resolve();i.Mo.forEach((y,D)=>{i.sharedClientState.isLocalQueryTarget(D)?a.push(D):h=h.then(()=>(ih(i,D),gu(i.localStore,D,!0))),hd(i.remoteStore,D)}),yield h,yield fn(i,a),function(y){const D=I(y);D.Uo.forEach((j,K)=>{hd(D.remoteStore,K)}),D.qo.hs(),D.Uo=new Map,D.Bo=new _s(Xt.comparator)}(i),i.Wo=!1,yield Yf(i.remoteStore,!1)}})).apply(this,arguments)}function fn(s,e,i){return or.apply(this,arguments)}function or(){return(or=(0,Ie.Z)(function*(s,e,i){const a=I(s),h=[],y=[];for(const D of e){let j;const K=a.Mo.get(D);if(K&&0!==K.length){j=yield En(a.localStore,vi(K[0]));for(const ae of K){const Ee=a.Oo.get(ae),Fe=yield U(a,Ee);Fe.snapshot&&y.push(Fe.snapshot)}}else{const ae=yield Sa(a.localStore,D);j=yield En(a.localStore,ae),yield nh(a,ss(ae),D,!1)}h.push(j)}return a.Fo.Pr(y),h})).apply(this,arguments)}function ss(s){return ph(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function Hl(s){const e=I(s);return I(I(e.localStore).persistence).Tn()}function ml(s,e,i,a){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,Ie.Z)(function*(s,e,i,a){const h=I(s);if(h.Wo)bt("SyncEngine","Ignoring unexpected query state notification.");else if(h.Mo.has(e))switch(i){case"current":case"not-current":{const y=yield Vh(h.localStore),D=Uu.createSynthesizedRemoteEventForCurrentChange(e,"current"===i);yield u(h,y,D);break}case"rejected":yield gu(h.localStore,e,!0),ih(h,e,a);break;default:qt()}})).apply(this,arguments)}function hg(s,e,i){return dp.apply(this,arguments)}function dp(){return(dp=(0,Ie.Z)(function*(s,e,i){const a=fg(s);if(a.Wo){for(const h of e){if(a.Mo.has(h)){bt("SyncEngine","Adding an already active target "+h);continue}const y=yield Sa(a.localStore,h),D=yield En(a.localStore,y);yield nh(a,ss(y),D.targetId,!1),Xp(a.remoteStore,D)}for(const h of i)a.Mo.has(h)&&(yield gu(a.localStore,h,!1).then(()=>{hd(a.remoteStore,h),ih(a,h)}).catch(Aa))}})).apply(this,arguments)}function fg(s){const e=I(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=ug.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cg.bind(null,e),e.Fo.Pr=jl.bind(null,e.eventManager),e.Fo.zo=Gi.bind(null,e.eventManager),e}function Mi(s){const e=I(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lp.bind(null,e),e}class Jy{constructor(){this.synchronizeTabs=!1}initialize(e){var i=this;return(0,Ie.Z)(function*(){i.k=Wh(e.databaseInfo.databaseId),i.sharedClientState=i.Jo(e),i.persistence=i.Yo(e),yield i.persistence.start(),i.gcScheduler=i.Xo(e),i.localStore=i.Zo(e)})()}Xo(e){return null}Zo(e){return $p(this.persistence,new Jg,e.initialUser,this.k)}Yo(e){return new E_(Hh.ks,this.k)}Jo(e){return new im}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Qu extends Jy{constructor(e,i,a){super(),this.ta=e,this.cacheSizeBytes=i,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var i=()=>super.initialize,a=this;return(0,Ie.Z)(function*(){yield i().call(a,e),yield function(s){return Vo.apply(this,arguments)}(a.localStore),yield a.ta.initialize(a,e),yield Mi(a.ta.syncEngine),yield Ac(a.ta.remoteStore),yield a.persistence.sn(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(a.localStore),Promise.resolve()))})()}Zo(e){return $p(this.persistence,new Jg,e.initialUser,this.k)}Xo(e){return new Gd(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const i=Vl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Io.withCacheSize(this.cacheSizeBytes):Io.DEFAULT;return new fu(this.synchronizeTabs,i,e.clientId,a,e.asyncQueue,om(),Bf(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new im}}class mm extends Qu{constructor(e,i){super(e,i,!1),this.ta=e,this.cacheSizeBytes=i,this.synchronizeTabs=!0}initialize(e){var i=()=>super.initialize,a=this;return(0,Ie.Z)(function*(){yield i().call(a,e);const h=a.ta.syncEngine;a.sharedClientState instanceof Wa&&(a.sharedClientState.syncEngine={mi:Ye.bind(null,h),gi:ml.bind(null,h),yi:hg.bind(null,h),Tn:Hl.bind(null,h),_i:de.bind(null,h)},yield a.sharedClientState.start()),yield a.persistence.sn(function(){var y=(0,Ie.Z)(function*(D){yield function(s,e){return $t.apply(this,arguments)}(a.ta.syncEngine,D),a.gcScheduler&&(D&&!a.gcScheduler.started?a.gcScheduler.start(a.localStore):D||a.gcScheduler.stop())});return function(D){return y.apply(this,arguments)}}())})()}Jo(e){const i=om();if(!Wa.bt(i))throw new M(C.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=Vl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wa(i,e.asyncQueue,a,e.clientId,e.initialUser)}}class hp{initialize(e,i){var a=this;return(0,Ie.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(i),a.remoteStore=a.createRemoteStore(i),a.eventManager=a.createEventManager(i),a.syncEngine=a.createSyncEngine(i,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=h=>pm(a.syncEngine,h,1),a.remoteStore.remoteSyncer.handleCredentialChange=p.bind(null,a.syncEngine),yield Yf(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ig}createDatastore(e){const i=Wh(e.databaseInfo.databaseId),a=new b_(e.databaseInfo);return new jf(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return i=this.localStore,a=this.datastore,h=e.asyncQueue,y=j=>pm(this.syncEngine,j,0),D=Yp.bt()?new Yp:new Zp,new Hf(i,a,h,y,D);var i,a,h,y,D}createSyncEngine(e,i){return function(a,h,y,D,j,K,ae){const Ee=new hm(a,h,y,D,j,K);return ae&&(Ee.Wo=!0),Ee}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}terminate(){return(e=(0,Ie.Z)(function*(i){const a=I(i);bt("RemoteStore","RemoteStore shutting down."),a.Gr.add(5),yield Dc(a),a.Hr.shutdown(),a.Jr.set("Unknown")}),function(i){return e.apply(this,arguments)})(this.remoteStore);var e}}function Xy(s,e=10240){let i=0;return{read:()=>(0,Ie.Z)(function*(){if(i<s.byteLength){const a={value:s.slice(i,i+e),done:!1};return i+=e,a}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class pg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,i){this.muted||setTimeout(()=>{this.muted||e(i)},0)}}class ev{constructor(e,i){this.sa=e,this.k=i,this.metadata=new $,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(a=>{a&&a._o()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,Ie.Z)(function*(){const i=yield e.oa();if(null===i)return null;const a=e.ia.decode(i),h=Number(a);isNaN(h)&&e.aa(`length string (${a}) is not valid number`);const y=yield e.ca(h);return new Yu(JSON.parse(y),i.length+h)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,Ie.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const i=e.ua();i<0&&e.aa("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,i);return e.buffer=e.buffer.slice(i),a})()}ca(e){var i=this;return(0,Ie.Z)(function*(){for(;i.buffer.length<e;)(yield i.ha())&&i.aa("Reached the end of bundle when more is expected.");const a=i.ia.decode(i.buffer.slice(0,e));return i.buffer=i.buffer.slice(e),a})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,Ie.Z)(function*(){const i=yield e.sa.read();if(!i.done){const a=new Uint8Array(e.buffer.length+i.value.length);a.set(e.buffer),a.set(i.value,e.buffer.length),e.buffer=a}return i.done})()}}class I_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var i=this;return(0,Ie.Z)(function*(){if(i.ensureCommitNotCalled(),i.mutations.length>0)throw new M(C.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(h=(0,Ie.Z)(function*(y,D){const j=I(y),K=ju(j.k)+"/documents",ae={documents:D.map(_t=>ta(j.k,_t))},Ee=yield j.ji("BatchGetDocuments",K,ae),Fe=new Map;Ee.forEach(_t=>{const At=function(s,e){return"found"in e?function(i,a){bn(!!a.found);const h=Bs(i,a.found.name),y=ys(a.found.updateTime),D=new di({mapValue:{fields:a.found.fields}});return Qr.newFoundDocument(h,y,D)}(s,e):"missing"in e?function(i,a){bn(!!a.missing),bn(!!a.readTime);const h=Bs(i,a.missing),y=ys(a.readTime);return Qr.newNoDocument(h,y)}(s,e):qt()}(j.k,_t);Fe.set(At.key.toString(),At)});const nt=[];return D.forEach(_t=>{const At=Fe.get(_t.toString());bn(!!At),nt.push(At)}),nt}),function(y,D){return h.apply(this,arguments)})(i.datastore,e);var h;return a.forEach(h=>i.recordVersion(h)),a})()}set(e,i){this.write(i.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,i){try{this.write(i.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new vo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const i=e.readVersions;var a;e.mutations.forEach(a=>{i.delete(a.key.toString())}),i.forEach((a,h)=>{const y=Xt.fromPath(h);e.mutations.push(new qc(y,e.precondition(y)))}),yield(a=(0,Ie.Z)(function*(h,y){const D=I(h),j=ju(D.k)+"/documents",K={writes:y.map(ae=>Ml(D.k,ae))};yield D.Bi("Commit",j,K)}),function(h,y){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let i;if(e.isFoundDocument())i=e.version;else{if(!e.isNoDocument())throw qt();i=Yt.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!i.isEqual(a))throw new M(C.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),i)}precondition(e){const i=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&i?oi.updateTime(i):oi.none()}preconditionForUpdate(e){const i=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&i){if(i.isEqual(Yt.min()))throw new M(C.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return oi.updateTime(i)}return oi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class D_{constructor(e,i,a,h){this.asyncQueue=e,this.datastore=i,this.updateFunction=a,this.deferred=h,this.la=5,this.ur=new _u(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,Ie.Z)(function*(){const i=new I_(e.datastore),a=e.da(i);a&&a.then(h=>{e.asyncQueue.enqueueAndForget(()=>i.commit().then(()=>{e.deferred.resolve(h)}).catch(y=>{e.wa(y)}))}).catch(h=>{e.wa(h)})}))}da(e){try{const i=this.updateFunction(e);return!zr(i)&&i.catch&&i.then?i:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(i){return this.deferred.reject(i),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const i=e.code;return"aborted"===i||"failed-precondition"===i||!Zc(i)}return!1}}class T_{constructor(e,i,a,h){var y=this;this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=h,this.user=ci.UNAUTHENTICATED,this.clientId=Ri.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var D=(0,Ie.Z)(function*(j){bt("FirestoreClient","Received user=",j.uid),yield y.authCredentialListener(j),y.user=j});return function(j){return D.apply(this,arguments)}}()),this.appCheckCredentials.start(a,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const i=new $;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),i.resolve()}catch(a){const h=yu(a,"Failed to shutdown persistence");i.reject(h)}})),i.promise}}function _m(s,e){return ym.apply(this,arguments)}function ym(){return(ym=(0,Ie.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress(),bt("FirestoreClient","Initializing OfflineComponentProvider");const i=yield s.getConfiguration();yield e.initialize(i);let a=i.initialUser;s.setCredentialChangeListener(function(){var h=(0,Ie.Z)(function*(y){a.isEqual(y)||(yield Fh(e.localStore,y),a=y)});return function(y){return h.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s.offlineComponents=e})).apply(this,arguments)}function A_(s,e){return sh.apply(this,arguments)}function sh(){return(sh=(0,Ie.Z)(function*(s,e){s.asyncQueue.verifyOperationInProgress();const i=yield fp(s);bt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield s.getConfiguration();yield e.initialize(i,a),s.setCredentialChangeListener(h=>{return(y=(0,Ie.Z)(function*(D,j){const K=I(D);K.asyncQueue.verifyOperationInProgress(),bt("RemoteStore","RemoteStore received new credentials");const ae=Ga(K);K.Gr.add(3),yield Dc(K),ae&&K.Jr.set("Unknown"),yield K.remoteSyncer.handleCredentialChange(j),K.Gr.delete(3),yield Xd(K)}),function(D,j){return y.apply(this,arguments)})(e.remoteStore,h);var y}),s.onlineComponents=e})).apply(this,arguments)}function fp(s){return gg.apply(this,arguments)}function gg(){return(gg=(0,Ie.Z)(function*(s){return s.offlineComponents||(bt("FirestoreClient","Using default OfflineComponentProvider"),yield _m(s,new Jy)),s.offlineComponents})).apply(this,arguments)}function pp(s){return mg.apply(this,arguments)}function mg(){return(mg=(0,Ie.Z)(function*(s){return s.onlineComponents||(bt("FirestoreClient","Using default OnlineComponentProvider"),yield A_(s,new hp)),s.onlineComponents})).apply(this,arguments)}function vm(s){return fp(s).then(e=>e.persistence)}function wm(s){return fp(s).then(e=>e.localStore)}function S_(s){return pp(s).then(e=>e.remoteStore)}function Em(s){return pp(s).then(e=>e.syncEngine)}function sf(s){return _g.apply(this,arguments)}function _g(){return(_g=(0,Ie.Z)(function*(s){const e=yield pp(s),i=e.eventManager;return i.onListen=fm.bind(null,e.syncEngine),i.onUnlisten=ap.bind(null,e.syncEngine),i})).apply(this,arguments)}function R_(s,e,i={}){const a=new $;return s.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(h,y,D,j,K){const ae=new pg({next:Fe=>{y.enqueueAndForget(()=>ep(h,Ee));const nt=Fe.docs.has(D);!nt&&Fe.fromCache?K.reject(new M(C.UNAVAILABLE,"Failed to get document because the client is offline.")):nt&&Fe.fromCache&&j&&"server"===j.source?K.reject(new M(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):K.resolve(Fe)},error:Fe=>K.reject(Fe)}),Ee=new Ra(tr(D.path),ae,{includeMetadataChanges:!0,wo:!0});return Xf(h,Ee)}(yield sf(s),s.asyncQueue,e,i,a)})),a.promise}function nv(s,e,i={}){const a=new $;return s.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(h,y,D,j,K){const ae=new pg({next:Fe=>{y.enqueueAndForget(()=>ep(h,Ee)),Fe.fromCache&&"server"===j.source?K.reject(new M(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):K.resolve(Fe)},error:Fe=>K.reject(Fe)}),Ee=new Ra(D,ae,{includeMetadataChanges:!0,wo:!0});return Xf(h,Ee)}(yield sf(s),s.asyncQueue,e,i,a)})),a.promise}class Hw{constructor(e,i,a,h,y,D,j,K){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=h,this.ssl=y,this.forceLongPolling=D,this.autoDetectLongPolling=j,this.useFetchStreams=K}}class sa{constructor(e,i){this.projectId=e,this.database=i||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof sa&&e.projectId===this.projectId&&e.database===this.database}}const iv=new Map;function M_(s,e,i){if(!i)throw new M(C.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function sv(s,e,i,a){if(!0===e&&!0===a)throw new M(C.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function bm(s){if(!Xt.isDocumentKey(s))throw new M(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Im(s){if(Xt.isDocumentKey(s))throw new M(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function gp(s){if(void 0===s)return"undefined";if(null===s)return"null";if("string"==typeof s)return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if("number"==typeof s||"boolean"==typeof s)return""+s;if("object"==typeof s){if(s instanceof Array)return"an array";{const e=(i=s).constructor?i.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var i;return"function"==typeof s?"a function":qt()}function Tr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new M(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=gp(s);throw new M(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}function ov(s,e){if(e<=0)throw new M(C.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}class Dm{constructor(e){var i;if(void 0===e.host){if(void 0!==e.ssl)throw new M(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(i=e.ssl)||void 0===i||i;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new M(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oh{constructor(e,i,a){this._authCredentials=i,this._appCheckCredentials=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dm({}),this._settingsFrozen=!1,e instanceof sa?this._databaseId=e:(this._app=e,this._databaseId=function(h){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new M(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(h.options.projectId)}(e))}get app(){if(!this._app)throw new M(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new M(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dm(e),void 0!==e.credentials&&(this._authCredentials=function(i){if(!i)return new ve;switch(i.type){case"gapi":const a=i.client;return bn(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new $n(a,i.sessionIndex||"0",i.iamToken||null);case"provider":return i.client;default:throw new M(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=iv.get(e);i&&(bt("ComponentProvider","Removing Datastore"),iv.delete(e),i.terminate())}(this),Promise.resolve()}}class Ci{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ci(this.firestore,e,this._key)}}class oa{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new oa(this.firestore,e,this._query)}}class Ju extends oa{constructor(e,i,a){super(e,i,tr(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ci(this.firestore,null,new Xt(e))}withConverter(e){return new Ju(this.firestore,e,this._path)}}function N_(s,e,...i){if(s=(0,xt.m9)(s),M_("collection","path",e),s instanceof oh){const a=yr.fromString(e,...i);return Im(a),new Ju(s,null,a)}{if(!(s instanceof Ci||s instanceof Ju))throw new M(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(yr.fromString(e,...i));return Im(a),new Ju(s.firestore,null,a)}}function yg(s,e,...i){if(s=(0,xt.m9)(s),1===arguments.length&&(e=Ri.A()),M_("doc","path",e),s instanceof oh){const a=yr.fromString(e,...i);return bm(a),new Ci(s,null,new Xt(a))}{if(!(s instanceof Ci||s instanceof Ju))throw new M(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(yr.fromString(e,...i));return bm(a),new Ci(s.firestore,s instanceof Ju?s.converter:null,new Xt(a))}}function k_(s,e){return s=(0,xt.m9)(s),e=(0,xt.m9)(e),(s instanceof Ci||s instanceof Ju)&&(e instanceof Ci||e instanceof Ju)&&s.firestore===e.firestore&&s.path===e.path&&s.converter===e.converter}function mp(s,e){return s=(0,xt.m9)(s),e=(0,xt.m9)(e),s instanceof oa&&e instanceof oa&&s.firestore===e.firestore&&yo(s._query,e._query)&&s.converter===e.converter}class of{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new _u(this,"async_queue_retry"),this.Ra=()=>{const i=Bf();i&&bt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.ur.er()};const e=Bf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const i=Bf();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const i=new $;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(i){if(!kl(i))throw i;bt("AsyncQueue","Operation failed with retryable error: "+i)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const i=this.ma.then(()=>(this.Ea=!0,e().catch(a=>{throw this.Ta=a,this.Ea=!1,sr("INTERNAL UNHANDLED ERROR: ",function(y){let D=y.message||"";return y.stack&&(D=y.stack.includes(y.message)?y.stack:y.message+"\n"+y.stack),D}(a)),a}).then(a=>(this.Ea=!1,a))));return this.ma=i,i}enqueueAfterDelay(e,i,a){this.Pa(),this.Aa.indexOf(e)>-1&&(i=0);const h=Jf.createAndSchedule(this,e,i,a,y=>this.Va(y));return this.pa.push(h),h}Pa(){this.Ta&&qt()}verifyOperationInProgress(){}Sa(){var e=this;return(0,Ie.Z)(function*(){let i;do{i=e.ma,yield i}while(i!==e.ma)})()}Da(e){for(const i of this.pa)if(i.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((i,a)=>i.targetTimeMs-a.targetTimeMs);for(const i of this.pa)if(i.skipDelay(),"all"!==e&&i.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const i=this.pa.indexOf(e);this.pa.splice(i,1)}}function vg(s){return function(e,i){if("object"!=typeof e||null===e)return!1;const a=e;for(const h of["next","error","complete"])if(h in a&&"function"==typeof a[h])return!0;return!1}(s)}class Eu{constructor(){this._progressObserver={},this._taskCompletionResolver=new $,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,i,a){this._progressObserver={next:e,error:i,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,i){return this._taskCompletionResolver.promise.then(e,i)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class vs extends oh{constructor(e,i,a){super(e,i,a),this.type="firestore",this._queue=new of,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||af(this),this._firestoreClient.terminate()}}function fi(s){return s._firestoreClient||af(s),s._firestoreClient.verifyNotTerminated(),s._firestoreClient}function af(s){var e;const i=s._freezeSettings(),a=(y=(null===(e=s._app)||void 0===e?void 0:e.options.appId)||"",new Hw(s._databaseId,y,s._persistenceKey,(j=i).host,j.ssl,j.experimentalForceLongPolling,j.experimentalAutoDetectLongPolling,j.useFetchStreams));var y,j;s._firestoreClient=new T_(s._authCredentials,s._appCheckCredentials,s._queue,a)}function yp(s,e,i){const a=new $;return s.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield _m(s,i),yield A_(s,e),a.resolve()}catch(h){if(!("FirebaseError"===(y=h).name?y.code===C.FAILED_PRECONDITION||y.code===C.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&y instanceof DOMException)||22===y.code||20===y.code||11===y.code))throw h;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+h),a.reject(h)}var y})).then(()=>a.promise)}function lh(s){if(s._initialized||s._terminated)throw new M(C.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class qa{constructor(...e){for(let i=0;i<e.length;++i)if(0===e[i].length)throw new M(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ls(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pa(ts.fromBase64String(e))}catch(i){throw new M(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Pa(ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _d{constructor(e){this._methodName=e}}class Ep{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new M(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new M(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const L_=/^__.*__$/;class V_{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return null!==this.fieldMask?new Ol(e,this.data,this.fieldMask,i,this.fieldTransforms):new Lu(e,this.data,i,this.fieldTransforms)}}class Am{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return new Ol(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function Sm(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qt()}}class Cp{constructor(e,i,a,h,y,D){this.settings=e,this.databaseId=i,this.k=a,this.ignoreUndefinedProperties=h,void 0===y&&this.ka(),this.fieldTransforms=y||[],this.fieldMask=D||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new Cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var i;const a=null===(i=this.path)||void 0===i?void 0:i.child(e),h=this.$a({path:a,Oa:!1});return h.Ma(e),h}La(e){var i;const a=null===(i=this.path)||void 0===i?void 0:i.child(e),h=this.$a({path:a,Oa:!1});return h.ka(),h}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return Pm(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(i=>e.isPrefixOf(i))||void 0!==this.fieldTransforms.find(i=>e.isPrefixOf(i.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(Sm(this.xa)&&L_.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class U_{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.k=a||Wh(e)}ja(e,i,a,h=!1){return new Cp({xa:e,methodName:i,Ka:a,path:Ls.emptyPath(),Oa:!1,qa:h},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function yd(s){const e=s._freezeSettings(),i=Wh(s._databaseId);return new U_(s._databaseId,!!e.ignoreUndefinedProperties,i)}function wg(s,e,i,a,h,y={}){const D=s.ja(y.merge||y.mergeFields?2:0,e,i,h);G_("Data must be an object, but it was:",D,a);const j=$_(a,D);let K,ae;if(y.merge)K=new ql(D.fieldMask),ae=D.fieldTransforms;else if(y.mergeFields){const Ee=[];for(const Fe of y.mergeFields){const nt=Om(e,Fe,i);if(!D.contains(nt))throw new M(C.INVALID_ARGUMENT,`Field '${nt}' is specified in your field mask but missing from your input data.`);cv(Ee,nt)||Ee.push(nt)}K=new ql(Ee),ae=D.fieldTransforms.filter(Fe=>K.covers(Fe.field))}else K=null,ae=D.fieldTransforms;return new V_(new di(j),K,ae)}class hf extends _d{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hf}}function B_(s,e,i){return new Cp({xa:3,Ka:e.settings.Ka,methodName:s._methodName,Oa:i},e.databaseId,e.k,e.ignoreUndefinedProperties)}class xm extends _d{_toFieldTransform(e){return new ku(e.path,new Mu)}isEqual(e){return e instanceof xm}}class j_ extends _d{constructor(e,i){super(e),this.Qa=i}_toFieldTransform(e){const i=B_(this,e,!0),a=this.Qa.map(y=>vd(y,i)),h=new Nu(a);return new ku(e.path,h)}isEqual(e){return this===e}}class uv extends _d{constructor(e,i){super(e),this.Qa=i}_toFieldTransform(e){const i=B_(this,e,!0),a=this.Qa.map(y=>vd(y,i)),h=new ru(a);return new ku(e.path,h)}isEqual(e){return this===e}}class Ww extends _d{constructor(e,i){super(e),this.Wa=i}_toFieldTransform(e){const i=new Ba(e.k,nu(e.k,this.Wa));return new ku(e.path,i)}isEqual(e){return this===e}}function Rm(s,e,i,a){const h=s.ja(1,e,i);G_("Data must be an object, but it was:",h,a);const y=[],D=di.empty();Su(a,(K,ae)=>{const Ee=K_(e,K,i);ae=(0,xt.m9)(ae);const Fe=h.La(Ee);if(ae instanceof hf)y.push(Ee);else{const nt=vd(ae,Fe);null!=nt&&(y.push(Ee),D.set(Ee,nt))}});const j=new ql(y);return new Am(D,j,h.fieldTransforms)}function Eg(s,e,i,a,h,y){const D=s.ja(1,e,i),j=[Om(e,a,i)],K=[h];if(y.length%2!=0)throw new M(C.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let nt=0;nt<y.length;nt+=2)j.push(Om(e,y[nt])),K.push(y[nt+1]);const ae=[],Ee=di.empty();for(let nt=j.length-1;nt>=0;--nt)if(!cv(ae,j[nt])){const _t=j[nt];let At=K[nt];At=(0,xt.m9)(At);const pn=D.La(_t);if(At instanceof hf)ae.push(_t);else{const kn=vd(At,pn);null!=kn&&(ae.push(_t),Ee.set(_t,kn))}}const Fe=new ql(ae);return new Am(Ee,Fe,D.fieldTransforms)}function H_(s,e,i,a=!1){return vd(i,s.ja(a?4:3,e))}function vd(s,e){if(W_(s=(0,xt.m9)(s)))return G_("Unsupported field value:",e,s),$_(s,e);if(s instanceof _d)return function(i,a){if(!Sm(a.xa))throw a.Ua(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Ua(`${i._methodName}() is not currently supported inside arrays`);const h=i._toFieldTransform(a);h&&a.fieldTransforms.push(h)}(s,e),null;if(void 0===s&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(i,a){const h=[];let y=0;for(const D of i){let j=vd(D,a.Ba(y));null==j&&(j={nullValue:"NULL_VALUE"}),h.push(j),y++}return{arrayValue:{values:h}}}(s,e)}return function(i,a){if(null===(i=(0,xt.m9)(i)))return{nullValue:"NULL_VALUE"};if("number"==typeof i)return nu(a.k,i);if("boolean"==typeof i)return{booleanValue:i};if("string"==typeof i)return{stringValue:i};if(i instanceof Date){const h=$i.fromDate(i);return{timestampValue:Da(a.k,h)}}if(i instanceof $i){const h=new $i(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Da(a.k,h)}}if(i instanceof Ep)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Pa)return{bytesValue:Fd(a.k,i._byteString)};if(i instanceof Ci){const h=a.databaseId,y=i.firestore._databaseId;if(!y.isEqual(h))throw a.Ua(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Jr(i.firestore._databaseId||a.databaseId,i._key.path)}}throw a.Ua(`Unsupported field value: ${gp(i)}`)}(s,e)}function $_(s,e){const i={};return Bc(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Su(s,(a,h)=>{const y=vd(h,e.Fa(a));null!=y&&(i[a]=y)}),{mapValue:{fields:i}}}function W_(s){return!("object"!=typeof s||null===s||s instanceof Array||s instanceof Date||s instanceof $i||s instanceof Ep||s instanceof Pa||s instanceof Ci||s instanceof _d)}function G_(s,e,i){if(!W_(i)||"object"!=typeof(a=i)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=gp(i);throw e.Ua("an object"===a?s+" a custom object":s+" "+a)}var a}function Om(s,e,i){if((e=(0,xt.m9)(e))instanceof qa)return e._internalPath;if("string"==typeof e)return K_(s,e);throw Pm("Field path arguments must be of type string or FieldPath.",s,!1,void 0,i)}const z_=new RegExp("[~\\*/\\[\\]]");function K_(s,e,i){if(e.search(z_)>=0)throw Pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new qa(...e.split("."))._internalPath}catch(a){throw Pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function Pm(s,e,i,a,h){const y=a&&!a.isEmpty(),D=void 0!==h;let j=`Function ${e}() called with invalid data`;i&&(j+=" (via `toFirestore()`)"),j+=". ";let K="";return(y||D)&&(K+=" (found",y&&(K+=` in field ${a}`),D&&(K+=` in document ${h}`),K+=")"),new M(C.INVALID_ARGUMENT,j+s+K)}function cv(s,e){return s.some(i=>i.isEqual(e))}class bp{constructor(e,i,a,h,y){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=h,this._converter=y}get id(){return this._key.path.lastSegment()}get ref(){return new Ci(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(Cg("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i)}}}class Gw extends bp{data(){return super.data()}}function Cg(s,e){return"string"==typeof e?K_(s,e):e instanceof qa?e._internalPath:e._delegate._internalPath}class uh{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cu extends bp{constructor(e,i,a,h,y,D){super(e,i,a,h,D),this._firestore=e,this._firestoreImpl=e,this.metadata=y}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(Cg("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}}class ch extends Cu{data(e={}){return super.data(e)}}class wd{constructor(e,i,a,h){this._firestore=e,this._userDataWriter=i,this._snapshot=h,this.metadata=new uh(h.hasPendingWrites,h.fromCache),this.query=a}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,i){this._snapshot.docs.forEach(a=>{e.call(i,new ch(this._firestore,this._userDataWriter,a.key,a,new uh(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new M(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(a,h){if(a._snapshot.oldDocs.isEmpty()){let y=0;return a._snapshot.docChanges.map(D=>({type:"added",doc:new ch(a._firestore,a._userDataWriter,D.doc.key,D.doc,new uh(a._snapshot.mutatedKeys.has(D.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:y++}))}{let y=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(D=>h||3!==D.type).map(D=>{const j=new ch(a._firestore,a._userDataWriter,D.doc.key,D.doc,new uh(a._snapshot.mutatedKeys.has(D.doc.key),a._snapshot.fromCache),a.query.converter);let K=-1,ae=-1;return 0!==D.type&&(K=y.indexOf(D.doc.key),y=y.delete(D.doc.key)),1!==D.type&&(y=y.add(D.doc),ae=y.indexOf(D.doc.key)),{type:zw(D.type),doc:j,oldIndex:K,newIndex:ae}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function zw(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt()}}function dv(s,e){return s instanceof Cu&&e instanceof Cu?s._firestore===e._firestore&&s._key.isEqual(e._key)&&(null===s._document?null===e._document:s._document.isEqual(e._document))&&s._converter===e._converter:s instanceof wd&&e instanceof wd&&s._firestore===e._firestore&&mp(s.query,e.query)&&s.metadata.isEqual(e.metadata)&&s._snapshot.isEqual(e._snapshot)}function hv(s){if(al(s)&&0===s.explicitOrderBy.length)throw new M(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}function Mc(s,...e){for(const i of e)s=i._apply(s);return s}class Kw extends Ip{constructor(e,i,a){super(),this.Ga=e,this.za=i,this.Ha=a,this.type="where"}_apply(e){const i=yd(e.firestore),a=function(h,y,D,j,K,ae,Ee){let Fe;if(K.isKeyField()){if("array-contains"===ae||"array-contains-any"===ae)throw new M(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ae}' queries on FieldPath.documentId().`);if("in"===ae||"not-in"===ae){Nm(Ee,ae);const _t=[];for(const At of Ee)_t.push(J_(j,h,At));Fe={arrayValue:{values:_t}}}else Fe=J_(j,h,Ee)}else"in"!==ae&&"not-in"!==ae&&"array-contains-any"!==ae||Nm(Ee,ae),Fe=H_(D,"where",Ee,"in"===ae||"not-in"===ae);const nt=ms.create(K,ae,Fe);return function(_t,At){if(At.V()){const kn=lc(_t);if(null!==kn&&!kn.isEqual(At.field))throw new M(C.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${kn.toString()}' and '${At.field.toString()}'`);const Ss=Sl(_t);null!==Ss&&X_(0,At.field,Ss)}const pn=function(kn,Ss){for(const ws of kn.filters)if(Ss.indexOf(ws.op)>=0)return ws.op;return null}(_t,function(kn){switch(kn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(At.op));if(null!==pn)throw new M(C.INVALID_ARGUMENT,pn===At.op?`Invalid query. You cannot use more than one '${At.op.toString()}' filter.`:`Invalid query. You cannot use '${At.op.toString()}' filters with '${pn.toString()}' filters.`)}(h,nt),nt}(e._query,0,i,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new oa(e.firestore,e.converter,function(h,y){const D=h.filters.concat([y]);return new Oo(h.path,h.collectionGroup,h.explicitOrderBy.slice(),D,h.limit,h.limitType,h.startAt,h.endAt)}(e._query,a))}}class ff extends Ip{constructor(e,i){super(),this.Ga=e,this.Ja=i,this.type="orderBy"}_apply(e){const i=function(a,h,y){if(null!==a.startAt)throw new M(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new M(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const D=new zs(h,y);return function(j,K){if(null===Sl(j)){const ae=lc(j);null!==ae&&X_(0,ae,K.field)}}(a,D),D}(e._query,this.Ga,this.Ja);return new oa(e.firestore,e.converter,function(a,h){const y=a.explicitOrderBy.concat([h]);return new Oo(a.path,a.collectionGroup,y,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,i))}}class Mm extends Ip{constructor(e,i,a){super(),this.type=e,this.Ya=i,this.Xa=a}_apply(e){return new oa(e.firestore,e.converter,ea(e._query,this.Ya,this.Xa))}}class Dp extends Ip{constructor(e,i,a){super(),this.type=e,this.Za=i,this.tc=a}_apply(e){const i=Q_(e,this.type,this.Za,this.tc);return new oa(e.firestore,e.converter,(h=i,new Oo((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,h,a.endAt)));var a,h}}class Y_ extends Ip{constructor(e,i,a){super(),this.type=e,this.Za=i,this.tc=a}_apply(e){const i=Q_(e,this.type,this.Za,this.tc);return new oa(e.firestore,e.converter,(h=i,new Oo((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,h)));var a,h}}function Q_(s,e,i,a){if(i[0]=(0,xt.m9)(i[0]),i[0]instanceof bp)return function(h,y,D,j,K){if(!j)throw new M(C.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${D}().`);const ae=[];for(const Ee of Vs(h))if(Ee.field.isKeyField())ae.push(Yl(y,j.key));else{const Fe=j.data.field(Ee.field);if(oc(Fe))throw new M(C.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ee.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Fe){const nt=Ee.field.canonicalString();throw new M(C.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${nt}' (used as the orderBy) does not exist.`)}ae.push(Fe)}return new Ou(ae,K)}(s._query,s.firestore._databaseId,e,i[0]._document,a);{const h=yd(s.firestore);return function(y,D,j,K,ae,Ee){const Fe=y.explicitOrderBy;if(ae.length>Fe.length)throw new M(C.INVALID_ARGUMENT,`Too many arguments provided to ${K}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const nt=[];for(let _t=0;_t<ae.length;_t++){const At=ae[_t];if(Fe[_t].field.isKeyField()){if("string"!=typeof At)throw new M(C.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${K}(), but got a ${typeof At}`);if(!Wc(y)&&-1!==At.indexOf("/"))throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${K}() must be a plain document ID, but '${At}' contains a slash.`);const pn=y.path.child(yr.fromString(At));if(!Xt.isDocumentKey(pn))throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${K}() must result in a valid document path, but '${pn}' is not because it contains an odd number of segments.`);const kn=new Xt(pn);nt.push(Yl(D,kn))}else{const pn=H_(j,K,At);nt.push(pn)}}return new Ou(nt,Ee)}(s._query,s.firestore._databaseId,h,e,i,a)}}function J_(s,e,i){if("string"==typeof(i=(0,xt.m9)(i))){if(""===i)throw new M(C.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wc(e)&&-1!==i.indexOf("/"))throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=e.path.child(yr.fromString(i));if(!Xt.isDocumentKey(a))throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Yl(s,new Xt(a))}if(i instanceof Ci)return Yl(s,i._key);throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${gp(i)}.`)}function Nm(s,e){if(!Array.isArray(s)||0===s.length)throw new M(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(s.length>10)throw new M(C.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function X_(s,e,i){if(!i.isEqual(e))throw new M(C.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${i.toString()}' instead.`)}class bg{convertValue(e,i="none"){switch(Zl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _i(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(wa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 10:return this.convertObject(e.mapValue,i);default:throw qt()}}convertObject(e,i){const a={};return Su(e.fields,(h,y)=>{a[h]=this.convertValue(y,i)}),a}convertGeoPoint(e){return new Ep(_i(e.latitude),_i(e.longitude))}convertArray(e,i){return(e.values||[]).map(a=>this.convertValue(a,i))}convertServerTimestamp(e,i){switch(i){case"previous":const a=Va(e);return null==a?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(Dl(e));default:return null}}convertTimestamp(e){const i=go(e);return new $i(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=yr.fromString(e);bn(Wu(a));const h=new sa(a.get(1),a.get(3)),y=new Xt(a.popFirst(5));return h.isEqual(i)||sr(`Document ${y} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),y}}function Tp(s,e,i){let a;return a=s?i&&(i.merge||i.mergeFields)?s.toFirestore(e,i):s.toFirestore(e):e,a}class km extends bg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pa(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ci(this.firestore,null,i)}}class vv{constructor(e,i){this._firestore=e,this._commitHandler=i,this._mutations=[],this._committed=!1,this._dataReader=yd(e)}set(e,i,a){this._verifyNotCommitted();const h=Xu(e,this._firestore),y=Tp(h.converter,i,a),D=wg(this._dataReader,"WriteBatch.set",h._key,y,null!==h.converter,a);return this._mutations.push(D.toMutation(h._key,oi.none())),this}update(e,i,a,...h){this._verifyNotCommitted();const y=Xu(e,this._firestore);let D;return D="string"==typeof(i=(0,xt.m9)(i))||i instanceof qa?Eg(this._dataReader,"WriteBatch.update",y._key,i,a,h):Rm(this._dataReader,"WriteBatch.update",y._key,i),this._mutations.push(D.toMutation(y._key,oi.exists(!0))),this}delete(e){this._verifyNotCommitted();const i=Xu(e,this._firestore);return this._mutations=this._mutations.concat(new vo(i._key,oi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new M(C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xu(s,e){if((s=(0,xt.m9)(s)).firestore!==e)throw new M(C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class pf extends bg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pa(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ci(this.firestore,null,i)}}function Ig(s,e,i){s=Tr(s,Ci);const a=Tr(s.firestore,vs),h=Tp(s.converter,e,i);return dh(a,[wg(yd(a),"setDoc",s._key,h,null!==s.converter,i).toMutation(s._key,oi.none())])}function Dg(s,e,i,...a){s=Tr(s,Ci);const h=Tr(s.firestore,vs),y=yd(h);let D;return D="string"==typeof(e=(0,xt.m9)(e))||e instanceof qa?Eg(y,"updateDoc",s._key,e,i,a):Rm(y,"updateDoc",s._key,e),dh(h,[D.toMutation(s._key,oi.exists(!0))])}function ty(s,...e){var i,a,h;s=(0,xt.m9)(s);let y={includeMetadataChanges:!1},D=0;"object"!=typeof e[D]||vg(e[D])||(y=e[D],D++);const j={includeMetadataChanges:y.includeMetadataChanges};if(vg(e[D])){const Fe=e[D];e[D]=null===(i=Fe.next)||void 0===i?void 0:i.bind(Fe),e[D+1]=null===(a=Fe.error)||void 0===a?void 0:a.bind(Fe),e[D+2]=null===(h=Fe.complete)||void 0===h?void 0:h.bind(Fe)}let K,ae,Ee;if(s instanceof Ci)ae=Tr(s.firestore,vs),Ee=tr(s._key.path),K={next:Fe=>{e[D]&&e[D](Vm(ae,s,Fe))},error:e[D+1],complete:e[D+2]};else{const Fe=Tr(s,oa);ae=Tr(Fe.firestore,vs),Ee=Fe._query;const nt=new pf(ae);K={next:_t=>{e[D]&&e[D](new wd(ae,nt,Fe,_t))},error:e[D+1],complete:e[D+2]},hv(s._query)}return function(Fe,nt,_t,At){const pn=new pg(At),kn=new Ra(nt,pn,_t);return Fe.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return Xf(yield sf(Fe),kn)})),()=>{pn.na(),Fe.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return ep(yield sf(Fe),kn)}))}}(fi(ae),Ee,j,K)}function dh(s,e){return function(i,a){const h=new $;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(s,e,i){return lg.apply(this,arguments)}(yield Em(i),a,h)})),h.promise}(fi(s),e)}function Vm(s,e,i){const a=i.docs.get(e._key),h=new pf(s);return new Cu(s,h,e._key,a,new uh(i.hasPendingWrites,i.fromCache),e.converter)}class ry extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=yd(e)}get(e){const i=Xu(e,this._firestore),a=new km(this._firestore);return this._transaction.lookup([i._key]).then(h=>{if(!h||1!==h.length)return qt();const y=h[0];if(y.isFoundDocument())return new bp(this._firestore,a,y.key,y,i.converter);if(y.isNoDocument())return new bp(this._firestore,a,i._key,null,i.converter);throw qt()})}set(e,i,a){const h=Xu(e,this._firestore),y=Tp(h.converter,i,a),D=wg(this._dataReader,"Transaction.set",h._key,y,null!==h.converter,a);return this._transaction.set(h._key,D),this}update(e,i,a,...h){const y=Xu(e,this._firestore);let D;return D="string"==typeof(i=(0,xt.m9)(i))||i instanceof qa?Eg(this._dataReader,"Transaction.update",y._key,i,a,h):Rm(this._dataReader,"Transaction.update",y._key,i),this._transaction.update(y._key,D),this}delete(e){const i=Xu(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,i){super(e,i),this._firestore=e}get(e){const i=Xu(e,this._firestore),a=new pf(this._firestore);return super.get(e).then(h=>new Cu(this._firestore,a,i._key,h._document,new uh(!1,!1),i.converter))}}function Tg(s,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new M("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return e}function ay(){if("undefined"==typeof Uint8Array)throw new M("unimplemented","Uint8Arrays are not available in this environment.")}function ly(){if("undefined"==typeof atob)throw new M("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(s,e=!0){va=lt.SDK_VERSION,(0,lt._registerComponent)(new Mt.wA("firestore",(i,{options:a})=>{const h=i.getProvider("app").getImmediate(),y=new vs(h,new st(i.getProvider("auth-internal")),new gr(i.getProvider("app-check-internal")));return a=Object.assign({useFetchStreams:e},a),y._setSettings(a),y},"PUBLIC")),(0,lt.registerVersion)(Au,"3.4.1",s),(0,lt.registerVersion)(Au,"3.4.1","esm2017")}();class Sp{constructor(e){this._delegate=e}static fromBase64String(e){return ly(),new Sp(Pa.fromBase64String(e))}static fromUint8Array(e){return ay(),new Sp(Pa.fromUint8Array(e))}toBase64(){return ly(),this._delegate.toBase64()}toUint8Array(){return ay(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ag(s){return function(s,e){if("object"!=typeof s||null===s)return!1;const i=s;for(const a of["next","error","complete"])if(a in i&&"function"==typeof i[a])return!0;return!1}(s)}class uy{enableIndexedDbPersistence(e,i){return function(s,e){lh(s=Tr(s,vs));const i=fi(s),a=s._freezeSettings(),h=new hp;return yp(i,h,new Qu(h,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:i})}enableMultiTabIndexedDbPersistence(e){return function(s){lh(s=Tr(s,vs));const e=fi(s),i=s._freezeSettings(),a=new hp;return yp(e,a,new mm(a,i.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(s){if(s._initialized&&!s._terminated)throw new M(C.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $;return s._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(i=(0,Ie.Z)(function*(a){if(!Wi.bt())return Promise.resolve();const h=a+"main";yield Wi.delete(h)}),function(a){return i.apply(this,arguments)})(Vl(s._databaseId,s._persistenceKey)),e.resolve()}catch(i){e.reject(i)}var i})),e.promise}(e._delegate)}}class Wm{constructor(e,i,a){this._delegate=i,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof sa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const i=this._delegate._getSettings();!e.merge&&i.host!==e.host&&Yo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},i),e)).merge,this._delegate._setSettings(e)}useEmulator(e,i,a={}){!function(s,e,i,a={}){var h;const y=(s=Tr(s,oh))._getSettings();if("firestore.googleapis.com"!==y.host&&y.host!==e&&Yo("Host has been set in both settings() and useEmulator(), emulator host will be used"),s._setSettings(Object.assign(Object.assign({},y),{host:`${e}:${i}`,ssl:!1})),a.mockUserToken){let D,j;if("string"==typeof a.mockUserToken)D=a.mockUserToken,j=ci.MOCK_USER;else{D=(0,xt.Sg)(a.mockUserToken,null===(h=s._app)||void 0===h?void 0:h.options.projectId);const K=a.mockUserToken.sub||a.mockUserToken.user_id;if(!K)throw new M(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");j=new ci(K)}s._authCredentials=new Oe(new X(D,j))}}(this._delegate,e,i,a)}enableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield vm(s),i=yield S_(s);return e.setNetworkEnabled(!0),function(a){const h=I(a);return h.Gr.delete(0),Xd(h)}(i)}))}(fi(s=Tr(s,vs)))}(this._delegate)}disableNetwork(){return function(s){return function(s){return s.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield vm(s),i=yield S_(s);return e.setNetworkEnabled(!1),(a=(0,Ie.Z)(function*(h){const y=I(h);y.Gr.add(0),yield Dc(y),y.Jr.set("Offline")}),function(h){return a.apply(this,arguments)})(i);var a}))}(fi(s=Tr(s,vs)))}(this._delegate)}enablePersistence(e){let i=!1,a=!1;return e&&(i=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,sv("synchronizeTabs",i,"experimentalForceOwningTab",a)),i?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(s){return function(e){const i=new $;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(s,e){return md.apply(this,arguments)}(yield Em(e),i)})),i.promise}(fi(s=Tr(s,vs)))}(this._delegate)}onSnapshotsInSync(e){return function(s,e){return function(s,e){const i=new pg(e);return s.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return a=yield sf(s),h=i,I(a).io.add(h),void h.next();var a,h})),()=>{i.na(),s.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return a=yield sf(s),h=i,void I(a).io.delete(h);var a,h}))}}(fi(s=Tr(s,vs)),vg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new M("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mf(this,N_(this._delegate,e))}catch(i){throw Za(i,"collection()","Firestore.collection()")}}doc(e){try{return new _l(this,yg(this._delegate,e))}catch(i){throw Za(i,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xr(this,function(s,e){if(s=Tr(s,oh),M_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new M(C.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new oa(s,null,(i=e,new Oo(yr.emptyPath(),i)));var i}(this._delegate,e))}catch(i){throw Za(i,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(s,e){return function(s,e){const i=new $;return s.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const a=yield(h=s,pp(h).then(y=>y.datastore));var h;new D_(s.asyncQueue,a,e,i).run()})),i.promise}(fi(s=Tr(s,vs)),i=>e(new ry(s,i)))}(this._delegate,i=>e(new Gm(this,i)))}batch(){return fi(this._delegate),new zm(new vv(this._delegate,e=>dh(this._delegate,e)))}loadBundle(e){return function(s,e){const i=fi(s=Tr(s,vs)),a=new Eu;return function(s,e,i,a){const h=function(y,D){let j;return j="string"==typeof y?(new TextEncoder).encode(y):y,K=function(K,ae){if(K instanceof Uint8Array)return Xy(K,void 0);if(K instanceof ArrayBuffer)return Xy(new Uint8Array(K),void 0);if(K instanceof ReadableStream)return K.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(j),new ev(K,D);var K}(i,Wh(e));s.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function(s,e,i){const a=I(s);var h;(h=(0,Ie.Z)(function*(y,D,j){try{const K=yield D.getMetadata();if(yield function(nt,_t){const At=I(nt),pn=ys(_t.createTime);return At.persistence.runTransaction("hasNewerBundle","readonly",kn=>At.Ye.getBundleMetadata(kn,_t.id)).then(kn=>!!kn&&kn.createTime.compareTo(pn)>=0)}(y.localStore,K))return yield D.close(),void j._completeWith((nt=K,{taskState:"Success",documentsLoaded:nt.totalDocuments,bytesLoaded:nt.totalBytes,totalDocuments:nt.totalDocuments,totalBytes:nt.totalBytes}));j._updateProgress(vu(K));const ae=new Jh(K,y.localStore,D.k);let Ee=yield D.Ho();for(;Ee;){const nt=yield ae.yo(Ee);nt&&j._updateProgress(nt),Ee=yield D.Ho()}const Fe=yield ae.complete();yield u(y,Fe.In,void 0),yield function(nt,_t){const At=I(nt);return At.persistence.runTransaction("Save bundle","readwrite",pn=>At.Ye.saveBundleMetadata(pn,_t))}(y.localStore,K),j._completeWith(Fe.progress)}catch(K){Yo("SyncEngine",`Loading bundle failed with ${K}`),j._failWith(K)}var nt}),function(y,D,j){return h.apply(this,arguments)})(a,e,i).then(()=>{a.sharedClientState.notifyBundleLoaded()})}(yield Em(s),h,a)}))}(i,s._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function(s,e){return function(s,e){return s.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(i,a){const h=I(i);return h.persistence.runTransaction("Get named query","readonly",y=>h.Ye.getNamedQuery(y,a))}(yield wm(s),e)}))}(fi(s=Tr(s,vs)),e).then(i=>i?new oa(s,null,i.query):null)}(this._delegate,e).then(i=>i?new xr(this,i):null)}}class xp extends bg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sp(new Pa(e))}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return _l.forKey(i,this.firestore,null)}}class Gm{constructor(e,i){this._firestore=e,this._delegate=i,this._userDataWriter=new xp(e)}get(e){const i=Cd(e);return this._delegate.get(i).then(a=>new gf(this._firestore,new Cu(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,i.converter)))}set(e,i,a){const h=Cd(e);return a?(Tg("Transaction.set",a),this._delegate.set(h,i,a)):this._delegate.set(h,i),this}update(e,i,a,...h){const y=Cd(e);return 2===arguments.length?this._delegate.update(y,i):this._delegate.update(y,i,a,...h),this}delete(e){const i=Cd(e);return this._delegate.delete(i),this}}class zm{constructor(e){this._delegate=e}set(e,i,a){const h=Cd(e);return a?(Tg("WriteBatch.set",a),this._delegate.set(h,i,a)):this._delegate.set(h,i),this}update(e,i,a,...h){const y=Cd(e);return 2===arguments.length?this._delegate.update(y,i):this._delegate.update(y,i,a,...h),this}delete(e){const i=Cd(e);return this._delegate.delete(i),this}commit(){return this._delegate.commit()}}class Ed{constructor(e,i,a){this._firestore=e,this._userDataWriter=i,this._delegate=a}fromFirestore(e,i){const a=new ch(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Rp(this._firestore,a),null!=i?i:{})}toFirestore(e,i){return i?this._delegate.toFirestore(e,i):this._delegate.toFirestore(e)}static getInstance(e,i){const a=Ed.INSTANCES;let h=a.get(e);h||(h=new WeakMap,a.set(e,h));let y=h.get(i);return y||(y=new Ed(e,new xp(e),i),h.set(i,y)),y}}Ed.INSTANCES=new WeakMap;class _l{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new xp(e)}static forPath(e,i,a){if(e.length%2!=0)throw new M("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _l(i,new Ci(i._delegate,a,new Xt(e)))}static forKey(e,i,a){return new _l(i,new Ci(i._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new mf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mf(this.firestore,N_(this._delegate,e))}catch(i){throw Za(i,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof Ci&&k_(this._delegate,e)}set(e,i){i=Tg("DocumentReference.set",i);try{return i?Ig(this._delegate,e,i):Ig(this._delegate,e)}catch(a){throw Za(a,"setDoc()","DocumentReference.set()")}}update(e,i,...a){try{return 1===arguments.length?Dg(this._delegate,e):Dg(this._delegate,e,i,...a)}catch(h){throw Za(h,"updateDoc()","DocumentReference.update()")}}delete(){return function(s){return dh(Tr(s.firestore,vs),[new vo(s._key,oi.none())])}(this._delegate)}onSnapshot(...e){const i=dy(e),a=hy(e,h=>new gf(this.firestore,new Cu(this.firestore._delegate,this._userDataWriter,h._key,h._document,h.metadata,this._delegate.converter)));return ty(this._delegate,i,a)}get(e){let i;return i="cache"===(null==e?void 0:e.source)?function(s){s=Tr(s,Ci);const e=Tr(s.firestore,vs),i=fi(e),a=new pf(e);return function(s,e){const i=new $;return s.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(a=(0,Ie.Z)(function*(h,y,D){try{const j=yield function(K,ae){const Ee=I(K);return Ee.persistence.runTransaction("read document","readonly",Fe=>Ee.Wn.Rn(Fe,ae))}(h,y);j.isFoundDocument()?D.resolve(j):j.isNoDocument()?D.resolve(null):D.reject(new M(C.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(j){const K=yu(j,`Failed to get document '${y} from cache`);D.reject(K)}}),function(h,y,D){return a.apply(this,arguments)})(yield wm(s),e,i);var a})),i.promise}(i,s._key).then(h=>new Cu(e,a,s._key,h,new uh(null!==h&&h.hasLocalMutations,!0),s.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=Tr(s,Ci);const e=Tr(s.firestore,vs);return R_(fi(e),s._key,{source:"server"}).then(i=>Vm(e,s,i))}(this._delegate):function(s){s=Tr(s,Ci);const e=Tr(s.firestore,vs);return R_(fi(e),s._key).then(i=>Vm(e,s,i))}(this._delegate),i.then(a=>new gf(this.firestore,new Cu(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new _l(this.firestore,this._delegate.withConverter(e?Ed.getInstance(this.firestore,e):null))}}function Za(s,e,i){return s.message=s.message.replace(e,i),s}function dy(s){for(const e of s)if("object"==typeof e&&!Ag(e))return e;return{}}function hy(s,e){var i,a;let h;return h=Ag(s[0])?s[0]:Ag(s[1])?s[1]:"function"==typeof s[0]?{next:s[0],error:s[1],complete:s[2]}:{next:s[1],error:s[2],complete:s[3]},{next:y=>{h.next&&h.next(e(y))},error:null===(i=h.error)||void 0===i?void 0:i.bind(h),complete:null===(a=h.complete)||void 0===a?void 0:a.bind(h)}}class gf{constructor(e,i){this._firestore=e,this._delegate=i}get ref(){return new _l(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,i){return this._delegate.get(e,i)}isEqual(e){return dv(this._delegate,e._delegate)}}class Rp extends gf{data(e){const i=this._delegate.data(e);return function(s,e){s||qt()}(void 0!==i),i}}class xr{constructor(e,i){this.firestore=e,this._delegate=i,this._userDataWriter=new xp(e)}where(e,i,a){try{return new xr(this.firestore,Mc(this._delegate,function(s,e,i){const a=e,h=Cg("where",s);return new Kw(h,a,i)}(e,i,a)))}catch(h){throw Za(h,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,i){try{return new xr(this.firestore,Mc(this._delegate,function(s,e="asc"){const i=e,a=Cg("orderBy",s);return new ff(a,i)}(e,i)))}catch(a){throw Za(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xr(this.firestore,Mc(this._delegate,function(s){return ov("limit",s),new Mm("limit",s,"F")}(e)))}catch(i){throw Za(i,"limit()","Query.limit()")}}limitToLast(e){try{return new xr(this.firestore,Mc(this._delegate,function(s){return ov("limitToLast",s),new Mm("limitToLast",s,"L")}(e)))}catch(i){throw Za(i,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xr(this.firestore,Mc(this._delegate,function(...s){return new Dp("startAt",s,!0)}(...e)))}catch(i){throw Za(i,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xr(this.firestore,Mc(this._delegate,function(...s){return new Dp("startAfter",s,!1)}(...e)))}catch(i){throw Za(i,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xr(this.firestore,Mc(this._delegate,function(...s){return new Y_("endBefore",s,!0)}(...e)))}catch(i){throw Za(i,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xr(this.firestore,Mc(this._delegate,function(...s){return new Y_("endAt",s,!1)}(...e)))}catch(i){throw Za(i,"endAt()","Query.endAt()")}}isEqual(e){return mp(this._delegate,e._delegate)}get(e){let i;return i="cache"===(null==e?void 0:e.source)?function(s){s=Tr(s,oa);const e=Tr(s.firestore,vs),i=fi(e),a=new pf(e);return function(s,e){const i=new $;return s.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(a=(0,Ie.Z)(function*(h,y,D){try{const j=yield Ku(h,y,!0),K=new og(y,j.zn),ae=K.bo(j.documents),Ee=K.applyChanges(ae,!1);D.resolve(Ee.snapshot)}catch(j){const K=yu(j,`Failed to execute query '${y} against cache`);D.reject(K)}}),function(h,y,D){return a.apply(this,arguments)})(yield wm(s),e,i);var a})),i.promise}(i,s._query).then(h=>new wd(e,a,s,h))}(this._delegate):"server"===(null==e?void 0:e.source)?function(s){s=Tr(s,oa);const e=Tr(s.firestore,vs),i=fi(e),a=new pf(e);return nv(i,s._query,{source:"server"}).then(h=>new wd(e,a,s,h))}(this._delegate):function(s){s=Tr(s,oa);const e=Tr(s.firestore,vs),i=fi(e),a=new pf(e);return hv(s._query),nv(i,s._query).then(h=>new wd(e,a,s,h))}(this._delegate),i.then(a=>new Km(this.firestore,new wd(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const i=dy(e),a=hy(e,h=>new Km(this.firestore,new wd(this.firestore._delegate,this._userDataWriter,this._delegate,h._snapshot)));return ty(this._delegate,i,a)}withConverter(e){return new xr(this.firestore,this._delegate.withConverter(e?Ed.getInstance(this.firestore,e):null))}}class fy{constructor(e,i){this._firestore=e,this._delegate=i}get type(){return this._delegate.type}get doc(){return new Rp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Km{constructor(e,i){this._firestore=e,this._delegate=i}get query(){return new xr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Rp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(i=>new fy(this._firestore,i))}forEach(e,i){this._delegate.forEach(a=>{e.call(i,new Rp(this._firestore,a))})}isEqual(e){return dv(this._delegate,e._delegate)}}class mf extends xr{constructor(e,i){super(e,i),this.firestore=e,this._delegate=i}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _l(this.firestore,e):null}doc(e){try{return new _l(this.firestore,void 0===e?yg(this._delegate):yg(this._delegate,e))}catch(i){throw Za(i,"doc()","CollectionReference.doc()")}}add(e){return function(s,e){const i=Tr(s.firestore,vs),a=yg(s),h=Tp(s.converter,e);return dh(i,[wg(yd(s.firestore),"addDoc",a._key,h,null!==s.converter,{}).toMutation(a._key,oi.exists(!1))]).then(()=>a)}(this._delegate,e).then(i=>new _l(this.firestore,i))}isEqual(e){return k_(this._delegate,e._delegate)}withConverter(e){return new mf(this.firestore,this._delegate.withConverter(e?Ed.getInstance(this.firestore,e):null))}}function Cd(s){return Tr(s,Ci)}class qm{constructor(...e){this._delegate=new qa(...e)}static documentId(){return new qm(Ls.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof qa&&this._delegate._internalPath.isEqual(e._internalPath)}}class bd{constructor(e){this._delegate=e}static serverTimestamp(){const e=new xm("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new bd(e)}static delete(){const e=new hf("deleteField");return e._methodName="FieldValue.delete",new bd(e)}static arrayUnion(...e){const i=function(...s){return new j_("arrayUnion",s)}(...e);return i._methodName="FieldValue.arrayUnion",new bd(i)}static arrayRemove(...e){const i=function(...s){return new uv("arrayRemove",s)}(...e);return i._methodName="FieldValue.arrayRemove",new bd(i)}static increment(e){const i=function(s){return new Ww("increment",s)}(e);return i._methodName="FieldValue.increment",new bd(i)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const py={Firestore:Wm,GeoPoint:Ep,Timestamp:$i,Blob:Sp,Transaction:Gm,WriteBatch:zm,DocumentReference:_l,DocumentSnapshot:gf,Query:xr,QueryDocumentSnapshot:Rp,QuerySnapshot:Km,CollectionReference:mf,FieldPath:qm,FieldValue:bd,setLogLevel:function(s){!function(s){xi.setLogLevel(s)}(s)},CACHE_SIZE_UNLIMITED:-1};!function(s){(function(s,e){s.INTERNAL.registerComponent(new Mt.wA("firestore-compat",i=>((e,i)=>new Wm(e,i,new uy))(i.getProvider("app-compat").getImmediate(),i.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},py)))})(s),s.registerVersion("@firebase/firestore-compat","0.1.10")}(et.Z);var hh=V(2673);function my(s,e){return function(s,e=x.z){return new se.y(i=>{let a;return null!=e?e.schedule(()=>{a=s.onSnapshot({includeMetadataChanges:!0},i)}):a=s.onSnapshot({includeMetadataChanges:!0},i),()=>{null!=a&&a()}})}(s,e)}function yy(s,e){return my(s,e).pipe((0,Z.U)(i=>({payload:i,type:"query"})))}function Op(s,e){return yy(s,e).pipe((0,ie.O)(void 0),oe(),(0,Z.U)(([i,a])=>{const h=a.payload.docChanges(),y=h.map(D=>({type:D.type,payload:D}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((D,j)=>{const K=h.find(Ee=>Ee.doc.ref.isEqual(D.ref)),ae=null==i?void 0:i.payload.docs.find(Ee=>Ee.ref.isEqual(D.ref));K&&JSON.stringify(K.doc.metadata)===JSON.stringify(D.metadata)||!K&&ae&&JSON.stringify(ae.metadata)===JSON.stringify(D.metadata)||y.push({type:"modified",payload:{oldIndex:j,newIndex:j,type:"modified",doc:D}})}),y}))}function Sg(s,e,i){return Op(s,i).pipe((0,me.R)((a,h)=>function(s,e,i){return e.forEach(a=>{i.indexOf(a.type)>-1&&(s=function(s,e){switch(e.type){case"added":if(!s[e.newIndex]||!s[e.newIndex].doc.ref.isEqual(e.doc.ref))return Zm(s,e.newIndex,0,e);break;case"modified":if(null==s[e.oldIndex]||s[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const i=s.slice();return i.splice(e.oldIndex,1),i.splice(e.newIndex,0,e),i}return Zm(s,e.newIndex,1,e)}break;case"removed":if(s[e.oldIndex]&&s[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Zm(s,e.oldIndex,1)}return s}(s,a))}),s}(a,h.map(y=>y.payload),e),[]),(0,Ke.x)(),(0,Z.U)(a=>a.map(h=>({type:h.type,payload:h}))))}function Zm(s,e,i,...a){const h=s.slice();return h.splice(e,i,...a),h}function bu(s){return(!s||0===s.length)&&(s=["added","removed","modified"]),s}class Wl{constructor(e,i,a){this.ref=e,this.query=i,this.afs=a}stateChanges(e){let i=Op(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(i=i.pipe((0,Z.U)(a=>a.filter(h=>e.indexOf(h.type)>-1)))),i.pipe((0,ie.O)(void 0),oe(),(0,qe.h)(([a,h])=>h.length>0||!a),(0,Z.U)(([a,h])=>h),ee.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,me.R)((i,a)=>[...i,...a],[]))}snapshotChanges(e){const i=bu(e);return Sg(this.query,i,this.afs.schedulers.outsideAngular).pipe(ee.iC)}valueChanges(e={}){return yy(this.query,this.afs.schedulers.outsideAngular).pipe((0,Z.U)(i=>i.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),ee.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(ee.f6)}add(e){return this.ref.add(e)}doc(e){return new Gl(this.ref.doc(e),this.afs)}}class Gl{constructor(e,i){this.ref=e,this.afs=i}set(e,i){return this.ref.set(e,i)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,i){const a=this.ref.collection(e),{ref:h,query:y}=Ey(a,i);return new Wl(h,y,this.afs)}snapshotChanges(){return function(s,e){return my(s,e).pipe((0,ie.O)(void 0),oe(),(0,Z.U)(([i,a])=>a.exists?(null==i?void 0:i.exists)?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ee.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Z.U)(({payload:i})=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data()))}get(e){return(0,De.D)(this.ref.get(e)).pipe((0,Me.QV)(this.afs.schedulers.insideAngular))}}class vy{constructor(e,i){this.query=e,this.afs=i}stateChanges(e){return e&&0!==e.length?Op(this.query,this.afs.schedulers.outsideAngular).pipe((0,Z.U)(i=>i.filter(a=>e.indexOf(a.type)>-1)),(0,qe.h)(i=>i.length>0),ee.iC):Op(this.query,this.afs.schedulers.outsideAngular).pipe(ee.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,me.R)((i,a)=>[...i,...a],[]))}snapshotChanges(e){const i=bu(e);return Sg(this.query,i,this.afs.schedulers.outsideAngular).pipe(ee.iC)}valueChanges(e={}){return yy(this.query,this.afs.schedulers.outsideAngular).pipe((0,Z.U)(a=>a.payload.docs.map(h=>e.idField?Object.assign({[e.idField]:h.id},h.data()):h.data())),ee.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(ee.f6)}}const Ym=new w.OlP("angularfire2.enableFirestorePersistence"),wy=new w.OlP("angularfire2.firestore.persistenceSettings"),Av=new w.OlP("angularfire2.firestore.settings"),Sv=new w.OlP("angularfire2.firestore.use-emulator");function Ey(s,e=(i=>i)){return{query:e(s),ref:s}}let xg=(()=>{class s{constructor(i,a,h,y,D,j,K,ae,Ee,Fe,nt,_t,At,pn,kn,Ss){this.schedulers=K;const ws=(0,it.on)(i,j,a),Id=Ee;if(Fe){const la=_t;(0,ee.cc)(`${ws.name}.auth`,"AngularFireAuth",ws.name,()=>{const Ya=j.runOutsideAngular(()=>ws.auth());if(nt&&Ya.useEmulator(...nt),At&&(Ya.tenantId=At),Ya.languageCode=pn,kn&&Ya.useDeviceLanguage(),la)for(const[Mp,Rg]of Object.entries(la))Ya.settings[Mp]=Rg;return Ss&&Ya.setPersistence(Ss),Ya},[nt,At,pn,kn,la,Ss])}[this.firestore,this.persistenceEnabled$]=(0,ee.cc)(`${ws.name}.firestore`,"AngularFirestore",ws.name,()=>{const la=j.runOutsideAngular(()=>ws.firestore());if(y&&la.settings(y),Id&&la.useEmulator(...Id),h&&!(0,ce.PM)(D)){const Ya=()=>{try{return(0,De.D)(la.enablePersistence(ae||void 0).then(()=>!0,()=>!1))}catch(Mp){return"undefined"!=typeof console&&console.warn(Mp),(0,pe.of)(!1)}};return[la,j.runOutsideAngular(Ya)]}return[la,(0,pe.of)(!1)]},[y,Id,h])}collection(i,a){let h;h="string"==typeof i?this.firestore.collection(i):i;const{ref:y,query:D}=Ey(h,a),j=this.schedulers.ngZone.run(()=>y);return new Wl(j,D,this)}collectionGroup(i,a){const h=a||(D=>D),y=this.firestore.collectionGroup(i);return new vy(h(y),this)}doc(i){let a;a="string"==typeof i?this.firestore.doc(i):i;const h=this.schedulers.ngZone.run(()=>a);return new Gl(h,this)}createId(){return this.firestore.collection("_").doc().id}}return s.\u0275fac=function(i){return new(i||s)(w.LFG(it.Dh),w.LFG(it.xv,8),w.LFG(Ym,8),w.LFG(Av,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(ee.HU),w.LFG(wy,8),w.LFG(Sv,8),w.LFG(hh.zQ,8),w.LFG(hh.Qv,8),w.LFG(hh.L6,8),w.LFG(hh._Q,8),w.LFG(hh.rT,8),w.LFG(hh.lh,8),w.LFG(hh.f7,8))},s.\u0275prov=w.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})(),Pp=(()=>{class s{static enablePersistence(i){return{ngModule:s,providers:[{provide:Ym,useValue:!0},{provide:wy,useValue:i}]}}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=w.oAB({type:s}),s.\u0275inj=w.cJS({providers:[xg]}),s})()},9958:(Pe,fe,V)=>{"use strict";V.d(fe,{hO:()=>qe,xv:()=>ie,Dh:()=>Y,GT:()=>oe,on:()=>Z,pX:()=>ge});var w=V(7716),x=V(3394);x.Z.registerVersion("firebase","9.6.1","app-compat");var pe=V(9126);Pe=V.hmd(Pe);const ee=["ngOnDestroy"],ge=(Me,it,ce,Qe={})=>new Proxy(Me,{get:(et,Ie)=>ce.runOutsideAngular(()=>{var lt;if(Me[Ie])return(null===(lt=null==Qe?void 0:Qe.spy)||void 0===lt?void 0:lt.get)&&Qe.spy.get(Ie,Me[Ie]),Me[Ie];if(ee.indexOf(Ie)>-1)return()=>{};const Mt=it.toPromise().then(Wt=>{const xt=Wt&&Wt[Ie];return"function"==typeof xt?xt.bind(Wt):xt&&xt.then?xt.then(rt=>ce.run(()=>rt)):ce.run(()=>xt)});return new Proxy(()=>{},{get:(Wt,xt)=>Mt[xt],apply:(Wt,xt,rt)=>Mt.then(Be=>{var Ae;const $e=Be&&Be(...rt);return(null===(Ae=null==Qe?void 0:Qe.spy)||void 0===Ae?void 0:Ae.apply)&&Qe.spy.apply(Ie,rt,$e),$e})})})}),oe=(Me,it)=>{it.forEach(ce=>{Object.getOwnPropertyNames(ce.prototype||ce).forEach(Qe=>{Object.defineProperty(Me.prototype,Qe,Object.getOwnPropertyDescriptor(ce.prototype||ce,Qe))})})};class le{constructor(it){return it}}const Y=new w.OlP("angularfire2.app.options"),ie=new w.OlP("angularfire2.app.name");function Z(Me,it,ce){const et="object"==typeof ce&&ce||{};et.name=et.name||"string"==typeof ce&&ce||"[DEFAULT]";const lt=x.Z.apps.filter(Mt=>Mt&&Mt.name===et.name)[0]||it.runOutsideAngular(()=>x.Z.initializeApp(Me,et));try{JSON.stringify(Me)!==JSON.stringify(lt.options)&&me("error",`${lt.name} Firebase App already initialized with different options${Pe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Mt){}return new le(lt)}const me=(Me,...it)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[Me](...it)},Ke={provide:le,useFactory:Z,deps:[Y,w.R0b,[new w.FiY,ie]]};let qe=(()=>{class Me{constructor(ce){x.Z.registerVersion("angularfire",pe.q4.full,`compat-${ce.toString()}`),x.Z.registerVersion("angular",w.q4F.full)}static initializeApp(ce,Qe){return{ngModule:Me,providers:[{provide:Y,useValue:ce},{provide:ie,useValue:Qe}]}}}return Me.\u0275fac=function(ce){return new(ce||Me)(w.LFG(w.Lbi))},Me.\u0275mod=w.oAB({type:Me}),Me.\u0275inj=w.cJS({providers:[Ke]}),Me})()},9126:(Pe,fe,V)=>{"use strict";V.d(fe,{q4:()=>Y,iC:()=>Be,f6:()=>rt,HU:()=>Ie,cc:()=>me});var w=V(7716);(0,V(8026).registerVersion)("firebase","9.6.1","app");var pe=V(7771),ee=V(3637),ge=V(3342),oe=V(6136),le=V(3101);Pe=V.hmd(Pe);const Y=new w.GfV("7.0.0"),ie=!!Pe.hot,Z=(He,...Le)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[He](...Le)};function me(He,Le,at,Ot,zt){const[,Dt,Ft]=globalThis.\u0275AngularfireInstanceCache.find(Ht=>Ht[0]===He)||[];if(Dt)return function(He,Le){try{return He.toString()===Le.toString()}catch(at){return He===Le}}(zt,Ft)||(Z("error",`${Le} was already initialized on the ${at} Firebase App with different settings.${ie?" You may need to reload as Firebase is not HMR aware.":""}`),Z("warn",{is:zt,was:Ft})),Dt;{const Ht=Ot();return globalThis.\u0275AngularfireInstanceCache.push([He,Ht,zt]),Ht}}function ce(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class Qe{constructor(Le,at=pe.N){this.zone=Le,this.delegate=at}now(){return this.delegate.now()}schedule(Le,at,Ot){const zt=this.zone;return this.delegate.schedule(function(Ft){zt.runGuarded(()=>{Le.apply(this,[Ft])})},at,Ot)}}class et{constructor(Le){this.zone=Le,this.task=null}call(Le,at){const Ot=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ce,{},ce,ce)),at.pipe((0,ge.b)({next:Ot,complete:Ot,error:Ot})).subscribe(Le).add(Ot)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ie=(()=>{class He{constructor(at){this.ngZone=at,this.outsideAngular=at.runOutsideAngular(()=>new Qe(Zone.current)),this.insideAngular=at.run(()=>new Qe(Zone.current,ee.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return He.\u0275fac=function(at){return new(at||He)(w.LFG(w.R0b))},He.\u0275prov=w.Yz7({token:He,factory:He.\u0275fac,providedIn:"root"}),He})();function lt(){const He=globalThis.\u0275AngularFireScheduler;if(!He)throw new Error("AngularFireModule has not been provided");return He}function rt(He){return He.pipe((0,oe.QV)(lt().insideAngular))}function Be(He){return lt(),function(He){return function(at){return(at=at.lift(new et(He.ngZone))).pipe((0,le.R)(He.outsideAngular),(0,oe.QV)(He.insideAngular))}}(lt())(He)}},665:(Pe,fe,V)=>{"use strict";V.d(fe,{Fj:()=>ce,qu:()=>Xe,u:()=>us,sg:()=>Li,JJ:()=>jn,JL:()=>Qt,wV:()=>Un,UX:()=>te,kI:()=>Wt,_Y:()=>Ct});var w=V(7716),x=V(8583),se=V(7574),De=V(9796),pe=V(8002),ee=V(1555),ge=V(4402);function le(F,k){return new se.y(O=>{const q=F.length;if(0===q)return void O.complete();const Ve=new Array(q);let pt=0,tn=0;for(let Mn=0;Mn<q;Mn++){const Di=(0,ge.D)(F[Mn]);let Nr=!1;O.add(Di.subscribe({next:Ti=>{Nr||(Nr=!0,tn++),Ve[Mn]=Ti},error:Ti=>O.error(Ti),complete:()=>{pt++,(pt===q||!Nr)&&(tn===q&&O.next(k?k.reduce((Ti,fs,Zt)=>(Ti[fs]=Ve[Zt],Ti),{}):Ve),O.complete())}}))}})}let Y=(()=>{class F{constructor(O,q){this._renderer=O,this._elementRef=q,this.onChange=Ve=>{},this.onTouched=()=>{}}setProperty(O,q){this._renderer.setProperty(this._elementRef.nativeElement,O,q)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}}return F.\u0275fac=function(O){return new(O||F)(w.Y36(w.Qsj),w.Y36(w.SBq))},F.\u0275dir=w.lG2({type:F}),F})(),ie=(()=>{class F extends Y{}return F.\u0275fac=function(){let k;return function(q){return(k||(k=w.n5z(F)))(q||F)}}(),F.\u0275dir=w.lG2({type:F,features:[w.qOj]}),F})();const Z=new w.OlP("NgValueAccessor"),qe={provide:Z,useExisting:(0,w.Gpc)(()=>ce),multi:!0},it=new w.OlP("CompositionEventMode");let ce=(()=>{class F extends Y{constructor(O,q,Ve){super(O,q),this._compositionMode=Ve,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const F=(0,x.q)()?(0,x.q)().getUserAgent():"";return/android (\d+)/.test(F.toLowerCase())}())}writeValue(O){this.setProperty("value",null==O?"":O)}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}}return F.\u0275fac=function(O){return new(O||F)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(it,8))},F.\u0275dir=w.lG2({type:F,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(O,q){1&O&&w.NdJ("input",function(pt){return q._handleInput(pt.target.value)})("blur",function(){return q.onTouched()})("compositionstart",function(){return q._compositionStart()})("compositionend",function(pt){return q._compositionEnd(pt.target.value)})},features:[w._Bn([qe]),w.qOj]}),F})();function Qe(F){return null==F||0===F.length}function et(F){return null!=F&&"number"==typeof F.length}const Ie=new w.OlP("NgValidators"),lt=new w.OlP("NgAsyncValidators"),Mt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Wt{static min(k){return F=k,k=>{if(Qe(k.value)||Qe(F))return null;const O=parseFloat(k.value);return!isNaN(O)&&O<F?{min:{min:F,actual:k.value}}:null};var F}static max(k){return F=k,k=>{if(Qe(k.value)||Qe(F))return null;const O=parseFloat(k.value);return!isNaN(O)&&O>F?{max:{max:F,actual:k.value}}:null};var F}static required(k){return Qe(k.value)?{required:!0}:null}static requiredTrue(k){return!0===k.value?null:{required:!0}}static email(k){return Qe((F=k).value)||Mt.test(F.value)?null:{email:!0};var F}static minLength(k){return F=k,k=>Qe(k.value)||!et(k.value)?null:k.value.length<F?{minlength:{requiredLength:F,actualLength:k.value.length}}:null;var F}static maxLength(k){return F=k,k=>et(k.value)&&k.value.length>F?{maxlength:{requiredLength:F,actualLength:k.value.length}}:null;var F}static pattern(k){return function(F){if(!F)return at;let k,O;return"string"==typeof F?(O="","^"!==F.charAt(0)&&(O+="^"),O+=F,"$"!==F.charAt(F.length-1)&&(O+="$"),k=new RegExp(O)):(O=F.toString(),k=F),q=>{if(Qe(q.value))return null;const Ve=q.value;return k.test(Ve)?null:{pattern:{requiredPattern:O,actualValue:Ve}}}}(k)}static nullValidator(k){return null}static compose(k){return nr(k)}static composeAsync(k){return rn(k)}}function at(F){return null}function Ot(F){return null!=F}function zt(F){const k=(0,w.QGY)(F)?(0,ge.D)(F):F;return(0,w.CqO)(k),k}function Dt(F){let k={};return F.forEach(O=>{k=null!=O?Object.assign(Object.assign({},k),O):k}),0===Object.keys(k).length?null:k}function Ft(F,k){return k.map(O=>O(F))}function dn(F){return F.map(k=>function(F){return!F.validate}(k)?k:O=>k.validate(O))}function nr(F){if(!F)return null;const k=F.filter(Ot);return 0==k.length?null:function(O){return Dt(Ft(O,k))}}function Jt(F){return null!=F?nr(dn(F)):null}function rn(F){if(!F)return null;const k=F.filter(Ot);return 0==k.length?null:function(O){return function(...F){if(1===F.length){const k=F[0];if((0,De.k)(k))return le(k,null);if((0,ee.K)(k)&&Object.getPrototypeOf(k)===Object.prototype){const O=Object.keys(k);return le(O.map(q=>k[q]),O)}}if("function"==typeof F[F.length-1]){const k=F.pop();return le(F=1===F.length&&(0,De.k)(F[0])?F[0]:F,null).pipe((0,pe.U)(O=>k(...O)))}return le(F,null)}(Ft(O,k).map(zt)).pipe((0,pe.U)(Dt))}}function mn(F){return null!=F?rn(dn(F)):null}function Lt(F,k){return null===F?[k]:Array.isArray(F)?[...F,k]:[F,k]}function Kt(F){return F._rawValidators}function Fn(F){return F._rawAsyncValidators}function dr(F){return F?Array.isArray(F)?F:[F]:[]}function Gt(F,k){return Array.isArray(F)?F.includes(k):F===k}function Gn(F,k){const O=dr(k);return dr(F).forEach(Ve=>{Gt(O,Ve)||O.push(Ve)}),O}function Yn(F,k){return dr(k).filter(O=>!Gt(F,O))}let Xr=(()=>{class F{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(O){this._rawValidators=O||[],this._composedValidatorFn=Jt(this._rawValidators)}_setAsyncValidators(O){this._rawAsyncValidators=O||[],this._composedAsyncValidatorFn=mn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(O){this._onDestroyCallbacks.push(O)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(O=>O()),this._onDestroyCallbacks=[]}reset(O){this.control&&this.control.reset(O)}hasError(O,q){return!!this.control&&this.control.hasError(O,q)}getError(O,q){return this.control?this.control.getError(O,q):null}}return F.\u0275fac=function(O){return new(O||F)},F.\u0275dir=w.lG2({type:F}),F})(),Nt=(()=>{class F extends Xr{get formDirective(){return null}get path(){return null}}return F.\u0275fac=function(){let k;return function(q){return(k||(k=w.n5z(F)))(q||F)}}(),F.\u0275dir=w.lG2({type:F,features:[w.qOj]}),F})();class Qn extends Xr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Tt{constructor(k){this._cd=k}is(k){var O,q,Ve;return"submitted"===k?!!(null===(O=this._cd)||void 0===O?void 0:O.submitted):!!(null===(Ve=null===(q=this._cd)||void 0===q?void 0:q.control)||void 0===Ve?void 0:Ve[k])}}let jn=(()=>{class F extends Tt{constructor(O){super(O)}}return F.\u0275fac=function(O){return new(O||F)(w.Y36(Qn,2))},F.\u0275dir=w.lG2({type:F,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(O,q){2&O&&w.ekj("ng-untouched",q.is("untouched"))("ng-touched",q.is("touched"))("ng-pristine",q.is("pristine"))("ng-dirty",q.is("dirty"))("ng-valid",q.is("valid"))("ng-invalid",q.is("invalid"))("ng-pending",q.is("pending"))},features:[w.qOj]}),F})(),Qt=(()=>{class F extends Tt{constructor(O){super(O)}}return F.\u0275fac=function(O){return new(O||F)(w.Y36(Nt,10))},F.\u0275dir=w.lG2({type:F,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(O,q){2&O&&w.ekj("ng-untouched",q.is("untouched"))("ng-touched",q.is("touched"))("ng-pristine",q.is("pristine"))("ng-dirty",q.is("dirty"))("ng-valid",q.is("valid"))("ng-invalid",q.is("invalid"))("ng-pending",q.is("pending"))("ng-submitted",q.is("submitted"))},features:[w.qOj]}),F})();function Se(F,k){je(F,k),k.valueAccessor.writeValue(F.value),function(F,k){k.valueAccessor.registerOnChange(O=>{F._pendingValue=O,F._pendingChange=!0,F._pendingDirty=!0,"change"===F.updateOn&&Cn(F,k)})}(F,k),function(F,k){const O=(q,Ve)=>{k.valueAccessor.writeValue(q),Ve&&k.viewToModelUpdate(q)};F.registerOnChange(O),k._registerOnDestroy(()=>{F._unregisterOnChange(O)})}(F,k),function(F,k){k.valueAccessor.registerOnTouched(()=>{F._pendingTouched=!0,"blur"===F.updateOn&&F._pendingChange&&Cn(F,k),"submit"!==F.updateOn&&F.markAsTouched()})}(F,k),function(F,k){if(k.valueAccessor.setDisabledState){const O=q=>{k.valueAccessor.setDisabledState(q)};F.registerOnDisabledChange(O),k._registerOnDestroy(()=>{F._unregisterOnDisabledChange(O)})}}(F,k)}function _e(F,k,O=!0){const q=()=>{};k.valueAccessor&&(k.valueAccessor.registerOnChange(q),k.valueAccessor.registerOnTouched(q)),Ut(F,k),F&&(k._invokeOnDestroyCallbacks(),F._registerOnCollectionChange(()=>{}))}function Re(F,k){F.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(k)})}function je(F,k){const O=Kt(F);null!==k.validator?F.setValidators(Lt(O,k.validator)):"function"==typeof O&&F.setValidators([O]);const q=Fn(F);null!==k.asyncValidator?F.setAsyncValidators(Lt(q,k.asyncValidator)):"function"==typeof q&&F.setAsyncValidators([q]);const Ve=()=>F.updateValueAndValidity();Re(k._rawValidators,Ve),Re(k._rawAsyncValidators,Ve)}function Ut(F,k){let O=!1;if(null!==F){if(null!==k.validator){const Ve=Kt(F);if(Array.isArray(Ve)&&Ve.length>0){const pt=Ve.filter(tn=>tn!==k.validator);pt.length!==Ve.length&&(O=!0,F.setValidators(pt))}}if(null!==k.asyncValidator){const Ve=Fn(F);if(Array.isArray(Ve)&&Ve.length>0){const pt=Ve.filter(tn=>tn!==k.asyncValidator);pt.length!==Ve.length&&(O=!0,F.setAsyncValidators(pt))}}}const q=()=>{};return Re(k._rawValidators,q),Re(k._rawAsyncValidators,q),O}function Cn(F,k){F._pendingDirty&&F.markAsDirty(),F.setValue(F._pendingValue,{emitModelToViewChange:!1}),k.viewToModelUpdate(F._pendingValue),F._pendingChange=!1}function li(F,k){const O=F.indexOf(k);O>-1&&F.splice(O,1)}const ur="VALID",hr="INVALID",Jn="PENDING",Sr="DISABLED";function Er(F){return(Rr(F)?F.validators:F)||null}function vt(F){return Array.isArray(F)?Jt(F):F||null}function gn(F,k){return(Rr(k)?k.asyncValidators:F)||null}function Rn(F){return Array.isArray(F)?mn(F):F||null}function Rr(F){return null!=F&&!Array.isArray(F)&&"object"==typeof F}class Ln{constructor(k,O){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=k,this._rawAsyncValidators=O,this._composedValidatorFn=vt(this._rawValidators),this._composedAsyncValidatorFn=Rn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(k){this._rawValidators=this._composedValidatorFn=k}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(k){this._rawAsyncValidators=this._composedAsyncValidatorFn=k}get parent(){return this._parent}get valid(){return this.status===ur}get invalid(){return this.status===hr}get pending(){return this.status==Jn}get disabled(){return this.status===Sr}get enabled(){return this.status!==Sr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(k){this._rawValidators=k,this._composedValidatorFn=vt(k)}setAsyncValidators(k){this._rawAsyncValidators=k,this._composedAsyncValidatorFn=Rn(k)}addValidators(k){this.setValidators(Gn(k,this._rawValidators))}addAsyncValidators(k){this.setAsyncValidators(Gn(k,this._rawAsyncValidators))}removeValidators(k){this.setValidators(Yn(k,this._rawValidators))}removeAsyncValidators(k){this.setAsyncValidators(Yn(k,this._rawAsyncValidators))}hasValidator(k){return Gt(this._rawValidators,k)}hasAsyncValidator(k){return Gt(this._rawAsyncValidators,k)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(k={}){this.touched=!0,this._parent&&!k.onlySelf&&this._parent.markAsTouched(k)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(k=>k.markAllAsTouched())}markAsUntouched(k={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!k.onlySelf&&this._parent._updateTouched(k)}markAsDirty(k={}){this.pristine=!1,this._parent&&!k.onlySelf&&this._parent.markAsDirty(k)}markAsPristine(k={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!k.onlySelf&&this._parent._updatePristine(k)}markAsPending(k={}){this.status=Jn,!1!==k.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!k.onlySelf&&this._parent.markAsPending(k)}disable(k={}){const O=this._parentMarkedDirty(k.onlySelf);this.status=Sr,this.errors=null,this._forEachChild(q=>{q.disable(Object.assign(Object.assign({},k),{onlySelf:!0}))}),this._updateValue(),!1!==k.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},k),{skipPristineCheck:O})),this._onDisabledChange.forEach(q=>q(!0))}enable(k={}){const O=this._parentMarkedDirty(k.onlySelf);this.status=ur,this._forEachChild(q=>{q.enable(Object.assign(Object.assign({},k),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:k.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},k),{skipPristineCheck:O})),this._onDisabledChange.forEach(q=>q(!1))}_updateAncestors(k){this._parent&&!k.onlySelf&&(this._parent.updateValueAndValidity(k),k.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(k){this._parent=k}updateValueAndValidity(k={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ur||this.status===Jn)&&this._runAsyncValidator(k.emitEvent)),!1!==k.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!k.onlySelf&&this._parent.updateValueAndValidity(k)}_updateTreeValidity(k={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(k)),this.updateValueAndValidity({onlySelf:!0,emitEvent:k.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sr:ur}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(k){if(this.asyncValidator){this.status=Jn,this._hasOwnPendingAsyncValidator=!0;const O=zt(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(q=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(q,{emitEvent:k})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(k,O={}){this.errors=k,this._updateControlsErrors(!1!==O.emitEvent)}get(k){return function(F,k,O){if(null==k||(Array.isArray(k)||(k=k.split(".")),Array.isArray(k)&&0===k.length))return null;let q=F;return k.forEach(Ve=>{q=q instanceof Hn?q.controls.hasOwnProperty(Ve)?q.controls[Ve]:null:q instanceof Vn&&q.at(Ve)||null}),q}(this,k)}getError(k,O){const q=O?this.get(O):this;return q&&q.errors?q.errors[k]:null}hasError(k,O){return!!this.getError(k,O)}get root(){let k=this;for(;k._parent;)k=k._parent;return k}_updateControlsErrors(k){this.status=this._calculateStatus(),k&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(k)}_initObservables(){this.valueChanges=new w.vpe,this.statusChanges=new w.vpe}_calculateStatus(){return this._allControlsDisabled()?Sr:this.errors?hr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jn)?Jn:this._anyControlsHaveStatus(hr)?hr:ur}_anyControlsHaveStatus(k){return this._anyControls(O=>O.status===k)}_anyControlsDirty(){return this._anyControls(k=>k.dirty)}_anyControlsTouched(){return this._anyControls(k=>k.touched)}_updatePristine(k={}){this.pristine=!this._anyControlsDirty(),this._parent&&!k.onlySelf&&this._parent._updatePristine(k)}_updateTouched(k={}){this.touched=this._anyControlsTouched(),this._parent&&!k.onlySelf&&this._parent._updateTouched(k)}_isBoxedValue(k){return"object"==typeof k&&null!==k&&2===Object.keys(k).length&&"value"in k&&"disabled"in k}_registerOnCollectionChange(k){this._onCollectionChange=k}_setUpdateStrategy(k){Rr(k)&&null!=k.updateOn&&(this._updateOn=k.updateOn)}_parentMarkedDirty(k){return!k&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wn extends Ln{constructor(k=null,O,q){super(Er(O),gn(q,O)),this._onChange=[],this._applyFormState(k),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(k,O={}){this.value=this._pendingValue=k,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(q=>q(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(k,O={}){this.setValue(k,O)}reset(k=null,O={}){this._applyFormState(k),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(k){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(k){this._onChange.push(k)}_unregisterOnChange(k){li(this._onChange,k)}registerOnDisabledChange(k){this._onDisabledChange.push(k)}_unregisterOnDisabledChange(k){li(this._onDisabledChange,k)}_forEachChild(k){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(k){this._isBoxedValue(k)?(this.value=this._pendingValue=k.value,k.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=k}}class Hn extends Ln{constructor(k,O,q){super(Er(O),gn(q,O)),this.controls=k,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(k,O){return this.controls[k]?this.controls[k]:(this.controls[k]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(k,O,q={}){this.registerControl(k,O),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}removeControl(k,O={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),delete this.controls[k],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(k,O,q={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),delete this.controls[k],O&&this.registerControl(k,O),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}contains(k){return this.controls.hasOwnProperty(k)&&this.controls[k].enabled}setValue(k,O={}){this._checkAllValuesPresent(k),Object.keys(k).forEach(q=>{this._throwIfControlMissing(q),this.controls[q].setValue(k[q],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(k,O={}){null!=k&&(Object.keys(k).forEach(q=>{this.controls[q]&&this.controls[q].patchValue(k[q],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(k={},O={}){this._forEachChild((q,Ve)=>{q.reset(k[Ve],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(k,O,q)=>(k[q]=O instanceof wn?O.value:O.getRawValue(),k))}_syncPendingControls(){let k=this._reduceChildren(!1,(O,q)=>!!q._syncPendingControls()||O);return k&&this.updateValueAndValidity({onlySelf:!0}),k}_throwIfControlMissing(k){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[k])throw new Error(`Cannot find form control with name: ${k}.`)}_forEachChild(k){Object.keys(this.controls).forEach(O=>{const q=this.controls[O];q&&k(q,O)})}_setUpControls(){this._forEachChild(k=>{k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(k){for(const O of Object.keys(this.controls)){const q=this.controls[O];if(this.contains(O)&&k(q))return!0}return!1}_reduceValue(){return this._reduceChildren({},(k,O,q)=>((O.enabled||this.disabled)&&(k[q]=O.value),k))}_reduceChildren(k,O){let q=k;return this._forEachChild((Ve,pt)=>{q=O(q,Ve,pt)}),q}_allControlsDisabled(){for(const k of Object.keys(this.controls))if(this.controls[k].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(k){this._forEachChild((O,q)=>{if(void 0===k[q])throw new Error(`Must supply a value for form control with name: '${q}'.`)})}}class Vn extends Ln{constructor(k,O,q){super(Er(O),gn(q,O)),this.controls=k,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(k){return this.controls[k]}push(k,O={}){this.controls.push(k),this._registerControl(k),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(k,O,q={}){this.controls.splice(k,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:q.emitEvent})}removeAt(k,O={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),this.controls.splice(k,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(k,O,q={}){this.controls[k]&&this.controls[k]._registerOnCollectionChange(()=>{}),this.controls.splice(k,1),O&&(this.controls.splice(k,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(k,O={}){this._checkAllValuesPresent(k),k.forEach((q,Ve)=>{this._throwIfControlMissing(Ve),this.at(Ve).setValue(q,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(k,O={}){null!=k&&(k.forEach((q,Ve)=>{this.at(Ve)&&this.at(Ve).patchValue(q,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(k=[],O={}){this._forEachChild((q,Ve)=>{q.reset(k[Ve],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(k=>k instanceof wn?k.value:k.getRawValue())}clear(k={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:k.emitEvent}))}_syncPendingControls(){let k=this.controls.reduce((O,q)=>!!q._syncPendingControls()||O,!1);return k&&this.updateValueAndValidity({onlySelf:!0}),k}_throwIfControlMissing(k){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(k))throw new Error(`Cannot find form control at index ${k}`)}_forEachChild(k){this.controls.forEach((O,q)=>{k(O,q)})}_updateValue(){this.value=this.controls.filter(k=>k.enabled||this.disabled).map(k=>k.value)}_anyControls(k){return this.controls.some(O=>O.enabled&&k(O))}_setUpControls(){this._forEachChild(k=>this._registerControl(k))}_checkAllValuesPresent(k){this._forEachChild((O,q)=>{if(void 0===k[q])throw new Error(`Must supply a value for form control at index: ${q}.`)})}_allControlsDisabled(){for(const k of this.controls)if(k.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(k){k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange)}}let Ct=(()=>{class F{}return F.\u0275fac=function(O){return new(O||F)},F.\u0275dir=w.lG2({type:F,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),F})();const un={provide:Z,useExisting:(0,w.Gpc)(()=>Un),multi:!0};let Un=(()=>{class F extends ie{writeValue(O){this.setProperty("value",null==O?"":O)}registerOnChange(O){this.onChange=q=>{O(""==q?null:parseFloat(q))}}}return F.\u0275fac=function(){let k;return function(q){return(k||(k=w.n5z(F)))(q||F)}}(),F.\u0275dir=w.lG2({type:F,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(O,q){1&O&&w.NdJ("input",function(pt){return q.onChange(pt.target.value)})("blur",function(){return q.onTouched()})},features:[w._Bn([un]),w.qOj]}),F})(),Xn=(()=>{class F{}return F.\u0275fac=function(O){return new(O||F)},F.\u0275mod=w.oAB({type:F}),F.\u0275inj=w.cJS({}),F})();const ls=new w.OlP("NgModelWithFormControlWarning"),oo={provide:Nt,useExisting:(0,w.Gpc)(()=>Li)};let Li=(()=>{class F extends Nt{constructor(O,q){super(),this.validators=O,this.asyncValidators=q,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new w.vpe,this._setValidators(O),this._setAsyncValidators(q)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ut(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const q=this.form.get(O.path);return Se(q,O),q.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),q}getControl(O){return this.form.get(O.path)}removeControl(O){_e(O.control||null,O,!1),li(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,q){this.form.get(O.path).setValue(q)}onSubmit(O){return this.submitted=!0,function(F,k){F._syncPendingControls(),k.forEach(O=>{const q=O.control;"submit"===q.updateOn&&q._pendingChange&&(O.viewToModelUpdate(q._pendingValue),q._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(O),!1}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const q=O.control,Ve=this.form.get(O.path);q!==Ve&&(_e(q||null,O),Ve instanceof wn&&(Se(Ve,O),O.control=Ve))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const q=this.form.get(O.path);(function(F,k){je(F,k)})(q,O),q.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const q=this.form.get(O.path);q&&function(F,k){return Ut(F,k)}(q,O)&&q.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){je(this.form,this),this._oldForm&&Ut(this._oldForm,this)}_checkFormPresent(){}}return F.\u0275fac=function(O){return new(O||F)(w.Y36(Ie,10),w.Y36(lt,10))},F.\u0275dir=w.lG2({type:F,selectors:[["","formGroup",""]],hostBindings:function(O,q){1&O&&w.NdJ("submit",function(pt){return q.onSubmit(pt)})("reset",function(){return q.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([oo]),w.qOj,w.TTD]}),F})();const Vi={provide:Qn,useExisting:(0,w.Gpc)(()=>us)};let us=(()=>{class F extends Qn{constructor(O,q,Ve,pt,tn){super(),this._ngModelWarningConfig=tn,this._added=!1,this.update=new w.vpe,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(q),this._setAsyncValidators(Ve),this.valueAccessor=function(F,k){if(!k)return null;let O,q,Ve;return Array.isArray(k),k.forEach(pt=>{pt.constructor===ce?O=pt:function(F){return Object.getPrototypeOf(F.constructor)===ie}(pt)?q=pt:Ve=pt}),Ve||q||O||null}(0,pt)}set isDisabled(O){}ngOnChanges(O){this._added||this._setUpControl(),function(F,k){if(!F.hasOwnProperty("model"))return!1;const O=F.model;return!!O.isFirstChange()||!Object.is(k,O.currentValue)}(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return function(F,k){return[...k.path,F]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return F.\u0275fac=function(O){return new(O||F)(w.Y36(Nt,13),w.Y36(Ie,10),w.Y36(lt,10),w.Y36(Z,10),w.Y36(ls,8))},F.\u0275dir=w.lG2({type:F,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[w._Bn([Vi]),w.qOj,w.TTD]}),F._ngModelWarningSentOnce=!1,F})(),Q=(()=>{class F{}return F.\u0275fac=function(O){return new(O||F)},F.\u0275mod=w.oAB({type:F}),F.\u0275inj=w.cJS({imports:[[Xn]]}),F})(),te=(()=>{class F{static withConfig(O){return{ngModule:F,providers:[{provide:ls,useValue:O.warnOnNgModelWithFormControl}]}}}return F.\u0275fac=function(O){return new(O||F)},F.\u0275mod=w.oAB({type:F}),F.\u0275inj=w.cJS({imports:[Q]}),F})(),Xe=(()=>{class F{group(O,q=null){const Ve=this._reduceControls(O);let Mn,pt=null,tn=null;return null!=q&&(function(F){return void 0!==F.asyncValidators||void 0!==F.validators||void 0!==F.updateOn}(q)?(pt=null!=q.validators?q.validators:null,tn=null!=q.asyncValidators?q.asyncValidators:null,Mn=null!=q.updateOn?q.updateOn:void 0):(pt=null!=q.validator?q.validator:null,tn=null!=q.asyncValidator?q.asyncValidator:null)),new Hn(Ve,{asyncValidators:tn,updateOn:Mn,validators:pt})}control(O,q,Ve){return new wn(O,q,Ve)}array(O,q,Ve){const pt=O.map(tn=>this._createControl(tn));return new Vn(pt,q,Ve)}_reduceControls(O){const q={};return Object.keys(O).forEach(Ve=>{q[Ve]=this._createControl(O[Ve])}),q}_createControl(O){return O instanceof wn||O instanceof Hn||O instanceof Vn?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=(0,w.Yz7)({factory:function(){return new F},token:F,providedIn:te}),F})()},9493:(Pe,fe,V)=>{"use strict";V.d(fe,{F0:()=>Si,yS:()=>ps,Bz:()=>Ws,lC:()=>N});var w=V(8583),x=V(7716),se=V(4869),De=V(9796),pe=V(5197),ee=V(509),ge=V(6693);const oe={};class Y{constructor(I){this.resultSelector=I}call(I,C){return C.subscribe(new ie(I,this.resultSelector))}}class ie extends pe.L{constructor(I,C){super(I),this.resultSelector=C,this.active=0,this.values=[],this.observables=[]}_next(I){this.values.push(oe),this.observables.push(I)}_complete(){const I=this.observables,C=I.length;if(0===C)this.destination.complete();else{this.active=C,this.toRespond=C;for(let M=0;M<C;M++)this.add((0,ee.D)(this,I[M],void 0,M))}}notifyComplete(I){0==(this.active-=1)&&this.destination.complete()}notifyNext(I,C,M){const $=this.values,ve=this.toRespond?$[M]===oe?--this.toRespond:this.toRespond:0;$[M]=C,0===ve&&(this.resultSelector?this._tryResultSelector($):this.destination.next($.slice()))}_tryResultSelector(I){let C;try{C=this.resultSelector.apply(this,I)}catch(M){return void this.destination.error(M)}this.destination.next(C)}}var Z=V(7574),me=V(4402),Ke=V(9193);function qe(P){return new Z.y(I=>{let C;try{C=P()}catch($){return void I.error($)}return(C?(0,me.D)(C):(0,Ke.c)()).subscribe(I)})}var Me=V(5917),it=V(6215),ce=V(3410),Qe=V(8071),et=V(2441),Ie=V(9765),lt=V(5435),Mt=V(7393),Wt=V(7108);function xt(P){return function(C){return 0===P?(0,Ke.c)():C.lift(new rt(P))}}class rt{constructor(I){if(this.total=I,this.total<0)throw new Wt.W}call(I,C){return C.subscribe(new Be(I,this.total))}}class Be extends Mt.L{constructor(I,C){super(I),this.total=C,this.ring=new Array,this.count=0}_next(I){const C=this.ring,M=this.total,$=this.count++;C.length<M?C.push(I):C[$%M]=I}_complete(){const I=this.destination;let C=this.count;if(C>0){const M=this.count>=this.total?this.total:this.count,$=this.ring;for(let X=0;X<M;X++){const ve=C++%M;I.next($[ve])}}I.complete()}}var Ae=V(4635),$e=V(5242),xe=V(4487),Le=V(5319);class Ot{constructor(I){this.callback=I}call(I,C){return C.subscribe(new zt(I,this.callback))}}class zt extends Mt.L{constructor(I,C){super(I),this.add(new Le.w(C))}}var Dt=V(8002),Ft=V(3190),Ht=V(5257),dn=V(9761),nr=V(2145),Jt=V(5304),rn=V(4612),mn=V(8049),Lt=V(9773),Kt=V(3342),Fn=V(1307),dr=V(3282);class Gt{constructor(I,C){this.id=I,this.url=C}}class Gn extends Gt{constructor(I,C,M="imperative",$=null){super(I,C),this.navigationTrigger=M,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yn extends Gt{constructor(I,C,M){super(I,C),this.urlAfterRedirects=M}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xr extends Gt{constructor(I,C,M){super(I,C),this.reason=M}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Nt extends Gt{constructor(I,C,M){super(I,C),this.error=M}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Qn extends Gt{constructor(I,C,M,$){super(I,C),this.urlAfterRedirects=M,this.state=$}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tt extends Gt{constructor(I,C,M,$){super(I,C),this.urlAfterRedirects=M,this.state=$}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ar extends Gt{constructor(I,C,M,$,X){super(I,C),this.urlAfterRedirects=M,this.state=$,this.shouldActivate=X}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zn extends Gt{constructor(I,C,M,$){super(I,C),this.urlAfterRedirects=M,this.state=$}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jn extends Gt{constructor(I,C,M,$){super(I,C),this.urlAfterRedirects=M,this.state=$}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qt{constructor(I){this.route=I}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jt{constructor(I){this.route=I}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sn{constructor(I){this.snapshot=I}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dn{constructor(I){this.snapshot=I}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ar{constructor(I){this.snapshot=I}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sn{constructor(I){this.snapshot=I}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class It{constructor(I,C,M){this.routerEvent=I,this.position=C,this.anchor=M}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const yt="primary";class ei{constructor(I){this.params=I||{}}has(I){return Object.prototype.hasOwnProperty.call(this.params,I)}get(I){if(this.has(I)){const C=this.params[I];return Array.isArray(C)?C[0]:C}return null}getAll(I){if(this.has(I)){const C=this.params[I];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function bi(P){return new ei(P)}const Es="ngNavigationCancelingError";function xn(P){const I=Error("NavigationCancelingError: "+P);return I[Es]=!0,I}function Ni(P,I,C){const M=C.path.split("/");if(M.length>P.length||"full"===C.pathMatch&&(I.hasChildren()||M.length<P.length))return null;const $={};for(let X=0;X<M.length;X++){const ve=M[X],Oe=P[X];if(ve.startsWith(":"))$[ve.substring(1)]=Oe;else if(ve!==Oe.path)return null}return{consumed:P.slice(0,M.length),posParams:$}}function _e(P,I){const C=P?Object.keys(P):void 0,M=I?Object.keys(I):void 0;if(!C||!M||C.length!=M.length)return!1;let $;for(let X=0;X<C.length;X++)if($=C[X],!Re(P[$],I[$]))return!1;return!0}function Re(P,I){if(Array.isArray(P)&&Array.isArray(I)){if(P.length!==I.length)return!1;const C=[...P].sort(),M=[...I].sort();return C.every(($,X)=>M[X]===$)}return P===I}function ot(P){return Array.prototype.concat.apply([],P)}function je(P){return P.length>0?P[P.length-1]:null}function Vt(P,I){for(const C in P)P.hasOwnProperty(C)&&I(P[C],C)}function an(P){return(0,x.CqO)(P)?P:(0,x.QGY)(P)?(0,me.D)(Promise.resolve(P)):(0,Me.of)(P)}const lr={exact:function ai(P,I,C){if(!Jn(P.segments,I.segments)||!Ki(P.segments,I.segments,C)||P.numberOfChildren!==I.numberOfChildren)return!1;for(const M in I.children)if(!P.children[M]||!ai(P.children[M],I.children[M],C))return!1;return!0},subset:xs},Fr={exact:function(P,I){return _e(P,I)},subset:function(P,I){return Object.keys(I).length<=Object.keys(P).length&&Object.keys(I).every(C=>Re(P[C],I[C]))},ignored:()=>!0};function _n(P,I,C){return lr[C.paths](P.root,I.root,C.matrixParams)&&Fr[C.queryParams](P.queryParams,I.queryParams)&&!("exact"===C.fragment&&P.fragment!==I.fragment)}function xs(P,I,C){return hn(P,I,I.segments,C)}function hn(P,I,C,M){if(P.segments.length>C.length){const $=P.segments.slice(0,C.length);return!(!Jn($,C)||I.hasChildren()||!Ki($,C,M))}if(P.segments.length===C.length){if(!Jn(P.segments,C)||!Ki(P.segments,C,M))return!1;for(const $ in I.children)if(!P.children[$]||!xs(P.children[$],I.children[$],M))return!1;return!0}{const $=C.slice(0,P.segments.length),X=C.slice(P.segments.length);return!!(Jn(P.segments,$)&&Ki(P.segments,$,M)&&P.children[yt])&&hn(P.children[yt],I,X,M)}}function Ki(P,I,C){return I.every((M,$)=>Fr[C](P[$].parameters,M.parameters))}class li{constructor(I,C,M){this.root=I,this.queryParams=C,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bi(this.queryParams)),this._queryParamMap}toString(){return vt.serialize(this)}}class yn{constructor(I,C){this.segments=I,this.children=C,this.parent=null,Vt(C,(M,$)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gn(this)}}class ur{constructor(I,C){this.path=I,this.parameters=C}get parameterMap(){return this._parameterMap||(this._parameterMap=bi(this.parameters)),this._parameterMap}toString(){return Cs(this)}}function Jn(P,I){return P.length===I.length&&P.every((C,M)=>C.path===I[M].path)}class qi{}class Er{parse(I){const C=new ye(I);return new li(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(I){var P;return`${`/${Rn(I.root,!0)}`}${function(P){const I=Object.keys(P).map(C=>{const M=P[C];return Array.isArray(M)?M.map($=>`${Ln(C)}=${Ln($)}`).join("&"):`${Ln(C)}=${Ln(M)}`}).filter(C=>!!C);return I.length?`?${I.join("&")}`:""}(I.queryParams)}${"string"==typeof I.fragment?`#${P=I.fragment,encodeURI(P)}`:""}`}}const vt=new Er;function gn(P){return P.segments.map(I=>Cs(I)).join("/")}function Rn(P,I){if(!P.hasChildren())return gn(P);if(I){const C=P.children[yt]?Rn(P.children[yt],!1):"",M=[];return Vt(P.children,($,X)=>{X!==yt&&M.push(`${X}:${Rn($,!1)}`)}),M.length>0?`${C}(${M.join("//")})`:C}{const C=function(P,I){let C=[];return Vt(P.children,(M,$)=>{$===yt&&(C=C.concat(I(M,$)))}),Vt(P.children,(M,$)=>{$!==yt&&(C=C.concat(I(M,$)))}),C}(P,(M,$)=>$===yt?[Rn(P.children[yt],!1)]:[`${$}:${Rn(M,!1)}`]);return 1===Object.keys(P.children).length&&null!=P.children[yt]?`${gn(P)}/${C[0]}`:`${gn(P)}/(${C.join("//")})`}}function Rr(P){return encodeURIComponent(P).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ln(P){return Rr(P).replace(/%3B/gi,";")}function Hn(P){return Rr(P).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vn(P){return decodeURIComponent(P)}function Rs(P){return Vn(P.replace(/\+/g,"%20"))}function Cs(P){return`${Hn(P.path)}${function(P){return Object.keys(P).map(I=>`;${Hn(I)}=${Hn(P[I])}`).join("")}(P.parameters)}`}const os=/^[^\/()?;=#]+/;function bs(P){const I=P.match(os);return I?I[0]:""}const Os=/^[^=?&#]+/,as=/^[^?&#]+/;class ye{constructor(I){this.url=I,this.remaining=I}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yn([],{}):new yn([],this.parseChildren())}parseQueryParams(){const I={};if(this.consumeOptional("?"))do{this.parseQueryParam(I)}while(this.consumeOptional("&"));return I}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const I=[];for(this.peekStartsWith("(")||I.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),I.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(I.length>0||Object.keys(C).length>0)&&(M[yt]=new yn(I,C)),M}parseSegment(){const I=bs(this.remaining);if(""===I&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(I),new ur(Vn(I),this.parseMatrixParams())}parseMatrixParams(){const I={};for(;this.consumeOptional(";");)this.parseParam(I);return I}parseParam(I){const C=bs(this.remaining);if(!C)return;this.capture(C);let M="";if(this.consumeOptional("=")){const $=bs(this.remaining);$&&(M=$,this.capture(M))}I[Vn(C)]=Vn(M)}parseQueryParam(I){const C=function(P){const I=P.match(Os);return I?I[0]:""}(this.remaining);if(!C)return;this.capture(C);let M="";if(this.consumeOptional("=")){const ve=function(P){const I=P.match(as);return I?I[0]:""}(this.remaining);ve&&(M=ve,this.capture(M))}const $=Rs(C),X=Rs(M);if(I.hasOwnProperty($)){let ve=I[$];Array.isArray(ve)||(ve=[ve],I[$]=ve),ve.push(X)}else I[$]=X}parseParens(I){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=bs(this.remaining),$=this.remaining[M.length];if("/"!==$&&")"!==$&&";"!==$)throw new Error(`Cannot parse url '${this.url}'`);let X;M.indexOf(":")>-1?(X=M.substr(0,M.indexOf(":")),this.capture(X),this.capture(":")):I&&(X=yt);const ve=this.parseChildren();C[X]=1===Object.keys(ve).length?ve[yt]:new yn([],ve),this.consumeOptional("//")}return C}peekStartsWith(I){return this.remaining.startsWith(I)}consumeOptional(I){return!!this.peekStartsWith(I)&&(this.remaining=this.remaining.substring(I.length),!0)}capture(I){if(!this.consumeOptional(I))throw new Error(`Expected "${I}".`)}}class Ge{constructor(I){this._root=I}get root(){return this._root.value}parent(I){const C=this.pathFromRoot(I);return C.length>1?C[C.length-2]:null}children(I){const C=Ue(I,this._root);return C?C.children.map(M=>M.value):[]}firstChild(I){const C=Ue(I,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(I){const C=Je(I,this._root);return C.length<2?[]:C[C.length-2].children.map($=>$.value).filter($=>$!==I)}pathFromRoot(I){return Je(I,this._root).map(C=>C.value)}}function Ue(P,I){if(P===I.value)return I;for(const C of I.children){const M=Ue(P,C);if(M)return M}return null}function Je(P,I){if(P===I.value)return[I];for(const C of I.children){const M=Je(P,C);if(M.length)return M.unshift(I),M}return[]}class mt{constructor(I,C){this.value=I,this.children=C}toString(){return`TreeNode(${this.value})`}}function Ct(P){const I={};return P&&P.children.forEach(C=>I[C.value.outlet]=C),I}class un extends Ge{constructor(I,C){super(I),this.snapshot=C,he(this,I)}toString(){return this.snapshot.toString()}}function Un(P,I){const C=function(P,I){const ve=new Zr([],{},{},"",{},yt,I,null,P.root,-1,{});return new Fi("",new mt(ve,[]))}(P,I),M=new it.X([new ur("",{})]),$=new it.X({}),X=new it.X({}),ve=new it.X({}),Oe=new it.X(""),st=new Pt(M,$,ve,Oe,X,yt,I,C.root);return st.snapshot=C.root,new un(new mt(st,[]),C)}class Pt{constructor(I,C,M,$,X,ve,Oe,st){this.url=I,this.params=C,this.queryParams=M,this.fragment=$,this.data=X,this.outlet=ve,this.component=Oe,this._futureSnapshot=st}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Dt.U)(I=>bi(I)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Dt.U)(I=>bi(I)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xn(P,I="emptyOnly"){const C=P.pathFromRoot;let M=0;if("always"!==I)for(M=C.length-1;M>=1;){const $=C[M],X=C[M-1];if($.routeConfig&&""===$.routeConfig.path)M--;else{if(X.component)break;M--}}return function(P){return P.reduce((I,C)=>({params:Object.assign(Object.assign({},I.params),C.params),data:Object.assign(Object.assign({},I.data),C.data),resolve:Object.assign(Object.assign({},I.resolve),C._resolvedData)}),{params:{},data:{},resolve:{}})}(C.slice(M))}class Zr{constructor(I,C,M,$,X,ve,Oe,st,wt,$n,cn){this.url=I,this.params=C,this.queryParams=M,this.fragment=$,this.data=X,this.outlet=ve,this.component=Oe,this.routeConfig=st,this._urlSegment=wt,this._lastPathIndex=$n,this._resolve=cn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Fi extends Ge{constructor(I,C){super(C),this.url=I,he(this,C)}toString(){return ls(this._root)}}function he(P,I){I.value._routerState=P,I.children.forEach(C=>he(P,C))}function ls(P){const I=P.children.length>0?` { ${P.children.map(ls).join(", ")} } `:"";return`${P.value}${I}`}function ti(P){if(P.snapshot){const I=P.snapshot,C=P._futureSnapshot;P.snapshot=C,_e(I.queryParams,C.queryParams)||P.queryParams.next(C.queryParams),I.fragment!==C.fragment&&P.fragment.next(C.fragment),_e(I.params,C.params)||P.params.next(C.params),function(P,I){if(P.length!==I.length)return!1;for(let C=0;C<P.length;++C)if(!_e(P[C],I[C]))return!1;return!0}(I.url,C.url)||P.url.next(C.url),_e(I.data,C.data)||P.data.next(C.data)}else P.snapshot=P._futureSnapshot,P.data.next(P._futureSnapshot.data)}function rr(P,I){return _e(P.params,I.params)&&function(P,I){return Jn(P,I)&&P.every((C,M)=>_e(C.parameters,I[M].parameters))}(P.url,I.url)&&!(!P.parent!=!I.parent)&&(!P.parent||rr(P.parent,I.parent))}function Li(P,I,C){if(C&&P.shouldReuseRoute(I.value,C.value.snapshot)){const M=C.value;M._futureSnapshot=I.value;const $=function(P,I,C){return I.children.map(M=>{for(const $ of C.children)if(P.shouldReuseRoute(M.value,$.value.snapshot))return Li(P,M,$);return Li(P,M)})}(P,I,C);return new mt(M,$)}{if(P.shouldAttach(I.value)){const X=P.retrieve(I.value);if(null!==X){const ve=X.route;return Zi(I,ve),ve}}const M=function(P){return new Pt(new it.X(P.url),new it.X(P.params),new it.X(P.queryParams),new it.X(P.fragment),new it.X(P.data),P.outlet,P.component,P)}(I.value),$=I.children.map(X=>Li(P,X));return new mt(M,$)}}function Zi(P,I){if(P.value.routeConfig!==I.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(P.children.length!==I.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");I.value._futureSnapshot=P.value;for(let C=0;C<P.children.length;++C)Zi(P.children[C],I.children[C])}function Ms(P){return"object"==typeof P&&null!=P&&!P.outlets&&!P.segmentPath}function Vi(P){return"object"==typeof P&&null!=P&&P.outlets}function us(P,I,C,M,$){let X={};return M&&Vt(M,(ve,Oe)=>{X[Oe]=Array.isArray(ve)?ve.map(st=>`${st}`):`${ve}`}),new li(C.root===P?I:da(C.root,P,I),X,$)}function da(P,I,C){const M={};return Vt(P.children,($,X)=>{M[X]=$===I?C:da($,I,C)}),new yn(P.segments,M)}class Is{constructor(I,C,M){if(this.isAbsolute=I,this.numberOfDoubleDots=C,this.commands=M,I&&M.length>0&&Ms(M[0]))throw new Error("Root segment cannot have matrix parameters");const $=M.find(Vi);if($&&$!==je(M))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yi{constructor(I,C,M){this.segmentGroup=I,this.processChildren=C,this.index=M}}function lo(P,I,C){if(P||(P=new yn([],{})),0===P.segments.length&&P.hasChildren())return Yr(P,I,C);const M=function(P,I,C){let M=0,$=I;const X={match:!1,pathIndex:0,commandIndex:0};for(;$<P.segments.length;){if(M>=C.length)return X;const ve=P.segments[$],Oe=C[M];if(Vi(Oe))break;const st=`${Oe}`,wt=M<C.length-1?C[M+1]:null;if($>0&&void 0===st)break;if(st&&wt&&"object"==typeof wt&&void 0===wt.outlets){if(!Mr(st,wt,ve))return X;M+=2}else{if(!Mr(st,{},ve))return X;M++}$++}return{match:!0,pathIndex:$,commandIndex:M}}(P,I,C),$=C.slice(M.commandIndex);if(M.match&&M.pathIndex<P.segments.length){const X=new yn(P.segments.slice(0,M.pathIndex),{});return X.children[yt]=new yn(P.segments.slice(M.pathIndex),P.children),Yr(X,0,$)}return M.match&&0===$.length?new yn(P.segments,{}):M.match&&!P.hasChildren()?ks(P,I,C):M.match?Yr(P,0,$):ks(P,I,C)}function Yr(P,I,C){if(0===C.length)return new yn(P.segments,{});{const M=function(P){return Vi(P[0])?P[0].outlets:{[yt]:P}}(C),$={};return Vt(M,(X,ve)=>{"string"==typeof X&&(X=[X]),null!==X&&($[ve]=lo(P.children[ve],I,X))}),Vt(P.children,(X,ve)=>{void 0===M[ve]&&($[ve]=X)}),new yn(P.segments,$)}}function ks(P,I,C){const M=P.segments.slice(0,I);let $=0;for(;$<C.length;){const X=C[$];if(Vi(X)){const st=ds(X.outlets);return new yn(M,st)}if(0===$&&Ms(C[0])){M.push(new ur(P.segments[I].path,Ys(C[0]))),$++;continue}const ve=Vi(X)?X.outlets[yt]:`${X}`,Oe=$<C.length-1?C[$+1]:null;ve&&Oe&&Ms(Oe)?(M.push(new ur(ve,Ys(Oe))),$+=2):(M.push(new ur(ve,{})),$++)}return new yn(M,{})}function ds(P){const I={};return Vt(P,(C,M)=>{"string"==typeof C&&(C=[C]),null!==C&&(I[M]=ks(new yn([],{}),0,C))}),I}function Ys(P){const I={};return Vt(P,(C,M)=>I[M]=`${C}`),I}function Mr(P,I,C){return P==C.path&&_e(I,C.parameters)}class Ds{constructor(I,C,M,$){this.routeReuseStrategy=I,this.futureState=C,this.currState=M,this.forwardEvent=$}activate(I){const C=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,M,I),ti(this.futureState.root),this.activateChildRoutes(C,M,I)}deactivateChildRoutes(I,C,M){const $=Ct(C);I.children.forEach(X=>{const ve=X.value.outlet;this.deactivateRoutes(X,$[ve],M),delete $[ve]}),Vt($,(X,ve)=>{this.deactivateRouteAndItsChildren(X,M)})}deactivateRoutes(I,C,M){const $=I.value,X=C?C.value:null;if($===X)if($.component){const ve=M.getContext($.outlet);ve&&this.deactivateChildRoutes(I,C,ve.children)}else this.deactivateChildRoutes(I,C,M);else X&&this.deactivateRouteAndItsChildren(C,M)}deactivateRouteAndItsChildren(I,C){this.routeReuseStrategy.shouldDetach(I.value.snapshot)?this.detachAndStoreRouteSubtree(I,C):this.deactivateRouteAndOutlet(I,C)}detachAndStoreRouteSubtree(I,C){const M=C.getContext(I.value.outlet);if(M&&M.outlet){const $=M.outlet.detach(),X=M.children.onOutletDeactivated();this.routeReuseStrategy.store(I.value.snapshot,{componentRef:$,route:I,contexts:X})}}deactivateRouteAndOutlet(I,C){const M=C.getContext(I.value.outlet),$=M&&I.value.component?M.children:C,X=Ct(I);for(const ve of Object.keys(X))this.deactivateRouteAndItsChildren(X[ve],$);M&&M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated(),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(I,C,M){const $=Ct(C);I.children.forEach(X=>{this.activateRoutes(X,$[X.value.outlet],M),this.forwardEvent(new Sn(X.value.snapshot))}),I.children.length&&this.forwardEvent(new Dn(I.value.snapshot))}activateRoutes(I,C,M){const $=I.value,X=C?C.value:null;if(ti($),$===X)if($.component){const ve=M.getOrCreateContext($.outlet);this.activateChildRoutes(I,C,ve.children)}else this.activateChildRoutes(I,C,M);else if($.component){const ve=M.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const Oe=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),ve.children.onOutletReAttached(Oe.contexts),ve.attachRef=Oe.componentRef,ve.route=Oe.route.value,ve.outlet&&ve.outlet.attach(Oe.componentRef,Oe.route.value),hs(Oe.route)}else{const Oe=function(P){for(let I=P.parent;I;I=I.parent){const C=I.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig;if(C&&C.component)return null}return null}($.snapshot),st=Oe?Oe.module.componentFactoryResolver:null;ve.attachRef=null,ve.route=$,ve.resolver=st,ve.outlet&&ve.outlet.activateWith($,st),this.activateChildRoutes(I,null,ve.children)}}else this.activateChildRoutes(I,null,M)}}function hs(P){ti(P.value),P.children.forEach(hs)}class $s{constructor(I,C){this.routes=I,this.module=C}}function ni(P){return"function"==typeof P}function ri(P){return P instanceof li}const Ui=Symbol("INITIAL_VALUE");function ui(){return(0,Ft.w)(P=>function(...P){let I,C;return(0,se.K)(P[P.length-1])&&(C=P.pop()),"function"==typeof P[P.length-1]&&(I=P.pop()),1===P.length&&(0,De.k)(P[0])&&(P=P[0]),(0,ge.n)(P,C).lift(new Y(I))}(P.map(I=>I.pipe((0,Ht.q)(1),(0,dn.O)(Ui)))).pipe((0,nr.R)((I,C)=>{let M=!1;return C.reduce(($,X,ve)=>$!==Ui?$:(X===Ui&&(M=!0),M||!1!==X&&ve!==C.length-1&&!ri(X)?$:X),I)},Ui),(0,lt.h)(I=>I!==Ui),(0,Dt.U)(I=>ri(I)?I:!0===I),(0,Ht.q)(1)))}let Ts=(()=>{class P{}return P.\u0275fac=function(C){return new(C||P)},P.\u0275cmp=x.Xpm({type:P,selectors:[["ng-component"]],decls:1,vars:0,template:function(C,M){1&C&&x._UZ(0,"router-outlet")},directives:function(){return[N]},encapsulation:2}),P})();function Bi(P,I=""){for(let C=0;C<P.length;C++){const M=P[C];Ma(M,B(I,M))}}function Ma(P,I){P.children&&Bi(P.children,I)}function B(P,I){return I?P||I.path?P&&!I.path?`${P}/`:!P&&I.path?I.path:`${P}/${I.path}`:"":P}function Q(P){const I=P.children&&P.children.map(Q),C=I?Object.assign(Object.assign({},P),{children:I}):Object.assign({},P);return!C.component&&(I||C.loadChildren)&&C.outlet&&C.outlet!==yt&&(C.component=Ts),C}function H(P){return P.outlet||yt}function te(P,I){const C=P.filter(M=>H(M)===I);return C.push(...P.filter(M=>H(M)!==I)),C}const Ce={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Xe(P,I,C){var M;if(""===I.path)return"full"===I.pathMatch&&(P.hasChildren()||C.length>0)?Object.assign({},Ce):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const X=(I.matcher||Ni)(C,P,I);if(!X)return Object.assign({},Ce);const ve={};Vt(X.posParams,(st,wt)=>{ve[wt]=st.path});const Oe=X.consumed.length>0?Object.assign(Object.assign({},ve),X.consumed[X.consumed.length-1].parameters):ve;return{matched:!0,consumedSegments:X.consumed,lastChild:X.consumed.length,parameters:Oe,positionalParamSegments:null!==(M=X.posParams)&&void 0!==M?M:{}}}function ht(P,I,C,M,$="corrected"){if(C.length>0&&function(P,I,C){return C.some(M=>Ve(P,I,M)&&H(M)!==yt)}(P,C,M)){const ve=new yn(I,function(P,I,C,M){const $={};$[yt]=M,M._sourceSegment=P,M._segmentIndexShift=I.length;for(const X of C)if(""===X.path&&H(X)!==yt){const ve=new yn([],{});ve._sourceSegment=P,ve._segmentIndexShift=I.length,$[H(X)]=ve}return $}(P,I,M,new yn(C,P.children)));return ve._sourceSegment=P,ve._segmentIndexShift=I.length,{segmentGroup:ve,slicedSegments:[]}}if(0===C.length&&function(P,I,C){return C.some(M=>Ve(P,I,M))}(P,C,M)){const ve=new yn(P.segments,function(P,I,C,M,$,X){const ve={};for(const Oe of M)if(Ve(P,C,Oe)&&!$[H(Oe)]){const st=new yn([],{});st._sourceSegment=P,st._segmentIndexShift="legacy"===X?P.segments.length:I.length,ve[H(Oe)]=st}return Object.assign(Object.assign({},$),ve)}(P,I,C,M,P.children,$));return ve._sourceSegment=P,ve._segmentIndexShift=I.length,{segmentGroup:ve,slicedSegments:C}}const X=new yn(P.segments,P.children);return X._sourceSegment=P,X._segmentIndexShift=I.length,{segmentGroup:X,slicedSegments:C}}function Ve(P,I,C){return(!(P.hasChildren()||I.length>0)||"full"!==C.pathMatch)&&""===C.path}function pt(P,I,C,M){return!!(H(P)===M||M!==yt&&Ve(I,C,P))&&("**"===P.path||Xe(I,P,C).matched)}function tn(P,I,C){return 0===I.length&&!P.children[C]}class Mn{constructor(I){this.segmentGroup=I||null}}class Di{constructor(I){this.urlTree=I}}function Nr(P){return new Z.y(I=>I.error(new Mn(P)))}function Ti(P){return new Z.y(I=>I.error(new Di(P)))}function fs(P){return new Z.y(I=>I.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${P}'`)))}class ha{constructor(I,C,M,$,X){this.configLoader=C,this.urlSerializer=M,this.urlTree=$,this.config=X,this.allowRedirects=!0,this.ngModule=I.get(x.h0i)}apply(){const I=ht(this.urlTree.root,[],[],this.config).segmentGroup,C=new yn(I.segments,I.children);return this.expandSegmentGroup(this.ngModule,this.config,C,yt).pipe((0,Dt.U)(X=>this.createUrlTree(El(X),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Jt.K)(X=>{if(X instanceof Di)return this.allowRedirects=!1,this.match(X.urlTree);throw X instanceof Mn?this.noMatchError(X):X}))}match(I){return this.expandSegmentGroup(this.ngModule,this.config,I.root,yt).pipe((0,Dt.U)($=>this.createUrlTree(El($),I.queryParams,I.fragment))).pipe((0,Jt.K)($=>{throw $ instanceof Mn?this.noMatchError($):$}))}noMatchError(I){return new Error(`Cannot match any routes. URL Segment: '${I.segmentGroup}'`)}createUrlTree(I,C,M){const $=I.segments.length>0?new yn([],{[yt]:I}):I;return new li($,C,M)}expandSegmentGroup(I,C,M,$){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(I,C,M).pipe((0,Dt.U)(X=>new yn([],X))):this.expandSegment(I,M,C,M.segments,$,!0)}expandChildren(I,C,M){const $=[];for(const X of Object.keys(M.children))"primary"===X?$.unshift(X):$.push(X);return(0,me.D)($).pipe((0,rn.b)(X=>{const ve=M.children[X],Oe=te(C,X);return this.expandSegmentGroup(I,Oe,ve,X).pipe((0,Dt.U)(st=>({segment:st,outlet:X})))}),(0,nr.R)((X,ve)=>(X[ve.outlet]=ve.segment,X),{}),function(P,I){const C=arguments.length>=2;return M=>M.pipe(P?(0,lt.h)(($,X)=>P($,X,M)):xe.y,xt(1),C?(0,$e.d)(I):(0,Ae.T)(()=>new ce.K))}())}expandSegment(I,C,M,$,X,ve){return(0,me.D)(M).pipe((0,rn.b)(Oe=>this.expandSegmentAgainstRoute(I,C,M,Oe,$,X,ve).pipe((0,Jt.K)(wt=>{if(wt instanceof Mn)return(0,Me.of)(null);throw wt}))),(0,mn.P)(Oe=>!!Oe),(0,Jt.K)((Oe,st)=>{if(Oe instanceof ce.K||"EmptyError"===Oe.name){if(tn(C,$,X))return(0,Me.of)(new yn([],{}));throw new Mn(C)}throw Oe}))}expandSegmentAgainstRoute(I,C,M,$,X,ve,Oe){return pt($,C,X,ve)?void 0===$.redirectTo?this.matchSegmentAgainstRoute(I,C,$,X,ve):Oe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(I,C,M,$,X,ve):Nr(C):Nr(C)}expandSegmentAgainstRouteUsingRedirect(I,C,M,$,X,ve){return"**"===$.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(I,M,$,ve):this.expandRegularSegmentAgainstRouteUsingRedirect(I,C,M,$,X,ve)}expandWildCardWithParamsAgainstRouteUsingRedirect(I,C,M,$){const X=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?Ti(X):this.lineralizeSegments(M,X).pipe((0,Lt.zg)(ve=>{const Oe=new yn(ve,{});return this.expandSegment(I,Oe,C,ve,$,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(I,C,M,$,X,ve){const{matched:Oe,consumedSegments:st,lastChild:wt,positionalParamSegments:$n}=Xe(C,$,X);if(!Oe)return Nr(C);const cn=this.applyRedirectCommands(st,$.redirectTo,$n);return $.redirectTo.startsWith("/")?Ti(cn):this.lineralizeSegments($,cn).pipe((0,Lt.zg)(gr=>this.expandSegment(I,C,M,gr.concat(X.slice(wt)),ve,!1)))}matchSegmentAgainstRoute(I,C,M,$,X){if("**"===M.path)return M.loadChildren?(M._loadedConfig?(0,Me.of)(M._loadedConfig):this.configLoader.load(I.injector,M)).pipe((0,Dt.U)(gr=>(M._loadedConfig=gr,new yn($,{})))):(0,Me.of)(new yn($,{}));const{matched:ve,consumedSegments:Oe,lastChild:st}=Xe(C,M,$);if(!ve)return Nr(C);const wt=$.slice(st);return this.getChildConfig(I,M,$).pipe((0,Lt.zg)(cn=>{const gr=cn.module,qn=cn.routes,{segmentGroup:vr,slicedSegments:Gr}=ht(C,Oe,wt,qn),Ri=new yn(vr.segments,vr.children);if(0===Gr.length&&Ri.hasChildren())return this.expandChildren(gr,qn,Ri).pipe((0,Dt.U)($i=>new yn(Oe,$i)));if(0===qn.length&&0===Gr.length)return(0,Me.of)(new yn(Oe,{}));const Rt=H(M)===X;return this.expandSegment(gr,Ri,qn,Gr,Rt?yt:X,!0).pipe((0,Dt.U)(mi=>new yn(Oe.concat(mi.segments),mi.children)))}))}getChildConfig(I,C,M){return C.children?(0,Me.of)(new $s(C.children,I)):C.loadChildren?void 0!==C._loadedConfig?(0,Me.of)(C._loadedConfig):this.runCanLoadGuards(I.injector,C,M).pipe((0,Lt.zg)($=>{return $?this.configLoader.load(I.injector,C).pipe((0,Dt.U)(X=>(C._loadedConfig=X,X))):(P=C,new Z.y(I=>I.error(xn(`Cannot load children because the guard of the route "path: '${P.path}'" returned false`))));var P})):(0,Me.of)(new $s([],I))}runCanLoadGuards(I,C,M){const $=C.canLoad;if(!$||0===$.length)return(0,Me.of)(!0);const X=$.map(ve=>{const Oe=I.get(ve);let st;if((P=Oe)&&ni(P.canLoad))st=Oe.canLoad(C,M);else{if(!ni(Oe))throw new Error("Invalid CanLoad guard");st=Oe(C,M)}var P;return an(st)});return(0,Me.of)(X).pipe(ui(),(0,Kt.b)(ve=>{if(!ri(ve))return;const Oe=xn(`Redirecting to "${this.urlSerializer.serialize(ve)}"`);throw Oe.url=ve,Oe}),(0,Dt.U)(ve=>!0===ve))}lineralizeSegments(I,C){let M=[],$=C.root;for(;;){if(M=M.concat($.segments),0===$.numberOfChildren)return(0,Me.of)(M);if($.numberOfChildren>1||!$.children[yt])return fs(I.redirectTo);$=$.children[yt]}}applyRedirectCommands(I,C,M){return this.applyRedirectCreatreUrlTree(C,this.urlSerializer.parse(C),I,M)}applyRedirectCreatreUrlTree(I,C,M,$){const X=this.createSegmentGroup(I,C.root,M,$);return new li(X,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(I,C){const M={};return Vt(I,($,X)=>{if("string"==typeof $&&$.startsWith(":")){const Oe=$.substring(1);M[X]=C[Oe]}else M[X]=$}),M}createSegmentGroup(I,C,M,$){const X=this.createSegments(I,C.segments,M,$);let ve={};return Vt(C.children,(Oe,st)=>{ve[st]=this.createSegmentGroup(I,Oe,M,$)}),new yn(X,ve)}createSegments(I,C,M,$){return C.map(X=>X.path.startsWith(":")?this.findPosParam(I,X,$):this.findOrReturn(X,M))}findPosParam(I,C,M){const $=M[C.path.substring(1)];if(!$)throw new Error(`Cannot redirect to '${I}'. Cannot find '${C.path}'.`);return $}findOrReturn(I,C){let M=0;for(const $ of C){if($.path===I.path)return C.splice(M),$;M++}return I}}function El(P){const I={};for(const M of Object.keys(P.children)){const X=El(P.children[M]);(X.segments.length>0||X.hasChildren())&&(I[M]=X)}return function(P){if(1===P.numberOfChildren&&P.children[yt]){const I=P.children[yt];return new yn(P.segments.concat(I.segments),I.children)}return P}(new yn(P.segments,I))}class Ho{constructor(I){this.path=I,this.route=this.path[this.path.length-1]}}class fa{constructor(I,C){this.component=I,this.route=C}}function ft(P,I,C){const M=P._root;return $o(M,I?I._root:null,C,[M.value])}function pa(P,I,C){const M=function(P){if(!P)return null;for(let I=P.parent;I;I=I.parent){const C=I.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig}return null}(I);return(M?M.module.injector:C).get(P)}function $o(P,I,C,M,$={canDeactivateChecks:[],canActivateChecks:[]}){const X=Ct(I);return P.children.forEach(ve=>{(function(P,I,C,M,$={canDeactivateChecks:[],canActivateChecks:[]}){const X=P.value,ve=I?I.value:null,Oe=C?C.getContext(P.value.outlet):null;if(ve&&X.routeConfig===ve.routeConfig){const st=function(P,I,C){if("function"==typeof C)return C(P,I);switch(C){case"pathParamsChange":return!Jn(P.url,I.url);case"pathParamsOrQueryParamsChange":return!Jn(P.url,I.url)||!_e(P.queryParams,I.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rr(P,I)||!_e(P.queryParams,I.queryParams);case"paramsChange":default:return!rr(P,I)}}(ve,X,X.routeConfig.runGuardsAndResolvers);st?$.canActivateChecks.push(new Ho(M)):(X.data=ve.data,X._resolvedData=ve._resolvedData),$o(P,I,X.component?Oe?Oe.children:null:C,M,$),st&&Oe&&Oe.outlet&&Oe.outlet.isActivated&&$.canDeactivateChecks.push(new fa(Oe.outlet.component,ve))}else ve&&Wo(I,Oe,$),$.canActivateChecks.push(new Ho(M)),$o(P,null,X.component?Oe?Oe.children:null:C,M,$)})(ve,X[ve.value.outlet],C,M.concat([ve.value]),$),delete X[ve.value.outlet]}),Vt(X,(ve,Oe)=>Wo(ve,C.getContext(Oe),$)),$}function Wo(P,I,C){const M=Ct(P),$=P.value;Vt(M,(X,ve)=>{Wo(X,$.component?I?I.children.getContext(ve):null:I,C)}),C.canDeactivateChecks.push(new fa($.component&&I&&I.outlet&&I.outlet.isActivated?I.outlet.component:null,$))}class _a{}function Ji(P){return new Z.y(I=>I.error(P))}class zo{constructor(I,C,M,$,X,ve){this.rootComponentType=I,this.config=C,this.urlTree=M,this.url=$,this.paramsInheritanceStrategy=X,this.relativeLinkResolution=ve}recognize(){const I=ht(this.urlTree.root,[],[],this.config.filter(ve=>void 0===ve.redirectTo),this.relativeLinkResolution).segmentGroup,C=this.processSegmentGroup(this.config,I,yt);if(null===C)return null;const M=new Zr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},yt,this.rootComponentType,null,this.urlTree.root,-1,{}),$=new mt(M,C),X=new Fi(this.url,$);return this.inheritParamsAndData(X._root),X}inheritParamsAndData(I){const C=I.value,M=Xn(C,this.paramsInheritanceStrategy);C.params=Object.freeze(M.params),C.data=Object.freeze(M.data),I.children.forEach($=>this.inheritParamsAndData($))}processSegmentGroup(I,C,M){return 0===C.segments.length&&C.hasChildren()?this.processChildren(I,C):this.processSegment(I,C,C.segments,M)}processChildren(I,C){const M=[];for(const X of Object.keys(C.children)){const ve=C.children[X],Oe=te(I,X),st=this.processSegmentGroup(Oe,ve,X);if(null===st)return null;M.push(...st)}const $=Ko(M);return $.sort((I,C)=>I.value.outlet===yt?-1:C.value.outlet===yt?1:I.value.outlet.localeCompare(C.value.outlet)),$}processSegment(I,C,M,$){for(const X of I){const ve=this.processSegmentAgainstRoute(X,C,M,$);if(null!==ve)return ve}return tn(C,M,$)?[]:null}processSegmentAgainstRoute(I,C,M,$){if(I.redirectTo||!pt(I,C,M,$))return null;let X,ve=[],Oe=[];if("**"===I.path){const qn=M.length>0?je(M).parameters:{};X=new Zr(M,qn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Fa(I),H(I),I.component,I,qo(C),ka(C)+M.length,ya(I))}else{const qn=Xe(C,I,M);if(!qn.matched)return null;ve=qn.consumedSegments,Oe=M.slice(qn.lastChild),X=new Zr(ve,qn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Fa(I),H(I),I.component,I,qo(C),ka(C)+ve.length,ya(I))}const st=(P=I).children?P.children:P.loadChildren?P._loadedConfig.routes:[],{segmentGroup:wt,slicedSegments:$n}=ht(C,ve,Oe,st.filter(qn=>void 0===qn.redirectTo),this.relativeLinkResolution);var P;if(0===$n.length&&wt.hasChildren()){const qn=this.processChildren(st,wt);return null===qn?null:[new mt(X,qn)]}if(0===st.length&&0===$n.length)return[new mt(X,[])];const cn=H(I)===$,gr=this.processSegment(st,wt,$n,cn?yt:$);return null===gr?null:[new mt(X,gr)]}}function Cl(P){const I=P.value.routeConfig;return I&&""===I.path&&void 0===I.redirectTo}function Ko(P){const I=[],C=new Set;for(const M of P){if(!Cl(M)){I.push(M);continue}const $=I.find(X=>M.value.routeConfig===X.value.routeConfig);void 0!==$?($.children.push(...M.children),C.add($)):I.push(M)}for(const M of C){const $=Ko(M.children);I.push(new mt(M.value,$))}return I.filter(M=>!C.has(M))}function qo(P){let I=P;for(;I._sourceSegment;)I=I._sourceSegment;return I}function ka(P){let I=P,C=I._segmentIndexShift?I._segmentIndexShift:0;for(;I._sourceSegment;)I=I._sourceSegment,C+=I._segmentIndexShift?I._segmentIndexShift:0;return C-1}function Fa(P){return P.data||{}}function ya(P){return P.resolve||{}}function nl(P){return(0,Ft.w)(I=>{const C=P(I);return C?(0,me.D)(C).pipe((0,Dt.U)(()=>I)):(0,Me.of)(I)})}class po extends class{shouldDetach(I){return!1}store(I,C){}shouldAttach(I){return!1}retrieve(I){return null}shouldReuseRoute(I,C){return I.routeConfig===C.routeConfig}}{}const mr=new x.OlP("ROUTES");class zl{constructor(I,C,M,$){this.loader=I,this.compiler=C,this.onLoadStartListener=M,this.onLoadEndListener=$}load(I,C){if(C._loader$)return C._loader$;this.onLoadStartListener&&this.onLoadStartListener(C);const $=this.loadModuleFactory(C.loadChildren).pipe((0,Dt.U)(X=>{this.onLoadEndListener&&this.onLoadEndListener(C);const ve=X.create(I);return new $s(ot(ve.injector.get(mr,void 0,x.XFs.Self|x.XFs.Optional)).map(Q),ve)}),(0,Jt.K)(X=>{throw C._loader$=void 0,X}));return C._loader$=new et.c($,()=>new Ie.xQ).pipe((0,Fn.x)()),C._loader$}loadModuleFactory(I){return"string"==typeof I?(0,me.D)(this.loader.load(I)):an(I()).pipe((0,Lt.zg)(C=>C instanceof x.YKP?(0,Me.of)(C):(0,me.D)(this.compiler.compileModuleAsync(C))))}}class Kl{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Bn,this.attachRef=null}}class Bn{constructor(){this.contexts=new Map}onChildOutletCreated(I,C){const M=this.getOrCreateContext(I);M.outlet=C,this.contexts.set(I,M)}onChildOutletDestroyed(I){const C=this.getContext(I);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let C=this.getContext(I);return C||(C=new Kl,this.contexts.set(I,C)),C}getContext(I){return this.contexts.get(I)||null}}class Tn{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,C){return I}}function Ai(P){throw P}function ir(P,I,C){return I.parse("/")}function Zo(P,I){return(0,Me.of)(null)}const La={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},So={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Si=(()=>{class P{constructor(C,M,$,X,ve,Oe,st,wt){this.rootComponentType=C,this.urlSerializer=M,this.rootContexts=$,this.location=X,this.config=wt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ie.xQ,this.errorHandler=Ai,this.malformedUriErrorHandler=ir,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Zo,afterPreactivation:Zo},this.urlHandlingStrategy=new Tn,this.routeReuseStrategy=new po,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ve.get(x.h0i),this.console=ve.get(x.c2e);const gr=ve.get(x.R0b);this.isNgZoneEnabled=gr instanceof x.R0b&&x.R0b.isInAngularZone(),this.resetConfig(wt),this.currentUrlTree=new li(new yn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new zl(Oe,st,qn=>this.triggerEvent(new Qt(qn)),qn=>this.triggerEvent(new jt(qn))),this.routerState=Un(this.currentUrlTree,this.rootComponentType),this.transitions=new it.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var C;return null===(C=this.location.getState())||void 0===C?void 0:C.\u0275routerPageId}setupNavigations(C){const M=this.events;return C.pipe((0,lt.h)($=>0!==$.id),(0,Dt.U)($=>Object.assign(Object.assign({},$),{extractedUrl:this.urlHandlingStrategy.extract($.rawUrl)})),(0,Ft.w)($=>{let X=!1,ve=!1;return(0,Me.of)($).pipe((0,Kt.b)(Oe=>{this.currentNavigation={id:Oe.id,initialUrl:Oe.currentRawUrl,extractedUrl:Oe.extractedUrl,trigger:Oe.source,extras:Oe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Ft.w)(Oe=>{const st=this.browserUrlTree.toString(),wt=!this.navigated||Oe.extractedUrl.toString()!==st||st!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||wt)&&this.urlHandlingStrategy.shouldProcessUrl(Oe.rawUrl))return nn(Oe.source)&&(this.browserUrlTree=Oe.extractedUrl),(0,Me.of)(Oe).pipe((0,Ft.w)(cn=>{const gr=this.transitions.getValue();return M.next(new Gn(cn.id,this.serializeUrl(cn.extractedUrl),cn.source,cn.restoredState)),gr!==this.transitions.getValue()?Ke.E:Promise.resolve(cn)}),function(P,I,C,M){return(0,Ft.w)($=>function(P,I,C,M,$){return new ha(P,I,C,M,$).apply()}(P,I,C,$.extractedUrl,M).pipe((0,Dt.U)(X=>Object.assign(Object.assign({},$),{urlAfterRedirects:X}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Kt.b)(cn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:cn.urlAfterRedirects})}),function(P,I,C,M,$){return(0,Lt.zg)(X=>function(P,I,C,M,$="emptyOnly",X="legacy"){try{const ve=new zo(P,I,C,M,$,X).recognize();return null===ve?Ji(new _a):(0,Me.of)(ve)}catch(ve){return Ji(ve)}}(P,I,X.urlAfterRedirects,C(X.urlAfterRedirects),M,$).pipe((0,Dt.U)(ve=>Object.assign(Object.assign({},X),{targetSnapshot:ve}))))}(this.rootComponentType,this.config,cn=>this.serializeUrl(cn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Kt.b)(cn=>{"eager"===this.urlUpdateStrategy&&(cn.extras.skipLocationChange||this.setBrowserUrl(cn.urlAfterRedirects,cn),this.browserUrlTree=cn.urlAfterRedirects);const gr=new Qn(cn.id,this.serializeUrl(cn.extractedUrl),this.serializeUrl(cn.urlAfterRedirects),cn.targetSnapshot);M.next(gr)}));if(wt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:gr,extractedUrl:qn,source:vr,restoredState:Gr,extras:Ri}=Oe,Rt=new Gn(gr,this.serializeUrl(qn),vr,Gr);M.next(Rt);const Fs=Un(qn,this.rootComponentType).snapshot;return(0,Me.of)(Object.assign(Object.assign({},Oe),{targetSnapshot:Fs,urlAfterRedirects:qn,extras:Object.assign(Object.assign({},Ri),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Oe.rawUrl,this.browserUrlTree=Oe.urlAfterRedirects,Oe.resolve(null),Ke.E}),nl(Oe=>{const{targetSnapshot:st,id:wt,extractedUrl:$n,rawUrl:cn,extras:{skipLocationChange:gr,replaceUrl:qn}}=Oe;return this.hooks.beforePreactivation(st,{navigationId:wt,appliedUrlTree:$n,rawUrlTree:cn,skipLocationChange:!!gr,replaceUrl:!!qn})}),(0,Kt.b)(Oe=>{const st=new Tt(Oe.id,this.serializeUrl(Oe.extractedUrl),this.serializeUrl(Oe.urlAfterRedirects),Oe.targetSnapshot);this.triggerEvent(st)}),(0,Dt.U)(Oe=>Object.assign(Object.assign({},Oe),{guards:ft(Oe.targetSnapshot,Oe.currentSnapshot,this.rootContexts)})),function(P,I){return(0,Lt.zg)(C=>{const{targetSnapshot:M,currentSnapshot:$,guards:{canActivateChecks:X,canDeactivateChecks:ve}}=C;return 0===ve.length&&0===X.length?(0,Me.of)(Object.assign(Object.assign({},C),{guardsResult:!0})):function(P,I,C,M){return(0,me.D)(P).pipe((0,Lt.zg)($=>function(P,I,C,M,$){const X=I&&I.routeConfig?I.routeConfig.canDeactivate:null;if(!X||0===X.length)return(0,Me.of)(!0);const ve=X.map(Oe=>{const st=pa(Oe,I,$);let wt;if(function(P){return P&&ni(P.canDeactivate)}(st))wt=an(st.canDeactivate(P,I,C,M));else{if(!ni(st))throw new Error("Invalid CanDeactivate guard");wt=an(st(P,I,C,M))}return wt.pipe((0,mn.P)())});return(0,Me.of)(ve).pipe(ui())}($.component,$.route,C,I,M)),(0,mn.P)($=>!0!==$,!0))}(ve,M,$,P).pipe((0,Lt.zg)(Oe=>Oe&&function(P){return"boolean"==typeof P}(Oe)?function(P,I,C,M){return(0,me.D)(I).pipe((0,rn.b)($=>(0,Qe.z)(function(P,I){return null!==P&&I&&I(new sn(P)),(0,Me.of)(!0)}($.route.parent,M),function(P,I){return null!==P&&I&&I(new Ar(P)),(0,Me.of)(!0)}($.route,M),function(P,I,C){const M=I[I.length-1],X=I.slice(0,I.length-1).reverse().map(ve=>function(P){const I=P.routeConfig?P.routeConfig.canActivateChild:null;return I&&0!==I.length?{node:P,guards:I}:null}(ve)).filter(ve=>null!==ve).map(ve=>qe(()=>{const Oe=ve.guards.map(st=>{const wt=pa(st,ve.node,C);let $n;if(function(P){return P&&ni(P.canActivateChild)}(wt))$n=an(wt.canActivateChild(M,P));else{if(!ni(wt))throw new Error("Invalid CanActivateChild guard");$n=an(wt(M,P))}return $n.pipe((0,mn.P)())});return(0,Me.of)(Oe).pipe(ui())}));return(0,Me.of)(X).pipe(ui())}(P,$.path,C),function(P,I,C){const M=I.routeConfig?I.routeConfig.canActivate:null;if(!M||0===M.length)return(0,Me.of)(!0);const $=M.map(X=>qe(()=>{const ve=pa(X,I,C);let Oe;if(function(P){return P&&ni(P.canActivate)}(ve))Oe=an(ve.canActivate(I,P));else{if(!ni(ve))throw new Error("Invalid CanActivate guard");Oe=an(ve(I,P))}return Oe.pipe((0,mn.P)())}));return(0,Me.of)($).pipe(ui())}(P,$.route,C))),(0,mn.P)($=>!0!==$,!0))}(M,X,P,I):(0,Me.of)(Oe)),(0,Dt.U)(Oe=>Object.assign(Object.assign({},C),{guardsResult:Oe})))})}(this.ngModule.injector,Oe=>this.triggerEvent(Oe)),(0,Kt.b)(Oe=>{if(ri(Oe.guardsResult)){const wt=xn(`Redirecting to "${this.serializeUrl(Oe.guardsResult)}"`);throw wt.url=Oe.guardsResult,wt}const st=new ar(Oe.id,this.serializeUrl(Oe.extractedUrl),this.serializeUrl(Oe.urlAfterRedirects),Oe.targetSnapshot,!!Oe.guardsResult);this.triggerEvent(st)}),(0,lt.h)(Oe=>!!Oe.guardsResult||(this.restoreHistory(Oe),this.cancelNavigationTransition(Oe,""),!1)),nl(Oe=>{if(Oe.guards.canActivateChecks.length)return(0,Me.of)(Oe).pipe((0,Kt.b)(st=>{const wt=new zn(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot);this.triggerEvent(wt)}),(0,Ft.w)(st=>{let wt=!1;return(0,Me.of)(st).pipe(function(P,I){return(0,Lt.zg)(C=>{const{targetSnapshot:M,guards:{canActivateChecks:$}}=C;if(!$.length)return(0,Me.of)(C);let X=0;return(0,me.D)($).pipe((0,rn.b)(ve=>function(P,I,C,M){return function(P,I,C,M){const $=Object.keys(P);if(0===$.length)return(0,Me.of)({});const X={};return(0,me.D)($).pipe((0,Lt.zg)(ve=>function(P,I,C,M){const $=pa(P,I,M);return an($.resolve?$.resolve(I,C):$(I,C))}(P[ve],I,C,M).pipe((0,Kt.b)(Oe=>{X[ve]=Oe}))),xt(1),(0,Lt.zg)(()=>Object.keys(X).length===$.length?(0,Me.of)(X):Ke.E))}(P._resolve,P,I,M).pipe((0,Dt.U)(X=>(P._resolvedData=X,P.data=Object.assign(Object.assign({},P.data),Xn(P,C).resolve),null)))}(ve.route,M,P,I)),(0,Kt.b)(()=>X++),xt(1),(0,Lt.zg)(ve=>X===$.length?(0,Me.of)(C):Ke.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Kt.b)({next:()=>wt=!0,complete:()=>{wt||(this.restoreHistory(st),this.cancelNavigationTransition(st,"At least one route resolver didn't emit any value."))}}))}),(0,Kt.b)(st=>{const wt=new jn(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot);this.triggerEvent(wt)}))}),nl(Oe=>{const{targetSnapshot:st,id:wt,extractedUrl:$n,rawUrl:cn,extras:{skipLocationChange:gr,replaceUrl:qn}}=Oe;return this.hooks.afterPreactivation(st,{navigationId:wt,appliedUrlTree:$n,rawUrlTree:cn,skipLocationChange:!!gr,replaceUrl:!!qn})}),(0,Dt.U)(Oe=>{const st=function(P,I,C){const M=Li(P,I._root,C?C._root:void 0);return new un(M,I)}(this.routeReuseStrategy,Oe.targetSnapshot,Oe.currentRouterState);return Object.assign(Object.assign({},Oe),{targetRouterState:st})}),(0,Kt.b)(Oe=>{this.currentUrlTree=Oe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Oe.urlAfterRedirects,Oe.rawUrl),this.routerState=Oe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Oe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Oe),this.browserUrlTree=Oe.urlAfterRedirects)}),((P,I,C)=>(0,Dt.U)(M=>(new Ds(I,M.targetRouterState,M.currentRouterState,C).activate(P),M)))(this.rootContexts,this.routeReuseStrategy,Oe=>this.triggerEvent(Oe)),(0,Kt.b)({next(){X=!0},complete(){X=!0}}),function(P){return I=>I.lift(new Ot(P))}(()=>{var Oe;if(!X&&!ve){const st=`Navigation ID ${$.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory($),this.cancelNavigationTransition($,st)):this.cancelNavigationTransition($,st)}(null===(Oe=this.currentNavigation)||void 0===Oe?void 0:Oe.id)===$.id&&(this.currentNavigation=null)}),(0,Jt.K)(Oe=>{if(ve=!0,function(P){return P&&P[Es]}(Oe)){const st=ri(Oe.url);st||(this.navigated=!0,this.restoreHistory($,!0));const wt=new Xr($.id,this.serializeUrl($.extractedUrl),Oe.message);M.next(wt),st?setTimeout(()=>{const $n=this.urlHandlingStrategy.merge(Oe.url,this.rawUrlTree),cn={skipLocationChange:$.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||nn($.source)};this.scheduleNavigation($n,"imperative",null,cn,{resolve:$.resolve,reject:$.reject,promise:$.promise})},0):$.resolve(!1)}else{this.restoreHistory($,!0);const st=new Nt($.id,this.serializeUrl($.extractedUrl),Oe);M.next(st);try{$.resolve(this.errorHandler(Oe))}catch(wt){$.reject(wt)}}return Ke.E}))}))}resetRootComponentType(C){this.rootComponentType=C,this.routerState.root.component=this.rootComponentType}getTransition(){const C=this.transitions.value;return C.urlAfterRedirects=this.browserUrlTree,C}setTransition(C){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),C))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(C=>{const M=this.extractLocationChangeInfoFromEvent(C);this.shouldScheduleNavigation(this.lastLocationChangeInfo,M)&&setTimeout(()=>{const{source:$,state:X,urlTree:ve}=M,Oe={replaceUrl:!0};if(X){const st=Object.assign({},X);delete st.navigationId,delete st.\u0275routerPageId,0!==Object.keys(st).length&&(Oe.state=st)}this.scheduleNavigation(ve,$,X,Oe)},0),this.lastLocationChangeInfo=M}))}extractLocationChangeInfoFromEvent(C){var M;return{source:"popstate"===C.type?"popstate":"hashchange",urlTree:this.parseUrl(C.url),state:(null===(M=C.state)||void 0===M?void 0:M.navigationId)?C.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(C,M){if(!C)return!0;const $=M.urlTree.toString()===C.urlTree.toString();return M.transitionId!==C.transitionId||!$||!("hashchange"===M.source&&"popstate"===C.source||"popstate"===M.source&&"hashchange"===C.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(C){this.events.next(C)}resetConfig(C){Bi(C),this.config=C.map(Q),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(C,M={}){const{relativeTo:$,queryParams:X,fragment:ve,queryParamsHandling:Oe,preserveFragment:st}=M,wt=$||this.routerState.root,$n=st?this.currentUrlTree.fragment:ve;let cn=null;switch(Oe){case"merge":cn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),X);break;case"preserve":cn=this.currentUrlTree.queryParams;break;default:cn=X||null}return null!==cn&&(cn=this.removeEmptyProps(cn)),function(P,I,C,M,$){if(0===C.length)return us(I.root,I.root,I,M,$);const X=function(P){if("string"==typeof P[0]&&1===P.length&&"/"===P[0])return new Is(!0,0,P);let I=0,C=!1;const M=P.reduce(($,X,ve)=>{if("object"==typeof X&&null!=X){if(X.outlets){const Oe={};return Vt(X.outlets,(st,wt)=>{Oe[wt]="string"==typeof st?st.split("/"):st}),[...$,{outlets:Oe}]}if(X.segmentPath)return[...$,X.segmentPath]}return"string"!=typeof X?[...$,X]:0===ve?(X.split("/").forEach((Oe,st)=>{0==st&&"."===Oe||(0==st&&""===Oe?C=!0:".."===Oe?I++:""!=Oe&&$.push(Oe))}),$):[...$,X]},[]);return new Is(C,I,M)}(C);if(X.toRoot())return us(I.root,new yn([],{}),I,M,$);const ve=function(P,I,C){if(P.isAbsolute)return new Yi(I.root,!0,0);if(-1===C.snapshot._lastPathIndex){const X=C.snapshot._urlSegment;return new Yi(X,X===I.root,0)}const M=Ms(P.commands[0])?0:1;return function(P,I,C){let M=P,$=I,X=C;for(;X>$;){if(X-=$,M=M.parent,!M)throw new Error("Invalid number of '../'");$=M.segments.length}return new Yi(M,!1,$-X)}(C.snapshot._urlSegment,C.snapshot._lastPathIndex+M,P.numberOfDoubleDots)}(X,I,P),Oe=ve.processChildren?Yr(ve.segmentGroup,ve.index,X.commands):lo(ve.segmentGroup,ve.index,X.commands);return us(ve.segmentGroup,Oe,I,M,$)}(wt,this.currentUrlTree,C,cn,null!=$n?$n:null)}navigateByUrl(C,M={skipLocationChange:!1}){const $=ri(C)?C:this.parseUrl(C),X=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(X,"imperative",null,M)}navigate(C,M={skipLocationChange:!1}){return function(P){for(let I=0;I<P.length;I++){const C=P[I];if(null==C)throw new Error(`The requested path contains ${C} segment at index ${I}`)}}(C),this.navigateByUrl(this.createUrlTree(C,M),M)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){let M;try{M=this.urlSerializer.parse(C)}catch($){M=this.malformedUriErrorHandler($,this.urlSerializer,C)}return M}isActive(C,M){let $;if($=!0===M?Object.assign({},La):!1===M?Object.assign({},So):M,ri(C))return _n(this.currentUrlTree,C,$);const X=this.parseUrl(C);return _n(this.currentUrlTree,X,$)}removeEmptyProps(C){return Object.keys(C).reduce((M,$)=>{const X=C[$];return null!=X&&(M[$]=X),M},{})}processNavigations(){this.navigations.subscribe(C=>{this.navigated=!0,this.lastSuccessfulId=C.id,this.currentPageId=C.targetPageId,this.events.next(new Yn(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,C.resolve(!0)},C=>{this.console.warn(`Unhandled Navigation Error: ${C}`)})}scheduleNavigation(C,M,$,X,ve){var Oe,st;if(this.disposed)return Promise.resolve(!1);const wt=this.getTransition(),$n=nn(M)&&wt&&!nn(wt.source),qn=(this.lastSuccessfulId===wt.id||this.currentNavigation?wt.rawUrl:wt.urlAfterRedirects).toString()===C.toString();if($n&&qn)return Promise.resolve(!0);let vr,Gr,Ri;ve?(vr=ve.resolve,Gr=ve.reject,Ri=ve.promise):Ri=new Promise((mi,$i)=>{vr=mi,Gr=$i});const Rt=++this.navigationId;let Fs;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&($=this.location.getState()),Fs=$&&$.\u0275routerPageId?$.\u0275routerPageId:X.replaceUrl||X.skipLocationChange?null!==(Oe=this.browserPageId)&&void 0!==Oe?Oe:0:(null!==(st=this.browserPageId)&&void 0!==st?st:0)+1):Fs=0,this.setTransition({id:Rt,targetPageId:Fs,source:M,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:C,extras:X,resolve:vr,reject:Gr,promise:Ri,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ri.catch(mi=>Promise.reject(mi))}setBrowserUrl(C,M){const $=this.urlSerializer.serialize(C),X=Object.assign(Object.assign({},M.extras.state),this.generateNgRouterState(M.id,M.targetPageId));this.location.isCurrentPathEqualTo($)||M.extras.replaceUrl?this.location.replaceState($,"",X):this.location.go($,"",X)}restoreHistory(C,M=!1){var $,X;if("computed"===this.canceledNavigationResolution){const ve=this.currentPageId-C.targetPageId;"popstate"!==C.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===($=this.currentNavigation)||void 0===$?void 0:$.finalUrl)||0===ve?this.currentUrlTree===(null===(X=this.currentNavigation)||void 0===X?void 0:X.finalUrl)&&0===ve&&(this.resetState(C),this.browserUrlTree=C.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ve)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=C.currentRouterState,this.currentUrlTree=C.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(C,M){const $=new Xr(C.id,this.serializeUrl(C.extractedUrl),M);this.triggerEvent($),C.resolve(!1)}generateNgRouterState(C,M){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:M}:{navigationId:C}}}return P.\u0275fac=function(C){return new(C||P)(x.LFG(x.DyG),x.LFG(qi),x.LFG(Bn),x.LFG(w.Ye),x.LFG(x.zs3),x.LFG(x.v3s),x.LFG(x.Sil),x.LFG(void 0))},P.\u0275prov=x.Yz7({token:P,factory:P.\u0275fac}),P})();function nn(P){return"imperative"!==P}let ps=(()=>{class P{constructor(C,M,$){this.router=C,this.route=M,this.locationStrategy=$,this.commands=[],this.onChanges=new Ie.xQ,this.subscription=C.events.subscribe(X=>{X instanceof Yn&&this.updateTargetUrlAndHref()})}set routerLink(C){this.commands=null!=C?Array.isArray(C)?C:[C]:[]}ngOnChanges(C){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(C,M,$,X,ve){if(0!==C||M||$||X||ve||"string"==typeof this.target&&"_self"!=this.target)return!0;const Oe={skipLocationChange:gs(this.skipLocationChange),replaceUrl:gs(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Oe),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:gs(this.preserveFragment)})}}return P.\u0275fac=function(C){return new(C||P)(x.Y36(Si),x.Y36(Pt),x.Y36(w.S$))},P.\u0275dir=x.lG2({type:P,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(C,M){1&C&&x.NdJ("click",function(X){return M.onClick(X.button,X.ctrlKey,X.shiftKey,X.altKey,X.metaKey)}),2&C&&(x.Ikx("href",M.href,x.LSH),x.uIk("target",M.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[x.TTD]}),P})();function gs(P){return""===P||!!P}let N=(()=>{class P{constructor(C,M,$,X,ve){this.parentContexts=C,this.location=M,this.resolver=$,this.changeDetector=ve,this.activated=null,this._activatedRoute=null,this.activateEvents=new x.vpe,this.deactivateEvents=new x.vpe,this.name=X||yt,C.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const C=this.parentContexts.getContext(this.name);C&&C.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,C}attach(C,M){this.activated=C,this._activatedRoute=M,this.location.insert(C.hostView)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,M){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=C;const ve=(M=M||this.resolver).resolveComponentFactory(C._futureSnapshot.routeConfig.component),Oe=this.parentContexts.getOrCreateContext(this.name).children,st=new z(C,Oe,this.location.injector);this.activated=this.location.createComponent(ve,this.location.length,st),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return P.\u0275fac=function(C){return new(C||P)(x.Y36(Bn),x.Y36(x.s_b),x.Y36(x._Vd),x.$8M("name"),x.Y36(x.sBO))},P.\u0275dir=x.lG2({type:P,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),P})();class z{constructor(I,C,M){this.route=I,this.childContexts=C,this.parent=M}get(I,C){return I===Pt?this.route:I===Bn?this.childContexts:this.parent.get(I,C)}}class we{}class Bt{preload(I,C){return(0,Me.of)(null)}}let _r=(()=>{class P{constructor(C,M,$,X,ve){this.router=C,this.injector=X,this.preloadingStrategy=ve,this.loader=new zl(M,$,wt=>C.triggerEvent(new Qt(wt)),wt=>C.triggerEvent(new jt(wt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,lt.h)(C=>C instanceof Yn),(0,rn.b)(()=>this.preload())).subscribe(()=>{})}preload(){const C=this.injector.get(x.h0i);return this.processRoutes(C,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,M){const $=[];for(const X of M)if(X.loadChildren&&!X.canLoad&&X._loadedConfig){const ve=X._loadedConfig;$.push(this.processRoutes(ve.module,ve.routes))}else X.loadChildren&&!X.canLoad?$.push(this.preloadConfig(C,X)):X.children&&$.push(this.processRoutes(C,X.children));return(0,me.D)($).pipe((0,dr.J)(),(0,Dt.U)(X=>{}))}preloadConfig(C,M){return this.preloadingStrategy.preload(M,()=>(M._loadedConfig?(0,Me.of)(M._loadedConfig):this.loader.load(C.injector,M)).pipe((0,Lt.zg)(X=>(M._loadedConfig=X,this.processRoutes(X.module,X.routes)))))}}return P.\u0275fac=function(C){return new(C||P)(x.LFG(Si),x.LFG(x.v3s),x.LFG(x.Sil),x.LFG(x.zs3),x.LFG(we))},P.\u0275prov=x.Yz7({token:P,factory:P.\u0275fac}),P})(),ji=(()=>{class P{constructor(C,M,$={}){this.router=C,this.viewportScroller=M,this.options=$,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},$.scrollPositionRestoration=$.scrollPositionRestoration||"disabled",$.anchorScrolling=$.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(C=>{C instanceof Gn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof Yn&&(this.lastId=C.id,this.scheduleScrollEvent(C,this.router.parseUrl(C.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(C=>{C instanceof It&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,M){this.router.triggerEvent(new It(C,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return P.\u0275fac=function(C){return new(C||P)(x.LFG(Si),x.LFG(w.EM),x.LFG(void 0))},P.\u0275prov=x.Yz7({token:P,factory:P.\u0275fac}),P})();const es=new x.OlP("ROUTER_CONFIGURATION"),Wr=new x.OlP("ROUTER_FORROOT_GUARD"),Tu=[w.Ye,{provide:qi,useClass:Er},{provide:Si,useFactory:function(P,I,C,M,$,X,ve,Oe={},st,wt){const $n=new Si(null,P,I,C,M,$,X,ot(ve));return st&&($n.urlHandlingStrategy=st),wt&&($n.routeReuseStrategy=wt),function(P,I){P.errorHandler&&(I.errorHandler=P.errorHandler),P.malformedUriErrorHandler&&(I.malformedUriErrorHandler=P.malformedUriErrorHandler),P.onSameUrlNavigation&&(I.onSameUrlNavigation=P.onSameUrlNavigation),P.paramsInheritanceStrategy&&(I.paramsInheritanceStrategy=P.paramsInheritanceStrategy),P.relativeLinkResolution&&(I.relativeLinkResolution=P.relativeLinkResolution),P.urlUpdateStrategy&&(I.urlUpdateStrategy=P.urlUpdateStrategy)}(Oe,$n),Oe.enableTracing&&$n.events.subscribe(cn=>{var gr,qn;null===(gr=console.group)||void 0===gr||gr.call(console,`Router Event: ${cn.constructor.name}`),console.log(cn.toString()),console.log(cn),null===(qn=console.groupEnd)||void 0===qn||qn.call(console)}),$n},deps:[qi,Bn,w.Ye,x.zs3,x.v3s,x.Sil,mr,es,[class{},new x.FiY],[class{},new x.FiY]]},Bn,{provide:Pt,useFactory:function(P){return P.routerState.root},deps:[Si]},{provide:x.v3s,useClass:x.EAV},_r,Bt,class{preload(I,C){return C().pipe((0,Jt.K)(()=>(0,Me.of)(null)))}},{provide:es,useValue:{enableTracing:!1}}];function rl(){return new x.PXZ("Router",Si)}let Ws=(()=>{class P{constructor(C,M){}static forRoot(C,M){return{ngModule:P,providers:[Tu,va(C),{provide:Wr,useFactory:ci,deps:[[Si,new x.FiY,new x.tp0]]},{provide:es,useValue:M||{}},{provide:w.S$,useFactory:Au,deps:[w.lw,[new x.tBr(w.mr),new x.FiY],es]},{provide:ji,useFactory:On,deps:[Si,w.EM,es]},{provide:we,useExisting:M&&M.preloadingStrategy?M.preloadingStrategy:Bt},{provide:x.PXZ,multi:!0,useFactory:rl},[bt,{provide:x.ip1,multi:!0,useFactory:sr,deps:[bt]},{provide:Qo,useFactory:Yo,deps:[bt]},{provide:x.tb,multi:!0,useExisting:Qo}]]}}static forChild(C){return{ngModule:P,providers:[va(C)]}}}return P.\u0275fac=function(C){return new(C||P)(x.LFG(Wr,8),x.LFG(Si,8))},P.\u0275mod=x.oAB({type:P}),P.\u0275inj=x.cJS({}),P})();function On(P,I,C){return C.scrollOffset&&I.setOffset(C.scrollOffset),new ji(P,I,C)}function Au(P,I,C={}){return C.useHash?new w.Do(P,I):new w.b0(P,I)}function ci(P){return"guarded"}function va(P){return[{provide:x.deG,multi:!0,useValue:P},{provide:mr,multi:!0,useValue:P}]}let bt=(()=>{class P{constructor(C){this.injector=C,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ie.xQ}appInitializer(){return this.injector.get(w.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let M=null;const $=new Promise(Oe=>M=Oe),X=this.injector.get(Si),ve=this.injector.get(es);return"disabled"===ve.initialNavigation?(X.setUpLocationChangeListener(),M(!0)):"enabled"===ve.initialNavigation||"enabledBlocking"===ve.initialNavigation?(X.hooks.afterPreactivation=()=>this.initNavigation?(0,Me.of)(null):(this.initNavigation=!0,M(!0),this.resultOfPreactivationDone),X.initialNavigation()):M(!0),$})}bootstrapListener(C){const M=this.injector.get(es),$=this.injector.get(_r),X=this.injector.get(ji),ve=this.injector.get(Si),Oe=this.injector.get(x.z2F);C===Oe.components[0]&&(("enabledNonBlocking"===M.initialNavigation||void 0===M.initialNavigation)&&ve.initialNavigation(),$.setUpPreloading(),X.init(),ve.resetRootComponentType(Oe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return P.\u0275fac=function(C){return new(C||P)(x.LFG(x.zs3))},P.\u0275prov=x.Yz7({token:P,factory:P.\u0275fac}),P})();function sr(P){return P.appInitializer.bind(P)}function Yo(P){return P.bootstrapListener.bind(P)}const Qo=new x.OlP("Router Initializer")},3854:(Pe,fe,V)=>{"use strict";V.d(fe,{BH:()=>me,LL:()=>Le,ZR:()=>He,gQ:()=>Xr,hu:()=>x,g5:()=>se,US:()=>ee,tV:()=>le,h$:()=>ge,r3:()=>rn,Sg:()=>Ke,ne:()=>Nt,p$:()=>Y,vZ:()=>Fn,ZB:()=>ie,gK:()=>Qt,pd:()=>Yn,m9:()=>Ni,z$:()=>qe,GJ:()=>Jt,jU:()=>ce,ru:()=>Qe,d:()=>Ie,xb:()=>Lt,w1:()=>lt,hl:()=>rt,uI:()=>Me,UG:()=>it,Yr:()=>Wt,b$:()=>et,G6:()=>xt,Mn:()=>Mt,w9:()=>nr,cI:()=>zt,UI:()=>Kt,xO:()=>Gt,zd:()=>Gn,DV:()=>mn,ug:()=>Sn,dS:()=>Ar,Pz:()=>Dt,Dv:()=>jn,Wj:()=>sn,lb:()=>Dn});const x=function(Se,_e){if(!Se)throw se(_e)},se=function(Se){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Se)},De=function(Se){const _e=[];let Re=0;for(let ot=0;ot<Se.length;ot++){let je=Se.charCodeAt(ot);je<128?_e[Re++]=je:je<2048?(_e[Re++]=je>>6|192,_e[Re++]=63&je|128):55296==(64512&je)&&ot+1<Se.length&&56320==(64512&Se.charCodeAt(ot+1))?(je=65536+((1023&je)<<10)+(1023&Se.charCodeAt(++ot)),_e[Re++]=je>>18|240,_e[Re++]=je>>12&63|128,_e[Re++]=je>>6&63|128,_e[Re++]=63&je|128):(_e[Re++]=je>>12|224,_e[Re++]=je>>6&63|128,_e[Re++]=63&je|128)}return _e},ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Se,_e){if(!Array.isArray(Se))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Re=_e?this.byteToCharMapWebSafe_:this.byteToCharMap_,ot=[];for(let je=0;je<Se.length;je+=3){const Ut=Se[je],Vt=je+1<Se.length,an=Vt?Se[je+1]:0,Cn=je+2<Se.length,lr=Cn?Se[je+2]:0;let Lr=(15&an)<<2|lr>>6,ai=63&lr;Cn||(ai=64,Vt||(Lr=64)),ot.push(Re[Ut>>2],Re[(3&Ut)<<4|an>>4],Re[Lr],Re[ai])}return ot.join("")},encodeString(Se,_e){return this.HAS_NATIVE_SUPPORT&&!_e?btoa(Se):this.encodeByteArray(De(Se),_e)},decodeString(Se,_e){return this.HAS_NATIVE_SUPPORT&&!_e?atob(Se):function(Se){const _e=[];let Re=0,ot=0;for(;Re<Se.length;){const je=Se[Re++];if(je<128)_e[ot++]=String.fromCharCode(je);else if(je>191&&je<224){const Ut=Se[Re++];_e[ot++]=String.fromCharCode((31&je)<<6|63&Ut)}else if(je>239&&je<365){const Cn=((7&je)<<18|(63&Se[Re++])<<12|(63&Se[Re++])<<6|63&Se[Re++])-65536;_e[ot++]=String.fromCharCode(55296+(Cn>>10)),_e[ot++]=String.fromCharCode(56320+(1023&Cn))}else{const Ut=Se[Re++],Vt=Se[Re++];_e[ot++]=String.fromCharCode((15&je)<<12|(63&Ut)<<6|63&Vt)}}return _e.join("")}(this.decodeStringToByteArray(Se,_e))},decodeStringToByteArray(Se,_e){this.init_();const Re=_e?this.charToByteMapWebSafe_:this.charToByteMap_,ot=[];for(let je=0;je<Se.length;){const Ut=Re[Se.charAt(je++)],an=je<Se.length?Re[Se.charAt(je)]:0;++je;const lr=je<Se.length?Re[Se.charAt(je)]:64;++je;const _n=je<Se.length?Re[Se.charAt(je)]:64;if(++je,null==Ut||null==an||null==lr||null==_n)throw Error();ot.push(Ut<<2|an>>4),64!==lr&&(ot.push(an<<4&240|lr>>2),64!==_n&&ot.push(lr<<6&192|_n))}return ot},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Se=0;Se<this.ENCODED_VALS.length;Se++)this.byteToCharMap_[Se]=this.ENCODED_VALS.charAt(Se),this.charToByteMap_[this.byteToCharMap_[Se]]=Se,this.byteToCharMapWebSafe_[Se]=this.ENCODED_VALS_WEBSAFE.charAt(Se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Se]]=Se,Se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Se)]=Se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Se)]=Se)}}},ge=function(Se){const _e=De(Se);return ee.encodeByteArray(_e,!0)},oe=function(Se){return ge(Se).replace(/\./g,"")},le=function(Se){try{return ee.decodeString(Se,!0)}catch(_e){console.error("base64Decode failed: ",_e)}return null};function Y(Se){return ie(void 0,Se)}function ie(Se,_e){if(!(_e instanceof Object))return _e;switch(_e.constructor){case Date:return new Date(_e.getTime());case Object:void 0===Se&&(Se={});break;case Array:Se=[];break;default:return _e}for(const Re in _e)!_e.hasOwnProperty(Re)||!Z(Re)||(Se[Re]=ie(Se[Re],_e[Re]));return Se}function Z(Se){return"__proto__"!==Se}class me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((_e,Re)=>{this.resolve=_e,this.reject=Re})}wrapCallback(_e){return(Re,ot)=>{Re?this.reject(Re):this.resolve(ot),"function"==typeof _e&&(this.promise.catch(()=>{}),1===_e.length?_e(Re):_e(Re,ot))}}}function Ke(Se,_e){if(Se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ot=_e||"demo-project",je=Se.iat||0,Ut=Se.sub||Se.user_id;if(!Ut)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Vt=Object.assign({iss:`https://securetoken.google.com/${ot}`,aud:ot,iat:je,exp:je+3600,auth_time:je,sub:Ut,user_id:Ut,firebase:{sign_in_provider:"custom",identities:{}}},Se);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(Vt)),""].join(".")}function qe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function it(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Se){return!1}}function ce(){return"object"==typeof self&&self.self===self}function Qe(){const Se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Se&&void 0!==Se.id}function et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ie(){return qe().indexOf("Electron/")>=0}function lt(){const Se=qe();return Se.indexOf("MSIE ")>=0||Se.indexOf("Trident/")>=0}function Mt(){return qe().indexOf("MSAppHost/")>=0}function Wt(){return!1}function xt(){return!it()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rt(){return"object"==typeof indexedDB}class He extends Error{constructor(_e,Re,ot){super(Re),this.code=_e,this.customData=ot,this.name="FirebaseError",Object.setPrototypeOf(this,He.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor(_e,Re,ot){this.service=_e,this.serviceName=Re,this.errors=ot}create(_e,...Re){const ot=Re[0]||{},je=`${this.service}/${_e}`,Ut=this.errors[_e],Vt=Ut?function(Se,_e){return Se.replace(Ot,(Re,ot)=>{const je=_e[ot];return null!=je?String(je):`<${ot}?>`})}(Ut,ot):"Error";return new He(je,`${this.serviceName}: ${Vt} (${je}).`,ot)}}const Ot=/\{\$([^}]+)}/g;function zt(Se){return JSON.parse(Se)}function Dt(Se){return JSON.stringify(Se)}const Ft=function(Se){let _e={},Re={},ot={},je="";try{const Ut=Se.split(".");_e=zt(le(Ut[0])||""),Re=zt(le(Ut[1])||""),je=Ut[2],ot=Re.d||{},delete Re.d}catch(Ut){}return{header:_e,claims:Re,data:ot,signature:je}},nr=function(Se){const Re=Ft(Se).claims;return!!Re&&"object"==typeof Re&&Re.hasOwnProperty("iat")},Jt=function(Se){const _e=Ft(Se).claims;return"object"==typeof _e&&!0===_e.admin};function rn(Se,_e){return Object.prototype.hasOwnProperty.call(Se,_e)}function mn(Se,_e){if(Object.prototype.hasOwnProperty.call(Se,_e))return Se[_e]}function Lt(Se){for(const _e in Se)if(Object.prototype.hasOwnProperty.call(Se,_e))return!1;return!0}function Kt(Se,_e,Re){const ot={};for(const je in Se)Object.prototype.hasOwnProperty.call(Se,je)&&(ot[je]=_e.call(Re,Se[je],je,Se));return ot}function Fn(Se,_e){if(Se===_e)return!0;const Re=Object.keys(Se),ot=Object.keys(_e);for(const je of Re){if(!ot.includes(je))return!1;const Ut=Se[je],Vt=_e[je];if(dr(Ut)&&dr(Vt)){if(!Fn(Ut,Vt))return!1}else if(Ut!==Vt)return!1}for(const je of ot)if(!Re.includes(je))return!1;return!0}function dr(Se){return null!==Se&&"object"==typeof Se}function Gt(Se){const _e=[];for(const[Re,ot]of Object.entries(Se))Array.isArray(ot)?ot.forEach(je=>{_e.push(encodeURIComponent(Re)+"="+encodeURIComponent(je))}):_e.push(encodeURIComponent(Re)+"="+encodeURIComponent(ot));return _e.length?"&"+_e.join("&"):""}function Gn(Se){const _e={};return Se.replace(/^\?/,"").split("&").forEach(ot=>{if(ot){const[je,Ut]=ot.split("=");_e[decodeURIComponent(je)]=decodeURIComponent(Ut)}}),_e}function Yn(Se){const _e=Se.indexOf("?");if(!_e)return"";const Re=Se.indexOf("#",_e);return Se.substring(_e,Re>0?Re:void 0)}class Xr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let _e=1;_e<this.blockSize;++_e)this.pad_[_e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(_e,Re){Re||(Re=0);const ot=this.W_;if("string"==typeof _e)for(let _n=0;_n<16;_n++)ot[_n]=_e.charCodeAt(Re)<<24|_e.charCodeAt(Re+1)<<16|_e.charCodeAt(Re+2)<<8|_e.charCodeAt(Re+3),Re+=4;else for(let _n=0;_n<16;_n++)ot[_n]=_e[Re]<<24|_e[Re+1]<<16|_e[Re+2]<<8|_e[Re+3],Re+=4;for(let _n=16;_n<80;_n++){const Lr=ot[_n-3]^ot[_n-8]^ot[_n-14]^ot[_n-16];ot[_n]=4294967295&(Lr<<1|Lr>>>31)}let lr,Fr,je=this.chain_[0],Ut=this.chain_[1],Vt=this.chain_[2],an=this.chain_[3],Cn=this.chain_[4];for(let _n=0;_n<80;_n++){_n<40?_n<20?(lr=an^Ut&(Vt^an),Fr=1518500249):(lr=Ut^Vt^an,Fr=1859775393):_n<60?(lr=Ut&Vt|an&(Ut|Vt),Fr=2400959708):(lr=Ut^Vt^an,Fr=3395469782);const Lr=(je<<5|je>>>27)+lr+Cn+Fr+ot[_n]&4294967295;Cn=an,an=Vt,Vt=4294967295&(Ut<<30|Ut>>>2),Ut=je,je=Lr}this.chain_[0]=this.chain_[0]+je&4294967295,this.chain_[1]=this.chain_[1]+Ut&4294967295,this.chain_[2]=this.chain_[2]+Vt&4294967295,this.chain_[3]=this.chain_[3]+an&4294967295,this.chain_[4]=this.chain_[4]+Cn&4294967295}update(_e,Re){if(null==_e)return;void 0===Re&&(Re=_e.length);const ot=Re-this.blockSize;let je=0;const Ut=this.buf_;let Vt=this.inbuf_;for(;je<Re;){if(0===Vt)for(;je<=ot;)this.compress_(_e,je),je+=this.blockSize;if("string"==typeof _e){for(;je<Re;)if(Ut[Vt]=_e.charCodeAt(je),++Vt,++je,Vt===this.blockSize){this.compress_(Ut),Vt=0;break}}else for(;je<Re;)if(Ut[Vt]=_e[je],++Vt,++je,Vt===this.blockSize){this.compress_(Ut),Vt=0;break}}this.inbuf_=Vt,this.total_+=Re}digest(){const _e=[];let Re=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let je=this.blockSize-1;je>=56;je--)this.buf_[je]=255&Re,Re/=256;this.compress_(this.buf_);let ot=0;for(let je=0;je<5;je++)for(let Ut=24;Ut>=0;Ut-=8)_e[ot]=this.chain_[je]>>Ut&255,++ot;return _e}}function Nt(Se,_e){const Re=new Qn(Se,_e);return Re.subscribe.bind(Re)}class Qn{constructor(_e,Re){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Re,this.task.then(()=>{_e(this)}).catch(ot=>{this.error(ot)})}next(_e){this.forEachObserver(Re=>{Re.next(_e)})}error(_e){this.forEachObserver(Re=>{Re.error(_e)}),this.close(_e)}complete(){this.forEachObserver(_e=>{_e.complete()}),this.close()}subscribe(_e,Re,ot){let je;if(void 0===_e&&void 0===Re&&void 0===ot)throw new Error("Missing Observer.");je=function(Se,_e){if("object"!=typeof Se||null===Se)return!1;for(const Re of["next","error","complete"])if(Re in Se&&"function"==typeof Se[Re])return!0;return!1}(_e)?_e:{next:_e,error:Re,complete:ot},void 0===je.next&&(je.next=zn),void 0===je.error&&(je.error=zn),void 0===je.complete&&(je.complete=zn);const Ut=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?je.error(this.finalError):je.complete()}catch(Vt){}}),this.observers.push(je),Ut}unsubscribeOne(_e){void 0===this.observers||void 0===this.observers[_e]||(delete this.observers[_e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(_e){if(!this.finalized)for(let Re=0;Re<this.observers.length;Re++)this.sendOne(Re,_e)}sendOne(_e,Re){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[_e])try{Re(this.observers[_e])}catch(ot){"undefined"!=typeof console&&console.error&&console.error(ot)}})}close(_e){this.finalized||(this.finalized=!0,void 0!==_e&&(this.finalError=_e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zn(){}const jn=function(Se,_e,Re,ot){let je;if(ot<_e?je="at least "+_e:ot>Re&&(je=0===Re?"none":"no more than "+Re),je)throw new Error(Se+" failed: Was called with "+ot+(1===ot?" argument.":" arguments.")+" Expects "+je+".")};function Qt(Se,_e){return`${Se} failed: ${_e} argument `}function sn(Se,_e,Re,ot){if((!ot||Re)&&"function"!=typeof Re)throw new Error(Qt(Se,_e)+"must be a valid function.")}function Dn(Se,_e,Re,ot){if((!ot||Re)&&("object"!=typeof Re||null===Re))throw new Error(Qt(Se,_e)+"must be a valid context object.")}const Ar=function(Se){const _e=[];let Re=0;for(let ot=0;ot<Se.length;ot++){let je=Se.charCodeAt(ot);if(je>=55296&&je<=56319){const Ut=je-55296;ot++,x(ot<Se.length,"Surrogate pair missing trail surrogate."),je=65536+(Ut<<10)+(Se.charCodeAt(ot)-56320)}je<128?_e[Re++]=je:je<2048?(_e[Re++]=je>>6|192,_e[Re++]=63&je|128):je<65536?(_e[Re++]=je>>12|224,_e[Re++]=je>>6&63|128,_e[Re++]=63&je|128):(_e[Re++]=je>>18|240,_e[Re++]=je>>12&63|128,_e[Re++]=je>>6&63|128,_e[Re++]=63&je|128)}return _e},Sn=function(Se){let _e=0;for(let Re=0;Re<Se.length;Re++){const ot=Se.charCodeAt(Re);ot<128?_e++:ot<2048?_e+=2:ot>=55296&&ot<=56319?(_e+=4,Re++):_e+=3}return _e};function Ni(Se){return Se&&Se._delegate?Se._delegate:Se}},6094:(Pe,fe,V)=>{"use strict";V.r(fe);var w=V(8239),x=V(3394),se=V(3854),De=V(8026),pe=V(4762),ee=V(5422),ge=V(3910);const qe=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Me=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new se.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qe=new ee.Yd("@firebase/auth");function et(b,...g){Qe.logLevel<=ee.in.ERROR&&Qe.error(`Auth (${De.SDK_VERSION}): ${b}`,...g)}function Ie(b,...g){throw xt(b,...g)}function lt(b,...g){return xt(b,...g)}function Mt(b,g,m){const T=Object.assign(Object.assign({},Me()),{[g]:m});return new se.LL("auth","Firebase",T).create(g,{appName:b.name})}function Wt(b,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&Ie(b,"argument-error"),Mt(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xt(b,...g){if("string"!=typeof b){const m=g[0],T=[...g.slice(1)];return T[0]&&(T[0].appName=b.name),b._errorFactory.create(m,...T)}return it.create(b,...g)}function rt(b,g,...m){if(!b)throw xt(g,...m)}function Be(b){const g="INTERNAL ASSERTION FAILED: "+b;throw et(g),new Error(g)}function Ae(b,g){b||Be(g)}const $e=new Map;function xe(b){Ae(b instanceof Function,"Expected a class definition");let g=$e.get(b);return g?(Ae(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,$e.set(b,g),g)}function at(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Ot(){return"http:"===zt()||"https:"===zt()}function zt(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ht{constructor(g,m){this.shortDelay=g,this.longDelay=m,Ae(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,se.uI)()||(0,se.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ot()||(0,se.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function dn(b,g){Ae(b.emulator,"Emulator should always be set here");const{url:m}=b.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class nr{static initialize(g,m,T){this.fetchImpl=g,m&&(this.headersImpl=m),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Be("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Be("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Be("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new Ht(3e4,6e4);function mn(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function Lt(b,g,m,T){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,w.Z)(function*(b,g,m,T,W={}){return Fn(b,W,(0,w.Z)(function*(){let ne={},Ne={};T&&("GET"===g?Ne=T:ne={body:JSON.stringify(T)});const Ze=(0,se.xO)(Object.assign({key:b.config.apiKey},Ne)).slice(1),Et=yield b._getAdditionalHeaders();return Et["Content-Type"]="application/json",b.languageCode&&(Et["X-Firebase-Locale"]=b.languageCode),nr.fetch()(Yn(b,b.config.apiHost,m,Ze),Object.assign({method:g,headers:Et,referrerPolicy:"no-referrer"},ne))}))})).apply(this,arguments)}function Fn(b,g,m){return dr.apply(this,arguments)}function dr(){return(dr=(0,w.Z)(function*(b,g,m){b._canInitEmulator=!1;const T=Object.assign(Object.assign({},Jt),g);try{const W=new Xr(b),ne=yield Promise.race([m(),W.promise]);W.clearNetworkTimeout();const Ne=yield ne.json();if("needConfirmation"in Ne)throw Nt(b,"account-exists-with-different-credential",Ne);if(ne.ok&&!("errorMessage"in Ne))return Ne;{const Ze=ne.ok?Ne.errorMessage:Ne.error.message,[Et,kt]=Ze.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Et)throw Nt(b,"credential-already-in-use",Ne);if("EMAIL_EXISTS"===Et)throw Nt(b,"email-already-in-use",Ne);const on=T[Et]||Et.toLowerCase().replace(/[_\s]+/g,"-");if(kt)throw Mt(b,on,kt);Ie(b,on)}}catch(W){if(W instanceof se.ZR)throw W;Ie(b,"network-request-failed")}})).apply(this,arguments)}function Gt(b,g,m,T){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,w.Z)(function*(b,g,m,T,W={}){const ne=yield Lt(b,g,m,T,W);return"mfaPendingCredential"in ne&&Ie(b,"multi-factor-auth-required",{_serverResponse:ne}),ne})).apply(this,arguments)}function Yn(b,g,m,T){const W=`${g}${m}?${T}`;return b.config.emulator?dn(b.config,W):`${b.config.apiScheme}://${W}`}class Xr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,T)=>{this.timer=setTimeout(()=>T(lt(this.auth,"timeout")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nt(b,g,m){const T={appName:b.name};m.email&&(T.email=m.email),m.phoneNumber&&(T.phoneNumber=m.phoneNumber);const W=lt(b,g,T);return W.customData._tokenResponse=m,W}function Tt(){return(Tt=(0,w.Z)(function*(b,g){return Lt(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function ar(b,g){return zn.apply(this,arguments)}function zn(){return(zn=(0,w.Z)(function*(b,g){return Lt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function jn(b,g){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,w.Z)(function*(b,g){return Lt(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function jt(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Ar(){return(Ar=(0,w.Z)(function*(b,g=!1){const m=(0,se.m9)(b),T=yield m.getIdToken(g),W=It(T);rt(W&&W.exp&&W.auth_time&&W.iat,m.auth,"internal-error");const ne="object"==typeof W.firebase?W.firebase:void 0,Ne=null==ne?void 0:ne.sign_in_provider;return{claims:W,token:T,authTime:jt(Sn(W.auth_time)),issuedAtTime:jt(Sn(W.iat)),expirationTime:jt(Sn(W.exp)),signInProvider:Ne||null,signInSecondFactor:(null==ne?void 0:ne.sign_in_second_factor)||null}})).apply(this,arguments)}function Sn(b){return 1e3*Number(b)}function It(b){const[g,m,T]=b.split(".");if(void 0===g||void 0===m||void 0===T)return et("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,se.tV)(m);return W?JSON.parse(W):(et("Failed to decode base64 JWT payload"),null)}catch(W){return et("Caught error parsing JWT payload as JSON",W),null}}function ei(b,g){return bi.apply(this,arguments)}function bi(){return(bi=(0,w.Z)(function*(b,g,m=!1){if(m)return g;try{return yield g}catch(T){throw T instanceof se.ZR&&Es(T)&&b.auth.currentUser===b&&(yield b.auth.signOut()),T}})).apply(this,arguments)}function Es({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class xn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const W=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const T=this.getInterval(g);this.timerId=setTimeout((0,w.Z)(function*(){yield m.iteration()}),T)}iteration(){var g=this;return(0,w.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&g.schedule(!0))}g.schedule()})()}}class qr{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=jt(this.lastLoginAt),this.creationTime=jt(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ni(b){return Se.apply(this,arguments)}function Se(){return(Se=(0,w.Z)(function*(b){var g;const m=b.auth,T=yield b.getIdToken(),W=yield ei(b,jn(m,{idToken:T}));rt(null==W?void 0:W.users.length,m,"internal-error");const ne=W.users[0];b._notifyReloadListener(ne);const Ne=(null===(g=ne.providerUserInfo)||void 0===g?void 0:g.length)?je(ne.providerUserInfo):[],Ze=ot(b.providerData,Ne),on=!!b.isAnonymous&&!(b.email&&ne.passwordHash||(null==Ze?void 0:Ze.length)),en={uid:ne.localId,displayName:ne.displayName||null,photoURL:ne.photoUrl||null,email:ne.email||null,emailVerified:ne.emailVerified||!1,phoneNumber:ne.phoneNumber||null,tenantId:ne.tenantId||null,providerData:Ze,metadata:new qr(ne.createdAt,ne.lastLoginAt),isAnonymous:on};Object.assign(b,en)})).apply(this,arguments)}function Re(){return(Re=(0,w.Z)(function*(b){const g=(0,se.m9)(b);yield Ni(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ot(b,g){return[...b.filter(T=>!g.some(W=>W.providerId===T.providerId)),...g]}function je(b){return b.map(g=>{var{providerId:m}=g,T=(0,pe._T)(g,["providerId"]);return{providerId:m,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function Vt(){return(Vt=(0,w.Z)(function*(b,g){const m=yield Fn(b,{},(0,w.Z)(function*(){const T=(0,se.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:W,apiKey:ne}=b.config,Ne=Yn(b,W,"/v1/token",`key=${ne}`),Ze=yield b._getAdditionalHeaders();return Ze["Content-Type"]="application/x-www-form-urlencoded",nr.fetch()(Ne,{method:"POST",headers:Ze,body:T})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class an{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){rt(g.idToken,"internal-error"),rt(void 0!==g.idToken,"internal-error"),rt(void 0!==g.refreshToken,"internal-error");const m="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(b){const g=It(b);return rt(g,"internal-error"),rt(void 0!==g.exp,"internal-error"),rt(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var T=this;return(0,w.Z)(function*(){return rt(!T.accessToken||T.refreshToken,g,"user-token-expired"),m||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(g,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var T=this;return(0,w.Z)(function*(){const{accessToken:W,refreshToken:ne,expiresIn:Ne}=yield function(b,g){return Vt.apply(this,arguments)}(g,m);T.updateTokensAndExpiration(W,ne,Number(Ne))})()}updateTokensAndExpiration(g,m,T){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(g,m){const{refreshToken:T,accessToken:W,expirationTime:ne}=m,Ne=new an;return T&&(rt("string"==typeof T,"internal-error",{appName:g}),Ne.refreshToken=T),W&&(rt("string"==typeof W,"internal-error",{appName:g}),Ne.accessToken=W),ne&&(rt("number"==typeof ne,"internal-error",{appName:g}),Ne.expirationTime=ne),Ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new an,this.toJSON())}_performRefresh(){return Be("not implemented")}}function Cn(b,g){rt("string"==typeof b||void 0===b,"internal-error",{appName:g})}class lr{constructor(g){var{uid:m,auth:T,stsTokenManager:W}=g,ne=(0,pe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new xn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=T,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=ne.displayName||null,this.email=ne.email||null,this.emailVerified=ne.emailVerified||!1,this.phoneNumber=ne.phoneNumber||null,this.photoURL=ne.photoURL||null,this.isAnonymous=ne.isAnonymous||!1,this.tenantId=ne.tenantId||null,this.metadata=new qr(ne.createdAt||void 0,ne.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,w.Z)(function*(){const T=yield ei(m,m.stsTokenManager.getToken(m.auth,g));return rt(T,m.auth,"internal-error"),m.accessToken!==T&&(m.accessToken=T,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),T})()}getIdTokenResult(g){return function(b){return Ar.apply(this,arguments)}(this,g)}reload(){return function(b){return Re.apply(this,arguments)}(this)}_assign(g){this!==g&&(rt(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new lr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var T=this;return(0,w.Z)(function*(){let W=!1;g.idToken&&g.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(g),W=!0),m&&(yield Ni(T)),yield T.auth._persistUserIfCurrent(T),W&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var g=this;return(0,w.Z)(function*(){const m=yield g.getIdToken();return yield ei(g,function(b,g){return Tt.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var T,W,ne,Ne,Ze,Et,kt,on;const en=null!==(T=m.displayName)&&void 0!==T?T:void 0,hi=null!==(W=m.email)&&void 0!==W?W:void 0,Co=null!==(ne=m.phoneNumber)&&void 0!==ne?ne:void 0,uu=null!==(Ne=m.photoURL)&&void 0!==Ne?Ne:void 0,yc=null!==(Ze=m.tenantId)&&void 0!==Ze?Ze:void 0,gt=null!==(Et=m._redirectEventId)&&void 0!==Et?Et:void 0,fl=null!==(kt=m.createdAt)&&void 0!==kt?kt:void 0,Wi=null!==(on=m.lastLoginAt)&&void 0!==on?on:void 0,{uid:na,emailVerified:to,isAnonymous:kl,providerData:ld,stsTokenManager:ko}=m;rt(na&&ko,g,"internal-error");const vc=an.fromJSON(this.name,ko);rt("string"==typeof na,g,"internal-error"),Cn(en,g.name),Cn(hi,g.name),rt("boolean"==typeof to,g,"internal-error"),rt("boolean"==typeof kl,g,"internal-error"),Cn(Co,g.name),Cn(uu,g.name),Cn(yc,g.name),Cn(gt,g.name),Cn(fl,g.name),Cn(Wi,g.name);const bo=new lr({uid:na,auth:g,email:hi,emailVerified:to,displayName:en,isAnonymous:kl,photoURL:uu,phoneNumber:Co,tenantId:yc,stsTokenManager:vc,createdAt:fl,lastLoginAt:Wi});return ld&&Array.isArray(ld)&&(bo.providerData=ld.map(no=>Object.assign({},no))),gt&&(bo._redirectEventId=gt),bo}static _fromIdTokenResponse(g,m,T=!1){return(0,w.Z)(function*(){const W=new an;W.updateFromServerResponse(m);const ne=new lr({uid:m.localId,auth:g,stsTokenManager:W,isAnonymous:T});return yield Ni(ne),ne})()}}const _n=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(m,T){var W=this;return(0,w.Z)(function*(){W.storage[m]=T})()}_get(m){var T=this;return(0,w.Z)(function*(){const W=T.storage[m];return void 0===W?null:W})()}_remove(m){var T=this;return(0,w.Z)(function*(){delete T.storage[m]})()}_addListener(m,T){}_removeListener(m,T){}}return b.type="NONE",b})();function Lr(b,g,m){return`firebase:${b}:${g}:${m}`}class ai{constructor(g,m,T){this.persistence=g,this.auth=m,this.userKey=T;const{config:W,name:ne}=this.auth;this.fullUserKey=Lr(this.userKey,W.apiKey,ne),this.fullPersistenceKey=Lr("persistence",W.apiKey,ne),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,w.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?lr._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,w.Z)(function*(){if(m.persistence===g)return;const T=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,T?m.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,T="authUser"){return(0,w.Z)(function*(){if(!m.length)return new ai(xe(_n),g,T);const W=(yield Promise.all(m.map(function(){var kt=(0,w.Z)(function*(on){if(yield on._isAvailable())return on});return function(on){return kt.apply(this,arguments)}}()))).filter(kt=>kt);let ne=W[0]||xe(_n);const Ne=Lr(T,g.config.apiKey,g.name);let Ze=null;for(const kt of m)try{const on=yield kt._get(Ne);if(on){const en=lr._fromJSON(g,on);kt!==ne&&(Ze=en),ne=kt;break}}catch(on){}const Et=W.filter(kt=>kt._shouldAllowMigration);return ne._shouldAllowMigration&&Et.length?(ne=Et[0],Ze&&(yield ne._set(Ne,Ze.toJSON())),yield Promise.all(m.map(function(){var kt=(0,w.Z)(function*(on){if(on!==ne)try{yield on._remove(Ne)}catch(en){}});return function(on){return kt.apply(this,arguments)}}())),new ai(ne,g,T)):new ai(ne,g,T)})()}}function zi(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(li(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(xs(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(ur(g))return"Blackberry";if(hr(g))return"Webos";if(hn(g))return"Safari";if((g.includes("chrome/")||Ki(g))&&!g.includes("edge/"))return"Chrome";if(yn(g))return"Android";{const T=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==T?void 0:T.length))return T[1]}return"Other"}function xs(b=(0,se.z$)()){return/firefox\//i.test(b)}function hn(b=(0,se.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ki(b=(0,se.z$)()){return/crios\//i.test(b)}function li(b=(0,se.z$)()){return/iemobile/i.test(b)}function yn(b=(0,se.z$)()){return/android/i.test(b)}function ur(b=(0,se.z$)()){return/blackberry/i.test(b)}function hr(b=(0,se.z$)()){return/webos/i.test(b)}function Jn(b=(0,se.z$)()){return/iphone|ipad|ipod/i.test(b)}function vt(b=(0,se.z$)()){return Jn(b)||yn(b)||hr(b)||ur(b)||/windows phone/i.test(b)||li(b)}function Rn(b,g=[]){let m;switch(b){case"Browser":m=zi((0,se.z$)());break;case"Worker":m=`${zi((0,se.z$)())}-${b}`;break;default:m=b}const T=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${De.SDK_VERSION}/${T}`}class Rr{constructor(g,m){this.app=g,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wn(this),this.idTokenSubscription=new wn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(g,m){var T=this;return m&&(this._popupRedirectResolver=xe(m)),this._initializationPromise=this.queue((0,w.Z)(function*(){var W,ne;if(!T._deleted&&(T.persistenceManager=yield ai.create(T,g),!T._deleted)){if(null===(W=T._popupRedirectResolver)||void 0===W?void 0:W._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch(Ne){}yield T.initializeCurrentUser(m),T.lastNotifiedUid=(null===(ne=T.currentUser)||void 0===ne?void 0:ne.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,w.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m)}})()}initializeCurrentUser(g){var m=this;return(0,w.Z)(function*(){var T;let W=yield m.assertedPersistence.getCurrentUser();if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ne=null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId,Ne=null==W?void 0:W._redirectEventId,Ze=yield m.tryRedirectSignIn(g);(!ne||ne===Ne)&&(null==Ze?void 0:Ze.user)&&(W=Ze.user)}return W?W._redirectEventId?(rt(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===W._redirectEventId?m.directlySetCurrentUser(W):m.reloadAndSetCurrentUserOrClear(W)):m.reloadAndSetCurrentUserOrClear(W):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var m=this;return(0,w.Z)(function*(){let T=null;try{T=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch(W){yield m._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,w.Z)(function*(){try{yield Ni(g)}catch(T){if("auth/network-request-failed"!==T.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,w.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,w.Z)(function*(){const T=g?(0,se.m9)(g):null;return T&&rt(T.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(T&&T._clone(m))})()}_updateCurrentUser(g){var m=this;return(0,w.Z)(function*(){if(!m._deleted)return g&&rt(m.tenantId===g.tenantId,m,"tenant-id-mismatch"),m.queue((0,w.Z)(function*(){yield m.directlySetCurrentUser(g),m.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,w.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var m=this;return this.queue((0,w.Z)(function*(){yield m.assertedPersistence.setPersistence(xe(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new se.LL("auth","Firebase",g())}onAuthStateChanged(g,m,T){return this.registerStateListener(this.authStateSubscription,g,m,T)}onIdTokenChanged(g,m,T){return this.registerStateListener(this.idTokenSubscription,g,m,T)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var T=this;return(0,w.Z)(function*(){const W=yield T.getOrInitRedirectPersistenceManager(m);return null===g?W.removeCurrentUser():W.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,w.Z)(function*(){if(!m.redirectPersistenceManager){const T=g&&xe(g)||m._popupRedirectResolver;rt(T,m,"argument-error"),m.redirectPersistenceManager=yield ai.create(m,[xe(T._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,w.Z)(function*(){var T,W;return m._isInitialized&&(yield m.queue((0,w.Z)(function*(){}))),(null===(T=m._currentUser)||void 0===T?void 0:T._redirectEventId)===g?m._currentUser:(null===(W=m.redirectUser)||void 0===W?void 0:W._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,w.Z)(function*(){if(g===m.currentUser)return m.queue((0,w.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,T,W){if(this._deleted)return()=>{};const ne="function"==typeof m?m:m.next.bind(m),Ne=this._isInitialized?Promise.resolve():this._initializationPromise;return rt(Ne,this,"internal-error"),Ne.then(()=>ne(this.currentUser)),"function"==typeof m?g.addObserver(m,T,W):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,w.Z)(function*(){m.currentUser&&m.currentUser!==g&&(m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh()),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Rn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,w.Z)(function*(){const m={"X-Client-Version":g.clientVersion};return g.app.options.appId&&(m["X-Firebase-gmpid"]=g.app.options.appId),m})()}}function Ln(b){return(0,se.m9)(b)}class wn{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,se.ne)(m=>this.observer=m)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vn(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function Cs(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class Or{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return Be("not implemented")}_getIdTokenResponse(g){return Be("not implemented")}_linkToIdToken(g,m){return Be("not implemented")}_getReauthenticationResolver(g){return Be("not implemented")}}function os(b,g){return bs.apply(this,arguments)}function bs(){return(bs=(0,w.Z)(function*(b,g){return Lt(b,"POST","/v1/accounts:resetPassword",mn(b,g))})).apply(this,arguments)}function Os(b,g){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,w.Z)(function*(b,g){return Lt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function as(b,g){return ki.apply(this,arguments)}function ki(){return(ki=(0,w.Z)(function*(b,g){return Lt(b,"POST","/v1/accounts:update",mn(b,g))})).apply(this,arguments)}function Ge(){return(Ge=(0,w.Z)(function*(b,g){return Gt(b,"POST","/v1/accounts:signInWithPassword",mn(b,g))})).apply(this,arguments)}function Ue(b,g){return Je.apply(this,arguments)}function Je(){return(Je=(0,w.Z)(function*(b,g){return Lt(b,"POST","/v1/accounts:sendOobCode",mn(b,g))})).apply(this,arguments)}function mt(b,g){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,w.Z)(function*(b,g){return Ue(b,g)})).apply(this,arguments)}function un(b,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,w.Z)(function*(b,g){return Ue(b,g)})).apply(this,arguments)}function In(b,g){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,w.Z)(function*(b,g){return Ue(b,g)})).apply(this,arguments)}function Xn(b,g){return er.apply(this,arguments)}function er(){return(er=(0,w.Z)(function*(b,g){return Ue(b,g)})).apply(this,arguments)}function Fi(){return(Fi=(0,w.Z)(function*(b,g){return Gt(b,"POST","/v1/accounts:signInWithEmailLink",mn(b,g))})).apply(this,arguments)}function ls(){return(ls=(0,w.Z)(function*(b,g){return Gt(b,"POST","/v1/accounts:signInWithEmailLink",mn(b,g))})).apply(this,arguments)}class ti extends Or{constructor(g,m,T,W=null){super("password",T),this._email=g,this._password=m,this._tenantId=W}static _fromEmailAndPassword(g,m){return new ti(g,m,"password")}static _fromEmailAndCode(g,m,T=null){return new ti(g,m,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,w.Z)(function*(){switch(m.signInMethod){case"password":return function(b,g){return Ge.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(b,g){return Fi.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:Ie(g,"internal-error")}})()}_linkToIdToken(g,m){var T=this;return(0,w.Z)(function*(){switch(T.signInMethod){case"password":return Os(g,{idToken:m,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function(b,g){return ls.apply(this,arguments)}(g,{idToken:m,email:T._email,oobCode:T._password});default:Ie(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function rr(b,g){return oo.apply(this,arguments)}function oo(){return(oo=(0,w.Z)(function*(b,g){return Gt(b,"POST","/v1/accounts:signInWithIdp",mn(b,g))})).apply(this,arguments)}class Zi extends Or{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Zi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):Ie("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:W}=m,ne=(0,pe._T)(m,["providerId","signInMethod"]);if(!T||!W)return null;const Ne=new Zi(T,W);return Ne.idToken=ne.idToken||void 0,Ne.accessToken=ne.accessToken||void 0,Ne.secret=ne.secret,Ne.nonce=ne.nonce,Ne.pendingToken=ne.pendingToken||null,Ne}_getIdTokenResponse(g){return rr(g,this.buildRequest())}_linkToIdToken(g,m){const T=this.buildRequest();return T.idToken=m,rr(g,T)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,rr(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,se.xO)(m)}return g}}function ao(b,g){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,w.Z)(function*(b,g){return Lt(b,"POST","/v1/accounts:sendVerificationCode",mn(b,g))})).apply(this,arguments)}function Ms(){return(Ms=(0,w.Z)(function*(b,g){return Gt(b,"POST","/v1/accounts:signInWithPhoneNumber",mn(b,g))})).apply(this,arguments)}function us(){return(us=(0,w.Z)(function*(b,g){const m=yield Gt(b,"POST","/v1/accounts:signInWithPhoneNumber",mn(b,g));if(m.temporaryProof)throw Nt(b,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const da={USER_NOT_FOUND:"user-not-found"};function Ns(){return(Ns=(0,w.Z)(function*(b,g){return Gt(b,"POST","/v1/accounts:signInWithPhoneNumber",mn(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),da)})).apply(this,arguments)}class Yi extends Or{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new Yi({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new Yi({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function(b,g){return Ms.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function(b,g){return us.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(b,g){return Ns.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:T,verificationCode:W}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:T,code:W}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:T,phoneNumber:W,temporaryProof:ne}=g;return T||m||W||ne?new Yi({verificationId:m,verificationCode:T,phoneNumber:W,temporaryProof:ne}):null}}class cs{constructor(g){var m,T,W,ne,Ne,Ze;const Et=(0,se.zd)((0,se.pd)(g)),kt=null!==(m=Et.apiKey)&&void 0!==m?m:null,on=null!==(T=Et.oobCode)&&void 0!==T?T:null,en=function(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(W=Et.mode)&&void 0!==W?W:null);rt(kt&&on&&en,"argument-error"),this.apiKey=kt,this.operation=en,this.code=on,this.continueUrl=null!==(ne=Et.continueUrl)&&void 0!==ne?ne:null,this.languageCode=null!==(Ne=Et.languageCode)&&void 0!==Ne?Ne:null,this.tenantId=null!==(Ze=Et.tenantId)&&void 0!==Ze?Ze:null}static parseLink(g){const m=function(b){const g=(0,se.zd)((0,se.pd)(b)).link,m=g?(0,se.zd)((0,se.pd)(g)).deep_link_id:null,T=(0,se.zd)((0,se.pd)(b)).deep_link_id;return(T?(0,se.zd)((0,se.pd)(T)).link:null)||T||m||g||b}(g);try{return new cs(m)}catch(T){return null}}}let Yr=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(m,T){return ti._fromEmailAndPassword(m,T)}static credentialWithLink(m,T){const W=cs.parseLink(T);return rt(W,"argument-error"),ti._fromEmailAndCode(m,W.code,W.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Kn{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ks extends Kn{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ds extends ks{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return rt("providerId"in m&&"signInMethod"in m,"argument-error"),Zi._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return rt(g.idToken||g.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ds.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ds.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:T,oauthTokenSecret:W,pendingToken:ne,nonce:Ne,providerId:Ze}=g;if(!T&&!W&&!m&&!ne||!Ze)return null;try{return new ds(Ze)._credential({idToken:m,accessToken:T,nonce:Ne,pendingToken:ne})}catch(Et){return null}}}let Ys=(()=>{class b extends ks{constructor(){super("facebook.com")}static credential(m){return Zi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return b.credential(m.oauthAccessToken)}catch(T){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Mr=(()=>{class b extends ks{constructor(){super("google.com"),this.addScope("profile")}static credential(m,T){return Zi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:T})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:T,oauthAccessToken:W}=m;if(!T&&!W)return null;try{return b.credential(T,W)}catch(ne){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Ii=(()=>{class b extends ks{constructor(){super("github.com")}static credential(m){return Zi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return b.credential(m.oauthAccessToken)}catch(T){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class hs extends Or{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return rr(g,this.buildRequest())}_linkToIdToken(g,m){const T=this.buildRequest();return T.idToken=m,rr(g,T)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,rr(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:W,pendingToken:ne}=m;return T&&W&&ne&&T===W?new hs(T,ne):null}static _create(g,m){return new hs(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $s extends Kn{constructor(g){rt(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return $s.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return $s.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=hs.fromJSON(g);return rt(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:T}=g;if(!m||!T)return null;try{return hs._create(T,m)}catch(W){return null}}}let ni=(()=>{class b extends ks{constructor(){super("twitter.com")}static credential(m,T){return Zi._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:T})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:T,oauthTokenSecret:W}=m;if(!T||!W)return null;try{return b.credential(T,W)}catch(ne){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Dr(b,g){return ri.apply(this,arguments)}function ri(){return(ri=(0,w.Z)(function*(b,g){return Gt(b,"POST","/v1/accounts:signUp",mn(b,g))})).apply(this,arguments)}class Ur{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,T,W=!1){return(0,w.Z)(function*(){const ne=yield lr._fromIdTokenResponse(g,T,W),Ne=Qs(T);return new Ur({user:ne,providerId:Ne,_tokenResponse:T,operationType:m})})()}static _forOperation(g,m,T){return(0,w.Z)(function*(){yield g._updateTokensIfNecessary(T,!0);const W=Qs(T);return new Ur({user:g,providerId:W,_tokenResponse:T,operationType:m})})()}}function Qs(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function jo(){return(jo=(0,w.Z)(function*(b){var g;const m=Ln(b);if(yield m._initializationPromise,null===(g=m.currentUser)||void 0===g?void 0:g.isAnonymous)return new Ur({user:m.currentUser,providerId:null,operationType:"signIn"});const T=yield Dr(m,{returnSecureToken:!0}),W=yield Ur._fromIdTokenResponse(m,"signIn",T,!0);return yield m._updateCurrentUser(W.user),W})).apply(this,arguments)}class Ui extends se.ZR{constructor(g,m,T,W){var ne;super(m.code,m.message),this.operationType=T,this.user=W,Object.setPrototypeOf(this,Ui.prototype),this.customData={appName:g.name,tenantId:null!==(ne=g.tenantId)&&void 0!==ne?ne:void 0,_serverResponse:m.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(g,m,T,W){return new Ui(g,m,T,W)}}function ui(b,g,m,T){return("reauthenticate"===g?m._getReauthenticationResolver(b):m._getIdTokenResponse(b)).catch(ne=>{throw"auth/multi-factor-auth-required"===ne.code?Ui._fromErrorAndOperation(b,ne,g,T):ne})}function Ts(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function Ma(){return(Ma=(0,w.Z)(function*(b,g){const m=(0,se.m9)(b);yield H(!0,m,g);const{providerUserInfo:T}=yield ar(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),W=Ts(T||[]);return m.providerData=m.providerData.filter(ne=>W.has(ne.providerId)),W.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function B(b,g){return Q.apply(this,arguments)}function Q(){return(Q=(0,w.Z)(function*(b,g,m=!1){const T=yield ei(b,g._linkToIdToken(b.auth,yield b.getIdToken()),m);return Ur._forOperation(b,"link",T)})).apply(this,arguments)}function H(b,g,m){return te.apply(this,arguments)}function te(){return(te=(0,w.Z)(function*(b,g,m){yield Ni(g);const W=!1===b?"provider-already-linked":"no-such-provider";rt(Ts(g.providerData).has(m)===b,g.auth,W)})).apply(this,arguments)}function Ce(b,g){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,w.Z)(function*(b,g,m=!1){const{auth:T}=b,W="reauthenticate";try{const ne=yield ei(b,ui(T,W,g,b),m);rt(ne.idToken,T,"internal-error");const Ne=It(ne.idToken);rt(Ne,T,"internal-error");const{sub:Ze}=Ne;return rt(b.uid===Ze,T,"user-mismatch"),Ur._forOperation(b,W,ne)}catch(ne){throw"auth/user-not-found"===(null==ne?void 0:ne.code)&&Ie(T,"user-mismatch"),ne}})).apply(this,arguments)}function ht(b,g){return F.apply(this,arguments)}function F(){return(F=(0,w.Z)(function*(b,g,m=!1){const T="signIn",W=yield ui(b,T,g),ne=yield Ur._fromIdTokenResponse(b,T,W);return m||(yield b._updateCurrentUser(ne.user)),ne})).apply(this,arguments)}function k(b,g){return O.apply(this,arguments)}function O(){return(O=(0,w.Z)(function*(b,g){return ht(Ln(b),g)})).apply(this,arguments)}function q(b,g){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,w.Z)(function*(b,g){const m=(0,se.m9)(b);return yield H(!1,m,g.providerId),B(m,g)})).apply(this,arguments)}function pt(b,g){return tn.apply(this,arguments)}function tn(){return(tn=(0,w.Z)(function*(b,g){return Ce((0,se.m9)(b),g)})).apply(this,arguments)}function Mn(b,g){return Di.apply(this,arguments)}function Di(){return(Di=(0,w.Z)(function*(b,g){return Gt(b,"POST","/v1/accounts:signInWithCustomToken",mn(b,g))})).apply(this,arguments)}function Ti(){return(Ti=(0,w.Z)(function*(b,g){const m=Ln(b),T=yield Mn(m,{token:g,returnSecureToken:!0}),W=yield Ur._fromIdTokenResponse(m,"signIn",T);return yield m._updateCurrentUser(W.user),W})).apply(this,arguments)}class fs{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?Zt._fromServerResponse(g,m):Ie(g,"internal-error")}}class Zt extends fs{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new Zt(m)}}function Qi(b,g,m){var T;rt((null===(T=m.url)||void 0===T?void 0:T.length)>0,b,"invalid-continue-uri"),rt(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(rt(m.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(rt(m.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function wl(){return(wl=(0,w.Z)(function*(b,g,m){const T=(0,se.m9)(b),W={requestType:"PASSWORD_RESET",email:g};m&&Qi(T,W,m),yield un(T,W)})).apply(this,arguments)}function co(){return(co=(0,w.Z)(function*(b,g,m){yield os((0,se.m9)(b),{oobCode:g,newPassword:m})})).apply(this,arguments)}function fa(){return(fa=(0,w.Z)(function*(b,g){yield as((0,se.m9)(b),{oobCode:g})})).apply(this,arguments)}function ft(b,g){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,w.Z)(function*(b,g){const m=(0,se.m9)(b),T=yield os(m,{oobCode:g}),W=T.requestType;switch(rt(W,m,"internal-error"),W){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":rt(T.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":rt(T.mfaInfo,m,"internal-error");default:rt(T.email,m,"internal-error")}let ne=null;return T.mfaInfo&&(ne=fs._fromServerResponse(Ln(m),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:ne},operation:W}})).apply(this,arguments)}function Br(){return(Br=(0,w.Z)(function*(b,g){const{data:m}=yield ft((0,se.m9)(b),g);return m.email})).apply(this,arguments)}function To(){return(To=(0,w.Z)(function*(b,g,m){const T=Ln(b),W=yield Dr(T,{returnSecureToken:!0,email:g,password:m}),ne=yield Ur._fromIdTokenResponse(T,"signIn",W);return yield T._updateCurrentUser(ne.user),ne})).apply(this,arguments)}function ga(){return(ga=(0,w.Z)(function*(b,g,m){const T=(0,se.m9)(b),W={requestType:"EMAIL_SIGNIN",email:g};rt(m.handleCodeInApp,T,"argument-error"),m&&Qi(T,W,m),yield In(T,W)})).apply(this,arguments)}function Na(){return(Na=(0,w.Z)(function*(b,g,m){const T=(0,se.m9)(b),W=Yr.credentialWithLink(g,m||at());return rt(W._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),k(T,W)})).apply(this,arguments)}function ma(b,g){return jr.apply(this,arguments)}function jr(){return(jr=(0,w.Z)(function*(b,g){return Lt(b,"POST","/v1/accounts:createAuthUri",mn(b,g))})).apply(this,arguments)}function Go(){return(Go=(0,w.Z)(function*(b,g){const T={identifier:g,continueUri:Ot()?at():"http://localhost"},{signinMethods:W}=yield ma((0,se.m9)(b),T);return W||[]})).apply(this,arguments)}function Ji(){return(Ji=(0,w.Z)(function*(b,g){const m=(0,se.m9)(b),W={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&Qi(m.auth,W,g);const{email:ne}=yield mt(m.auth,W);ne!==b.email&&(yield b.reload())})).apply(this,arguments)}function zo(){return(zo=(0,w.Z)(function*(b,g,m){const T=(0,se.m9)(b),ne={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};m&&Qi(T.auth,ne,m);const{email:Ne}=yield Xn(T.auth,ne);Ne!==b.email&&(yield b.reload())})).apply(this,arguments)}function kr(b,g){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,w.Z)(function*(b,g){return Lt(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ko(){return(Ko=(0,w.Z)(function*(b,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const T=(0,se.m9)(b),ne={idToken:yield T.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},Ne=yield ei(T,kr(T.auth,ne));T.displayName=Ne.displayName||null,T.photoURL=Ne.photoUrl||null;const Ze=T.providerData.find(({providerId:Et})=>"password"===Et);Ze&&(Ze.displayName=T.displayName,Ze.photoURL=T.photoURL),yield T._updateTokensIfNecessary(Ne)})).apply(this,arguments)}function ka(b,g,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,w.Z)(function*(b,g,m){const{auth:T}=b,ne={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(ne.email=g),m&&(ne.password=m);const Ne=yield ei(b,Os(T,ne));yield b._updateTokensIfNecessary(Ne,!0)})).apply(this,arguments)}class fo{constructor(g,m,T={}){this.isNewUser=g,this.providerId=m,this.profile=T}}class el extends fo{constructor(g,m,T,W){super(g,m,T),this.username=W}}class Xs extends fo{constructor(g,m){super(g,"facebook.com",m)}}class bl extends el{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class tl extends fo{constructor(g,m){super(g,"google.com",m)}}class nl extends el{constructor(g,m,T){super(g,"twitter.com",m,T)}}function Ao(b){const{user:g,_tokenResponse:m}=b;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(b){var g,m;if(!b)return null;const{providerId:T}=b,W=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},ne=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!T&&(null==b?void 0:b.idToken)){const Ne=null===(m=null===(g=It(b.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(Ne)return new fo(ne,"anonymous"!==Ne&&"custom"!==Ne?Ne:null)}if(!T)return null;switch(T){case"facebook.com":return new Xs(ne,W);case"github.com":return new bl(ne,W);case"google.com":return new tl(ne,W);case"twitter.com":return new nl(ne,W,b.screenName||null);case"custom":case"anonymous":return new fo(ne,null);default:return new fo(ne,T,W)}}(m)}class Ai{constructor(g,m){this.type=g,this.credential=m}static _fromIdtoken(g){return new Ai("enroll",g)}static _fromMfaPendingCredential(g){return new Ai("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,T;if(null==g?void 0:g.multiFactorSession){if(null===(m=g.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Ai._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(T=g.multiFactorSession)||void 0===T?void 0:T.idToken)return Ai._fromIdtoken(g.multiFactorSession.idToken)}return null}}class ir{constructor(g,m,T){this.session=g,this.hints=m,this.signInResolver=T}static _fromError(g,m){const T=Ln(g),W=m.customData._serverResponse,ne=(W.mfaInfo||[]).map(Ze=>fs._fromServerResponse(T,Ze));rt(W.mfaPendingCredential,T,"internal-error");const Ne=Ai._fromMfaPendingCredential(W.mfaPendingCredential);return new ir(Ne,ne,function(){var Ze=(0,w.Z)(function*(Et){const kt=yield Et._process(T,Ne);delete W.mfaInfo,delete W.mfaPendingCredential;const on=Object.assign(Object.assign({},W),{idToken:kt.idToken,refreshToken:kt.refreshToken});switch(m.operationType){case"signIn":const en=yield Ur._fromIdTokenResponse(T,m.operationType,on);return yield T._updateCurrentUser(en.user),en;case"reauthenticate":return rt(m.user,T,"internal-error"),Ur._forOperation(m.user,m.operationType,on);default:Ie(T,"internal-error")}});return function(Et){return Ze.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,w.Z)(function*(){return m.signInResolver(g)})()}}function La(b,g){return Lt(b,"POST","/v2/accounts/mfaEnrollment:start",mn(b,g))}class pr{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(T=>fs._fromServerResponse(g.auth,T)))})}static _fromUser(g){return new pr(g)}getSession(){var g=this;return(0,w.Z)(function*(){return Ai._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,m){var T=this;return(0,w.Z)(function*(){const W=g,ne=yield T.getSession(),Ne=yield ei(T.user,W._process(T.user.auth,ne,m));return yield T.user._updateTokensIfNecessary(Ne),T.user.reload()})()}unenroll(g){var m=this;return(0,w.Z)(function*(){const T="string"==typeof g?g:g.uid,W=yield m.user.getIdToken(),ne=yield ei(m.user,function(b,g){return Lt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",mn(b,g))}(m.user.auth,{idToken:W,mfaEnrollmentId:T}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Ne})=>Ne!==T),yield m.user._updateTokensIfNecessary(ne);try{yield m.user.reload()}catch(Ne){if("auth/user-token-expired"!==Ne.code)throw Ne}})()}}const nn=new WeakMap,ps="__sak";class gs{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ps,"1"),this.storage.removeItem(ps),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const we=(()=>{class b extends gs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,T)=>this.onStorageEvent(m,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const b=(0,se.z$)();return hn(b)||Jn(b)}()&&function(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=vt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const T of Object.keys(this.listeners)){const W=this.storage.getItem(T),ne=this.localCache[T];W!==ne&&m(T,ne,W)}}onStorageEvent(m,T=!1){if(!m.key)return void this.forAllChangedKeys((Ze,Et,kt)=>{this.notifyListeners(Ze,kt)});const W=m.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ze=this.storage.getItem(W);if(m.newValue!==Ze)null!==m.newValue?this.storage.setItem(W,m.newValue):this.storage.removeItem(W);else if(this.localCache[W]===m.newValue&&!T)return}const ne=()=>{const Ze=this.storage.getItem(W);!T&&this.localCache[W]===Ze||this.notifyListeners(W,Ze)},Ne=this.storage.getItem(W);(0,se.w1)()&&10===document.documentMode&&Ne!==m.newValue&&m.newValue!==m.oldValue?setTimeout(ne,10):ne()}notifyListeners(m,T){this.localCache[m]=T;const W=this.listeners[m];if(W)for(const ne of Array.from(W))ne(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,T,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:T,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,T){var W=()=>super._set,ne=this;return(0,w.Z)(function*(){yield W().call(ne,m,T),ne.localCache[m]=JSON.stringify(T)})()}_get(m){var T=()=>super._get,W=this;return(0,w.Z)(function*(){const ne=yield T().call(W,m);return W.localCache[m]=JSON.stringify(ne),ne})()}_remove(m){var T=()=>super._remove,W=this;return(0,w.Z)(function*(){yield T().call(W,m),delete W.localCache[m]})()}}return b.type="LOCAL",b})(),Bt=(()=>{class b extends gs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,T){}_removeListener(m,T){}}return b.type="SESSION",b})();let ji=(()=>{class b{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const T=this.receivers.find(ne=>ne.isListeningto(m));if(T)return T;const W=new b(m);return this.receivers.push(W),W}isListeningto(m){return this.eventTarget===m}handleEvent(m){var T=this;return(0,w.Z)(function*(){const W=m,{eventId:ne,eventType:Ne,data:Ze}=W.data,Et=T.handlersMap[Ne];if(!(null==Et?void 0:Et.size))return;W.ports[0].postMessage({status:"ack",eventId:ne,eventType:Ne});const kt=Array.from(Et).map(function(){var en=(0,w.Z)(function*(hi){return hi(W.origin,Ze)});return function(hi){return en.apply(this,arguments)}}()),on=yield function(b){return Promise.all(b.map(function(){var g=(0,w.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(T){return{fulfilled:!1,reason:T}}});return function(m){return g.apply(this,arguments)}}()))}(kt);W.ports[0].postMessage({status:"done",eventId:ne,eventType:Ne,response:on})})()}_subscribe(m,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(T)}_unsubscribe(m,T){this.handlersMap[m]&&T&&this.handlersMap[m].delete(T),(!T||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function si(b="",g=10){let m="";for(let T=0;T<g;T++)m+=Math.floor(10*Math.random());return b+m}class es{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,T=50){var W=this;return(0,w.Z)(function*(){const ne="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ne)throw new Error("connection_unavailable");let Ne,Ze;return new Promise((Et,kt)=>{const on=si("",20);ne.port1.start();const en=setTimeout(()=>{kt(new Error("unsupported_event"))},T);Ze={messageChannel:ne,onMessage(hi){const Co=hi;if(Co.data.eventId===on)switch(Co.data.status){case"ack":clearTimeout(en),Ne=setTimeout(()=>{kt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ne),Et(Co.data.response);break;default:clearTimeout(en),clearTimeout(Ne),kt(new Error("invalid_response"))}}},W.handlers.add(Ze),ne.port1.addEventListener("message",Ze.onMessage),W.target.postMessage({eventType:g,eventId:on,data:m},[ne.port2])}).finally(()=>{Ze&&W.removeMessageHandler(Ze)})})()}}function Wr(){return window}function Tu(){return void 0!==Wr().WorkerGlobalScope&&"function"==typeof Wr().importScripts}function Ws(){return(Ws=(0,w.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const ci="firebaseLocalStorageDb",xi="firebaseLocalStorage",il="fbase_key";class Hi{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function bt(b,g){return b.transaction([xi],g?"readwrite":"readonly").objectStore(xi)}function Yo(){const b=indexedDB.open(ci,1);return new Promise((g,m)=>{b.addEventListener("error",()=>{m(b.error)}),b.addEventListener("upgradeneeded",()=>{const T=b.result;try{T.createObjectStore(xi,{keyPath:il})}catch(W){m(W)}}),b.addEventListener("success",(0,w.Z)(function*(){const T=b.result;T.objectStoreNames.contains(xi)?g(T):(T.close(),yield function(){const b=indexedDB.deleteDatabase(ci);return new Hi(b).toPromise()}(),g(yield Yo()))}))})}function Qo(b,g,m){return qt.apply(this,arguments)}function qt(){return(qt=(0,w.Z)(function*(b,g,m){const T=bt(b,!0).put({[il]:g,value:m});return new Hi(T).toPromise()})).apply(this,arguments)}function P(){return(P=(0,w.Z)(function*(b,g){const m=bt(b,!1).get(g),T=yield new Hi(m).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function I(b,g){const m=bt(b,!0).delete(g);return new Hi(m).toPromise()}const X=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,w.Z)(function*(){return m.db||(m.db=yield Yo()),m.db})()}_withRetries(m){var T=this;return(0,w.Z)(function*(){let W=0;for(;;)try{const ne=yield T._openDb();return yield m(ne)}catch(ne){if(W++>3)throw ne;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,w.Z)(function*(){return Tu()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,w.Z)(function*(){m.receiver=ji._getInstance(Tu()?self:null),m.receiver._subscribe("keyChanged",function(){var T=(0,w.Z)(function*(W,ne){return{keyProcessed:(yield m._poll()).includes(ne.key)}});return function(W,ne){return T.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var T=(0,w.Z)(function*(W,ne){return["keyChanged"]});return function(W,ne){return T.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,w.Z)(function*(){var T,W;if(m.activeServiceWorker=yield function(){return Ws.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new es(m.activeServiceWorker);const ne=yield m.sender._send("ping",{},800);!ne||(null===(T=ne[0])||void 0===T?void 0:T.fulfilled)&&(null===(W=ne[0])||void 0===W?void 0:W.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var T=this;return(0,w.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:m},T.serviceWorkerReceiverAvailable?800:50)}catch(W){}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Yo();return yield Qo(m,ps,"1"),yield I(m,ps),!0}catch(m){}return!1})()}_withPendingWrite(m){var T=this;return(0,w.Z)(function*(){T.pendingWrites++;try{yield m()}finally{T.pendingWrites--}})()}_set(m,T){var W=this;return(0,w.Z)(function*(){return W._withPendingWrite((0,w.Z)(function*(){return yield W._withRetries(ne=>Qo(ne,m,T)),W.localCache[m]=T,W.notifyServiceWorker(m)}))})()}_get(m){var T=this;return(0,w.Z)(function*(){const W=yield T._withRetries(ne=>function(b,g){return P.apply(this,arguments)}(ne,m));return T.localCache[m]=W,W})()}_remove(m){var T=this;return(0,w.Z)(function*(){return T._withPendingWrite((0,w.Z)(function*(){return yield T._withRetries(W=>I(W,m)),delete T.localCache[m],T.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,w.Z)(function*(){const T=yield m._withRetries(Ne=>{const Ze=bt(Ne,!1).getAll();return new Hi(Ze).toPromise()});if(!T)return[];if(0!==m.pendingWrites)return[];const W=[],ne=new Set;for(const{fbase_key:Ne,value:Ze}of T)ne.add(Ne),JSON.stringify(m.localCache[Ne])!==JSON.stringify(Ze)&&(m.notifyListeners(Ne,Ze),W.push(Ne));for(const Ne of Object.keys(m.localCache))m.localCache[Ne]&&!ne.has(Ne)&&(m.notifyListeners(Ne,null),W.push(Ne));return W})()}notifyListeners(m,T){this.localCache[m]=T;const W=this.listeners[m];if(W)for(const ne of Array.from(W))ne(T)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function ve(b,g){return Lt(b,"POST","/v2/accounts/mfaSignIn:start",mn(b,g))}function wt(){return(wt=(0,w.Z)(function*(b){return(yield Lt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function cn(b){return new Promise((g,m)=>{const T=document.createElement("script");T.setAttribute("src",b),T.onload=g,T.onerror=W=>{const ne=lt("internal-error");ne.customData=W,m(ne)},T.type="text/javascript",T.charset="UTF-8",function(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(T)})}function gr(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Gr=1e12;class Ri{constructor(g){this.auth=g,this.counter=Gr,this._widgets=new Map}render(g,m){const T=this.counter;return this._widgets.set(T,new Rt(g,this.auth.name,m||{})),this.counter++,T}reset(g){var m;const T=g||Gr;null===(m=this._widgets.get(T))||void 0===m||m.delete(),this._widgets.delete(T)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Gr))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,w.Z)(function*(){var T;return null===(T=m._widgets.get(g||Gr))||void 0===T||T.execute(),""})()}}class Rt{constructor(g,m,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const W="string"==typeof g?document.getElementById(g):g;rt(W,"argument-error",{appName:m}),this.container=W,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(b){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<50;T++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}();const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch(T){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(T){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const mi=gr("rcb"),$i=new Ht(3e4,6e4);class Uc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Wr().grecaptcha}load(g,m=""){return rt((b=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Wr().grecaptcha):new Promise((T,W)=>{const ne=Wr().setTimeout(()=>{W(lt(g,"network-request-failed"))},$i.get());Wr()[mi]=()=>{Wr().clearTimeout(ne),delete Wr()[mi];const Ze=Wr().grecaptcha;if(!Ze)return void W(lt(g,"internal-error"));const Et=Ze.render;Ze.render=(kt,on)=>{const en=Et(kt,on);return this.counter++,en},this.hostLanguage=m,T(Ze)},cn(`https://www.google.com/recaptcha/api.js??${(0,se.xO)({onload:mi,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(ne),W(lt(g,"internal-error"))})});var b}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Wr().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bc{load(g){return(0,w.Z)(function*(){return new Ri(g)})()}clearedOneInstance(){}}const wr="recaptcha",yr={theme:"light",type:"image"};class Ad{constructor(g,m=Object.assign({},yr),T){this.parameters=m,this.type=wr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(T),this.isInvisible="invisible"===this.parameters.size,rt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const W="string"==typeof g?document.getElementById(g):g;rt(W,this.auth,"argument-error"),this.container=W,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bc:new Uc,this.validateStartingState()}verify(){var g=this;return(0,w.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),T=g.getAssertedRecaptcha();return T.getResponse(m)||new Promise(ne=>{const Ne=Ze=>{!Ze||(g.tokenChangeListeners.delete(Ne),ne(Ze))};g.tokenChangeListeners.add(Ne),g.isInvisible&&T.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){rt(!this.parameters.sitekey,this.auth,"argument-error"),rt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),rt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(T=>T(m)),"function"==typeof g)g(m);else if("string"==typeof g){const T=Wr()[g];"function"==typeof T&&T(m)}}}assertNotDestroyed(){rt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,w.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const T=document.createElement("div");m.appendChild(T),m=T}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,w.Z)(function*(){rt(Ot()&&!Tu(),g.auth,"internal-error"),yield function(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function(b){return wt.apply(this,arguments)}(g.auth);rt(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return rt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ql{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=Yi._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function ts(){return(ts=(0,w.Z)(function*(b,g,m){const T=Ln(b),W=yield oc(T,g,(0,se.m9)(m));return new ql(W,ne=>k(T,ne))})).apply(this,arguments)}function go(){return(go=(0,w.Z)(function*(b,g,m){const T=(0,se.m9)(b);yield H(!1,T,"phone");const W=yield oc(T.auth,g,(0,se.m9)(m));return new ql(W,ne=>q(T,ne))})).apply(this,arguments)}function wa(){return(wa=(0,w.Z)(function*(b,g,m){const T=(0,se.m9)(b),W=yield oc(T.auth,g,(0,se.m9)(m));return new ql(W,ne=>pt(T,ne))})).apply(this,arguments)}function oc(b,g,m){return Va.apply(this,arguments)}function Va(){return(Va=(0,w.Z)(function*(b,g,m){var T;const W=yield m.verify();try{let ne;if(rt("string"==typeof W,b,"argument-error"),rt(m.type===wr,b,"argument-error"),ne="string"==typeof g?{phoneNumber:g}:g,"session"in ne){const Ne=ne.session;if("phoneNumber"in ne)return rt("enroll"===Ne.type,b,"internal-error"),(yield La(b,{idToken:Ne.credential,phoneEnrollmentInfo:{phoneNumber:ne.phoneNumber,recaptchaToken:W}})).phoneSessionInfo.sessionInfo;{rt("signin"===Ne.type,b,"internal-error");const Ze=(null===(T=ne.multiFactorHint)||void 0===T?void 0:T.uid)||ne.multiFactorUid;return rt(Ze,b,"missing-multi-factor-info"),(yield ve(b,{mfaPendingCredential:Ne.credential,mfaEnrollmentId:Ze,phoneSignInInfo:{recaptchaToken:W}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ne}=yield ao(b,{phoneNumber:ne.phoneNumber,recaptchaToken:W});return Ne}}finally{m._reset()}})).apply(this,arguments)}function zr(){return(zr=(0,w.Z)(function*(b,g){yield B((0,se.m9)(b),g)})).apply(this,arguments)}let mo=(()=>{class b{constructor(m){this.providerId=b.PROVIDER_ID,this.auth=Ln(m)}verifyPhoneNumber(m,T){return oc(this.auth,m,(0,se.m9)(T))}static credential(m,T){return Yi._fromVerification(m,T)}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:T,temporaryProof:W}=m;return T&&W?Yi._fromTokenResponse(T,W):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Ea(b,g){return g?xe(g):(rt(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Xt extends Or{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return rr(g,this._buildIdpRequest())}_linkToIdToken(g,m){return rr(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return rr(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function Zl(b){return ht(b.auth,new Xt(b),b.bypassAuthState)}function yi(b){const{auth:g,user:m}=b;return rt(m,g,"internal-error"),Ce(m,new Xt(b),b.bypassAuthState)}function _o(b){return xo.apply(this,arguments)}function xo(){return(xo=(0,w.Z)(function*(b){const{auth:g,user:m}=b;return rt(m,g,"internal-error"),B(m,new Xt(b),b.bypassAuthState)})).apply(this,arguments)}class sl{constructor(g,m,T,W,ne=!1){this.auth=g,this.resolver=T,this.user=W,this.bypassAuthState=ne,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,w.Z)(function*(T,W){g.pendingPromise={resolve:T,reject:W};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(ne){g.reject(ne)}});return function(T,W){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,w.Z)(function*(){const{urlResponse:T,sessionId:W,postBody:ne,tenantId:Ne,error:Ze,type:Et}=g;if(Ze)return void m.reject(Ze);const kt={auth:m.auth,requestUri:T,sessionId:W,tenantId:Ne||void 0,postBody:ne||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Et)(kt))}catch(on){m.reject(on)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Zl;case"linkViaPopup":case"linkViaRedirect":return _o;case"reauthViaPopup":case"reauthViaRedirect":return yi;default:Ie(this.auth,"internal-error")}}resolve(g){Ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ro=new Ht(2e3,1e4);function Yl(){return(Yl=(0,w.Z)(function*(b,g,m){const T=Ln(b);Wt(b,g,Kn);const W=Ea(T,m);return new ns(T,"signInViaPopup",g,W).executeNotNull()})).apply(this,arguments)}function jc(){return(jc=(0,w.Z)(function*(b,g,m){const T=(0,se.m9)(b);Wt(T.auth,g,Kn);const W=Ea(T.auth,m);return new ns(T.auth,"reauthViaPopup",g,W,T).executeNotNull()})).apply(this,arguments)}function Ua(){return(Ua=(0,w.Z)(function*(b,g,m){const T=(0,se.m9)(b);Wt(T.auth,g,Kn);const W=Ea(T.auth,m);return new ns(T.auth,"linkViaPopup",g,W,T).executeNotNull()})).apply(this,arguments)}let ns=(()=>{class b extends sl{constructor(m,T,W,ne,Ne){super(m,T,ne,Ne),this.provider=W,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var m=this;return(0,w.Z)(function*(){const T=yield m.execute();return rt(T,m.auth,"internal-error"),T})()}onExecution(){var m=this;return(0,w.Z)(function*(){Ae(1===m.filter.length,"Popup operations only handle one event");const T=si();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],T),m.authWindow.associatedEvent=T,m.resolver._originValidation(m.auth).catch(W=>{m.reject(W)}),m.resolver._isIframeWebStorageSupported(m.auth,W=>{W||m.reject(lt(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(lt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const m=()=>{var T,W;this.pollId=(null===(W=null===(T=this.authWindow)||void 0===T?void 0:T.window)||void 0===W?void 0:W.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(lt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Ro.get())};m()}}return b.currentPopupAction=null,b})();const di=new Map;class Cf extends sl{constructor(g,m,T=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,T),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,w.Z)(function*(){let T=di.get(m.auth._key());if(!T){try{const ne=(yield function(b,g){return Sd.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;T=()=>Promise.resolve(ne)}catch(W){T=()=>Promise.reject(W)}di.set(m.auth._key(),T)}return m.bypassAuthState||di.set(m.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,T=this;return(0,w.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(T,g);if("unknown"!==g.type){if(g.eventId){const W=yield T.auth._redirectUserForId(g.eventId);if(W)return T.user=W,m().call(T,g);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function Sd(){return(Sd=(0,w.Z)(function*(b,g){const m=Ca(g),T=Jl(b);if(!(yield T._isAvailable()))return!1;const W="true"===(yield T._get(m));return yield T._remove(m),W})).apply(this,arguments)}function $c(b,g){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,w.Z)(function*(b,g){return Jl(b)._set(Ca(g),"true")})).apply(this,arguments)}function Jl(b){return xe(b._redirectPersistence)}function Ca(b){return Lr("pendingRedirect",b.config.apiKey,b.name)}function Ru(){return(Ru=(0,w.Z)(function*(b,g,m){const T=Ln(b);Wt(b,g,Kn);const W=Ea(T,m);return yield $c(W,T),W._openRedirect(T,g,"signInViaRedirect")})).apply(this,arguments)}function Gs(){return(Gs=(0,w.Z)(function*(b,g,m){const T=(0,se.m9)(b);Wt(T.auth,g,Kn);const W=Ea(T.auth,m);yield $c(W,T.auth);const ne=yield Al(T);return W._openRedirect(T.auth,g,"reauthViaRedirect",ne)})).apply(this,arguments)}function eu(){return(eu=(0,w.Z)(function*(b,g,m){const T=(0,se.m9)(b);Wt(T.auth,g,Kn);const W=Ea(T.auth,m);yield H(!1,T,g.providerId),yield $c(W,T.auth);const ne=yield Al(T);return W._openRedirect(T.auth,g,"linkViaRedirect",ne)})).apply(this,arguments)}function Ou(){return(Ou=(0,w.Z)(function*(b,g){return yield Ln(b)._initializationPromise,Xo(b,g,!1)})).apply(this,arguments)}function Xo(b,g){return zs.apply(this,arguments)}function zs(){return(zs=(0,w.Z)(function*(b,g,m=!1){const T=Ln(b),W=Ea(T,g),Ne=yield new Cf(T,W,m).execute();return Ne&&!m&&(delete Ne.user._redirectEventId,yield T._persistUserIfCurrent(Ne.user),yield T._setRedirectUser(null,g)),Ne})).apply(this,arguments)}function Al(b){return tu.apply(this,arguments)}function tu(){return(tu=(0,w.Z)(function*(b){const g=si(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class Oo{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(g,T)&&(m=!0,this.sendToConsumer(g,T),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tr(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var T;if(g.error&&!tr(g)){const W=(null===(T=g.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";m.onError(lt(this.auth,W))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const T=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&T}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ph(g))}saveEventToCache(g){this.cachedEventUids.add(ph(g)),this.lastProcessedEventTime=Date.now()}}function ph(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function tr({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===(null==g?void 0:g.code)}function al(b){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,w.Z)(function*(b,g={}){return Lt(b,"GET","/v1/projects",g)})).apply(this,arguments)}const lc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wc=/^https?/;function vi(){return(vi=(0,w.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield al(b);for(const m of g)try{if(ea(m))return}catch(T){}Ie(b,"unauthorized-domain")})).apply(this,arguments)}function ea(b){const g=at(),{protocol:m,hostname:T}=new URL(g);if(b.startsWith("chrome-extension://")){const Ne=new URL(b);return""===Ne.hostname&&""===T?"chrome-extension:"===m&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&Ne.hostname===T}if(!Wc.test(m))return!1;if(lc.test(b))return T===b;const W=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(T)}const yo=new Ht(3e4,6e4);function xl(){const b=Wr().___jsl;if(null==b?void 0:b.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let m=0;m<b.CP.length;m++)b.CP[m]=null}let Po=null;function cc(b){return Po=Po||function(b){return new Promise((g,m)=>{var T,W,ne;function Ne(){xl(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{xl(),m(lt(b,"network-request-failed"))},timeout:yo.get()})}if(null===(W=null===(T=Wr().gapi)||void 0===T?void 0:T.iframes)||void 0===W?void 0:W.Iframe)g(gapi.iframes.getContext());else{if(!(null===(ne=Wr().gapi)||void 0===ne?void 0:ne.load)){const Ze=gr("iframefcb");return Wr()[Ze]=()=>{gapi.load?Ne():m(lt(b,"network-request-failed"))},cn(`https://apis.google.com/js/api.js?onload=${Ze}`).catch(Et=>m(Et))}Ne()}}).catch(g=>{throw Po=null,g})}(b),Po}const gh=new Ht(5e3,15e3),nu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Df(b){const g=b.config;rt(g.authDomain,b,"auth-domain-config-required");const m=g.emulator?dn(g,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,T={apiKey:g.apiKey,appName:b.name,v:De.SDK_VERSION},W=Rl.get(b.config.apiHost);W&&(T.eid=W);const ne=b._getFrameworks();return ne.length&&(T.fw=ne.join(",")),`${m}?${(0,se.xO)(T).slice(1)}`}function Pu(){return(Pu=(0,w.Z)(function*(b){const g=yield cc(b),m=Wr().gapi;return rt(m,b,"internal-error"),g.open({where:document.body,url:Df(b),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nu,dontclear:!0},T=>new Promise(function(){var W=(0,w.Z)(function*(ne,Ne){yield T.restyle({setHideOnLeave:!1});const Ze=lt(b,"network-request-failed"),Et=Wr().setTimeout(()=>{Ne(Ze)},gh.get());function kt(){Wr().clearTimeout(Et),ne(T)}T.ping(kt).then(kt,()=>{Ne(Ze)})});return function(ne,Ne){return W.apply(this,arguments)}}()))})).apply(this,arguments)}const Mu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ba{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function wh(b,g,m,T,W,ne){rt(b.config.authDomain,b,"auth-domain-config-required"),rt(b.config.apiKey,b,"invalid-api-key");const Ne={apiKey:b.config.apiKey,appName:b.name,authType:m,redirectUrl:T,v:De.SDK_VERSION,eventId:W};if(g instanceof Kn){g.setDefaultLanguage(b.languageCode),Ne.providerId=g.providerId||"",(0,se.xb)(g.getCustomParameters())||(Ne.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Et,kt]of Object.entries(ne||{}))Ne[Et]=kt}if(g instanceof ks){const Et=g.getScopes().filter(kt=>""!==kt);Et.length>0&&(Ne.scopes=Et.join(","))}b.tenantId&&(Ne.tid=b.tenantId);const Ze=Ne;for(const Et of Object.keys(Ze))void 0===Ze[Et]&&delete Ze[Et];return`${function({config:b}){return b.emulator?dn(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,se.xO)(Ze).slice(1)}`}const ul="webStorageSupport";class ja extends class{constructor(g){this.factorId=g}_process(g,m,T){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,T);case"signin":return this._finalizeSignIn(g,m.credential);default:return Be("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new ja(g)}_finalizeEnroll(g,m,T){return function(b,g){return Lt(b,"POST","/v2/accounts/mfaEnrollment:finalize",mn(b,g))}(g,{idToken:m,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function(b,g){return Lt(b,"POST","/v2/accounts/mfaSignIn:finalize",mn(b,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Kc=(()=>{class b{constructor(){}static assertion(m){return ja._fromCredential(m)}}return b.FACTOR_ID="phone",b})();var b,Od="@firebase/auth";class Ol{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,w.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(T=>{var W;g((null===(W=T)||void 0===W?void 0:W.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vo(){return window}function wi(){return(wi=(0,w.Z)(function*(b,g,m){var T;const{BuildInfo:W}=vo();Ae(g.sessionId,"AuthEvent did not contain a session ID");const ne=yield Oi(g.sessionId),Ne={};return Jn()?Ne.ibi=W.packageName:yn()?Ne.apn=W.packageName:Ie(b,"operation-not-supported-in-this-environment"),W.displayName&&(Ne.appDisplayName=W.displayName),Ne.sessionId=ne,wh(b,m,g.type,void 0,null!==(T=g.eventId)&&void 0!==T?T:void 0,Ne)})).apply(this,arguments)}function Zc(){return(Zc=(0,w.Z)(function*(b){const{BuildInfo:g}=vo(),m={};Jn()?m.iosBundleId=g.packageName:yn()?m.androidPackageName=g.packageName:Ie(b,"operation-not-supported-in-this-environment"),yield al(b,m)})).apply(this,arguments)}function Vu(){return(Vu=(0,w.Z)(function*(b,g,m){const{cordova:T}=vo();let W=()=>{};try{yield new Promise((ne,Ne)=>{let Ze=null;function Et(){var en;ne();const hi=null===(en=T.plugins.browsertab)||void 0===en?void 0:en.close;"function"==typeof hi&&hi(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function kt(){Ze||(Ze=window.setTimeout(()=>{Ne(lt(b,"redirect-cancelled-by-user"))},2e3))}function on(){"visible"===(null==document?void 0:document.visibilityState)&&kt()}g.addPassiveListener(Et),document.addEventListener("resume",kt,!1),yn()&&document.addEventListener("visibilitychange",on,!1),W=()=>{g.removePassiveListener(Et),document.removeEventListener("resume",kt,!1),document.removeEventListener("visibilitychange",on,!1),Ze&&window.clearTimeout(Ze)}})}finally{W()}})).apply(this,arguments)}function Oi(b){return Md.apply(this,arguments)}function Md(){return(Md=(0,w.Z)(function*(b){const g=Ch(b),m=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(m)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ch(b){if(Ae(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const g=new ArrayBuffer(b.length),m=new Uint8Array(g);for(let T=0;T<b.length;T++)m[T]=b.charCodeAt(T);return m}b="Browser",(0,De._registerComponent)(new ge.wA("auth",(g,{options:m})=>{const T=g.getProvider("app").getImmediate(),{apiKey:W,authDomain:ne}=T.options;return(Ne=>{rt(W&&!W.includes(":"),"invalid-api-key",{appName:Ne.name}),rt(!(null==ne?void 0:ne.includes(":")),"argument-error",{appName:Ne.name});const Ze={apiKey:W,authDomain:ne,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rn(b)},Et=new Rr(Ne,Ze);return function(b,g){const m=(null==g?void 0:g.persistence)||[],T=(Array.isArray(m)?m:[m]).map(xe);(null==g?void 0:g.errorMap)&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(T,null==g?void 0:g.popupRedirectResolver)}(Et,m),Et})(T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,T)=>{g.getProvider("auth-internal").initialize()})),(0,De._registerComponent)(new ge.wA("auth-internal",g=>{const m=Ln(g.getProvider("auth").getImmediate());return new Ol(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,De.registerVersion)(Od,"0.19.4",void 0),(0,De.registerVersion)(Od,"0.19.4","esm2017");class Nd extends Oo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,w.Z)(function*(){yield g.initPromise})()}}function hc(b){return su.apply(this,arguments)}function su(){return(su=(0,w.Z)(function*(b){const g=yield fc()._get(Uu(b));return g&&(yield fc()._remove(Uu(b))),g})).apply(this,arguments)}function Bp(){const b=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const T=Math.floor(Math.random()*g.length);b.push(g.charAt(T))}return b.join("")}function fc(){return xe(we)}function Uu(b){return Lr("authEvent",b.config.apiKey,b.name)}function au(b){if(!(null==b?void 0:b.includes("?")))return{};const[g,...m]=b.split("?");return(0,se.zd)(m.join("?"))}function Yc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:lt("no-auth-event")}}function Da(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function Jc(b=(0,se.z$)()){return!("file:"!==Da()&&"ionic:"!==Da()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Bs(){try{const b=self.localStorage,g=si();if(b)return b.setItem(g,"1"),b.removeItem(g),!function(b=(0,se.z$)()){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)||function(b=(0,se.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,se.hl)()}catch(b){return Bu()&&(0,se.hl)()}return!1}function Bu(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xc(){return("http:"===Da()||"https:"===Da()||(0,se.ru)()||Jc())&&!((0,se.b$)()||(0,se.UG)())&&Bs()&&!Bu()}function ju(){return Jc()&&"undefined"!=typeof document}function td(){return(td=(0,w.Z)(function*(){return!!ju()&&new Promise(b=>{const g=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),b(!0)})})})).apply(this,arguments)}const wo={LOCAL:"local",NONE:"none",SESSION:"session"},gc=rt,nd="persistence";function Ei(b){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,w.Z)(function*(b){yield b._initializationPromise;const g=mc(),m=Lr(nd,b.config.apiKey,b.name);(null==g?void 0:g.sessionStorage)&&g.sessionStorage.setItem(m,b._getPersistence())})).apply(this,arguments)}function mc(){return"undefined"!=typeof window?window:null}const rs=rt;class eo{constructor(){this.browserResolver=xe(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bt,this._completeRedirectFn=Xo}_openPopup(g,m,T,W){var ne=this;return(0,w.Z)(function*(){var Ne;Ae(null===(Ne=ne.eventManagers[g._key()])||void 0===Ne?void 0:Ne.manager,"_initialize() not called before _openPopup()");const Ze=wh(g,m,T,at(),W);return function(b,g,m,T=500,W=600){const ne=Math.max((window.screen.availHeight-W)/2,0).toString(),Ne=Math.max((window.screen.availWidth-T)/2,0).toString();let Ze="";const Et=Object.assign(Object.assign({},Mu),{width:T.toString(),height:W.toString(),top:ne,left:Ne}),kt=(0,se.z$)().toLowerCase();m&&(Ze=Ki(kt)?"_blank":m),xs(kt)&&(g=g||"http://localhost",Et.scrollbars="yes");const on=Object.entries(Et).reduce((hi,[Co,uu])=>`${hi}${Co}=${uu},`,"");if(function(b=(0,se.z$)()){var g;return Jn(b)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(kt)&&"_self"!==Ze)return function(b,g){const m=document.createElement("a");m.href=b,m.target=g;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(T)}(g||"",Ze),new Ba(null);const en=window.open(g||"",Ze,on);rt(en,b,"popup-blocked");try{en.focus()}catch(hi){}return new Ba(en)}(g,Ze,si())})()}_openRedirect(g,m,T,W){var ne=this;return(0,w.Z)(function*(){return yield ne._originValidation(g),b=wh(g,m,T,at(),W),Wr().location.href=b,new Promise(()=>{});var b})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:W,promise:ne}=this.eventManagers[m];return W?Promise.resolve(W):(Ae(ne,"If manager is not set, promise should be"),ne)}const T=this.initAndGetManager(g);return this.eventManagers[m]={promise:T},T.catch(()=>{delete this.eventManagers[m]}),T}initAndGetManager(g){var m=this;return(0,w.Z)(function*(){const T=yield function(b){return Pu.apply(this,arguments)}(g),W=new Oo(g);return T.register("authEvent",ne=>(rt(null==ne?void 0:ne.authEvent,g,"invalid-auth-event"),{status:W.onEvent(ne.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:W},m.iframes[g._key()]=T,W})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(ul,{type:ul},W=>{var ne;const Ne=null===(ne=null==W?void 0:W[0])||void 0===ne?void 0:ne[ul];void 0!==Ne&&m(!!Ne),Ie(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(b){return vi.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return vt()||hn()||Jn()}}),this.cordovaResolver=xe(class{constructor(){this._redirectPersistence=Bt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xo}_initialize(g){var m=this;return(0,w.Z)(function*(){const T=g._key();let W=m.eventManagers.get(T);return W||(W=new Nd(g),m.eventManagers.set(T,W),m.attachCallbackListeners(g,W)),W})()}_openPopup(g){Ie(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,T,W){var ne=this;return(0,w.Z)(function*(){!function(b){var g,m,T,W,ne,Ne,Ze,Et,kt,on;const en=vo();rt("function"==typeof(null===(g=null==en?void 0:en.universalLinks)||void 0===g?void 0:g.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),rt(void 0!==(null===(m=null==en?void 0:en.BuildInfo)||void 0===m?void 0:m.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),rt("function"==typeof(null===(ne=null===(W=null===(T=null==en?void 0:en.cordova)||void 0===T?void 0:T.plugins)||void 0===W?void 0:W.browsertab)||void 0===ne?void 0:ne.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),rt("function"==typeof(null===(Et=null===(Ze=null===(Ne=null==en?void 0:en.cordova)||void 0===Ne?void 0:Ne.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===Et?void 0:Et.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),rt("function"==typeof(null===(on=null===(kt=null==en?void 0:en.cordova)||void 0===kt?void 0:kt.InAppBrowser)||void 0===on?void 0:on.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Ne=yield ne._initialize(g);yield Ne.initialized(),Ne.resetRedirect(),di.clear(),yield ne._originValidation(g);const Ze=function(b,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:Bp(),postBody:null,tenantId:b.tenantId,error:lt(b,"no-auth-event")}}(g,T,W);yield function(b,g){return fc()._set(Uu(b),g)}(g,Ze);const Et=yield function(b,g,m){return wi.apply(this,arguments)}(g,Ze,m),kt=yield function(b){const{cordova:g}=vo();return new Promise(m=>{g.plugins.browsertab.isAvailable(T=>{let W=null;T?g.plugins.browsertab.openUrl(b):W=g.InAppBrowser.open(b,function(b=(0,se.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),m(W)})})}(Et);return function(b,g,m){return Vu.apply(this,arguments)}(g,Ne,kt)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(b){return Zc.apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){const{universalLinks:T,handleOpenURL:W,BuildInfo:ne}=vo(),Ne=setTimeout((0,w.Z)(function*(){yield hc(g),m.onEvent(Yc())}),500),Ze=function(){var on=(0,w.Z)(function*(en){clearTimeout(Ne);const hi=yield hc(g);let Co=null;hi&&(null==en?void 0:en.url)&&(Co=function(b,g){var m,T;const W=function(b){const g=au(b),m=g.link?decodeURIComponent(g.link):void 0,T=au(m).link,W=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return au(W).link||W||T||m||b}(g);if(W.includes("/__/auth/callback")){const ne=au(W),Ne=ne.firebaseError?function(b){try{return JSON.parse(b)}catch(g){return null}}(decodeURIComponent(ne.firebaseError)):null,Ze=null===(T=null===(m=null==Ne?void 0:Ne.code)||void 0===m?void 0:m.split("auth/"))||void 0===T?void 0:T[1],Et=Ze?lt(Ze):null;return Et?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Et,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:W,postBody:null}}return null}(hi,en.url)),m.onEvent(Co||Yc())});return function(hi){return on.apply(this,arguments)}}();void 0!==T&&"function"==typeof T.subscribe&&T.subscribe(null,Ze);const Et=W,kt=`${ne.packageName.toLowerCase()}://`;vo().handleOpenURL=function(){var on=(0,w.Z)(function*(en){if(en.toLowerCase().startsWith(kt)&&Ze({url:en}),"function"==typeof Et)try{Et(en)}catch(hi){console.error(hi)}});return function(en){return on.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Bt,this._completeRedirectFn=Xo}_initialize(g){var m=this;return(0,w.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,T,W){var ne=this;return(0,w.Z)(function*(){return yield ne.selectUnderlyingResolver(),ne.assertedUnderlyingResolver._openPopup(g,m,T,W)})()}_openRedirect(g,m,T,W){var ne=this;return(0,w.Z)(function*(){return yield ne.selectUnderlyingResolver(),ne.assertedUnderlyingResolver._openRedirect(g,m,T,W)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return ju()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return rs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,w.Z)(function*(){if(g.underlyingResolver)return;const m=yield function(){return td.apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function lu(b){return b.unwrap()}function sd(b){return $u(b)}function $u(b){const{_tokenResponse:g}=b instanceof se.ZR?b.customData:b;if(!g)return null;if(!(b instanceof se.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return mo.credentialFromResult(b);const m=g.providerId;if(!m||"password"===m)return null;let T;switch(m){case"google.com":T=Mr;break;case"facebook.com":T=Ys;break;case"github.com":T=Ii;break;case"twitter.com":T=ni;break;default:const{oauthIdToken:W,oauthAccessToken:ne,oauthTokenSecret:Ne,pendingToken:Ze,nonce:Et}=g;return ne||Ne||W||Ze?Ze?m.startsWith("saml.")?hs._create(m,Ze):Zi._fromParams({providerId:m,signInMethod:m,pendingToken:Ze,idToken:W,accessToken:ne}):new ds(m).credential({idToken:W,accessToken:ne,rawNonce:Et}):null}return b instanceof se.ZR?T.credentialFromError(b):T.credentialFromResult(b)}function is(b,g){return g.catch(m=>{throw m instanceof se.ZR&&function(b,g){var m;const T=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new Ld(b,function(b,g){var m;const T=(0,se.m9)(b),W=g;return rt(g.customData.operationType,T,"argument-error"),rt(null===(m=W.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,T,"argument-error"),ir._fromError(T,W)}(b,g));else if(T){const W=$u(g),ne=g;W&&(ne.credential=W,ne.tenantId=T.tenantId||void 0,ne.email=T.email||void 0,ne.phoneNumber=T.phoneNumber||void 0)}}(b,m),m}).then(m=>{const W=m.user;return{operationType:m.operationType,credential:sd(m),additionalUserInfo:Ao(m),user:Ta.getOrCreate(W)}})}function Nl(b,g){return od.apply(this,arguments)}function od(){return(od=(0,w.Z)(function*(b,g){const m=yield g;return{verificationId:m.verificationId,confirm:T=>is(b,m.confirm(T))}})).apply(this,arguments)}class Ld{constructor(g,m){this.resolver=m,this.auth=function(b){return b.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return is(lu(this.auth),this.resolver.resolveSignIn(g))}}class Ta{constructor(g){this._delegate=g,this.multiFactor=function(b){const g=(0,se.m9)(b);return nn.has(g)||nn.set(g,pr._fromUser(g)),nn.get(g)}(g)}static getOrCreate(g){return Ta.USER_MAP.has(g)||Ta.USER_MAP.set(g,new Ta(g)),Ta.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,w.Z)(function*(){return is(m.auth,q(m._delegate,g))})()}linkWithPhoneNumber(g,m){var T=this;return(0,w.Z)(function*(){return Nl(T.auth,function(b,g,m){return go.apply(this,arguments)}(T._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,w.Z)(function*(){return is(m.auth,function(b,g,m){return Ua.apply(this,arguments)}(m._delegate,g,eo))})()}linkWithRedirect(g){var m=this;return(0,w.Z)(function*(){return yield Ei(Ln(m.auth)),function(b,g,m){return function(b,g,m){return eu.apply(this,arguments)}(b,g,m)}(m._delegate,g,eo)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,w.Z)(function*(){return is(m.auth,pt(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return Nl(this.auth,function(b,g,m){return wa.apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return is(this.auth,function(b,g,m){return jc.apply(this,arguments)}(this._delegate,g,eo))}reauthenticateWithRedirect(g){var m=this;return(0,w.Z)(function*(){return yield Ei(Ln(m.auth)),function(b,g,m){return function(b,g,m){return Gs.apply(this,arguments)}(b,g,m)}(m._delegate,g,eo)})()}sendEmailVerification(g){return function(b,g){return Ji.apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,w.Z)(function*(){return yield function(b,g){return Ma.apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function(b,g){return ka((0,se.m9)(b),g,null)}(this._delegate,g)}updatePassword(g){return function(b,g){return ka((0,se.m9)(b),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function(b,g){return zr.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function(b,g){return Ko.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function(b,g,m){return zo.apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ta.USER_MAP=new WeakMap;const Wu=rt;let Eo=(()=>{class b{constructor(m,T){if(this.app=m,T.isInitialized())return this._delegate=T.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=m.options;Wu(W,"invalid-api-key",{appName:m.name});let ne=[_n];if("undefined"!=typeof window){ne=function(b,g){const m=mc();if(!(null==m?void 0:m.sessionStorage))return[];const T=Lr(nd,b,g);switch(m.sessionStorage.getItem(T)){case wo.NONE:return[_n];case wo.LOCAL:return[X,Bt];case wo.SESSION:return[Bt];default:return[]}}(W,m.name);for(const Ze of[X,we,Bt])ne.includes(Ze)||ne.push(Ze)}Wu(W,"invalid-api-key",{appName:m.name});const Ne="undefined"!=typeof window?eo:void 0;this._delegate=T.initialize({options:{persistence:ne,popupRedirectResolver:Ne}}),this._delegate._updateErrorMap(qe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ta.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,T){!function(b,g,m){const T=Ln(b);rt(T._canInitEmulator,T,"emulator-config-failed"),rt(/^https?:\/\//.test(g),T,"invalid-emulator-scheme");const W=!!(null==m?void 0:m.disableWarnings),ne=Vn(g),{host:Ne,port:Ze}=function(b){const g=Vn(b),m=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!m)return{host:"",port:null};const T=m[2].split("@").pop()||"",W=/^(\[[^\]]+\])(:|$)/.exec(T);if(W){const ne=W[1];return{host:ne,port:Cs(T.substr(ne.length+1))}}{const[ne,Ne]=T.split(":");return{host:ne,port:Cs(Ne)}}}(g);T.config.emulator={url:`${ne}//${Ne}${null===Ze?"":`:${Ze}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:Ne,port:Ze,protocol:ne.replace(":",""),options:Object.freeze({disableWarnings:W})}),W||function(){function b(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,m,T)}applyActionCode(m){return function(b,g){return fa.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return ft(this._delegate,m)}confirmPasswordReset(m,T){return function(b,g,m){return co.apply(this,arguments)}(this._delegate,m,T)}createUserWithEmailAndPassword(m,T){var W=this;return(0,w.Z)(function*(){return is(W._delegate,function(b,g,m){return To.apply(this,arguments)}(W._delegate,m,T))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function(b,g){return Go.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function(b,g){const m=cs.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,w.Z)(function*(){Wu(Xc(),m._delegate,"operation-not-supported-in-this-environment");const T=yield function(b,g){return Ou.apply(this,arguments)}(m._delegate,eo);return T?is(m._delegate,Promise.resolve(T)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function(b,g){Ln(b)._logFramework(g)}(this._delegate,m)}onAuthStateChanged(m,T,W){const{next:ne,error:Ne,complete:Ze}=ad(m,T,W);return this._delegate.onAuthStateChanged(ne,Ne,Ze)}onIdTokenChanged(m,T,W){const{next:ne,error:Ne,complete:Ze}=ad(m,T,W);return this._delegate.onIdTokenChanged(ne,Ne,Ze)}sendSignInLinkToEmail(m,T){return function(b,g,m){return ga.apply(this,arguments)}(this._delegate,m,T)}sendPasswordResetEmail(m,T){return function(b,g,m){return wl.apply(this,arguments)}(this._delegate,m,T||void 0)}setPersistence(m){var T=this;return(0,w.Z)(function*(){let W;switch(function(b,g){gc(Object.values(wo).includes(g),b,"invalid-persistence-type"),(0,se.b$)()?gc(g!==wo.SESSION,b,"unsupported-persistence-type"):(0,se.UG)()?gc(g===wo.NONE,b,"unsupported-persistence-type"):Bu()?gc(g===wo.NONE||g===wo.LOCAL&&(0,se.hl)(),b,"unsupported-persistence-type"):gc(g===wo.NONE||Bs(),b,"unsupported-persistence-type")}(T._delegate,m),m){case wo.SESSION:W=Bt;break;case wo.LOCAL:W=(yield xe(X)._isAvailable())?X:we;break;case wo.NONE:W=_n;break;default:return Ie("argument-error",{appName:T._delegate.name})}return T._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return is(this._delegate,function(b){return jo.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return is(this._delegate,k(this._delegate,m))}signInWithCustomToken(m){return is(this._delegate,function(b,g){return Ti.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,T){return is(this._delegate,function(b,g,m){return k((0,se.m9)(b),Yr.credential(g,m))}(this._delegate,m,T))}signInWithEmailLink(m,T){return is(this._delegate,function(b,g,m){return Na.apply(this,arguments)}(this._delegate,m,T))}signInWithPhoneNumber(m,T){return Nl(this._delegate,function(b,g,m){return ts.apply(this,arguments)}(this._delegate,m,T))}signInWithPopup(m){var T=this;return(0,w.Z)(function*(){return Wu(Xc(),T._delegate,"operation-not-supported-in-this-environment"),is(T._delegate,function(b,g,m){return Yl.apply(this,arguments)}(T._delegate,m,eo))})()}signInWithRedirect(m){var T=this;return(0,w.Z)(function*(){return Wu(Xc(),T._delegate,"operation-not-supported-in-this-environment"),yield Ei(T._delegate),function(b,g,m){return function(b,g,m){return Ru.apply(this,arguments)}(b,g,m)}(T._delegate,m,eo)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function(b,g){return Br.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=wo,b})();function ad(b,g,m){let T=b;"function"!=typeof b&&({next:T,error:g,complete:m}=b);const W=T;return{next:Ne=>W(Ne&&Ta.getOrCreate(Ne)),error:g,complete:m}}class _c{constructor(){this.providerId="phone",this._delegate=new mo(lu(x.Z.auth()))}static credential(g,m){return mo.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}_c.PHONE_SIGN_IN_METHOD=mo.PHONE_SIGN_IN_METHOD,_c.PROVIDER_ID=mo.PROVIDER_ID;const Ha=rt;class Th{constructor(g,m,T=x.Z.app()){var W;Ha(null===(W=T.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:T.name}),this._delegate=new Ad(g,m,T.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(b){b.INTERNAL.registerComponent(new ge.wA("auth-compat",g=>{const m=g.getProvider("app-compat").getImmediate(),T=g.getProvider("auth");return new Eo(m,T)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Yr,FacebookAuthProvider:Ys,GithubAuthProvider:Ii,GoogleAuthProvider:Mr,OAuthProvider:ds,SAMLAuthProvider:$s,PhoneAuthProvider:_c,PhoneMultiFactorGenerator:Kc,RecaptchaVerifier:Th,TwitterAuthProvider:ni,Auth:Eo,AuthCredential:Or,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.2.4")}(x.Z)},6215:(Pe,fe,V)=>{"use strict";V.d(fe,{X:()=>se});var w=V(9765),x=V(7971);class se extends w.xQ{constructor(pe){super(),this._value=pe}get value(){return this.getValue()}_subscribe(pe){const ee=super._subscribe(pe);return ee&&!ee.closed&&pe.next(this._value),ee}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new x.N;return this._value}next(pe){super.next(this._value=pe)}}},7574:(Pe,fe,V)=>{"use strict";V.d(fe,{y:()=>ie});var w=V(7393),se=V(9181),De=V(6490),ee=V(6554),ge=V(4487);var Y=V(2494);let ie=(()=>{class me{constructor(qe){this._isScalar=!1,qe&&(this._subscribe=qe)}lift(qe){const Me=new me;return Me.source=this,Me.operator=qe,Me}subscribe(qe,Me,it){const{operator:ce}=this,Qe=function(me,Ke,qe){if(me){if(me instanceof w.L)return me;if(me[se.b])return me[se.b]()}return me||Ke||qe?new w.L(me,Ke,qe):new w.L(De.c)}(qe,Me,it);if(Qe.add(ce?ce.call(Qe,this.source):this.source||Y.v.useDeprecatedSynchronousErrorHandling&&!Qe.syncErrorThrowable?this._subscribe(Qe):this._trySubscribe(Qe)),Y.v.useDeprecatedSynchronousErrorHandling&&Qe.syncErrorThrowable&&(Qe.syncErrorThrowable=!1,Qe.syncErrorThrown))throw Qe.syncErrorValue;return Qe}_trySubscribe(qe){try{return this._subscribe(qe)}catch(Me){Y.v.useDeprecatedSynchronousErrorHandling&&(qe.syncErrorThrown=!0,qe.syncErrorValue=Me),function(me){for(;me;){const{closed:Ke,destination:qe,isStopped:Me}=me;if(Ke||Me)return!1;me=qe&&qe instanceof w.L?qe:null}return!0}(qe)?qe.error(Me):console.warn(Me)}}forEach(qe,Me){return new(Me=Z(Me))((it,ce)=>{let Qe;Qe=this.subscribe(et=>{try{qe(et)}catch(Ie){ce(Ie),Qe&&Qe.unsubscribe()}},ce,it)})}_subscribe(qe){const{source:Me}=this;return Me&&Me.subscribe(qe)}[ee.L](){return this}pipe(...qe){return 0===qe.length?this:function(me){return 0===me.length?ge.y:1===me.length?me[0]:function(qe){return me.reduce((Me,it)=>it(Me),qe)}}(qe)(this)}toPromise(qe){return new(qe=Z(qe))((Me,it)=>{let ce;this.subscribe(Qe=>ce=Qe,Qe=>it(Qe),()=>Me(ce))})}}return me.create=Ke=>new me(Ke),me})();function Z(me){if(me||(me=Y.v.Promise||Promise),!me)throw new Error("no Promise impl found");return me}},6490:(Pe,fe,V)=>{"use strict";V.d(fe,{c:()=>se});var w=V(2494),x=V(4449);const se={closed:!0,next(De){},error(De){if(w.v.useDeprecatedSynchronousErrorHandling)throw De;(0,x.z)(De)},complete(){}}},5197:(Pe,fe,V)=>{"use strict";V.d(fe,{L:()=>x});var w=V(7393);class x extends w.L{notifyNext(De,pe,ee,ge,oe){this.destination.next(pe)}notifyError(De,pe){this.destination.error(De)}notifyComplete(De){this.destination.complete()}}},8229:(Pe,fe,V)=>{"use strict";V.d(fe,{t:()=>ge});var w=V(9765),x=V(7771),se=V(5319),De=V(6136),pe=V(7971),ee=V(8858);class ge extends w.xQ{constructor(Y=Number.POSITIVE_INFINITY,ie=Number.POSITIVE_INFINITY,Z){super(),this.scheduler=Z,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=Y<1?1:Y,this._windowTime=ie<1?1:ie,ie===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(Y){if(!this.isStopped){const ie=this._events;ie.push(Y),ie.length>this._bufferSize&&ie.shift()}super.next(Y)}nextTimeWindow(Y){this.isStopped||(this._events.push(new oe(this._getNow(),Y)),this._trimBufferThenGetEvents()),super.next(Y)}_subscribe(Y){const ie=this._infiniteTimeWindow,Z=ie?this._events:this._trimBufferThenGetEvents(),me=this.scheduler,Ke=Z.length;let qe;if(this.closed)throw new pe.N;if(this.isStopped||this.hasError?qe=se.w.EMPTY:(this.observers.push(Y),qe=new ee.W(this,Y)),me&&Y.add(Y=new De.ht(Y,me)),ie)for(let Me=0;Me<Ke&&!Y.closed;Me++)Y.next(Z[Me]);else for(let Me=0;Me<Ke&&!Y.closed;Me++)Y.next(Z[Me].value);return this.hasError?Y.error(this.thrownError):this.isStopped&&Y.complete(),qe}_getNow(){return(this.scheduler||x.c).now()}_trimBufferThenGetEvents(){const Y=this._getNow(),ie=this._bufferSize,Z=this._windowTime,me=this._events,Ke=me.length;let qe=0;for(;qe<Ke&&!(Y-me[qe].time<Z);)qe++;return Ke>ie&&(qe=Math.max(qe,Ke-ie)),qe>0&&me.splice(0,qe),me}}class oe{constructor(Y,ie){this.time=Y,this.value=ie}}},9765:(Pe,fe,V)=>{"use strict";V.d(fe,{Yc:()=>ge,xQ:()=>oe});var w=V(7574),x=V(7393),se=V(5319),De=V(7971),pe=V(8858),ee=V(9181);class ge extends x.L{constructor(ie){super(ie),this.destination=ie}}let oe=(()=>{class Y extends w.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ee.b](){return new ge(this)}lift(Z){const me=new le(this,this);return me.operator=Z,me}next(Z){if(this.closed)throw new De.N;if(!this.isStopped){const{observers:me}=this,Ke=me.length,qe=me.slice();for(let Me=0;Me<Ke;Me++)qe[Me].next(Z)}}error(Z){if(this.closed)throw new De.N;this.hasError=!0,this.thrownError=Z,this.isStopped=!0;const{observers:me}=this,Ke=me.length,qe=me.slice();for(let Me=0;Me<Ke;Me++)qe[Me].error(Z);this.observers.length=0}complete(){if(this.closed)throw new De.N;this.isStopped=!0;const{observers:Z}=this,me=Z.length,Ke=Z.slice();for(let qe=0;qe<me;qe++)Ke[qe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Z){if(this.closed)throw new De.N;return super._trySubscribe(Z)}_subscribe(Z){if(this.closed)throw new De.N;return this.hasError?(Z.error(this.thrownError),se.w.EMPTY):this.isStopped?(Z.complete(),se.w.EMPTY):(this.observers.push(Z),new pe.W(this,Z))}asObservable(){const Z=new w.y;return Z.source=this,Z}}return Y.create=(ie,Z)=>new le(ie,Z),Y})();class le extends oe{constructor(ie,Z){super(),this.destination=ie,this.source=Z}next(ie){const{destination:Z}=this;Z&&Z.next&&Z.next(ie)}error(ie){const{destination:Z}=this;Z&&Z.error&&this.destination.error(ie)}complete(){const{destination:ie}=this;ie&&ie.complete&&this.destination.complete()}_subscribe(ie){const{source:Z}=this;return Z?this.source.subscribe(ie):se.w.EMPTY}}},8858:(Pe,fe,V)=>{"use strict";V.d(fe,{W:()=>x});var w=V(5319);class x extends w.w{constructor(De,pe){super(),this.subject=De,this.subscriber=pe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const De=this.subject,pe=De.observers;if(this.subject=null,!pe||0===pe.length||De.isStopped||De.closed)return;const ee=pe.indexOf(this.subscriber);-1!==ee&&pe.splice(ee,1)}}},7393:(Pe,fe,V)=>{"use strict";V.d(fe,{L:()=>ge});var w=V(9105),x=V(6490),se=V(5319),De=V(9181),pe=V(2494),ee=V(4449);class ge extends se.w{constructor(Y,ie,Z){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=x.c;break;case 1:if(!Y){this.destination=x.c;break}if("object"==typeof Y){Y instanceof ge?(this.syncErrorThrowable=Y.syncErrorThrowable,this.destination=Y,Y.add(this)):(this.syncErrorThrowable=!0,this.destination=new oe(this,Y));break}default:this.syncErrorThrowable=!0,this.destination=new oe(this,Y,ie,Z)}}[De.b](){return this}static create(Y,ie,Z){const me=new ge(Y,ie,Z);return me.syncErrorThrowable=!1,me}next(Y){this.isStopped||this._next(Y)}error(Y){this.isStopped||(this.isStopped=!0,this._error(Y))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(Y){this.destination.next(Y)}_error(Y){this.destination.error(Y),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:Y}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=Y,this}}class oe extends ge{constructor(Y,ie,Z,me){super(),this._parentSubscriber=Y;let Ke,qe=this;(0,w.m)(ie)?Ke=ie:ie&&(Ke=ie.next,Z=ie.error,me=ie.complete,ie!==x.c&&(qe=Object.create(ie),(0,w.m)(qe.unsubscribe)&&this.add(qe.unsubscribe.bind(qe)),qe.unsubscribe=this.unsubscribe.bind(this))),this._context=qe,this._next=Ke,this._error=Z,this._complete=me}next(Y){if(!this.isStopped&&this._next){const{_parentSubscriber:ie}=this;pe.v.useDeprecatedSynchronousErrorHandling&&ie.syncErrorThrowable?this.__tryOrSetError(ie,this._next,Y)&&this.unsubscribe():this.__tryOrUnsub(this._next,Y)}}error(Y){if(!this.isStopped){const{_parentSubscriber:ie}=this,{useDeprecatedSynchronousErrorHandling:Z}=pe.v;if(this._error)Z&&ie.syncErrorThrowable?(this.__tryOrSetError(ie,this._error,Y),this.unsubscribe()):(this.__tryOrUnsub(this._error,Y),this.unsubscribe());else if(ie.syncErrorThrowable)Z?(ie.syncErrorValue=Y,ie.syncErrorThrown=!0):(0,ee.z)(Y),this.unsubscribe();else{if(this.unsubscribe(),Z)throw Y;(0,ee.z)(Y)}}}complete(){if(!this.isStopped){const{_parentSubscriber:Y}=this;if(this._complete){const ie=()=>this._complete.call(this._context);pe.v.useDeprecatedSynchronousErrorHandling&&Y.syncErrorThrowable?(this.__tryOrSetError(Y,ie),this.unsubscribe()):(this.__tryOrUnsub(ie),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(Y,ie){try{Y.call(this._context,ie)}catch(Z){if(this.unsubscribe(),pe.v.useDeprecatedSynchronousErrorHandling)throw Z;(0,ee.z)(Z)}}__tryOrSetError(Y,ie,Z){if(!pe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{ie.call(this._context,Z)}catch(me){return pe.v.useDeprecatedSynchronousErrorHandling?(Y.syncErrorValue=me,Y.syncErrorThrown=!0,!0):((0,ee.z)(me),!0)}return!1}_unsubscribe(){const{_parentSubscriber:Y}=this;this._context=null,this._parentSubscriber=null,Y.unsubscribe()}}},5319:(Pe,fe,V)=>{"use strict";V.d(fe,{w:()=>ee});var w=V(9796),x=V(1555),se=V(9105);const pe=(()=>{function oe(le){return Error.call(this),this.message=le?`${le.length} errors occurred during unsubscription:\n${le.map((Y,ie)=>`${ie+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=le,this}return oe.prototype=Object.create(Error.prototype),oe})();class ee{constructor(le){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,le&&(this._ctorUnsubscribe=!0,this._unsubscribe=le)}unsubscribe(){let le;if(this.closed)return;let{_parentOrParents:Y,_ctorUnsubscribe:ie,_unsubscribe:Z,_subscriptions:me}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,Y instanceof ee)Y.remove(this);else if(null!==Y)for(let Ke=0;Ke<Y.length;++Ke)Y[Ke].remove(this);if((0,se.m)(Z)){ie&&(this._unsubscribe=void 0);try{Z.call(this)}catch(Ke){le=Ke instanceof pe?ge(Ke.errors):[Ke]}}if((0,w.k)(me)){let Ke=-1,qe=me.length;for(;++Ke<qe;){const Me=me[Ke];if((0,x.K)(Me))try{Me.unsubscribe()}catch(it){le=le||[],it instanceof pe?le=le.concat(ge(it.errors)):le.push(it)}}}if(le)throw new pe(le)}add(le){let Y=le;if(!le)return ee.EMPTY;switch(typeof le){case"function":Y=new ee(le);case"object":if(Y===this||Y.closed||"function"!=typeof Y.unsubscribe)return Y;if(this.closed)return Y.unsubscribe(),Y;if(!(Y instanceof ee)){const me=Y;Y=new ee,Y._subscriptions=[me]}break;default:throw new Error("unrecognized teardown "+le+" added to Subscription.")}let{_parentOrParents:ie}=Y;if(null===ie)Y._parentOrParents=this;else if(ie instanceof ee){if(ie===this)return Y;Y._parentOrParents=[ie,this]}else{if(-1!==ie.indexOf(this))return Y;ie.push(this)}const Z=this._subscriptions;return null===Z?this._subscriptions=[Y]:Z.push(Y),Y}remove(le){const Y=this._subscriptions;if(Y){const ie=Y.indexOf(le);-1!==ie&&Y.splice(ie,1)}}}var oe;function ge(oe){return oe.reduce((le,Y)=>le.concat(Y instanceof pe?Y.errors:Y),[])}ee.EMPTY=((oe=new ee).closed=!0,oe)},2494:(Pe,fe,V)=>{"use strict";V.d(fe,{v:()=>x});let w=!1;const x={Promise:void 0,set useDeprecatedSynchronousErrorHandling(se){if(se){const De=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+De.stack)}else w&&console.log("RxJS: Back to a better error behavior. Thank you. <3");w=se},get useDeprecatedSynchronousErrorHandling(){return w}}},5345:(Pe,fe,V)=>{"use strict";V.d(fe,{IY:()=>De,Ds:()=>ee,ft:()=>oe});var w=V(7393),x=V(7574),se=V(7444);class De extends w.L{constructor(Y){super(),this.parent=Y}_next(Y){this.parent.notifyNext(Y)}_error(Y){this.parent.notifyError(Y),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ee extends w.L{notifyNext(Y){this.destination.next(Y)}notifyError(Y){this.destination.error(Y)}notifyComplete(){this.destination.complete()}}function oe(le,Y){if(Y.closed)return;if(le instanceof x.y)return le.subscribe(Y);let ie;try{ie=(0,se.s)(le)(Y)}catch(Z){Y.error(Z)}return ie}},2441:(Pe,fe,V)=>{"use strict";V.d(fe,{c:()=>pe,N:()=>ee});var w=V(9765),x=V(7574),se=V(5319),De=V(1307);class pe extends x.y{constructor(ie,Z){super(),this.source=ie,this.subjectFactory=Z,this._refCount=0,this._isComplete=!1}_subscribe(ie){return this.getSubject().subscribe(ie)}getSubject(){const ie=this._subject;return(!ie||ie.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let ie=this._connection;return ie||(this._isComplete=!1,ie=this._connection=new se.w,ie.add(this.source.subscribe(new ge(this.getSubject(),this))),ie.closed&&(this._connection=null,ie=se.w.EMPTY)),ie}refCount(){return(0,De.x)()(this)}}const ee=(()=>{const Y=pe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Y._subscribe},_isComplete:{value:Y._isComplete,writable:!0},getSubject:{value:Y.getSubject},connect:{value:Y.connect},refCount:{value:Y.refCount}}})();class ge extends w.Yc{constructor(ie,Z){super(ie),this.connectable=Z}_error(ie){this._unsubscribe(),super._error(ie)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const ie=this.connectable;if(ie){this.connectable=null;const Z=ie._connection;ie._refCount=0,ie._subject=null,ie._connection=null,Z&&Z.unsubscribe()}}}},8071:(Pe,fe,V)=>{"use strict";V.d(fe,{z:()=>De});var w=V(5917),x=V(3282);function De(...pe){return(0,x.J)(1)((0,w.of)(...pe))}},9193:(Pe,fe,V)=>{"use strict";V.d(fe,{E:()=>x,c:()=>se});var w=V(7574);const x=new w.y(pe=>pe.complete());function se(pe){return pe?function(pe){return new w.y(ee=>pe.schedule(()=>ee.complete()))}(pe):x}},4402:(Pe,fe,V)=>{"use strict";V.d(fe,{D:()=>qe});var w=V(7574),x=V(7444),se=V(5319),De=V(6554),ge=V(4087),oe=V(377),ie=V(4072),Z=V(9489);function qe(Me,it){return it?function(Me,it){if(null!=Me){if(function(Me){return Me&&"function"==typeof Me[De.L]}(Me))return function(Me,it){return new w.y(ce=>{const Qe=new se.w;return Qe.add(it.schedule(()=>{const et=Me[De.L]();Qe.add(et.subscribe({next(Ie){Qe.add(it.schedule(()=>ce.next(Ie)))},error(Ie){Qe.add(it.schedule(()=>ce.error(Ie)))},complete(){Qe.add(it.schedule(()=>ce.complete()))}}))})),Qe})}(Me,it);if((0,ie.t)(Me))return function(Me,it){return new w.y(ce=>{const Qe=new se.w;return Qe.add(it.schedule(()=>Me.then(et=>{Qe.add(it.schedule(()=>{ce.next(et),Qe.add(it.schedule(()=>ce.complete()))}))},et=>{Qe.add(it.schedule(()=>ce.error(et)))}))),Qe})}(Me,it);if((0,Z.z)(Me))return(0,ge.r)(Me,it);if(function(Me){return Me&&"function"==typeof Me[oe.hZ]}(Me)||"string"==typeof Me)return function(Me,it){if(!Me)throw new Error("Iterable cannot be null");return new w.y(ce=>{const Qe=new se.w;let et;return Qe.add(()=>{et&&"function"==typeof et.return&&et.return()}),Qe.add(it.schedule(()=>{et=Me[oe.hZ](),Qe.add(it.schedule(function(){if(ce.closed)return;let Ie,lt;try{const Mt=et.next();Ie=Mt.value,lt=Mt.done}catch(Mt){return void ce.error(Mt)}lt?ce.complete():(ce.next(Ie),this.schedule())}))})),Qe})}(Me,it)}throw new TypeError((null!==Me&&typeof Me||Me)+" is not observable")}(Me,it):Me instanceof w.y?Me:new w.y((0,x.s)(Me))}},6693:(Pe,fe,V)=>{"use strict";V.d(fe,{n:()=>De});var w=V(7574),x=V(5015),se=V(4087);function De(pe,ee){return ee?(0,se.r)(pe,ee):new w.y((0,x.V)(pe))}},6682:(Pe,fe,V)=>{"use strict";V.d(fe,{T:()=>pe});var w=V(7574),x=V(4869),se=V(3282),De=V(6693);function pe(...ee){let ge=Number.POSITIVE_INFINITY,oe=null,le=ee[ee.length-1];return(0,x.K)(le)?(oe=ee.pop(),ee.length>1&&"number"==typeof ee[ee.length-1]&&(ge=ee.pop())):"number"==typeof le&&(ge=ee.pop()),null===oe&&1===ee.length&&ee[0]instanceof w.y?ee[0]:(0,se.J)(ge)((0,De.n)(ee,oe))}},5917:(Pe,fe,V)=>{"use strict";V.d(fe,{of:()=>De});var w=V(4869),x=V(6693),se=V(4087);function De(...pe){let ee=pe[pe.length-1];return(0,w.K)(ee)?(pe.pop(),(0,se.r)(pe,ee)):(0,x.n)(pe)}},205:(Pe,fe,V)=>{"use strict";V.d(fe,{_:()=>x});var w=V(7574);function x(De,pe){return new w.y(pe?ee=>pe.schedule(se,0,{error:De,subscriber:ee}):ee=>ee.error(De))}function se({error:De,subscriber:pe}){pe.error(De)}},5304:(Pe,fe,V)=>{"use strict";V.d(fe,{K:()=>x});var w=V(5345);function x(pe){return function(ge){const oe=new se(pe),le=ge.lift(oe);return oe.caught=le}}class se{constructor(ee){this.selector=ee}call(ee,ge){return ge.subscribe(new De(ee,this.selector,this.caught))}}class De extends w.Ds{constructor(ee,ge,oe){super(ee),this.selector=ge,this.caught=oe}error(ee){if(!this.isStopped){let ge;try{ge=this.selector(ee,this.caught)}catch(Y){return void super.error(Y)}this._unsubscribeAndRecycle();const oe=new w.IY(this);this.add(oe);const le=(0,w.ft)(ge,oe);le!==oe&&this.add(le)}}}},4612:(Pe,fe,V)=>{"use strict";V.d(fe,{b:()=>x});var w=V(9773);function x(se,De){return(0,w.zg)(se,De,1)}},4395:(Pe,fe,V)=>{"use strict";V.d(fe,{b:()=>se});var w=V(7393),x=V(3637);function se(ge,oe=x.P){return le=>le.lift(new De(ge,oe))}class De{constructor(oe,le){this.dueTime=oe,this.scheduler=le}call(oe,le){return le.subscribe(new pe(oe,this.dueTime,this.scheduler))}}class pe extends w.L{constructor(oe,le,Y){super(oe),this.dueTime=le,this.scheduler=Y,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(oe){this.clearDebounce(),this.lastValue=oe,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ee,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:oe}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(oe)}}clearDebounce(){const oe=this.debouncedSubscription;null!==oe&&(this.remove(oe),oe.unsubscribe(),this.debouncedSubscription=null)}}function ee(ge){ge.debouncedNext()}},5242:(Pe,fe,V)=>{"use strict";V.d(fe,{d:()=>x});var w=V(7393);function x(pe=null){return ee=>ee.lift(new se(pe))}class se{constructor(ee){this.defaultValue=ee}call(ee,ge){return ge.subscribe(new De(ee,this.defaultValue))}}class De extends w.L{constructor(ee,ge){super(ee),this.defaultValue=ge,this.isEmpty=!0}_next(ee){this.isEmpty=!1,this.destination.next(ee)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7519:(Pe,fe,V)=>{"use strict";V.d(fe,{x:()=>x});var w=V(7393);function x(pe,ee){return ge=>ge.lift(new se(pe,ee))}class se{constructor(ee,ge){this.compare=ee,this.keySelector=ge}call(ee,ge){return ge.subscribe(new De(ee,this.compare,this.keySelector))}}class De extends w.L{constructor(ee,ge,oe){super(ee),this.keySelector=oe,this.hasKey=!1,"function"==typeof ge&&(this.compare=ge)}compare(ee,ge){return ee===ge}_next(ee){let ge;try{const{keySelector:le}=this;ge=le?le(ee):ee}catch(le){return this.destination.error(le)}let oe=!1;if(this.hasKey)try{const{compare:le}=this;oe=le(this.key,ge)}catch(le){return this.destination.error(le)}else this.hasKey=!0;oe||(this.key=ge,this.destination.next(ee))}}},5435:(Pe,fe,V)=>{"use strict";V.d(fe,{h:()=>x});var w=V(7393);function x(pe,ee){return function(oe){return oe.lift(new se(pe,ee))}}class se{constructor(ee,ge){this.predicate=ee,this.thisArg=ge}call(ee,ge){return ge.subscribe(new De(ee,this.predicate,this.thisArg))}}class De extends w.L{constructor(ee,ge,oe){super(ee),this.predicate=ge,this.thisArg=oe,this.count=0}_next(ee){let ge;try{ge=this.predicate.call(this.thisArg,ee,this.count++)}catch(oe){return void this.destination.error(oe)}ge&&this.destination.next(ee)}}},8049:(Pe,fe,V)=>{"use strict";V.d(fe,{P:()=>ge});var w=V(3410),x=V(5435),se=V(5257),De=V(5242),pe=V(4635),ee=V(4487);function ge(oe,le){const Y=arguments.length>=2;return ie=>ie.pipe(oe?(0,x.h)((Z,me)=>oe(Z,me,ie)):ee.y,(0,se.q)(1),Y?(0,De.d)(le):(0,pe.T)(()=>new w.K))}},8002:(Pe,fe,V)=>{"use strict";V.d(fe,{U:()=>x});var w=V(7393);function x(pe,ee){return function(oe){if("function"!=typeof pe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return oe.lift(new se(pe,ee))}}class se{constructor(ee,ge){this.project=ee,this.thisArg=ge}call(ee,ge){return ge.subscribe(new De(ee,this.project,this.thisArg))}}class De extends w.L{constructor(ee,ge,oe){super(ee),this.project=ge,this.count=0,this.thisArg=oe||this}_next(ee){let ge;try{ge=this.project.call(this.thisArg,ee,this.count++)}catch(oe){return void this.destination.error(oe)}this.destination.next(ge)}}},3282:(Pe,fe,V)=>{"use strict";V.d(fe,{J:()=>se});var w=V(9773),x=V(4487);function se(De=Number.POSITIVE_INFINITY){return(0,w.zg)(x.y,De)}},9773:(Pe,fe,V)=>{"use strict";V.d(fe,{zg:()=>De});var w=V(8002),x=V(4402),se=V(5345);function De(oe,le,Y=Number.POSITIVE_INFINITY){return"function"==typeof le?ie=>ie.pipe(De((Z,me)=>(0,x.D)(oe(Z,me)).pipe((0,w.U)((Ke,qe)=>le(Z,Ke,me,qe))),Y)):("number"==typeof le&&(Y=le),ie=>ie.lift(new pe(oe,Y)))}class pe{constructor(le,Y=Number.POSITIVE_INFINITY){this.project=le,this.concurrent=Y}call(le,Y){return Y.subscribe(new ee(le,this.project,this.concurrent))}}class ee extends se.Ds{constructor(le,Y,ie=Number.POSITIVE_INFINITY){super(le),this.project=Y,this.concurrent=ie,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(le){this.active<this.concurrent?this._tryNext(le):this.buffer.push(le)}_tryNext(le){let Y;const ie=this.index++;try{Y=this.project(le,ie)}catch(Z){return void this.destination.error(Z)}this.active++,this._innerSub(Y)}_innerSub(le){const Y=new se.IY(this),ie=this.destination;ie.add(Y);const Z=(0,se.ft)(le,Y);Z!==Y&&ie.add(Z)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(le){this.destination.next(le)}notifyComplete(){const le=this.buffer;this.active--,le.length>0?this._next(le.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6136:(Pe,fe,V)=>{"use strict";V.d(fe,{ht:()=>le,QV:()=>ge});var w=V(7393),x=V(9193),se=V(5917),De=V(205);class ee{constructor(Z,me,Ke){this.kind=Z,this.value=me,this.error=Ke,this.hasValue="N"===Z}observe(Z){switch(this.kind){case"N":return Z.next&&Z.next(this.value);case"E":return Z.error&&Z.error(this.error);case"C":return Z.complete&&Z.complete()}}do(Z,me,Ke){switch(this.kind){case"N":return Z&&Z(this.value);case"E":return me&&me(this.error);case"C":return Ke&&Ke()}}accept(Z,me,Ke){return Z&&"function"==typeof Z.next?this.observe(Z):this.do(Z,me,Ke)}toObservable(){switch(this.kind){case"N":return(0,se.of)(this.value);case"E":return(0,De._)(this.error);case"C":return(0,x.c)()}throw new Error("unexpected notification kind value")}static createNext(Z){return void 0!==Z?new ee("N",Z):ee.undefinedValueNotification}static createError(Z){return new ee("E",void 0,Z)}static createComplete(){return ee.completeNotification}}function ge(ie,Z=0){return function(Ke){return Ke.lift(new oe(ie,Z))}}ee.completeNotification=new ee("C"),ee.undefinedValueNotification=new ee("N",void 0);class oe{constructor(Z,me=0){this.scheduler=Z,this.delay=me}call(Z,me){return me.subscribe(new le(Z,this.scheduler,this.delay))}}class le extends w.L{constructor(Z,me,Ke=0){super(Z),this.scheduler=me,this.delay=Ke}static dispatch(Z){const{notification:me,destination:Ke}=Z;me.observe(Ke),this.unsubscribe()}scheduleMessage(Z){this.destination.add(this.scheduler.schedule(le.dispatch,this.delay,new Y(Z,this.destination)))}_next(Z){this.scheduleMessage(ee.createNext(Z))}_error(Z){this.scheduleMessage(ee.createError(Z)),this.unsubscribe()}_complete(){this.scheduleMessage(ee.createComplete()),this.unsubscribe()}}class Y{constructor(Z,me){this.notification=Z,this.destination=me}}},1307:(Pe,fe,V)=>{"use strict";V.d(fe,{x:()=>x});var w=V(7393);function x(){return function(ee){return ee.lift(new se(ee))}}class se{constructor(ee){this.connectable=ee}call(ee,ge){const{connectable:oe}=this;oe._refCount++;const le=new De(ee,oe),Y=ge.subscribe(le);return le.closed||(le.connection=oe.connect()),Y}}class De extends w.L{constructor(ee,ge){super(ee),this.connectable=ge}_unsubscribe(){const{connectable:ee}=this;if(!ee)return void(this.connection=null);this.connectable=null;const ge=ee._refCount;if(ge<=0)return void(this.connection=null);if(ee._refCount=ge-1,ge>1)return void(this.connection=null);const{connection:oe}=this,le=ee._connection;this.connection=null,le&&(!oe||le===oe)&&le.unsubscribe()}}},2145:(Pe,fe,V)=>{"use strict";V.d(fe,{R:()=>x});var w=V(7393);function x(pe,ee){let ge=!1;return arguments.length>=2&&(ge=!0),function(le){return le.lift(new se(pe,ee,ge))}}class se{constructor(ee,ge,oe=!1){this.accumulator=ee,this.seed=ge,this.hasSeed=oe}call(ee,ge){return ge.subscribe(new De(ee,this.accumulator,this.seed,this.hasSeed))}}class De extends w.L{constructor(ee,ge,oe,le){super(ee),this.accumulator=ge,this._seed=oe,this.hasSeed=le,this.index=0}get seed(){return this._seed}set seed(ee){this.hasSeed=!0,this._seed=ee}_next(ee){if(this.hasSeed)return this._tryNext(ee);this.seed=ee,this.destination.next(ee)}_tryNext(ee){const ge=this.index++;let oe;try{oe=this.accumulator(this.seed,ee,ge)}catch(le){this.destination.error(le)}this.seed=oe,this.destination.next(oe)}}},8819:(Pe,fe,V)=>{"use strict";V.d(fe,{B:()=>ge});var w=V(2441);var De=V(1307),pe=V(9765);function ee(){return new pe.xQ}function ge(){return oe=>(0,De.x)()(function(oe,le){return function(ie){let Z;Z="function"==typeof oe?oe:function(){return oe};const me=Object.create(ie,w.N);return me.source=ie,me.subjectFactory=Z,me}}(ee)(oe))}},3653:(Pe,fe,V)=>{"use strict";V.d(fe,{T:()=>x});var w=V(7393);function x(pe){return ee=>ee.lift(new se(pe))}class se{constructor(ee){this.total=ee}call(ee,ge){return ge.subscribe(new De(ee,this.total))}}class De extends w.L{constructor(ee,ge){super(ee),this.total=ge,this.count=0}_next(ee){++this.count>this.total&&this.destination.next(ee)}}},9761:(Pe,fe,V)=>{"use strict";V.d(fe,{O:()=>se});var w=V(8071),x=V(4869);function se(...De){const pe=De[De.length-1];return(0,x.K)(pe)?(De.pop(),ee=>(0,w.z)(De,ee,pe)):ee=>(0,w.z)(De,ee)}},3101:(Pe,fe,V)=>{"use strict";V.d(fe,{R:()=>it});var w=V(7574);let x=1;const se=Promise.resolve(),De={};function pe(Qe){return Qe in De&&(delete De[Qe],!0)}const ee={setImmediate(Qe){const et=x++;return De[et]=!0,se.then(()=>pe(et)&&Qe()),et},clearImmediate(Qe){pe(Qe)}};var oe=V(6465),Y=V(6102);const me=new class extends Y.v{flush(et){this.active=!0,this.scheduled=void 0;const{actions:Ie}=this;let lt,Mt=-1,Wt=Ie.length;et=et||Ie.shift();do{if(lt=et.execute(et.state,et.delay))break}while(++Mt<Wt&&(et=Ie.shift()));if(this.active=!1,lt){for(;++Mt<Wt&&(et=Ie.shift());)et.unsubscribe();throw lt}}}(class extends oe.o{constructor(et,Ie){super(et,Ie),this.scheduler=et,this.work=Ie}requestAsyncId(et,Ie,lt=0){return null!==lt&&lt>0?super.requestAsyncId(et,Ie,lt):(et.actions.push(this),et.scheduled||(et.scheduled=ee.setImmediate(et.flush.bind(et,null))))}recycleAsyncId(et,Ie,lt=0){if(null!==lt&&lt>0||null===lt&&this.delay>0)return super.recycleAsyncId(et,Ie,lt);0===et.actions.length&&(ee.clearImmediate(Ie),et.scheduled=void 0)}});var Ke=V(9796);class Me extends w.y{constructor(et,Ie=0,lt=me){var Qe;super(),this.source=et,this.delayTime=Ie,this.scheduler=lt,(!(!(0,Ke.k)(Qe=Ie)&&Qe-parseFloat(Qe)+1>=0)||Ie<0)&&(this.delayTime=0),(!lt||"function"!=typeof lt.schedule)&&(this.scheduler=me)}static create(et,Ie=0,lt=me){return new Me(et,Ie,lt)}static dispatch(et){const{source:Ie,subscriber:lt}=et;return this.add(Ie.subscribe(lt))}_subscribe(et){return this.scheduler.schedule(Me.dispatch,this.delayTime,{source:this.source,subscriber:et})}}function it(Qe,et=0){return function(lt){return lt.lift(new ce(Qe,et))}}class ce{constructor(et,Ie){this.scheduler=et,this.delay=Ie}call(et,Ie){return new Me(Ie,this.delay,this.scheduler).subscribe(et)}}},3190:(Pe,fe,V)=>{"use strict";V.d(fe,{w:()=>De});var w=V(8002),x=V(4402),se=V(5345);function De(ge,oe){return"function"==typeof oe?le=>le.pipe(De((Y,ie)=>(0,x.D)(ge(Y,ie)).pipe((0,w.U)((Z,me)=>oe(Y,Z,ie,me))))):le=>le.lift(new pe(ge))}class pe{constructor(oe){this.project=oe}call(oe,le){return le.subscribe(new ee(oe,this.project))}}class ee extends se.Ds{constructor(oe,le){super(oe),this.project=le,this.index=0}_next(oe){let le;const Y=this.index++;try{le=this.project(oe,Y)}catch(ie){return void this.destination.error(ie)}this._innerSub(le)}_innerSub(oe){const le=this.innerSubscription;le&&le.unsubscribe();const Y=new se.IY(this),ie=this.destination;ie.add(Y),this.innerSubscription=(0,se.ft)(oe,Y),this.innerSubscription!==Y&&ie.add(this.innerSubscription)}_complete(){const{innerSubscription:oe}=this;(!oe||oe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(oe){this.destination.next(oe)}}},5257:(Pe,fe,V)=>{"use strict";V.d(fe,{q:()=>De});var w=V(7393),x=V(7108),se=V(9193);function De(ge){return oe=>0===ge?(0,se.c)():oe.lift(new pe(ge))}class pe{constructor(oe){if(this.total=oe,this.total<0)throw new x.W}call(oe,le){return le.subscribe(new ee(oe,this.total))}}class ee extends w.L{constructor(oe,le){super(oe),this.total=le,this.count=0}_next(oe){const le=this.total,Y=++this.count;Y<=le&&(this.destination.next(oe),Y===le&&(this.destination.complete(),this.unsubscribe()))}}},6782:(Pe,fe,V)=>{"use strict";V.d(fe,{R:()=>x});var w=V(5345);function x(pe){return ee=>ee.lift(new se(pe))}class se{constructor(ee){this.notifier=ee}call(ee,ge){const oe=new De(ee),le=(0,w.ft)(this.notifier,new w.IY(oe));return le&&!oe.seenValue?(oe.add(le),ge.subscribe(oe)):oe}}class De extends w.Ds{constructor(ee){super(ee),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},3342:(Pe,fe,V)=>{"use strict";V.d(fe,{b:()=>De});var w=V(7393);function x(){}var se=V(9105);function De(ge,oe,le){return function(ie){return ie.lift(new pe(ge,oe,le))}}class pe{constructor(oe,le,Y){this.nextOrObserver=oe,this.error=le,this.complete=Y}call(oe,le){return le.subscribe(new ee(oe,this.nextOrObserver,this.error,this.complete))}}class ee extends w.L{constructor(oe,le,Y,ie){super(oe),this._tapNext=x,this._tapError=x,this._tapComplete=x,this._tapError=Y||x,this._tapComplete=ie||x,(0,se.m)(le)?(this._context=this,this._tapNext=le):le&&(this._context=le,this._tapNext=le.next||x,this._tapError=le.error||x,this._tapComplete=le.complete||x)}_next(oe){try{this._tapNext.call(this._context,oe)}catch(le){return void this.destination.error(le)}this.destination.next(oe)}_error(oe){try{this._tapError.call(this._context,oe)}catch(le){return void this.destination.error(le)}this.destination.error(oe)}_complete(){try{this._tapComplete.call(this._context)}catch(oe){return void this.destination.error(oe)}return this.destination.complete()}}},4635:(Pe,fe,V)=>{"use strict";V.d(fe,{T:()=>se});var w=V(3410),x=V(7393);function se(ge=ee){return oe=>oe.lift(new De(ge))}class De{constructor(oe){this.errorFactory=oe}call(oe,le){return le.subscribe(new pe(oe,this.errorFactory))}}class pe extends x.L{constructor(oe,le){super(oe),this.errorFactory=le,this.hasValue=!1}_next(oe){this.hasValue=!0,this.destination.next(oe)}_complete(){if(this.hasValue)return this.destination.complete();{let oe;try{oe=this.errorFactory()}catch(le){oe=le}this.destination.error(oe)}}}function ee(){return new w.K}},2965:(Pe,fe,V)=>{"use strict";V.d(fe,{V:()=>Y});var w=V(3637);const se=(()=>{function ie(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return ie.prototype=Object.create(Error.prototype),ie})();var pe=V(5345);class ge{constructor(Z,me,Ke,qe){this.waitFor=Z,this.absoluteTimeout=me,this.withObservable=Ke,this.scheduler=qe}call(Z,me){return me.subscribe(new oe(Z,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class oe extends pe.Ds{constructor(Z,me,Ke,qe,Me){super(Z),this.absoluteTimeout=me,this.waitFor=Ke,this.withObservable=qe,this.scheduler=Me,this.scheduleTimeout()}static dispatchTimeout(Z){const{withObservable:me}=Z;Z._unsubscribeAndRecycle(),Z.add((0,pe.ft)(me,new pe.IY(Z)))}scheduleTimeout(){const{action:Z}=this;Z?this.action=Z.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(oe.dispatchTimeout,this.waitFor,this))}_next(Z){this.absoluteTimeout||this.scheduleTimeout(),super._next(Z)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}var le=V(205);function Y(ie,Z=w.P){return function(ie,Z,me=w.P){return Ke=>{let qe=function(ie){return ie instanceof Date&&!isNaN(+ie)}(ie),Me=qe?+ie-me.now():Math.abs(ie);return Ke.lift(new ge(Me,qe,Z,me))}}(ie,(0,le._)(new se),Z)}},7057:(Pe,fe,V)=>{"use strict";V.d(fe,{M:()=>se});var w=V(5197),x=V(509);function se(...ee){return ge=>{let oe;return"function"==typeof ee[ee.length-1]&&(oe=ee.pop()),ge.lift(new De(ee,oe))}}class De{constructor(ge,oe){this.observables=ge,this.project=oe}call(ge,oe){return oe.subscribe(new pe(ge,this.observables,this.project))}}class pe extends w.L{constructor(ge,oe,le){super(ge),this.observables=oe,this.project=le,this.toRespond=[];const Y=oe.length;this.values=new Array(Y);for(let ie=0;ie<Y;ie++)this.toRespond.push(ie);for(let ie=0;ie<Y;ie++)this.add((0,x.D)(this,oe[ie],void 0,ie))}notifyNext(ge,oe,le){this.values[le]=oe;const Y=this.toRespond;if(Y.length>0){const ie=Y.indexOf(le);-1!==ie&&Y.splice(ie,1)}}notifyComplete(){}_next(ge){if(0===this.toRespond.length){const oe=[ge,...this.values];this.project?this._tryProject(oe):this.destination.next(oe)}}_tryProject(ge){let oe;try{oe=this.project.apply(this,ge)}catch(le){return void this.destination.error(le)}this.destination.next(oe)}}},4087:(Pe,fe,V)=>{"use strict";V.d(fe,{r:()=>se});var w=V(7574),x=V(5319);function se(De,pe){return new w.y(ee=>{const ge=new x.w;let oe=0;return ge.add(pe.schedule(function(){oe!==De.length?(ee.next(De[oe++]),ee.closed||ge.add(this.schedule())):ee.complete()})),ge})}},6465:(Pe,fe,V)=>{"use strict";V.d(fe,{o:()=>se});var w=V(5319);class x extends w.w{constructor(pe,ee){super()}schedule(pe,ee=0){return this}}class se extends x{constructor(pe,ee){super(pe,ee),this.scheduler=pe,this.work=ee,this.pending=!1}schedule(pe,ee=0){if(this.closed)return this;this.state=pe;const ge=this.id,oe=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(oe,ge,ee)),this.pending=!0,this.delay=ee,this.id=this.id||this.requestAsyncId(oe,this.id,ee),this}requestAsyncId(pe,ee,ge=0){return setInterval(pe.flush.bind(pe,this),ge)}recycleAsyncId(pe,ee,ge=0){if(null!==ge&&this.delay===ge&&!1===this.pending)return ee;clearInterval(ee)}execute(pe,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(pe,ee);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,ee){let oe,ge=!1;try{this.work(pe)}catch(le){ge=!0,oe=!!le&&le||new Error(le)}if(ge)return this.unsubscribe(),oe}_unsubscribe(){const pe=this.id,ee=this.scheduler,ge=ee.actions,oe=ge.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==oe&&ge.splice(oe,1),null!=pe&&(this.id=this.recycleAsyncId(ee,pe,null)),this.delay=null}}},6102:(Pe,fe,V)=>{"use strict";V.d(fe,{v:()=>x});let w=(()=>{class se{constructor(pe,ee=se.now){this.SchedulerAction=pe,this.now=ee}schedule(pe,ee=0,ge){return new this.SchedulerAction(this,pe).schedule(ge,ee)}}return se.now=()=>Date.now(),se})();class x extends w{constructor(De,pe=w.now){super(De,()=>x.delegate&&x.delegate!==this?x.delegate.now():pe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(De,pe=0,ee){return x.delegate&&x.delegate!==this?x.delegate.schedule(De,pe,ee):super.schedule(De,pe,ee)}flush(De){const{actions:pe}=this;if(this.active)return void pe.push(De);let ee;this.active=!0;do{if(ee=De.execute(De.state,De.delay))break}while(De=pe.shift());if(this.active=!1,ee){for(;De=pe.shift();)De.unsubscribe();throw ee}}}},3637:(Pe,fe,V)=>{"use strict";V.d(fe,{z:()=>se,P:()=>De});var w=V(6465);const se=new(V(6102).v)(w.o),De=se},7771:(Pe,fe,V)=>{"use strict";V.d(fe,{c:()=>ee,N:()=>pe});var w=V(6465),se=V(6102);const pe=new class extends se.v{}(class extends w.o{constructor(oe,le){super(oe,le),this.scheduler=oe,this.work=le}schedule(oe,le=0){return le>0?super.schedule(oe,le):(this.delay=le,this.state=oe,this.scheduler.flush(this),this)}execute(oe,le){return le>0||this.closed?super.execute(oe,le):this._execute(oe,le)}requestAsyncId(oe,le,Y=0){return null!==Y&&Y>0||null===Y&&this.delay>0?super.requestAsyncId(oe,le,Y):oe.flush(this)}}),ee=pe},377:(Pe,fe,V)=>{"use strict";V.d(fe,{hZ:()=>x});const x="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Pe,fe,V)=>{"use strict";V.d(fe,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Pe,fe,V)=>{"use strict";V.d(fe,{b:()=>w});const w="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(Pe,fe,V)=>{"use strict";V.d(fe,{W:()=>x});const x=(()=>{function se(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return se.prototype=Object.create(Error.prototype),se})()},3410:(Pe,fe,V)=>{"use strict";V.d(fe,{K:()=>x});const x=(()=>{function se(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return se.prototype=Object.create(Error.prototype),se})()},7971:(Pe,fe,V)=>{"use strict";V.d(fe,{N:()=>x});const x=(()=>{function se(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return se.prototype=Object.create(Error.prototype),se})()},4449:(Pe,fe,V)=>{"use strict";function w(x){setTimeout(()=>{throw x},0)}V.d(fe,{z:()=>w})},4487:(Pe,fe,V)=>{"use strict";function w(x){return x}V.d(fe,{y:()=>w})},9796:(Pe,fe,V)=>{"use strict";V.d(fe,{k:()=>w});const w=Array.isArray||(x=>x&&"number"==typeof x.length)},9489:(Pe,fe,V)=>{"use strict";V.d(fe,{z:()=>w});const w=x=>x&&"number"==typeof x.length&&"function"!=typeof x},9105:(Pe,fe,V)=>{"use strict";function w(x){return"function"==typeof x}V.d(fe,{m:()=>w})},1555:(Pe,fe,V)=>{"use strict";function w(x){return null!==x&&"object"==typeof x}V.d(fe,{K:()=>w})},4072:(Pe,fe,V)=>{"use strict";function w(x){return!!x&&"function"!=typeof x.subscribe&&"function"==typeof x.then}V.d(fe,{t:()=>w})},4869:(Pe,fe,V)=>{"use strict";function w(x){return x&&"function"==typeof x.schedule}V.d(fe,{K:()=>w})},7444:(Pe,fe,V)=>{"use strict";V.d(fe,{s:()=>ie});var w=V(5015),x=V(4449),De=V(377),ee=V(6554),oe=V(9489),le=V(4072),Y=V(1555);const ie=Z=>{if(Z&&"function"==typeof Z[ee.L])return(Z=>me=>{const Ke=Z[ee.L]();if("function"!=typeof Ke.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ke.subscribe(me)})(Z);if((0,oe.z)(Z))return(0,w.V)(Z);if((0,le.t)(Z))return(Z=>me=>(Z.then(Ke=>{me.closed||(me.next(Ke),me.complete())},Ke=>me.error(Ke)).then(null,x.z),me))(Z);if(Z&&"function"==typeof Z[De.hZ])return(Z=>me=>{const Ke=Z[De.hZ]();for(;;){let qe;try{qe=Ke.next()}catch(Me){return me.error(Me),me}if(qe.done){me.complete();break}if(me.next(qe.value),me.closed)break}return"function"==typeof Ke.return&&me.add(()=>{Ke.return&&Ke.return()}),me})(Z);{const Ke=`You provided ${(0,Y.K)(Z)?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ke)}}},5015:(Pe,fe,V)=>{"use strict";V.d(fe,{V:()=>w});const w=x=>se=>{for(let De=0,pe=x.length;De<pe&&!se.closed;De++)se.next(x[De]);se.complete()}},509:(Pe,fe,V)=>{"use strict";V.d(fe,{D:()=>pe});var w=V(7393);class x extends w.L{constructor(ge,oe,le){super(),this.parent=ge,this.outerValue=oe,this.outerIndex=le,this.index=0}_next(ge){this.parent.notifyNext(this.outerValue,ge,this.outerIndex,this.index++,this)}_error(ge){this.parent.notifyError(ge,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var se=V(7444),De=V(7574);function pe(ee,ge,oe,le,Y=new x(ee,oe,le)){if(!Y.closed)return ge instanceof De.y?ge.subscribe(Y):(0,se.s)(ge)(Y)}},8259:function(Pe){Pe.exports=function(){"use strict";const fe=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),V="SweetAlert2:",x=R=>R.charAt(0).toUpperCase()+R.slice(1),se=R=>Array.prototype.slice.call(R),De=R=>{console.warn("".concat(V," ").concat("object"==typeof R?R.join(" "):R))},pe=R=>{console.error("".concat(V," ").concat(R))},ee=[],oe=(R,N)=>{(R=>{ee.includes(R)||(ee.push(R),De(R))})('"'.concat(R,'" is deprecated and will be removed in the next major release. Please use "').concat(N,'" instead.'))},le=R=>"function"==typeof R?R():R,Y=R=>R&&"function"==typeof R.toPromise,ie=R=>Y(R)?R.toPromise():Promise.resolve(R),Z=R=>R&&Promise.resolve(R)===R,Ke=R=>R instanceof Element||(R=>"object"==typeof R&&R.jquery)(R),it=R=>{const N={};for(const z in R)N[R[z]]="swal2-"+R[z];return N},ce=it(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),Qe=it(["success","warning","info","question","error"]),et=()=>document.body.querySelector(".".concat(ce.container)),Ie=R=>{const N=et();return N?N.querySelector(R):null},lt=R=>Ie(".".concat(R)),Mt=()=>lt(ce.popup),Wt=()=>lt(ce.icon),xt=()=>lt(ce.title),rt=()=>lt(ce["html-container"]),Be=()=>lt(ce.image),Ae=()=>lt(ce["progress-steps"]),$e=()=>lt(ce["validation-message"]),xe=()=>Ie(".".concat(ce.actions," .").concat(ce.confirm)),He=()=>Ie(".".concat(ce.actions," .").concat(ce.deny)),at=()=>Ie(".".concat(ce.loader)),Ot=()=>Ie(".".concat(ce.actions," .").concat(ce.cancel)),zt=()=>lt(ce.actions),Dt=()=>lt(ce.footer),Ft=()=>lt(ce["timer-progress-bar"]),Ht=()=>lt(ce.close),nr=()=>{const R=se(Mt().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((z,we)=>(z=parseInt(z.getAttribute("tabindex")))>(we=parseInt(we.getAttribute("tabindex")))?1:z<we?-1:0),N=se(Mt().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(z=>"-1"!==z.getAttribute("tabindex"));return(R=>{const N=[];for(let z=0;z<R.length;z++)-1===N.indexOf(R[z])&&N.push(R[z]);return N})(R.concat(N)).filter(z=>sn(z))},Jt=()=>!Fn(document.body,ce["toast-shown"])&&!Fn(document.body,ce["no-backdrop"]),rn=()=>Mt()&&Fn(Mt(),ce.toast),Lt={previousBodyPadding:null},Kt=(R,N)=>{if(R.textContent="",N){const we=(new DOMParser).parseFromString(N,"text/html");se(we.querySelector("head").childNodes).forEach(dt=>{R.appendChild(dt)}),se(we.querySelector("body").childNodes).forEach(dt=>{R.appendChild(dt)})}},Fn=(R,N)=>{if(!N)return!1;const z=N.split(/\s+/);for(let we=0;we<z.length;we++)if(!R.classList.contains(z[we]))return!1;return!0},Gt=(R,N,z)=>{if(((R,N)=>{se(R.classList).forEach(z=>{!Object.values(ce).includes(z)&&!Object.values(Qe).includes(z)&&!Object.values(N.showClass).includes(z)&&R.classList.remove(z)})})(R,N),N.customClass&&N.customClass[z]){if("string"!=typeof N.customClass[z]&&!N.customClass[z].forEach)return De("Invalid type of customClass.".concat(z,'! Expected string or iterable object, got "').concat(typeof N.customClass[z],'"'));Nt(R,N.customClass[z])}},Gn=(R,N)=>{if(!N)return null;switch(N){case"select":case"textarea":case"file":return Tt(R,ce[N]);case"checkbox":return R.querySelector(".".concat(ce.checkbox," input"));case"radio":return R.querySelector(".".concat(ce.radio," input:checked"))||R.querySelector(".".concat(ce.radio," input:first-child"));case"range":return R.querySelector(".".concat(ce.range," input"));default:return Tt(R,ce.input)}},Yn=R=>{if(R.focus(),"file"!==R.type){const N=R.value;R.value="",R.value=N}},Xr=(R,N,z)=>{!R||!N||("string"==typeof N&&(N=N.split(/\s+/).filter(Boolean)),N.forEach(we=>{R.forEach?R.forEach(dt=>{z?dt.classList.add(we):dt.classList.remove(we)}):z?R.classList.add(we):R.classList.remove(we)}))},Nt=(R,N)=>{Xr(R,N,!0)},Qn=(R,N)=>{Xr(R,N,!1)},Tt=(R,N)=>{for(let z=0;z<R.childNodes.length;z++)if(Fn(R.childNodes[z],N))return R.childNodes[z]},ar=(R,N,z)=>{z==="".concat(parseInt(z))&&(z=parseInt(z)),z||0===parseInt(z)?R.style[N]="number"==typeof z?"".concat(z,"px"):z:R.style.removeProperty(N)},zn=function(R){R.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},jn=R=>{R.style.display="none"},Qt=(R,N,z,we)=>{const dt=R.querySelector(N);dt&&(dt.style[z]=we)},jt=(R,N,z)=>{N?zn(R,z):jn(R)},sn=R=>!(!R||!(R.offsetWidth||R.offsetHeight||R.getClientRects().length)),Ar=R=>R.scrollHeight>R.clientHeight,Sn=R=>{const N=window.getComputedStyle(R),z=parseFloat(N.getPropertyValue("animation-duration")||"0"),we=parseFloat(N.getPropertyValue("transition-duration")||"0");return z>0||we>0},It=function(R){let N=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const z=Ft();sn(z)&&(N&&(z.style.transition="none",z.style.width="100%"),setTimeout(()=>{z.style.transition="width ".concat(R/1e3,"s linear"),z.style.width="0%"},10))},ei=()=>"undefined"==typeof window||"undefined"==typeof document,bi='\n <div aria-labelledby="'.concat(ce.title,'" aria-describedby="').concat(ce["html-container"],'" class="').concat(ce.popup,'" tabindex="-1">\n   <button type="button" class="').concat(ce.close,'"></button>\n   <ul class="').concat(ce["progress-steps"],'"></ul>\n   <div class="').concat(ce.icon,'"></div>\n   <img class="').concat(ce.image,'" />\n   <h2 class="').concat(ce.title,'" id="').concat(ce.title,'"></h2>\n   <div class="').concat(ce["html-container"],'" id="').concat(ce["html-container"],'"></div>\n   <input class="').concat(ce.input,'" />\n   <input type="file" class="').concat(ce.file,'" />\n   <div class="').concat(ce.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(ce.select,'"></select>\n   <div class="').concat(ce.radio,'"></div>\n   <label for="').concat(ce.checkbox,'" class="').concat(ce.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(ce.label,'"></span>\n   </label>\n   <textarea class="').concat(ce.textarea,'"></textarea>\n   <div class="').concat(ce["validation-message"],'" id="').concat(ce["validation-message"],'"></div>\n   <div class="').concat(ce.actions,'">\n     <div class="').concat(ce.loader,'"></div>\n     <button type="button" class="').concat(ce.confirm,'"></button>\n     <button type="button" class="').concat(ce.deny,'"></button>\n     <button type="button" class="').concat(ce.cancel,'"></button>\n   </div>\n   <div class="').concat(ce.footer,'"></div>\n   <div class="').concat(ce["timer-progress-bar-container"],'">\n     <div class="').concat(ce["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),xn=()=>{$r.isVisible()&&$r.resetValidationMessage()},Re=R=>{const N=(()=>{const R=et();return!!R&&(R.remove(),Qn([document.documentElement,document.body],[ce["no-backdrop"],ce["toast-shown"],ce["has-column"]]),!0)})();if(ei())return void pe("SweetAlert2 requires document to initialize");const z=document.createElement("div");z.className=ce.container,N&&Nt(z,ce["no-transition"]),Kt(z,bi);const we=(R=>"string"==typeof R?document.querySelector(R):R)(R.target);we.appendChild(z),(R=>{const N=Mt();N.setAttribute("role",R.toast?"alert":"dialog"),N.setAttribute("aria-live",R.toast?"polite":"assertive"),R.toast||N.setAttribute("aria-modal","true")})(R),(R=>{"rtl"===window.getComputedStyle(R).direction&&Nt(et(),ce.rtl)})(we),(()=>{const R=Mt(),N=Tt(R,ce.input),z=Tt(R,ce.file),we=R.querySelector(".".concat(ce.range," input")),dt=R.querySelector(".".concat(ce.range," output")),Bt=Tt(R,ce.select),_r=R.querySelector(".".concat(ce.checkbox," input")),ji=Tt(R,ce.textarea);N.oninput=xn,z.onchange=xn,Bt.onchange=xn,_r.onchange=xn,ji.oninput=xn,we.oninput=()=>{xn(),dt.value=we.value},we.onchange=()=>{xn(),we.nextSibling.value=we.value}})()},ot=(R,N)=>{R instanceof HTMLElement?N.appendChild(R):"object"==typeof R?je(R,N):R&&Kt(N,R)},je=(R,N)=>{R.jquery?Ut(N,R):Kt(N,R.toString())},Ut=(R,N)=>{if(R.textContent="",0 in N)for(let z=0;z in N;z++)R.appendChild(N[z].cloneNode(!0));else R.appendChild(N.cloneNode(!0))},Vt=(()=>{if(ei())return!1;const R=document.createElement("div"),N={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(const z in N)if(Object.prototype.hasOwnProperty.call(N,z)&&void 0!==R.style[z])return N[z];return!1})(),Cn=(R,N)=>{const z=zt(),we=at();N.showConfirmButton||N.showDenyButton||N.showCancelButton?zn(z):jn(z),Gt(z,N,"actions"),function(R,N,z){const we=xe(),dt=He(),Bt=Ot();_n(we,"confirm",z),_n(dt,"deny",z),_n(Bt,"cancel",z),function(R,N,z,we){if(!we.buttonsStyling)return Qn([R,N,z],ce.styled);Nt([R,N,z],ce.styled),we.confirmButtonColor&&(R.style.backgroundColor=we.confirmButtonColor,Nt(R,ce["default-outline"])),we.denyButtonColor&&(N.style.backgroundColor=we.denyButtonColor,Nt(N,ce["default-outline"])),we.cancelButtonColor&&(z.style.backgroundColor=we.cancelButtonColor,Nt(z,ce["default-outline"]))}(we,dt,Bt,z),z.reverseButtons&&(z.toast?(R.insertBefore(Bt,we),R.insertBefore(dt,we)):(R.insertBefore(Bt,N),R.insertBefore(dt,N),R.insertBefore(we,N)))}(z,we,N),Kt(we,N.loaderHtml),Gt(we,N,"loader")};function _n(R,N,z){jt(R,z["show".concat(x(N),"Button")],"inline-block"),Kt(R,z["".concat(N,"ButtonText")]),R.setAttribute("aria-label",z["".concat(N,"ButtonAriaLabel")]),R.className=ce[N],Gt(R,z,"".concat(N,"Button")),Nt(R,z["".concat(N,"ButtonClass")])}const xs=(R,N)=>{const z=et();!z||(function(R,N){"string"==typeof N?R.style.background=N:N||Nt([document.documentElement,document.body],ce["no-backdrop"])}(z,N.backdrop),function(R,N){N in ce?Nt(R,ce[N]):(De('The "position" parameter is not valid, defaulting to "center"'),Nt(R,ce.center))}(z,N.position),function(R,N){if(N&&"string"==typeof N){const z="grow-".concat(N);z in ce&&Nt(R,ce[z])}}(z,N.grow),Gt(z,N,"container"))};var hn={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Ki=["input","file","range","select","radio","checkbox","textarea"],yn=R=>{if(!vt[R.input])return pe('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(R.input,'"'));const N=Er(R.input),z=vt[R.input](N,R);zn(z),setTimeout(()=>{Yn(z)})},hr=(R,N)=>{const z=Gn(Mt(),R);if(z){(R=>{for(let N=0;N<R.attributes.length;N++){const z=R.attributes[N].name;["type","value","style"].includes(z)||R.removeAttribute(z)}})(z);for(const we in N)z.setAttribute(we,N[we])}},Jn=R=>{const N=Er(R.input);R.customClass&&Nt(N,R.customClass.input)},Sr=(R,N)=>{(!R.placeholder||N.inputPlaceholder)&&(R.placeholder=N.inputPlaceholder)},qi=(R,N,z)=>{if(z.inputLabel){R.id=ce.input;const we=document.createElement("label"),dt=ce["input-label"];we.setAttribute("for",R.id),we.className=dt,Nt(we,z.customClass.inputLabel),we.innerText=z.inputLabel,N.insertAdjacentElement("beforebegin",we)}},Er=R=>{const N=ce[R]?ce[R]:ce.input;return Tt(Mt(),N)},vt={};vt.text=vt.email=vt.password=vt.number=vt.tel=vt.url=(R,N)=>("string"==typeof N.inputValue||"number"==typeof N.inputValue?R.value=N.inputValue:Z(N.inputValue)||De('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof N.inputValue,'"')),qi(R,R,N),Sr(R,N),R.type=N.input,R),vt.file=(R,N)=>(qi(R,R,N),Sr(R,N),R),vt.range=(R,N)=>{const z=R.querySelector("input"),we=R.querySelector("output");return z.value=N.inputValue,z.type=N.input,we.value=N.inputValue,qi(z,R,N),R},vt.select=(R,N)=>{if(R.textContent="",N.inputPlaceholder){const z=document.createElement("option");Kt(z,N.inputPlaceholder),z.value="",z.disabled=!0,z.selected=!0,R.appendChild(z)}return qi(R,R,N),R},vt.radio=R=>(R.textContent="",R),vt.checkbox=(R,N)=>{const z=Gn(Mt(),"checkbox");z.value=1,z.id=ce.checkbox,z.checked=Boolean(N.inputValue);const we=R.querySelector("span");return Kt(we,N.inputPlaceholder),R},vt.textarea=(R,N)=>{R.value=N.inputValue,Sr(R,N),qi(R,R,N);return setTimeout(()=>{if("MutationObserver"in window){const we=parseInt(window.getComputedStyle(Mt()).width);new MutationObserver(()=>{const Bt=R.offsetWidth+(we=>parseInt(window.getComputedStyle(we).marginLeft)+parseInt(window.getComputedStyle(we).marginRight))(R);Mt().style.width=Bt>we?"".concat(Bt,"px"):null}).observe(R,{attributes:!0,attributeFilter:["style"]})}}),R};const gn=(R,N)=>{const z=rt();Gt(z,N,"htmlContainer"),N.html?(ot(N.html,z),zn(z,"block")):N.text?(z.textContent=N.text,zn(z,"block")):jn(z),((R,N)=>{const z=Mt(),we=hn.innerParams.get(R),dt=!we||N.input!==we.input;Ki.forEach(Bt=>{const _r=ce[Bt],ji=Tt(z,_r);hr(Bt,N.inputAttributes),ji.className=_r,dt&&jn(ji)}),N.input&&(dt&&yn(N),Jn(N))})(R,N)},wn=(R,N)=>{for(const z in Qe)N.icon!==z&&Qn(R,Qe[z]);Nt(R,Qe[N.icon]),Rs(R,N),Hn(),Gt(R,N,"icon")},Hn=()=>{const R=Mt(),N=window.getComputedStyle(R).getPropertyValue("background-color"),z=R.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let we=0;we<z.length;we++)z[we].style.backgroundColor=N},Vn=(R,N)=>{R.textContent="",Kt(R,N.iconHtml?Cs(N.iconHtml):"success"===N.icon?'\n      <div class="swal2-success-circular-line-left"></div>\n      <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n      <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n      <div class="swal2-success-circular-line-right"></div>\n    ':"error"===N.icon?'\n      <span class="swal2-x-mark">\n        <span class="swal2-x-mark-line-left"></span>\n        <span class="swal2-x-mark-line-right"></span>\n      </span>\n    ':Cs({question:"?",warning:"!",info:"i"}[N.icon]))},Rs=(R,N)=>{if(N.iconColor){R.style.color=N.iconColor,R.style.borderColor=N.iconColor;for(const z of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Qt(R,z,"backgroundColor",N.iconColor);Qt(R,".swal2-success-ring","borderColor",N.iconColor)}},Cs=R=>'<div class="'.concat(ce["icon-content"],'">').concat(R,"</div>"),bs=(R,N)=>{const z=Ae();if(!N.progressSteps||0===N.progressSteps.length)return jn(z);zn(z),z.textContent="",N.currentProgressStep>=N.progressSteps.length&&De("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),N.progressSteps.forEach((we,dt)=>{const Bt=(R=>{const N=document.createElement("li");return Nt(N,ce["progress-step"]),Kt(N,R),N})(we);if(z.appendChild(Bt),dt===N.currentProgressStep&&Nt(Bt,ce["active-progress-step"]),dt!==N.progressSteps.length-1){const _r=(R=>{const N=document.createElement("li");return Nt(N,ce["progress-step-line"]),R.progressStepsDistance&&(N.style.width=R.progressStepsDistance),N})(N);z.appendChild(_r)}})},as=(R,N)=>{R.className="".concat(ce.popup," ").concat(sn(R)?N.showClass.popup:""),N.toast?(Nt([document.documentElement,document.body],ce["toast-shown"]),Nt(R,ce.toast)):Nt(R,ce.modal),Gt(R,N,"popup"),"string"==typeof N.customClass&&Nt(R,N.customClass),N.icon&&Nt(R,ce["icon-".concat(N.icon)])},ki=(R,N)=>{((R,N)=>{const z=et(),we=Mt();N.toast?(ar(z,"width",N.width),we.style.width="100%",we.insertBefore(at(),Wt())):ar(we,"width",N.width),ar(we,"padding",N.padding),N.color&&(we.style.color=N.color),N.background&&(we.style.background=N.background),jn($e()),as(we,N)})(0,N),xs(0,N),bs(0,N),((R,N)=>{const z=hn.innerParams.get(R),we=Wt();z&&N.icon===z.icon?(Vn(we,N),wn(we,N)):N.icon||N.iconHtml?N.icon&&-1===Object.keys(Qe).indexOf(N.icon)?(pe('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(N.icon,'"')),jn(we)):(zn(we),Vn(we,N),wn(we,N),Nt(we,N.showClass.icon)):jn(we)})(R,N),((R,N)=>{const z=Be();if(!N.imageUrl)return jn(z);zn(z,""),z.setAttribute("src",N.imageUrl),z.setAttribute("alt",N.imageAlt),ar(z,"width",N.imageWidth),ar(z,"height",N.imageHeight),z.className=ce.image,Gt(z,N,"image")})(0,N),((R,N)=>{const z=xt();jt(z,N.title||N.titleText,"block"),N.title&&ot(N.title,z),N.titleText&&(z.innerText=N.titleText),Gt(z,N,"title")})(0,N),((R,N)=>{const z=Ht();Kt(z,N.closeButtonHtml),Gt(z,N,"closeButton"),jt(z,N.showCloseButton),z.setAttribute("aria-label",N.closeButtonAriaLabel)})(0,N),gn(R,N),Cn(0,N),((R,N)=>{const z=Dt();jt(z,N.footer),N.footer&&ot(N.footer,z),Gt(z,N,"footer")})(0,N),"function"==typeof N.didRender&&N.didRender(Mt())},Ge=()=>xe()&&xe().click();const un=R=>{let N=Mt();N||$r.fire(),N=Mt();const z=at();rn()?jn(Wt()):Un(N,R),zn(z),N.setAttribute("data-loading",!0),N.setAttribute("aria-busy",!0),N.focus()},Un=(R,N)=>{const z=zt(),we=at();!N&&sn(xe())&&(N=xe()),zn(z),N&&(jn(N),we.setAttribute("data-button-to-replace",N.className)),we.parentNode.insertBefore(we,N),Nt([R,z],ce.loading)},Pt={},er=R=>new Promise(N=>{if(!R)return N();const z=window.scrollX,we=window.scrollY;Pt.restoreFocusTimeout=setTimeout(()=>{Pt.previousActiveElement&&Pt.previousActiveElement.focus?(Pt.previousActiveElement.focus(),Pt.previousActiveElement=null):document.body&&document.body.focus(),N()},100),window.scrollTo(z,we)}),Fi=()=>{if(Pt.timeout)return(()=>{const R=Ft(),N=parseInt(window.getComputedStyle(R).width);R.style.removeProperty("transition"),R.style.width="100%";const z=parseInt(window.getComputedStyle(R).width),we=parseInt(N/z*100);R.style.removeProperty("transition"),R.style.width="".concat(we,"%")})(),Pt.timeout.stop()},he=()=>{if(Pt.timeout){const R=Pt.timeout.start();return It(R),R}};let oo=!1;const Li={};const ao=R=>{for(let N=R.target;N&&N!==document;N=N.parentNode)for(const z in Li){const we=N.getAttribute(z);if(we)return void Li[z].fire({template:we})}},Ps={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Ir=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Ms={},Vi=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],us=R=>Object.prototype.hasOwnProperty.call(Ps,R),Is=R=>Ms[R],Ns=R=>{us(R)||De('Unknown parameter "'.concat(R,'"'))},Yi=R=>{Vi.includes(R)&&De('The parameter "'.concat(R,'" is incompatible with toasts'))},Do=R=>{Is(R)&&oe(R,Is(R))},Vr=R=>{!R.backdrop&&R.allowOutsideClick&&De('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const N in R)Ns(N),R.toast&&Yi(N),Do(N)};var cs=Object.freeze({isValidParameter:us,isUpdatableParameter:R=>-1!==Ir.indexOf(R),isDeprecatedParameter:Is,argsToParams:R=>{const N={};return"object"!=typeof R[0]||Ke(R[0])?["title","html","icon"].forEach((z,we)=>{const dt=R[we];"string"==typeof dt||Ke(dt)?N[z]=dt:void 0!==dt&&pe("Unexpected type of ".concat(z,'! Expected "string" or "Element", got ').concat(typeof dt))}):Object.assign(N,R[0]),N},isVisible:()=>sn(Mt()),clickConfirm:Ge,clickDeny:()=>He()&&He().click(),clickCancel:()=>Ot()&&Ot().click(),getContainer:et,getPopup:Mt,getTitle:xt,getHtmlContainer:rt,getImage:Be,getIcon:Wt,getInputLabel:()=>lt(ce["input-label"]),getCloseButton:Ht,getActions:zt,getConfirmButton:xe,getDenyButton:He,getCancelButton:Ot,getLoader:at,getFooter:Dt,getTimerProgressBar:Ft,getFocusableElements:nr,getValidationMessage:$e,isLoading:()=>Mt().hasAttribute("data-loading"),fire:function(){const R=this;for(var N=arguments.length,z=new Array(N),we=0;we<N;we++)z[we]=arguments[we];return new R(...z)},mixin:function(R){return class extends(this){_main(we,dt){return super._main(we,Object.assign({},R,dt))}}},showLoading:un,enableLoading:un,getTimerLeft:()=>Pt.timeout&&Pt.timeout.getTimerLeft(),stopTimer:Fi,resumeTimer:he,toggleTimer:()=>{const R=Pt.timeout;return R&&(R.running?Fi():he())},increaseTimer:R=>{if(Pt.timeout){const N=Pt.timeout.increase(R);return It(N,!0),N}},isTimerRunning:()=>Pt.timeout&&Pt.timeout.isRunning(),bindClickHandler:function(){Li[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,oo||(document.body.addEventListener("click",ao),oo=!0)}});function lo(){const R=hn.innerParams.get(this);if(!R)return;const N=hn.domCache.get(this);jn(N.loader),rn()?R.icon&&zn(Wt()):Yr(N),Qn([N.popup,N.actions],ce.loading),N.popup.removeAttribute("aria-busy"),N.popup.removeAttribute("data-loading"),N.confirmButton.disabled=!1,N.denyButton.disabled=!1,N.cancelButton.disabled=!1}const Yr=R=>{const N=R.popup.getElementsByClassName(R.loader.getAttribute("data-button-to-replace"));N.length?zn(N[0],"inline-block"):!sn(xe())&&!sn(He())&&!sn(Ot())&&jn(R.actions)};const ks=()=>{null===Lt.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(Lt.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Lt.previousBodyPadding+(()=>{const R=document.createElement("div");R.className=ce["scrollbar-measure"],document.body.appendChild(R);const N=R.getBoundingClientRect().width-R.clientWidth;return document.body.removeChild(R),N})(),"px"))},Mr=()=>{if(!navigator.userAgent.match(/(CriOS|FxiOS|EdgiOS|YaBrowser|UCBrowser)/i)){const N=44;Mt().scrollHeight>window.innerHeight-N&&(et().style.paddingBottom="".concat(N,"px"))}},Ii=()=>{const R=et();let N;R.ontouchstart=z=>{N=Ds(z)},R.ontouchmove=z=>{N&&(z.preventDefault(),z.stopPropagation())}},Ds=R=>{const N=R.target,z=et();return!(hs(R)||uo(R)||N!==z&&(Ar(z)||"INPUT"===N.tagName||"TEXTAREA"===N.tagName||Ar(rt())&&rt().contains(N)))},hs=R=>R.touches&&R.touches.length&&"stylus"===R.touches[0].touchType,uo=R=>R.touches&&R.touches.length>1,Dr=()=>{se(document.body.children).forEach(N=>{N.hasAttribute("data-previous-aria-hidden")?(N.setAttribute("aria-hidden",N.getAttribute("data-previous-aria-hidden")),N.removeAttribute("data-previous-aria-hidden")):N.removeAttribute("aria-hidden")})};var ri={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};function Ur(R,N,z,we){rn()?Q(R,we):(er(z).then(()=>Q(R,we)),Pt.keydownTarget.removeEventListener("keydown",Pt.keydownHandler,{capture:Pt.keydownListenerCapture}),Pt.keydownHandlerAdded=!1),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(N.setAttribute("style","display:none !important"),N.removeAttribute("class"),N.innerHTML=""):N.remove(),Jt()&&(null!==Lt.previousBodyPadding&&(document.body.style.paddingRight="".concat(Lt.previousBodyPadding,"px"),Lt.previousBodyPadding=null),(()=>{if(Fn(document.body,ce.iosfix)){const R=parseInt(document.body.style.top,10);Qn(document.body,ce.iosfix),document.body.style.top="",document.body.scrollTop=-1*R}})(),Dr()),Qn([document.documentElement,document.body],[ce.shown,ce["height-auto"],ce["no-backdrop"],ce["toast-shown"]])}function ii(R){R=Bi(R);const N=ri.swalPromiseResolve.get(this),z=Ui(this);this.isAwaitingPromise()?R.isDismissed||(Ts(this),N(R)):z&&N(R)}const Ui=R=>{const N=Mt();if(!N)return!1;const z=hn.innerParams.get(R);if(!z||Fn(N,z.hideClass.popup))return!1;Qn(N,z.showClass.popup),Nt(N,z.hideClass.popup);const we=et();return Qn(we,z.showClass.backdrop),Nt(we,z.hideClass.backdrop),Ma(R,N,z),!0};const Ts=R=>{R.isAwaitingPromise()&&(hn.awaitingPromise.delete(R),hn.innerParams.get(R)||R._destroy())},Bi=R=>void 0===R?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},R),Ma=(R,N,z)=>{const we=et(),dt=Vt&&Sn(N);"function"==typeof z.willClose&&z.willClose(N),dt?B(R,N,we,z.returnFocus,z.didClose):Ur(R,we,z.returnFocus,z.didClose)},B=(R,N,z,we,dt)=>{Pt.swalCloseEventFinishedCallback=Ur.bind(null,R,z,we,dt),N.addEventListener(Vt,function(Bt){Bt.target===N&&(Pt.swalCloseEventFinishedCallback(),delete Pt.swalCloseEventFinishedCallback)})},Q=(R,N)=>{setTimeout(()=>{"function"==typeof N&&N.bind(R.params)(),R._destroy()})};function H(R,N,z){const we=hn.domCache.get(R);N.forEach(dt=>{we[dt].disabled=z})}function te(R,N){if(!R)return!1;if("radio"===R.type){const we=R.parentNode.parentNode.querySelectorAll("input");for(let dt=0;dt<we.length;dt++)we[dt].disabled=N}else R.disabled=N}class Ve{constructor(N,z){this.callback=N,this.remaining=z,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date-this.started),this.remaining}increase(N){const z=this.running;return z&&this.stop(),this.remaining+=N,z&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}var pt={email:(R,N)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(R)?Promise.resolve():Promise.resolve(N||"Invalid email address"),url:(R,N)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(R)?Promise.resolve():Promise.resolve(N||"Invalid URL")};function Di(R){(function(R){R.inputValidator||Object.keys(pt).forEach(N=>{R.input===N&&(R.inputValidator=pt[N])})})(R),R.showLoaderOnConfirm&&!R.preConfirm&&De("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(R){(!R.target||"string"==typeof R.target&&!document.querySelector(R.target)||"string"!=typeof R.target&&!R.target.appendChild)&&(De('Target parameter is not valid, defaulting to "body"'),R.target="body")}(R),"string"==typeof R.title&&(R.title=R.title.split("\n").join("<br />")),Re(R)}const Nr=["swal-title","swal-html","swal-footer"],fs=R=>{const N={};return se(R.querySelectorAll("swal-param")).forEach(z=>{Ho(z,["name","value"]);const we=z.getAttribute("name");let dt=z.getAttribute("value");"boolean"==typeof Ps[we]&&"false"===dt&&(dt=!1),"object"==typeof Ps[we]&&(dt=JSON.parse(dt)),N[we]=dt}),N},Zt=R=>{const N={};return se(R.querySelectorAll("swal-button")).forEach(z=>{Ho(z,["type","color","aria-label"]);const we=z.getAttribute("type");N["".concat(we,"ButtonText")]=z.innerHTML,N["show".concat(x(we),"Button")]=!0,z.hasAttribute("color")&&(N["".concat(we,"ButtonColor")]=z.getAttribute("color")),z.hasAttribute("aria-label")&&(N["".concat(we,"ButtonAriaLabel")]=z.getAttribute("aria-label"))}),N},Qi=R=>{const N={},z=R.querySelector("swal-image");return z&&(Ho(z,["src","width","height","alt"]),z.hasAttribute("src")&&(N.imageUrl=z.getAttribute("src")),z.hasAttribute("width")&&(N.imageWidth=z.getAttribute("width")),z.hasAttribute("height")&&(N.imageHeight=z.getAttribute("height")),z.hasAttribute("alt")&&(N.imageAlt=z.getAttribute("alt"))),N},ha=R=>{const N={},z=R.querySelector("swal-icon");return z&&(Ho(z,["type","color"]),z.hasAttribute("type")&&(N.icon=z.getAttribute("type")),z.hasAttribute("color")&&(N.iconColor=z.getAttribute("color")),N.iconHtml=z.innerHTML),N},wl=R=>{const N={},z=R.querySelector("swal-input");z&&(Ho(z,["type","label","placeholder","value"]),N.input=z.getAttribute("type")||"text",z.hasAttribute("label")&&(N.inputLabel=z.getAttribute("label")),z.hasAttribute("placeholder")&&(N.inputPlaceholder=z.getAttribute("placeholder")),z.hasAttribute("value")&&(N.inputValue=z.getAttribute("value")));const we=R.querySelectorAll("swal-input-option");return we.length&&(N.inputOptions={},se(we).forEach(dt=>{Ho(dt,["value"]);const Bt=dt.getAttribute("value");N.inputOptions[Bt]=dt.innerHTML})),N},El=(R,N)=>{const z={};for(const we in N){const dt=N[we],Bt=R.querySelector(dt);Bt&&(Ho(Bt,[]),z[dt.replace(/^swal-/,"")]=Bt.innerHTML.trim())}return z},co=R=>{const N=Nr.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);se(R.children).forEach(z=>{const we=z.tagName.toLowerCase();-1===N.indexOf(we)&&De("Unrecognized element <".concat(we,">"))})},Ho=(R,N)=>{se(R.attributes).forEach(z=>{-1===N.indexOf(z.name)&&De(['Unrecognized attribute "'.concat(z.name,'" on <').concat(R.tagName.toLowerCase(),">."),"".concat(N.length?"Allowed attributes are: ".concat(N.join(", ")):"To set the value, use HTML within the element.")])})},ft=R=>{const N=et(),z=Mt();"function"==typeof R.willOpen&&R.willOpen(z);const dt=window.getComputedStyle(document.body).overflowY;$o(N,z,R),setTimeout(()=>{pa(N,z)},10),Jt()&&(Br(N,R.scrollbarPadding,dt),se(document.body.children).forEach(N=>{N===et()||N.contains(et())||(N.hasAttribute("aria-hidden")&&N.setAttribute("data-previous-aria-hidden",N.getAttribute("aria-hidden")),N.setAttribute("aria-hidden","true"))})),!rn()&&!Pt.previousActiveElement&&(Pt.previousActiveElement=document.activeElement),"function"==typeof R.didOpen&&setTimeout(()=>R.didOpen(z)),Qn(N,ce["no-transition"])},Nn=R=>{const N=Mt();if(R.target!==N)return;const z=et();N.removeEventListener(Vt,Nn),z.style.overflowY="auto"},pa=(R,N)=>{Vt&&Sn(N)?(R.style.overflowY="hidden",N.addEventListener(Vt,Nn)):R.style.overflowY="auto"},Br=(R,N,z)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!Fn(document.body,ce.iosfix)){const N=document.body.scrollTop;document.body.style.top="".concat(-1*N,"px"),Nt(document.body,ce.iosfix),Ii(),Mr()}})(),N&&"hidden"!==z&&ks(),setTimeout(()=>{R.scrollTop=0})},$o=(R,N,z)=>{Nt(R,z.showClass.backdrop),N.style.setProperty("opacity","0","important"),zn(N,"grid"),setTimeout(()=>{Nt(N,z.showClass.popup),N.style.removeProperty("opacity")},10),Nt([document.documentElement,document.body],ce.shown),z.heightAuto&&z.backdrop&&!z.toast&&Nt([document.documentElement,document.body],ce["height-auto"])},Wo=R=>R.checked?1:0,ga=R=>R.checked?R.value:null,ic=R=>R.files.length?null!==R.getAttribute("multiple")?R.files:R.files[0]:null,Du=(R,N)=>{const z=Mt(),we=dt=>ma[N.input](z,jr(dt),N);Y(N.inputOptions)||Z(N.inputOptions)?(un(xe()),ie(N.inputOptions).then(dt=>{R.hideLoading(),we(dt)})):"object"==typeof N.inputOptions?we(N.inputOptions):pe("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof N.inputOptions))},Na=(R,N)=>{const z=R.getInput();jn(z),ie(N.inputValue).then(we=>{z.value="number"===N.input?parseFloat(we)||0:"".concat(we),zn(z),z.focus(),R.hideLoading()}).catch(we=>{pe("Error in inputValue promise: ".concat(we)),z.value="",zn(z),z.focus(),R.hideLoading()})},ma={select:(R,N,z)=>{const we=Tt(R,ce.select),dt=(Bt,_r,ji)=>{const si=document.createElement("option");si.value=ji,Kt(si,_r),si.selected=gi(ji,z.inputValue),Bt.appendChild(si)};N.forEach(Bt=>{const _r=Bt[0],ji=Bt[1];if(Array.isArray(ji)){const si=document.createElement("optgroup");si.label=_r,si.disabled=!1,we.appendChild(si),ji.forEach(es=>dt(si,es[1],es[0]))}else dt(we,ji,_r)}),we.focus()},radio:(R,N,z)=>{const we=Tt(R,ce.radio);N.forEach(Bt=>{const _r=Bt[0],ji=Bt[1],si=document.createElement("input"),es=document.createElement("label");si.type="radio",si.name=ce.radio,si.value=_r,gi(_r,z.inputValue)&&(si.checked=!0);const Wr=document.createElement("span");Kt(Wr,ji),Wr.className=ce.label,es.appendChild(si),es.appendChild(Wr),we.appendChild(es)});const dt=we.querySelectorAll("input");dt.length&&dt[0].focus()}},jr=R=>{const N=[];return"undefined"!=typeof Map&&R instanceof Map?R.forEach((z,we)=>{let dt=z;"object"==typeof dt&&(dt=jr(dt)),N.push([we,dt])}):Object.keys(R).forEach(z=>{let we=R[z];"object"==typeof we&&(we=jr(we)),N.push([z,we])}),N},gi=(R,N)=>N&&N.toString()===R.toString(),ho=(R,N)=>{const z=hn.innerParams.get(R),we=((R,N)=>{const z=R.getInput();if(!z)return null;switch(N.input){case"checkbox":return Wo(z);case"radio":return ga(z);case"file":return ic(z);default:return N.inputAutoTrim?z.value.trim():z.value}})(R,z);z.inputValidator?zo(R,we,N):R.getInput().checkValidity()?"deny"===N?kr(R,we):Ko(R,we):(R.enableButtons(),R.showValidationMessage(z.validationMessage))},zo=(R,N,z)=>{const we=hn.innerParams.get(R);R.disableInput(),Promise.resolve().then(()=>ie(we.inputValidator(N,we.validationMessage))).then(Bt=>{R.enableButtons(),R.enableInput(),Bt?R.showValidationMessage(Bt):"deny"===z?kr(R,N):Ko(R,N)})},kr=(R,N)=>{const z=hn.innerParams.get(R||void 0);z.showLoaderOnDeny&&un(He()),z.preDeny?(hn.awaitingPromise.set(R||void 0,!0),Promise.resolve().then(()=>ie(z.preDeny(N,z.validationMessage))).then(dt=>{!1===dt?R.hideLoading():R.closePopup({isDenied:!0,value:void 0===dt?N:dt})}).catch(dt=>Cl(R||void 0,dt))):R.closePopup({isDenied:!0,value:N})},Xa=(R,N)=>{R.closePopup({isConfirmed:!0,value:N})},Cl=(R,N)=>{R.rejectPromise(N)},Ko=(R,N)=>{const z=hn.innerParams.get(R||void 0);z.showLoaderOnConfirm&&un(),z.preConfirm?(R.resetValidationMessage(),hn.awaitingPromise.set(R||void 0,!0),Promise.resolve().then(()=>ie(z.preConfirm(N,z.validationMessage))).then(dt=>{sn($e())||!1===dt?R.hideLoading():Xa(R,void 0===dt?N:dt)}).catch(dt=>Cl(R||void 0,dt))):Xa(R,N)},qo=(R,N,z)=>{const we=nr();if(we.length)return(N+=z)===we.length?N=0:-1===N&&(N=we.length-1),we[N].focus();Mt().focus()},ka=["ArrowRight","ArrowDown"],Fa=["ArrowLeft","ArrowUp"],ya=(R,N,z)=>{const we=hn.innerParams.get(R);!we||(we.stopKeydownPropagation&&N.stopPropagation(),"Enter"===N.key?fo(R,N,we):"Tab"===N.key?el(N,we):[...ka,...Fa].includes(N.key)?Xs(N.key):"Escape"===N.key&&bl(N,we,z))},fo=(R,N,z)=>{if(!N.isComposing&&N.target&&R.getInput()&&N.target.outerHTML===R.getInput().outerHTML){if(["textarea","file"].includes(z.input))return;Ge(),N.preventDefault()}},el=(R,N)=>{const z=R.target,we=nr();let dt=-1;for(let Bt=0;Bt<we.length;Bt++)if(z===we[Bt]){dt=Bt;break}qo(0,dt,R.shiftKey?-1:1),R.stopPropagation(),R.preventDefault()},Xs=R=>{if(![xe(),He(),Ot()].includes(document.activeElement))return;const dt=ka.includes(R)?"nextElementSibling":"previousElementSibling",Bt=document.activeElement[dt];Bt&&Bt.focus()},bl=(R,N,z)=>{le(N.allowEscapeKey)&&(R.preventDefault(),z(fe.esc))},nl=(R,N,z)=>{N.popup.onclick=()=>{const we=hn.innerParams.get(R);we.showConfirmButton||we.showDenyButton||we.showCancelButton||we.showCloseButton||we.timer||we.input||z(fe.close)}};let Ao=!1;const Xi=R=>{R.popup.onmousedown=()=>{R.container.onmouseup=function(N){R.container.onmouseup=void 0,N.target===R.container&&(Ao=!0)}}},po=R=>{R.container.onmousedown=()=>{R.popup.onmouseup=function(N){R.popup.onmouseup=void 0,(N.target===R.popup||R.popup.contains(N.target))&&(Ao=!0)}}},mr=(R,N,z)=>{N.container.onclick=we=>{const dt=hn.innerParams.get(R);Ao?Ao=!1:we.target===N.container&&le(dt.allowOutsideClick)&&z(fe.backdrop)}};const Kl=(R,N)=>{const z=(R=>{const N="string"==typeof R.template?document.querySelector(R.template):R.template;if(!N)return{};const z=N.content;return co(z),Object.assign(fs(z),Zt(z),Qi(z),ha(z),wl(z),El(z,Nr))})(R),we=Object.assign({},Ps,N,z,R);return we.showClass=Object.assign({},Ps.showClass,we.showClass),we.hideClass=Object.assign({},Ps.hideClass,we.hideClass),we},Bn=(R,N,z)=>new Promise((we,dt)=>{const Bt=_r=>{R.closePopup({isDismissed:!0,dismiss:_r})};ri.swalPromiseResolve.set(R,we),ri.swalPromiseReject.set(R,dt),N.confirmButton.onclick=()=>(R=>{const N=hn.innerParams.get(R);R.disableButtons(),N.input?ho(R,"confirm"):Ko(R,!0)})(R),N.denyButton.onclick=()=>(R=>{const N=hn.innerParams.get(R);R.disableButtons(),N.returnInputValueOnDeny?ho(R,"deny"):kr(R,!1)})(R),N.cancelButton.onclick=()=>((R,N)=>{R.disableButtons(),N(fe.cancel)})(R,Bt),N.closeButton.onclick=()=>Bt(fe.close),((R,N,z)=>{hn.innerParams.get(R).toast?nl(R,N,z):(Xi(N),po(N),mr(R,N,z))})(R,N,Bt),((R,N,z,we)=>{N.keydownTarget&&N.keydownHandlerAdded&&(N.keydownTarget.removeEventListener("keydown",N.keydownHandler,{capture:N.keydownListenerCapture}),N.keydownHandlerAdded=!1),z.toast||(N.keydownHandler=dt=>ya(R,dt,we),N.keydownTarget=z.keydownListenerCapture?window:Mt(),N.keydownListenerCapture=z.keydownListenerCapture,N.keydownTarget.addEventListener("keydown",N.keydownHandler,{capture:N.keydownListenerCapture}),N.keydownHandlerAdded=!0)})(R,Pt,z,Bt),((R,N)=>{"select"===N.input||"radio"===N.input?Du(R,N):["text","email","number","tel","textarea"].includes(N.input)&&(Y(N.inputValue)||Z(N.inputValue))&&(un(xe()),Na(R,N))})(R,z),ft(z),Tn(Pt,z,Bt),Ai(N,z),setTimeout(()=>{N.container.scrollTop=0})}),fr=R=>{const N={popup:Mt(),container:et(),actions:zt(),confirmButton:xe(),denyButton:He(),cancelButton:Ot(),loader:at(),closeButton:Ht(),validationMessage:$e(),progressSteps:Ae()};return hn.domCache.set(R,N),N},Tn=(R,N,z)=>{const we=Ft();jn(we),N.timer&&(R.timeout=new Ve(()=>{z("timer"),delete R.timeout},N.timer),N.timerProgressBar&&(zn(we),setTimeout(()=>{R.timeout&&R.timeout.running&&It(N.timer)})))},Ai=(R,N)=>{if(!N.toast){if(!le(N.allowEnterKey))return Zo();ir(R,N)||qo(0,-1,1)}},ir=(R,N)=>N.focusDeny&&sn(R.denyButton)?(R.denyButton.focus(),!0):N.focusCancel&&sn(R.cancelButton)?(R.cancelButton.focus(),!0):!(!N.focusConfirm||!sn(R.confirmButton)||(R.confirmButton.focus(),0)),Zo=()=>{document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};const Si=R=>{pr(R),delete R.params,delete Pt.keydownHandler,delete Pt.keydownTarget,delete Pt.currentInstance},pr=R=>{R.isAwaitingPromise()?(nn(hn,R),hn.awaitingPromise.set(R,!0)):(nn(ri,R),nn(hn,R))},nn=(R,N)=>{for(const z in R)R[z].delete(N)};var Hr=Object.freeze({hideLoading:lo,disableLoading:lo,getInput:function(R){const N=hn.innerParams.get(R||this),z=hn.domCache.get(R||this);return z?Gn(z.popup,N.input):null},close:ii,isAwaitingPromise:function(){return!!hn.awaitingPromise.get(this)},rejectPromise:function(R){const N=ri.swalPromiseReject.get(this);Ts(this),N&&N(R)},closePopup:ii,closeModal:ii,closeToast:ii,enableButtons:function(){H(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function(){H(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function(){return te(this.getInput(),!1)},disableInput:function(){return te(this.getInput(),!0)},showValidationMessage:function(R){const N=hn.domCache.get(this),z=hn.innerParams.get(this);Kt(N.validationMessage,R),N.validationMessage.className=ce["validation-message"],z.customClass&&z.customClass.validationMessage&&Nt(N.validationMessage,z.customClass.validationMessage),zn(N.validationMessage);const we=this.getInput();we&&(we.setAttribute("aria-invalid",!0),we.setAttribute("aria-describedby",ce["validation-message"]),Yn(we),Nt(we,ce.inputerror))},resetValidationMessage:function(){const R=hn.domCache.get(this);R.validationMessage&&jn(R.validationMessage);const N=this.getInput();N&&(N.removeAttribute("aria-invalid"),N.removeAttribute("aria-describedby"),Qn(N,ce.inputerror))},getProgressSteps:function(){return hn.domCache.get(this).progressSteps},_main:function(R){let N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Vr(Object.assign({},N,R)),Pt.currentInstance&&(Pt.currentInstance._destroy(),Jt()&&Dr()),Pt.currentInstance=this;const z=Kl(R,N);Di(z),Object.freeze(z),Pt.timeout&&(Pt.timeout.stop(),delete Pt.timeout),clearTimeout(Pt.restoreFocusTimeout);const we=fr(this);return ki(this,z),hn.innerParams.set(this,z),Bn(this,we,z)},update:function(R){const N=Mt(),z=hn.innerParams.get(this);if(!N||Fn(N,z.hideClass.popup))return De("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const we={};Object.keys(R).forEach(Bt=>{$r.isUpdatableParameter(Bt)?we[Bt]=R[Bt]:De('Invalid parameter to update: "'.concat(Bt,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))});const dt=Object.assign({},z,we);ki(this,dt),hn.innerParams.set(this,dt),Object.defineProperties(this,{params:{value:Object.assign({},this.params,R),writable:!1,enumerable:!0}})},_destroy:function(){const R=hn.domCache.get(this),N=hn.innerParams.get(this);N?(R.popup&&Pt.swalCloseEventFinishedCallback&&(Pt.swalCloseEventFinishedCallback(),delete Pt.swalCloseEventFinishedCallback),Pt.deferDisposalTimer&&(clearTimeout(Pt.deferDisposalTimer),delete Pt.deferDisposalTimer),"function"==typeof N.didDestroy&&N.didDestroy(),Si(this)):pr(this)}});let ps;class gs{constructor(){if("undefined"==typeof window)return;ps=this;for(var N=arguments.length,z=new Array(N),we=0;we<N;we++)z[we]=arguments[we];const dt=Object.freeze(this.constructor.argsToParams(z));Object.defineProperties(this,{params:{value:dt,writable:!1,enumerable:!0,configurable:!0}});const Bt=this._main(this.params);hn.promise.set(this,Bt)}then(N){return hn.promise.get(this).then(N)}finally(N){return hn.promise.get(this).finally(N)}}Object.assign(gs.prototype,Hr),Object.assign(gs,cs),Object.keys(Hr).forEach(R=>{gs[R]=function(){if(ps)return ps[R](...arguments)}}),gs.DismissReason=fe,gs.version="11.3.0";const $r=gs;return $r.default=$r,$r}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(fe,V){var w=fe.createElement("style");if(fe.getElementsByTagName("head")[0].appendChild(w),w.styleSheet)w.styleSheet.disabled||(w.styleSheet.cssText=V);else try{w.innerHTML=V}catch(x){w.innerText=V}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;height:.25em;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 0}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 0;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .5s;animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-i-mark .8s;animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{-webkit-animation:swal2-animate-question-mark .8s;animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@-webkit-keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@-webkit-keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},3259:(Pe,fe,V)=>{"use strict";V.d(fe,{a:()=>x,g:()=>se});var w=V(9771);const x=(0,w.PH)("[Auth] setUser",(0,w.Ky)()),se=(0,w.PH)("[Auth] unsetUser")},725:(Pe,fe,V)=>{"use strict";V.d(fe,{U:()=>x,i:()=>se});var w=V(9771);const x=(0,w.PH)("[IngresoEgreso] set Items",(0,w.Ky)()),se=(0,w.PH)("[IngresoEgreso] Unset Items")},4595:(Pe,fe,V)=>{"use strict";V.d(fe,{e:()=>Y});var w=V(8002);class x{constructor(Z,me,Ke){this.uid=Z,this.nombre=me,this.correo=Ke}static fromFirebase({correo:Z,uid:me,nombre:Ke}){return new x(me,Ke,Z)}}var se=V(3259),De=V(5319),pe=V(725),ee=V(7716),ge=V(2673),oe=V(2278),le=V(9771);let Y=(()=>{class ie{constructor(me,Ke,qe){this.auth=me,this.firestore=Ke,this.store=qe,this.userSubscription=new De.w,this._user=null}get user(){return this._user}initAuthListener(){this.auth.authState.subscribe(me=>{console.log(me),me?this.userSubscription=this.firestore.doc(`${me.uid}/usuario`).valueChanges().subscribe(Ke=>{const qe=x.fromFirebase(Ke);this._user=qe,console.log(qe),this.store.dispatch(se.a({user:qe}))}):(this._user=null,this.userSubscription.unsubscribe(),this.store.dispatch(se.g()),this.store.dispatch(pe.i()))})}crearUsuario(me,Ke,qe){return this.auth.createUserWithEmailAndPassword(Ke,qe).then(({user:Me})=>{const it=new x(null==Me?void 0:Me.uid,me,(null==Me?void 0:Me.email)||"");this.firestore.doc(`${null==Me?void 0:Me.uid}/usuario`).set(Object.assign({},it))})}loginUsuario(me,Ke){return this.auth.signInWithEmailAndPassword(me,Ke)}logout(){return this.auth.signOut()}isAuth(){return this.auth.authState.pipe((0,w.U)(me=>null!=me))}}return ie.\u0275fac=function(me){return new(me||ie)(ee.LFG(ge.zQ),ee.LFG(oe.ST),ee.LFG(le.yh))},ie.\u0275prov=ee.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"}),ie})()},4466:(Pe,fe,V)=>{"use strict";V.d(fe,{m:()=>De});var w=V(8583),x=V(9493),se=V(7716);let De=(()=>{class pe{}return pe.\u0275fac=function(ge){return new(ge||pe)},pe.\u0275mod=se.oAB({type:pe}),pe.\u0275inj=se.cJS({imports:[[w.ez,x.Bz]]}),pe})()},5299:(Pe,fe,V)=>{"use strict";V.d(fe,{h:()=>x,V:()=>se});var w=V(9771);const x=(0,w.PH)("[UI Component] isLoading"),se=(0,w.PH)("[UI Component] stopLoading")},8667:(Pe,fe,V)=>{"use strict";var w=V(8583),x=V(7716);class se extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class De extends se{static makeCurrent(){(0,w.HT)(new De)}onAndCancel(u,l,p){return u.addEventListener(l,p,!1),()=>{u.removeEventListener(l,p,!1)}}dispatchEvent(u,l){u.dispatchEvent(l)}remove(u){u.parentNode&&u.parentNode.removeChild(u)}createElement(u,l){return(l=l||this.getDefaultDocument()).createElement(u)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(u){return u.nodeType===Node.ELEMENT_NODE}isShadowRoot(u){return u instanceof DocumentFragment}getGlobalEventTarget(u,l){return"window"===l?window:"document"===l?u:"body"===l?u.body:null}getBaseHref(u){const l=(pe=pe||document.querySelector("base"),pe?pe.getAttribute("href"):null);return null==l?null:function(d){ge=ge||document.createElement("a"),ge.setAttribute("href",d);const u=ge.pathname;return"/"===u.charAt(0)?u:`/${u}`}(l)}resetBaseElement(){pe=null}getUserAgent(){return window.navigator.userAgent}getCookie(u){return(0,w.Mx)(document.cookie,u)}}let ge,pe=null;const le=new x.OlP("TRANSITION_ID"),ie=[{provide:x.ip1,useFactory:function(d,u,l){return()=>{l.get(x.CZH).donePromise.then(()=>{const p=(0,w.q)(),v=u.querySelectorAll(`style[ng-transition="${d}"]`);for(let S=0;S<v.length;S++)p.remove(v[S])})}},deps:[le,w.K0,x.zs3],multi:!0}];class Z{static init(){(0,x.VLi)(new Z)}addToWindow(u){x.dqk.getAngularTestability=(p,v=!0)=>{const S=u.findTestabilityInTree(p,v);if(null==S)throw new Error("Could not find testability for element.");return S},x.dqk.getAllAngularTestabilities=()=>u.getAllTestabilities(),x.dqk.getAllAngularRootElements=()=>u.getAllRootElements(),x.dqk.frameworkStabilizers||(x.dqk.frameworkStabilizers=[]),x.dqk.frameworkStabilizers.push(p=>{const v=x.dqk.getAllAngularTestabilities();let S=v.length,U=!1;const J=function(de){U=U||de,S--,0==S&&p(U)};v.forEach(function(de){de.whenStable(J)})})}findTestabilityInTree(u,l,p){if(null==l)return null;const v=u.getTestability(l);return null!=v?v:p?(0,w.q)().isShadowRoot(l)?this.findTestabilityInTree(u,l.host,!0):this.findTestabilityInTree(u,l.parentElement,!0):null}}let me=(()=>{class d{build(){return new XMLHttpRequest}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275prov=x.Yz7({token:d,factory:d.\u0275fac}),d})();const $e=new x.OlP("EventManagerPlugins");let xe=(()=>{class d{constructor(l,p){this._zone=p,this._eventNameToPlugin=new Map,l.forEach(v=>v.manager=this),this._plugins=l.slice().reverse()}addEventListener(l,p,v){return this._findPluginFor(p).addEventListener(l,p,v)}addGlobalEventListener(l,p,v){return this._findPluginFor(p).addGlobalEventListener(l,p,v)}getZone(){return this._zone}_findPluginFor(l){const p=this._eventNameToPlugin.get(l);if(p)return p;const v=this._plugins;for(let S=0;S<v.length;S++){const U=v[S];if(U.supports(l))return this._eventNameToPlugin.set(l,U),U}throw new Error(`No event manager plugin found for event ${l}`)}}return d.\u0275fac=function(l){return new(l||d)(x.LFG($e),x.LFG(x.R0b))},d.\u0275prov=x.Yz7({token:d,factory:d.\u0275fac}),d})();class He{constructor(u){this._doc=u}addGlobalEventListener(u,l,p){const v=(0,w.q)().getGlobalEventTarget(this._doc,u);if(!v)throw new Error(`Unsupported event target ${v} for event ${l}`);return this.addEventListener(v,l,p)}}let Le=(()=>{class d{constructor(){this._stylesSet=new Set}addStyles(l){const p=new Set;l.forEach(v=>{this._stylesSet.has(v)||(this._stylesSet.add(v),p.add(v))}),this.onStylesAdded(p)}onStylesAdded(l){}getAllStyles(){return Array.from(this._stylesSet)}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275prov=x.Yz7({token:d,factory:d.\u0275fac}),d})(),at=(()=>{class d extends Le{constructor(l){super(),this._doc=l,this._hostNodes=new Map,this._hostNodes.set(l.head,[])}_addStylesToHost(l,p,v){l.forEach(S=>{const U=this._doc.createElement("style");U.textContent=S,v.push(p.appendChild(U))})}addHost(l){const p=[];this._addStylesToHost(this._stylesSet,l,p),this._hostNodes.set(l,p)}removeHost(l){const p=this._hostNodes.get(l);p&&p.forEach(Ot),this._hostNodes.delete(l)}onStylesAdded(l){this._hostNodes.forEach((p,v)=>{this._addStylesToHost(l,v,p)})}ngOnDestroy(){this._hostNodes.forEach(l=>l.forEach(Ot))}}return d.\u0275fac=function(l){return new(l||d)(x.LFG(w.K0))},d.\u0275prov=x.Yz7({token:d,factory:d.\u0275fac}),d})();function Ot(d){(0,w.q)().remove(d)}const zt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Dt=/%COMP%/g;function mn(d,u,l){for(let p=0;p<u.length;p++){let v=u[p];Array.isArray(v)?mn(d,v,l):(v=v.replace(Dt,d),l.push(v))}return l}function Lt(d){return u=>{if("__ngUnwrap__"===u)return d;!1===d(u)&&(u.preventDefault(),u.returnValue=!1)}}let Fn=(()=>{class d{constructor(l,p,v){this.eventManager=l,this.sharedStylesHost=p,this.appId=v,this.rendererByCompId=new Map,this.defaultRenderer=new dr(l)}createRenderer(l,p){if(!l||!p)return this.defaultRenderer;switch(p.encapsulation){case x.ifc.Emulated:{let v=this.rendererByCompId.get(p.id);return v||(v=new Xr(this.eventManager,this.sharedStylesHost,p,this.appId),this.rendererByCompId.set(p.id,v)),v.applyToHost(l),v}case 1:case x.ifc.ShadowDom:return new Nt(this.eventManager,this.sharedStylesHost,l,p);default:if(!this.rendererByCompId.has(p.id)){const v=mn(p.id,p.styles,[]);this.sharedStylesHost.addStyles(v),this.rendererByCompId.set(p.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return d.\u0275fac=function(l){return new(l||d)(x.LFG(xe),x.LFG(at),x.LFG(x.AFp))},d.\u0275prov=x.Yz7({token:d,factory:d.\u0275fac}),d})();class dr{constructor(u){this.eventManager=u,this.data=Object.create(null)}destroy(){}createElement(u,l){return l?document.createElementNS(zt[l]||l,u):document.createElement(u)}createComment(u){return document.createComment(u)}createText(u){return document.createTextNode(u)}appendChild(u,l){u.appendChild(l)}insertBefore(u,l,p){u&&u.insertBefore(l,p)}removeChild(u,l){u&&u.removeChild(l)}selectRootElement(u,l){let p="string"==typeof u?document.querySelector(u):u;if(!p)throw new Error(`The selector "${u}" did not match any elements`);return l||(p.textContent=""),p}parentNode(u){return u.parentNode}nextSibling(u){return u.nextSibling}setAttribute(u,l,p,v){if(v){l=v+":"+l;const S=zt[v];S?u.setAttributeNS(S,l,p):u.setAttribute(l,p)}else u.setAttribute(l,p)}removeAttribute(u,l,p){if(p){const v=zt[p];v?u.removeAttributeNS(v,l):u.removeAttribute(`${p}:${l}`)}else u.removeAttribute(l)}addClass(u,l){u.classList.add(l)}removeClass(u,l){u.classList.remove(l)}setStyle(u,l,p,v){v&(x.JOm.DashCase|x.JOm.Important)?u.style.setProperty(l,p,v&x.JOm.Important?"important":""):u.style[l]=p}removeStyle(u,l,p){p&x.JOm.DashCase?u.style.removeProperty(l):u.style[l]=""}setProperty(u,l,p){u[l]=p}setValue(u,l){u.nodeValue=l}listen(u,l,p){return"string"==typeof u?this.eventManager.addGlobalEventListener(u,l,Lt(p)):this.eventManager.addEventListener(u,l,Lt(p))}}class Xr extends dr{constructor(u,l,p,v){super(u),this.component=p;const S=mn(v+"-"+p.id,p.styles,[]);l.addStyles(S),this.contentAttr="_ngcontent-%COMP%".replace(Dt,v+"-"+p.id),this.hostAttr="_nghost-%COMP%".replace(Dt,v+"-"+p.id)}applyToHost(u){super.setAttribute(u,this.hostAttr,"")}createElement(u,l){const p=super.createElement(u,l);return super.setAttribute(p,this.contentAttr,""),p}}class Nt extends dr{constructor(u,l,p,v){super(u),this.sharedStylesHost=l,this.hostEl=p,this.shadowRoot=p.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const S=mn(v.id,v.styles,[]);for(let U=0;U<S.length;U++){const J=document.createElement("style");J.textContent=S[U],this.shadowRoot.appendChild(J)}}nodeOrShadowRoot(u){return u===this.hostEl?this.shadowRoot:u}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(u,l){return super.appendChild(this.nodeOrShadowRoot(u),l)}insertBefore(u,l,p){return super.insertBefore(this.nodeOrShadowRoot(u),l,p)}removeChild(u,l){return super.removeChild(this.nodeOrShadowRoot(u),l)}parentNode(u){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(u)))}}let Qn=(()=>{class d extends He{constructor(l){super(l)}supports(l){return!0}addEventListener(l,p,v){return l.addEventListener(p,v,!1),()=>this.removeEventListener(l,p,v)}removeEventListener(l,p,v){return l.removeEventListener(p,v)}}return d.\u0275fac=function(l){return new(l||d)(x.LFG(w.K0))},d.\u0275prov=x.Yz7({token:d,factory:d.\u0275fac}),d})();const Sn=["alt","control","meta","shift"],yt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ei={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ni={alt:d=>d.altKey,control:d=>d.ctrlKey,meta:d=>d.metaKey,shift:d=>d.shiftKey};let Se=(()=>{class d extends He{constructor(l){super(l)}supports(l){return null!=d.parseEventName(l)}addEventListener(l,p,v){const S=d.parseEventName(p),U=d.eventCallback(S.fullKey,v,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(l,S.domEventName,U))}static parseEventName(l){const p=l.toLowerCase().split("."),v=p.shift();if(0===p.length||"keydown"!==v&&"keyup"!==v)return null;const S=d._normalizeKey(p.pop());let U="";if(Sn.forEach(de=>{const be=p.indexOf(de);be>-1&&(p.splice(be,1),U+=de+".")}),U+=S,0!=p.length||0===S.length)return null;const J={};return J.domEventName=v,J.fullKey=U,J}static getEventFullKey(l){let p="",v=function(d){let u=d.key;if(null==u){if(u=d.keyIdentifier,null==u)return"Unidentified";u.startsWith("U+")&&(u=String.fromCharCode(parseInt(u.substring(2),16)),3===d.location&&ei.hasOwnProperty(u)&&(u=ei[u]))}return yt[u]||u}(l);return v=v.toLowerCase()," "===v?v="space":"."===v&&(v="dot"),Sn.forEach(S=>{S!=v&&Ni[S](l)&&(p+=S+".")}),p+=v,p}static eventCallback(l,p,v){return S=>{d.getEventFullKey(S)===l&&v.runGuarded(()=>p(S))}}static _normalizeKey(l){switch(l){case"esc":return"escape";default:return l}}}return d.\u0275fac=function(l){return new(l||d)(x.LFG(w.K0))},d.\u0275prov=x.Yz7({token:d,factory:d.\u0275fac}),d})();const ai=(0,x.eFA)(x._c5,"browser",[{provide:x.Lbi,useValue:w.bD},{provide:x.g9A,useValue:function(){De.makeCurrent(),Z.init()},multi:!0},{provide:w.K0,useFactory:function(){return(0,x.RDi)(document),document},deps:[]}]),zi=[[],{provide:x.zSh,useValue:"root"},{provide:x.qLn,useFactory:function(){return new x.qLn},deps:[]},{provide:$e,useClass:Qn,multi:!0,deps:[w.K0,x.R0b,x.Lbi]},{provide:$e,useClass:Se,multi:!0,deps:[w.K0]},[],{provide:Fn,useClass:Fn,deps:[xe,at,x.AFp]},{provide:x.FYo,useExisting:Fn},{provide:Le,useExisting:at},{provide:at,useClass:at,deps:[w.K0]},{provide:x.dDg,useClass:x.dDg,deps:[x.R0b]},{provide:xe,useClass:xe,deps:[$e,x.R0b]},{provide:w.JF,useClass:me,deps:[]},[]];let xs=(()=>{class d{constructor(l){if(l)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(l){return{ngModule:d,providers:[{provide:x.AFp,useValue:l.appId},{provide:le,useExisting:x.AFp},ie]}}}return d.\u0275fac=function(l){return new(l||d)(x.LFG(d,12))},d.\u0275mod=x.oAB({type:d}),d.\u0275inj=x.cJS({providers:zi,imports:[w.ez,x.hGG]}),d})();"undefined"!=typeof window&&window;var Or=V(9958),os=V(3637),bs=V(7574),Os=V(5917),Pr=V(6682),as=V(8002),ki=V(8819),ye=V(3190),Ge=V(2145),Ue=V(7519),Je=V(7057),mt=V(7393);class un{constructor(u){this.predicate=u}call(u,l){return l.subscribe(new Un(u,this.predicate))}}class Un extends mt.L{constructor(u,l){super(u),this.predicate=l,this.skipping=!0,this.index=0}_next(u){const l=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||l.next(u)}tryCallPredicate(u){try{const l=this.predicate(u,this.index++);this.skipping=Boolean(l)}catch(l){this.destination.error(l)}}}var In=V(9126),Xn=(V(6094),V(3394)),er=V(3910),Zr=V(8239),Fi=V(8026),he=V(3854),ls=V(5422);const ti="@firebase/database";let oo="";function Li(d){oo=d}class Zi{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,l){null==l?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,he.Pz)(l))}get(u){const l=this.domStorage_.getItem(this.prefixedName_(u));return null==l?null:(0,he.cI)(l)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class ao{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,l){null==l?delete this.cache_[u]:this.cache_[u]=l}get(u){return(0,he.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const Ps=function(d){try{if("undefined"!=typeof window&&void 0!==window[d]){const u=window[d];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new Zi(u)}}catch(u){}return new ao},Ir=Ps("localStorage"),Ms=Ps("sessionStorage"),Vi=new ls.Yd("@firebase/database"),us=function(){let d=1;return function(){return d++}}(),da=function(d){const u=(0,he.dS)(d),l=new he.gQ;l.update(u);const p=l.digest();return he.US.encodeByteArray(p)},Is=function(...d){let u="";for(let l=0;l<d.length;l++){const p=d[l];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?u+=Is.apply(null,p):u+="object"==typeof p?(0,he.Pz)(p):p,u+=" "}return u};let Ns=null,Yi=!0;const Do=function(d,u){(0,he.hu)(!u||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(Vi.logLevel=ls.in.VERBOSE,Ns=Vi.log.bind(Vi),u&&Ms.set("logging_enabled",!0)):"function"==typeof d?Ns=d:(Ns=null,Ms.remove("logging_enabled"))},Vr=function(...d){if(!0===Yi&&(Yi=!1,null===Ns&&!0===Ms.get("logging_enabled")&&Do(!0)),Ns){const u=Is.apply(null,d);Ns(u)}},cs=function(d){return function(...u){Vr(d,...u)}},lo=function(...d){const u="FIREBASE INTERNAL ERROR: "+Is(...d);Vi.error(u)},Yr=function(...d){const u=`FIREBASE FATAL ERROR: ${Is(...d)}`;throw Vi.error(u),new Error(u)},Kn=function(...d){const u="FIREBASE WARNING: "+Is(...d);Vi.warn(u)},ds=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},Mr="[MIN_NAME]",Ii="[MAX_NAME]",Ds=function(d,u){if(d===u)return 0;if(d===Mr||u===Ii)return-1;if(u===Mr||d===Ii)return 1;{const l=Ts(d),p=Ts(u);return null!==l?null!==p?l-p==0?d.length-u.length:l-p:-1:null!==p?1:d<u?-1:1}},hs=function(d,u){return d===u?0:d<u?-1:1},uo=function(d,u){if(u&&d in u)return u[d];throw new Error("Missing required key ("+d+") in object: "+(0,he.Pz)(u))},$s=function(d){if("object"!=typeof d||null===d)return(0,he.Pz)(d);const u=[];for(const p in d)u.push(p);u.sort();let l="{";for(let p=0;p<u.length;p++)0!==p&&(l+=","),l+=(0,he.Pz)(u[p]),l+=":",l+=$s(d[u[p]]);return l+="}",l},ni=function(d,u){const l=d.length;if(l<=u)return[d];const p=[];for(let v=0;v<l;v+=u)p.push(d.substring(v,v+u>l?l:v+u));return p};function Dr(d,u){for(const l in d)d.hasOwnProperty(l)&&u(l,d[l])}const ri=function(d){(0,he.hu)(!ds(d),"Invalid JSON number");const p=1023;let v,S,U,J,de;0===d?(S=0,U=0,v=1/d==-1/0?1:0):(v=d<0,(d=Math.abs(d))>=Math.pow(2,1-p)?(J=Math.min(Math.floor(Math.log(d)/Math.LN2),p),S=J+p,U=Math.round(d*Math.pow(2,52-J)-Math.pow(2,52))):(S=0,U=Math.round(d/Math.pow(2,-1074))));const be=[];for(de=52;de;de-=1)be.push(U%2?1:0),U=Math.floor(U/2);for(de=11;de;de-=1)be.push(S%2?1:0),S=Math.floor(S/2);be.push(v?1:0),be.reverse();const Ye=be.join("");let ze="";for(de=0;de<64;de+=8){let ut=parseInt(Ye.substr(de,8),2).toString(16);1===ut.length&&(ut="0"+ut),ze+=ut}return ze.toLowerCase()},jo=new RegExp("^-?(0*)\\d{1,10}$"),Ui=-2147483648,ui=2147483647,Ts=function(d){if(jo.test(d)){const u=Number(d);if(u>=Ui&&u<=ui)return u}return null},Bi=function(d){try{d()}catch(u){setTimeout(()=>{throw Kn("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},B=function(d,u){const l=setTimeout(d,u);return"object"==typeof l&&l.unref&&l.unref(),l};class Q{constructor(u,l){this.appName_=u,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(p=>this.appCheck=p)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((l,p)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(l,p):l(null)},0)})}addTokenChangeListener(u){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(p=>p.addTokenListener(u))}notifyForInvalidToken(){Kn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class H{constructor(u,l,p){this.appName_=u,this.firebaseOptions_=l,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(v=>this.auth_=v)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(l=>l&&"auth/token-not-initialized"===l.code?(Vr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,p)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(l,p):l(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(l=>l.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(l=>l.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Kn(u)}}let te=(()=>{class d{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return d.OWNER="owner",d})();const O=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tn="websocket",Mn="long_polling";class Di{constructor(u,l,p,v,S=!1,U="",J=!1){this.secure=l,this.namespace=p,this.webSocketOnly=v,this.nodeAdmin=S,this.persistenceKey=U,this.includeNamespaceInQueryParams=J,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ir.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&Ir.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ti(d,u,l){let p;if((0,he.hu)("string"==typeof u,"typeof type must == string"),(0,he.hu)("object"==typeof l,"typeof params must == object"),u===tn)p=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(u!==Mn)throw new Error("Unknown connection type: "+u);p=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(l.ns=d.namespace);const v=[];return Dr(l,(S,U)=>{v.push(S+"="+U)}),p+v.join("&")}class fs{constructor(){this.counters_={}}incrementCounter(u,l=1){(0,he.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=l}get(){return(0,he.p$)(this.counters_)}}const Zt={},Qi={};function ha(d){const u=d.toString();return Zt[u]||(Zt[u]=new fs),Zt[u]}class El{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,l){this.closeAfterResponse=u,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,l){for(this.pendingResponses[u]=l;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let v=0;v<p.length;++v)p[v]&&Bi(()=>{this.onMessage_(p[v])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class gi{constructor(u,l,p,v,S,U,J){this.connId=u,this.repoInfo=l,this.applicationId=p,this.appCheckToken=v,this.authToken=S,this.transportSessionId=U,this.lastSessionId=J,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cs(u),this.stats_=ha(l),this.urlFn=de=>(this.appCheckToken&&(de.ac=this.appCheckToken),Ti(l,Mn,de))}open(u,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new El(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,he.Yr)()||"complete"===document.readyState)d();else{let u=!1;const l=function(){document.body?u||(u=!0,d()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Go((...S)=>{const[U,J,de,be,Ye]=S;if(this.incrementIncomingBytes_(S),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===U)this.id=J,this.password=de;else{if("close"!==U)throw new Error("Unrecognized command received: "+U);J?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(J,()=>{this.onClosed_()})):this.onClosed_()}},(...S)=>{const[U,J]=S;this.incrementIncomingBytes_(S),this.myPacketOrderer.handleResponse(U,J)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&O.test(location.hostname)&&(p.r="f");const v=this.urlFn(p);this.log_("Connecting via long-poll to "+v),this.scriptTagHolder.addTag(v,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){gi.forceAllow_=!0}static forceDisallow(){gi.forceDisallow_=!0}static isAvailable(){return!((0,he.Yr)()||!gi.forceAllow_&&(gi.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const l=(0,he.Pz)(u);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const p=(0,he.h$)(l),v=ni(p,1840);for(let S=0;S<v.length;S++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,v.length,v[S]),this.curSegmentNum++}addDisconnectPingFrame(u,l){if((0,he.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=u,p.pw=l,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const l=(0,he.Pz)(u).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Go{constructor(u,l,p,v){if(this.onDisconnect=p,this.urlFn=v,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,he.Yr)())this.commandCB=u,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=us(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Go.createIFrame_();let S="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(S='<script>document.domain="'+document.domain+'";<\/script>');const U="<html><body>"+S+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(U),this.myIFrame.doc.close()}catch(J){Vr("frame writing exception"),J.stack&&Vr(J.stack),Vr(J)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||Vr("No IE domain setting required")}catch(l){const p=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,l){for(this.myID=u,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let l=this.urlFn(u),p="",v=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const U=this.pendingSegs.shift();p=p+"&seg"+v+"="+U.seg+"&ts"+v+"="+U.ts+"&d"+v+"="+U.d,v++}return l+=p,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(u,l,p){this.pendingSegs.push({seg:u,ts:l,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(u,l){this.outstandingRequests.add(l);const p=()=>{this.outstandingRequests.delete(l),this.newRequest_()},v=setTimeout(p,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(v),p()})}addTag(u,l){(0,he.Yr)()?this.doNodeLongPoll(u,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=u,p.onload=p.onreadystatechange=function(){const v=p.readyState;(!v||"loaded"===v||"complete"===v)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),l())},p.onerror=()=>{Vr("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let ho=null;"undefined"!=typeof MozWebSocket?ho=MozWebSocket:"undefined"!=typeof WebSocket&&(ho=WebSocket);let zo=(()=>{class d{constructor(l,p,v,S,U,J,de){this.connId=l,this.applicationId=v,this.appCheckToken=S,this.authToken=U,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cs(this.connId),this.stats_=ha(p),this.connURL=d.connectionURL_(p,J,de,S),this.nodeAdmin=p.nodeAdmin}static connectionURL_(l,p,v,S){const U={v:"5"};return!(0,he.Yr)()&&"undefined"!=typeof location&&location.hostname&&O.test(location.hostname)&&(U.r="f"),p&&(U.s=p),v&&(U.ls=v),S&&(U.ac=S),Ti(l,tn,U)}open(l,p){this.onDisconnect=p,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ir.set("previous_websocket_failure",!0);try{if((0,he.Yr)()){const S={headers:{"User-Agent":`Firebase/5/${oo}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(S.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(S.headers["X-Firebase-AppCheck"]=this.appCheckToken);const U=process.env,J=0===this.connURL.indexOf("wss://")?U.HTTPS_PROXY||U.https_proxy:U.HTTP_PROXY||U.http_proxy;J&&(S.proxy={origin:J}),this.mySock=new ho(this.connURL,[],S)}else this.mySock=new ho(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(v){this.log_("Error instantiating WebSocket.");const S=v.message||v.data;return S&&this.log_(S),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=v=>{this.handleIncomingFrame(v)},this.mySock.onerror=v=>{this.log_("WebSocket error.  Closing connection.");const S=v.message||v.data;S&&this.log_(S),this.onClosed_()}}start(){}static forceDisallow(){d.forceDisallow_=!0}static isAvailable(){let l=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const v=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);v&&v.length>1&&parseFloat(v[1])<4.4&&(l=!0)}return!l&&null!==ho&&!d.forceDisallow_}static previouslyFailed(){return Ir.isInMemoryStorage||!0===Ir.get("previous_websocket_failure")}markConnectionHealthy(){Ir.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const v=(0,he.cI)(p);this.onMessage(v)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,he.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const p=Number(l);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const p=l.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const v=this.extractFrameCount_(p);null!==v&&this.appendFrame_(v)}}send(l){this.resetKeepAlive();const p=(0,he.Pz)(l);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const v=ni(p,16384);v.length>1&&this.sendString_(String(v.length));for(let S=0;S<v.length;S++)this.sendString_(v[S])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d})();class kr{constructor(u){this.initTransports_(u)}static get ALL_TRANSPORTS(){return[gi,zo]}initTransports_(u){const l=zo&&zo.isAvailable();let p=l&&!zo.previouslyFailed();if(u.webSocketOnly&&(l||Kn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),p=!0),p)this.transports_=[zo];else{const v=this.transports_=[];for(const S of kr.ALL_TRANSPORTS)S&&S.isAvailable()&&v.push(S)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Ao{constructor(u,l,p,v,S,U,J,de,be,Ye){this.id=u,this.repoInfo_=l,this.applicationId_=p,this.appCheckToken_=v,this.authToken_=S,this.onMessage_=U,this.onReady_=J,this.onDisconnect_=de,this.onKill_=be,this.lastSessionId=Ye,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cs("c:"+this.id+":"),this.transportManager_=new kr(l),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,p)},Math.floor(0));const v=u.healthyTimeout||0;v>0&&(this.healthyTimeout_=B(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(v)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return l=>{u===this.conn_?this.onConnectionLost_(l):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return l=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(l):u===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const l=u.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const l=uo("t",u),p=uo("d",u);if("c"===l)this.onSecondaryControl_(p);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const l=uo("t",u),p=uo("d",u);"c"===l?this.onControl_(p):"d"===l&&this.onDataMessage_(p)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const l=uo("t",u);if("d"in u){const p=u.d;if("h"===l)this.onHandshake_(p);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let v=0;v<this.pendingDataMessages.length;++v)this.onDataMessage_(this.pendingDataMessages[v]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(p):"r"===l?this.onReset_(p):"e"===l?lo("Server Error: "+p):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lo("Unknown control packet command: "+l)}}onHandshake_(u){const l=u.ts,p=u.v,v=u.h;this.sessionId=u.s,this.repoInfo_.host=v,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==p&&Kn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,p),B(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,l){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):B(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ir.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Xi{put(u,l,p,v){}merge(u,l,p,v){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,l,p){}onDisconnectMerge(u,l,p){}onDisconnectCancel(u,l){}reportStats(u){}}class po{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,he.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...l){if(Array.isArray(this.listeners_[u])){const p=[...this.listeners_[u]];for(let v=0;v<p.length;v++)p[v].callback.apply(p[v].context,l)}}on(u,l,p){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:l,context:p});const v=this.getInitialEvent(u);v&&l.apply(p,v)}off(u,l,p){this.validateEventType_(u);const v=this.listeners_[u]||[];for(let S=0;S<v.length;S++)if(v[S].callback===l&&(!p||p===v[S].context))return void v.splice(S,1)}validateEventType_(u){(0,he.hu)(this.allowedEvents_.find(l=>l===u),"Unknown event: "+u)}}class mr extends po{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,he.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new mr}getInitialEvent(u){return(0,he.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class Bn{constructor(u,l){if(void 0===l){this.pieces_=u.split("/");let p=0;for(let v=0;v<this.pieces_.length;v++)this.pieces_[v].length>0&&(this.pieces_[p]=this.pieces_[v],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=l}toString(){let u="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(u+="/"+this.pieces_[l]);return u||"/"}}function fr(){return new Bn("")}function Tn(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function Ai(d){return d.pieces_.length-d.pieceNum_}function ir(d){let u=d.pieceNum_;return u<d.pieces_.length&&u++,new Bn(d.pieces_,u)}function Zo(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function So(d,u=0){return d.pieces_.slice(d.pieceNum_+u)}function Si(d){if(d.pieceNum_>=d.pieces_.length)return null;const u=[];for(let l=d.pieceNum_;l<d.pieces_.length-1;l++)u.push(d.pieces_[l]);return new Bn(u,0)}function pr(d,u){const l=[];for(let p=d.pieceNum_;p<d.pieces_.length;p++)l.push(d.pieces_[p]);if(u instanceof Bn)for(let p=u.pieceNum_;p<u.pieces_.length;p++)l.push(u.pieces_[p]);else{const p=u.split("/");for(let v=0;v<p.length;v++)p[v].length>0&&l.push(p[v])}return new Bn(l,0)}function nn(d){return d.pieceNum_>=d.pieces_.length}function Hr(d,u){const l=Tn(d),p=Tn(u);if(null===l)return u;if(l===p)return Hr(ir(d),ir(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+d+")")}function ps(d,u){const l=So(d,0),p=So(u,0);for(let v=0;v<l.length&&v<p.length;v++){const S=Ds(l[v],p[v]);if(0!==S)return S}return l.length===p.length?0:l.length<p.length?-1:1}function gs(d,u){if(Ai(d)!==Ai(u))return!1;for(let l=d.pieceNum_,p=u.pieceNum_;l<=d.pieces_.length;l++,p++)if(d.pieces_[l]!==u.pieces_[p])return!1;return!0}function $r(d,u){let l=d.pieceNum_,p=u.pieceNum_;if(Ai(d)>Ai(u))return!1;for(;l<d.pieces_.length;){if(d.pieces_[l]!==u.pieces_[p])return!1;++l,++p}return!0}class R{constructor(u,l){this.errorPrefix_=l,this.parts_=So(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,he.ug)(this.parts_[p]);we(this)}}function we(d){if(d.byteLength_>768)throw new Error(d.errorPrefix_+"has a key path longer than 768 bytes ("+d.byteLength_+").");if(d.parts_.length>32)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+dt(d))}function dt(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}class Bt extends po{constructor(){let u,l;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(l="visibilitychange",u="hidden"):void 0!==document.mozHidden?(l="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(l="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(l="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const p=!document[u];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new Bt}getInitialEvent(u){return(0,he.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const _r=1e3;let ci,Ws=(()=>{class d extends Xi{constructor(l,p,v,S,U,J,de,be){if(super(),this.repoInfo_=l,this.applicationId_=p,this.onDataUpdate_=v,this.onConnectStatus_=S,this.onServerInfoUpdate_=U,this.authTokenProvider_=J,this.appCheckTokenProvider_=de,this.authOverride_=be,this.id=d.nextPersistentConnectionId_++,this.log_=cs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_r,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,be&&!(0,he.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bt.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&mr.getInstance().on("online",this.onOnline_,this)}sendRequest(l,p,v){const S=++this.requestNumber_,U={r:S,a:l,b:p};this.log_((0,he.Pz)(U)),(0,he.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(U),v&&(this.requestCBHash_[S]=v)}get(l){this.initConnection_();const p=new he.BH,v={p:l._path.toString(),q:l._queryObject},S={action:"g",request:v,onComplete:J=>{const de=J.d;"ok"===J.s?(this.onDataUpdate_(v.p,de,!1,null),p.resolve(de)):p.reject(de)}};this.outstandingGets_.push(S),this.outstandingGetCount_++;const U=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const J=this.outstandingGets_[U];void 0===J||S!==J||(delete this.outstandingGets_[U],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+U+" timed out on connection"),p.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(U),p.promise}listen(l,p,v,S){this.initConnection_();const U=l._queryIdentifier,J=l._path.toString();this.log_("Listen called for "+J+" "+U),this.listens.has(J)||this.listens.set(J,new Map),(0,he.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,he.hu)(!this.listens.get(J).has(U),"listen() called twice for same path/queryId.");const de={onComplete:S,hashFn:p,query:l,tag:v};this.listens.get(J).set(U,de),this.connected_&&this.sendListen_(de)}sendGet_(l){const p=this.outstandingGets_[l];this.sendRequest("g",p.request,v=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(v)})}sendListen_(l){const p=l.query,v=p._path.toString(),S=p._queryIdentifier;this.log_("Listen on "+v+" for "+S);const U={p:v};l.tag&&(U.q=p._queryObject,U.t=l.tag),U.h=l.hashFn(),this.sendRequest("q",U,de=>{const be=de.d,Ye=de.s;d.warnOnListenWarnings_(be,p),(this.listens.get(v)&&this.listens.get(v).get(S))===l&&(this.log_("listen response",de),"ok"!==Ye&&this.removeListen_(v,S),l.onComplete&&l.onComplete(Ye,be))})}static warnOnListenWarnings_(l,p){if(l&&"object"==typeof l&&(0,he.r3)(l,"w")){const v=(0,he.DV)(l,"w");if(Array.isArray(v)&&~v.indexOf("no_index")){const S='".indexOn": "'+p._queryParams.getIndex().toString()+'"',U=p._path.toString();Kn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${S} at ${U} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,he.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,p=(0,he.w9)(l)?"auth":"gauth",v={cred:l};null===this.authOverride_?v.noauth=!0:"object"==typeof this.authOverride_&&(v.authvar=this.authOverride_),this.sendRequest(p,v,S=>{const U=S.s,J=S.d||"error";this.authToken_===l&&("ok"===U?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(U,J))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const p=l.s,v=l.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,v)})}unlisten(l,p){const v=l._path.toString(),S=l._queryIdentifier;this.log_("Unlisten called for "+v+" "+S),(0,he.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(v,S)&&this.connected_&&this.sendUnlisten_(v,S,l._queryObject,p)}sendUnlisten_(l,p,v,S){this.log_("Unlisten on "+l+" for "+p);const U={p:l};S&&(U.q=v,U.t=S),this.sendRequest("n",U)}onDisconnectPut(l,p,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,p,v):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:p,onComplete:v})}onDisconnectMerge(l,p,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,p,v):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:p,onComplete:v})}onDisconnectCancel(l,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,p):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(l,p,v,S){const U={p,d:v};this.log_("onDisconnect "+l,U),this.sendRequest(l,U,J=>{S&&setTimeout(()=>{S(J.s,J.d)},Math.floor(0))})}put(l,p,v,S){this.putInternal("p",l,p,v,S)}merge(l,p,v,S){this.putInternal("m",l,p,v,S)}putInternal(l,p,v,S,U){this.initConnection_();const J={p,d:v};void 0!==U&&(J.h=U),this.outstandingPuts_.push({action:l,request:J,onComplete:S}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(l){const p=this.outstandingPuts_[l].action,v=this.outstandingPuts_[l].request,S=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(p,v,U=>{this.log_(p+" response",U),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),S&&S(U.s,U.d)})}reportStats(l){if(this.connected_){const p={c:l};this.log_("reportStats",p),this.sendRequest("s",p,v=>{"ok"!==v.s&&this.log_("reportStats","Error sending stats: "+v.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,he.Pz)(l));const p=l.r,v=this.requestCBHash_[p];v&&(delete this.requestCBHash_[p],v(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,p){this.log_("handleServerMessage",l,p),"d"===l?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===l?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===l?this.onListenRevoked_(p.p,p.q):"ac"===l?this.onAuthRevoked_(p.s,p.d):"apc"===l?this.onAppCheckRevoked_(p.s,p.d):"sd"===l?this.onSecurityDebugPacket_(p):lo("Unrecognized action received from server: "+(0,he.Pz)(l)+"\nAre you using the latest client?")}onReady_(l,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,he.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_r,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=_r,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=_r),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-l);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,Zr.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const p=l.onDataMessage_.bind(l),v=l.onReady_.bind(l),S=l.onRealtimeDisconnect_.bind(l),U=l.id+":"+d.nextConnectionId_++,J=l.lastSessionId;let de=!1,be=null;const Ye=function(){be?be.close():(de=!0,S())};l.realtime_={close:Ye,sendRequest:function($t){(0,he.hu)(be,"sendRequest call when we're not connected not allowed."),be.sendRequest($t)}};const ut=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[$t,fn]=yield Promise.all([l.authTokenProvider_.getToken(ut),l.appCheckTokenProvider_.getToken(ut)]);de?Vr("getToken() completed but was canceled"):(Vr("getToken() completed. Creating connection."),l.authToken_=$t&&$t.accessToken,l.appCheckToken_=fn&&fn.token,be=new Ao(U,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,p,v,S,or=>{Kn(or+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},J))}catch($t){l.log_("Failed to get token: "+$t),de||(l.repoInfo_.nodeAdmin&&Kn($t),Ye())}}})()}interrupt(l){Vr("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){Vr("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,he.xb)(this.interruptReasons_)&&(this.reconnectDelay_=_r,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const p=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const p=this.outstandingPuts_[l];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,p){let v;v=p?p.map(U=>$s(U)).join("$"):"default";const S=this.removeListen_(l,v);S&&S.onComplete&&S.onComplete("permission_denied")}removeListen_(l,p){const v=new Bn(l).toString();let S;if(this.listens.has(v)){const U=this.listens.get(v);S=U.get(p),U.delete(p),0===U.size&&this.listens.delete(v)}else S=void 0;return S}onAuthRevoked_(l,p){Vr("Auth token revoked: "+l+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,p){Vr("App check token revoked: "+l+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const p of l.values())this.sendListen_(p);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let p="js";(0,he.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+p+"."+oo.replace(/\./g,"-")]=1,(0,he.uI)()?l["framework.cordova"]=1:(0,he.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=mr.getInstance().currentlyOnline();return(0,he.xb)(this.interruptReasons_)&&l}}return d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d})();class On{constructor(u,l){this.name=u,this.node=l}static Wrap(u,l){return new On(u,l)}}class Au{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,l){const p=new On(Mr,u),v=new On(Mr,l);return 0!==this.compare(p,v)}minPost(){return On.MIN}}class va extends Au{static get __EMPTY_NODE(){return ci}static set __EMPTY_NODE(u){ci=u}compare(u,l){return Ds(u.name,l.name)}isDefinedOn(u){throw(0,he.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,l){return!1}minPost(){return On.MIN}maxPost(){return new On(Ii,ci)}makePost(u,l){return(0,he.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new On(u,ci)}toString(){return".key"}}const xi=new va;class il{constructor(u,l,p,v,S=null){this.isReverse_=v,this.resultGenerator_=S,this.nodeStack_=[];let U=1;for(;!u.isEmpty();)if(u=u,U=l?p(u.key,l):1,v&&(U*=-1),U<0)u=this.isReverse_?u.left:u.right;else{if(0===U){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,u=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let qt,Hi=(()=>{class d{constructor(l,p,v,S,U){this.key=l,this.value=p,this.color=null!=v?v:d.RED,this.left=null!=S?S:sr.EMPTY_NODE,this.right=null!=U?U:sr.EMPTY_NODE}copy(l,p,v,S,U){return new d(null!=l?l:this.key,null!=p?p:this.value,null!=v?v:this.color,null!=S?S:this.left,null!=U?U:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,p,v){let S=this;const U=v(l,S.key);return S=U<0?S.copy(null,null,null,S.left.insert(l,p,v),null):0===U?S.copy(null,p,null,null,null):S.copy(null,null,null,null,S.right.insert(l,p,v)),S.fixUp_()}removeMin_(){if(this.left.isEmpty())return sr.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,p){let v,S;if(v=this,p(l,v.key)<0)!v.left.isEmpty()&&!v.left.isRed_()&&!v.left.left.isRed_()&&(v=v.moveRedLeft_()),v=v.copy(null,null,null,v.left.remove(l,p),null);else{if(v.left.isRed_()&&(v=v.rotateRight_()),!v.right.isEmpty()&&!v.right.isRed_()&&!v.right.left.isRed_()&&(v=v.moveRedRight_()),0===p(l,v.key)){if(v.right.isEmpty())return sr.EMPTY_NODE;S=v.right.min_(),v=v.copy(S.key,S.value,null,null,v.right.removeMin_())}v=v.copy(null,null,null,null,v.right.remove(l,p))}return v.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,p)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return d.RED=!0,d.BLACK=!1,d})();class sr{constructor(u,l=sr.EMPTY_NODE){this.comparator_=u,this.root_=l}insert(u,l){return new sr(this.comparator_,this.root_.insert(u,l,this.comparator_).copy(null,null,Hi.BLACK,null,null))}remove(u){return new sr(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,Hi.BLACK,null,null))}get(u){let l,p=this.root_;for(;!p.isEmpty();){if(l=this.comparator_(u,p.key),0===l)return p.value;l<0?p=p.left:l>0&&(p=p.right)}return null}getPredecessorKey(u){let l,p=this.root_,v=null;for(;!p.isEmpty();){if(l=this.comparator_(u,p.key),0===l){if(p.left.isEmpty())return v?v.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}l<0?p=p.left:l>0&&(v=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new il(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,l){return new il(this.root_,u,this.comparator_,!1,l)}getReverseIteratorFrom(u,l){return new il(this.root_,u,this.comparator_,!0,l)}getReverseIterator(u){return new il(this.root_,null,this.comparator_,!0,u)}}function Yo(d,u){return Ds(d.name,u.name)}function Qo(d,u){return Ds(d,u)}sr.EMPTY_NODE=new class{copy(u,l,p,v,S){return this}insert(u,l,p){return new Hi(u,l,null)}remove(u,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const P=function(d){return"number"==typeof d?"number:"+ri(d):"string:"+d},I=function(d){if(d.isLeafNode()){const u=d.val();(0,he.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,he.r3)(u,".sv"),"Priority must be a string or number.")}else(0,he.hu)(d===qt||d.isEmpty(),"priority of unexpected type.");(0,he.hu)(d===qt||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let C,$,X,M=(()=>{class d{constructor(l,p=d.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=p,this.lazyHash_=null,(0,he.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),I(this.priorityNode_)}static set __childrenNodeConstructor(l){C=l}static get __childrenNodeConstructor(){return C}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new d(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return nn(l)?this:".priority"===Tn(l)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,p){return null}updateImmediateChild(l,p){return".priority"===l?this.updatePriority(p):p.isEmpty()&&".priority"!==l?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,p).updatePriority(this.priorityNode_)}updateChild(l,p){const v=Tn(l);return null===v?p:p.isEmpty()&&".priority"!==v?this:((0,he.hu)(".priority"!==v||1===Ai(l),".priority must be the last token in a path"),this.updateImmediateChild(v,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(ir(l),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,p){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+P(this.priorityNode_.val())+":");const p=typeof this.value_;l+=p+":",l+="number"===p?ri(this.value_):this.value_,this.lazyHash_=da(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===d.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof d.__childrenNodeConstructor?-1:((0,he.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const p=typeof l.value_,v=typeof this.value_,S=d.VALUE_TYPE_ORDER.indexOf(p),U=d.VALUE_TYPE_ORDER.indexOf(v);return(0,he.hu)(S>=0,"Unknown leaf type: "+p),(0,he.hu)(U>=0,"Unknown leaf type: "+v),S===U?"object"===v?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:U-S}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const p=l;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d})();const wt=new class extends Au{compare(u,l){const p=u.node.getPriority(),v=l.node.getPriority(),S=p.compareTo(v);return 0===S?Ds(u.name,l.name):S}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,l){return!u.getPriority().equals(l.getPriority())}minPost(){return On.MIN}maxPost(){return new On(Ii,new M("[PRIORITY-POST]",X))}makePost(u,l){const p=$(u);return new On(l,new M("[PRIORITY-POST]",p))}toString(){return".priority"}},$n=Math.log(2);class cn{constructor(u){this.count=parseInt(Math.log(u+1)/$n,10),this.current_=this.count-1;const v=(S=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&v}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const gr=function(d,u,l,p){d.sort(u);const v=function(de,be){const Ye=be-de;let ze,ut;if(0===Ye)return null;if(1===Ye)return ze=d[de],ut=l?l(ze):ze,new Hi(ut,ze.node,Hi.BLACK,null,null);{const $t=parseInt(Ye/2,10)+de,fn=v(de,$t),or=v($t+1,be);return ze=d[$t],ut=l?l(ze):ze,new Hi(ut,ze.node,Hi.BLACK,fn,or)}},J=function(de){let be=null,Ye=null,ze=d.length;const ut=function(fn,or){const ss=ze-fn,Hl=ze;ze-=fn;const ml=v(ss+1,Hl),Oa=d[ss],hg=l?l(Oa):Oa;$t(new Hi(hg,Oa.node,or,null,ml))},$t=function(fn){be?(be.left=fn,be=fn):(Ye=fn,be=fn)};for(let fn=0;fn<de.count;++fn){const or=de.nextBitIsOne(),ss=Math.pow(2,de.count-(fn+1));or?ut(ss,Hi.BLACK):(ut(ss,Hi.BLACK),ut(ss,Hi.RED))}return Ye}(new cn(d.length));return new sr(p||u,J)};let qn;const vr={};class Gr{constructor(u,l){this.indexes_=u,this.indexSet_=l}static get Default(){return(0,he.hu)(vr&&wt,"ChildrenNode.ts has not been loaded"),qn=qn||new Gr({".priority":vr},{".priority":wt}),qn}get(u){const l=(0,he.DV)(this.indexes_,u);if(!l)throw new Error("No index defined for "+u);return l instanceof sr?l:null}hasIndex(u){return(0,he.r3)(this.indexSet_,u.toString())}addIndex(u,l){(0,he.hu)(u!==xi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let v=!1;const S=l.getIterator(On.Wrap);let J,U=S.getNext();for(;U;)v=v||u.isDefinedOn(U.node),p.push(U),U=S.getNext();J=v?gr(p,u.getCompare()):vr;const de=u.toString(),be=Object.assign({},this.indexSet_);be[de]=u;const Ye=Object.assign({},this.indexes_);return Ye[de]=J,new Gr(Ye,be)}addToIndexes(u,l){const p=(0,he.UI)(this.indexes_,(v,S)=>{const U=(0,he.DV)(this.indexSet_,S);if((0,he.hu)(U,"Missing index implementation for "+S),v===vr){if(U.isDefinedOn(u.node)){const J=[],de=l.getIterator(On.Wrap);let be=de.getNext();for(;be;)be.name!==u.name&&J.push(be),be=de.getNext();return J.push(u),gr(J,U.getCompare())}return vr}{const J=l.get(u.name);let de=v;return J&&(de=de.remove(new On(u.name,J))),de.insert(u,u.node)}});return new Gr(p,this.indexSet_)}removeFromIndexes(u,l){const p=(0,he.UI)(this.indexes_,v=>{if(v===vr)return v;{const S=l.get(u.name);return S?v.remove(new On(u.name,S)):v}});return new Gr(p,this.indexSet_)}}let Ri,Rt=(()=>{class d{constructor(l,p,v){this.children_=l,this.priorityNode_=p,this.indexMap_=v,this.lazyHash_=null,this.priorityNode_&&I(this.priorityNode_),this.children_.isEmpty()&&(0,he.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ri||(Ri=new d(new sr(Qo),null,Gr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ri}updatePriority(l){return this.children_.isEmpty()?this:new d(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const p=this.children_.get(l);return null===p?Ri:p}}getChild(l){const p=Tn(l);return null===p?this:this.getImmediateChild(p).getChild(ir(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,p){if((0,he.hu)(p,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(p);{const v=new On(l,p);let S,U;p.isEmpty()?(S=this.children_.remove(l),U=this.indexMap_.removeFromIndexes(v,this.children_)):(S=this.children_.insert(l,p),U=this.indexMap_.addToIndexes(v,this.children_));const J=S.isEmpty()?Ri:this.priorityNode_;return new d(S,J,U)}}updateChild(l,p){const v=Tn(l);if(null===v)return p;{(0,he.hu)(".priority"!==Tn(l)||1===Ai(l),".priority must be the last token in a path");const S=this.getImmediateChild(v).updateChild(ir(l),p);return this.updateImmediateChild(v,S)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const p={};let v=0,S=0,U=!0;if(this.forEachChild(wt,(J,de)=>{p[J]=de.val(l),v++,U&&d.INTEGER_REGEXP_.test(J)?S=Math.max(S,Number(J)):U=!1}),!l&&U&&S<2*v){const J=[];for(const de in p)J[de]=p[de];return J}return l&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+P(this.getPriority().val())+":"),this.forEachChild(wt,(p,v)=>{const S=v.hash();""!==S&&(l+=":"+p+":"+S)}),this.lazyHash_=""===l?"":da(l)}return this.lazyHash_}getPredecessorChildName(l,p,v){const S=this.resolveIndex_(v);if(S){const U=S.getPredecessorKey(new On(l,p));return U?U.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const p=this.resolveIndex_(l);if(p){const v=p.minKey();return v&&v.name}return this.children_.minKey()}getFirstChild(l){const p=this.getFirstChildName(l);return p?new On(p,this.children_.get(p)):null}getLastChildName(l){const p=this.resolveIndex_(l);if(p){const v=p.maxKey();return v&&v.name}return this.children_.maxKey()}getLastChild(l){const p=this.getLastChildName(l);return p?new On(p,this.children_.get(p)):null}forEachChild(l,p){const v=this.resolveIndex_(l);return v?v.inorderTraversal(S=>p(S.name,S.node)):this.children_.inorderTraversal(p)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,p){const v=this.resolveIndex_(p);if(v)return v.getIteratorFrom(l,S=>S);{const S=this.children_.getIteratorFrom(l.name,On.Wrap);let U=S.peek();for(;null!=U&&p.compare(U,l)<0;)S.getNext(),U=S.peek();return S}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,p){const v=this.resolveIndex_(p);if(v)return v.getReverseIteratorFrom(l,S=>S);{const S=this.children_.getReverseIteratorFrom(l.name,On.Wrap);let U=S.peek();for(;null!=U&&p.compare(U,l)>0;)S.getNext(),U=S.peek();return S}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===mi?-1:0}withIndex(l){if(l===xi||this.indexMap_.hasIndex(l))return this;{const p=this.indexMap_.addIndex(l,this.children_);return new d(this.children_,this.priorityNode_,p)}}isIndexed(l){return l===xi||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const p=l;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const v=this.getIterator(wt),S=p.getIterator(wt);let U=v.getNext(),J=S.getNext();for(;U&&J;){if(U.name!==J.name||!U.node.equals(J.node))return!1;U=v.getNext(),J=S.getNext()}return null===U&&null===J}return!1}return!1}}resolveIndex_(l){return l===xi?null:this.indexMap_.get(l.toString())}}return d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d})();const mi=new class extends Rt{constructor(){super(new sr(Qo),Rt.EMPTY_NODE,Gr.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return Rt.EMPTY_NODE}isEmpty(){return!1}};function Yt(d,u=null){if(null===d)return Rt.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(u=d[".priority"]),(0,he.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new M(d,Yt(u));if(d instanceof Array){let l=Rt.EMPTY_NODE;return Dr(d,(p,v)=>{if((0,he.r3)(d,p)&&"."!==p.substring(0,1)){const S=Yt(v);(S.isLeafNode()||!S.isEmpty())&&(l=l.updateImmediateChild(p,S))}}),l.updatePriority(Yt(u))}{const l=[];let p=!1;if(Dr(d,(U,J)=>{if("."!==U.substring(0,1)){const de=Yt(J);de.isEmpty()||(p=p||!de.getPriority().isEmpty(),l.push(new On(U,de)))}}),0===l.length)return Rt.EMPTY_NODE;const S=gr(l,Yo,U=>U.name,Qo);if(p){const U=gr(l,wt.getCompare());return new Rt(S,Yt(u),new Gr({".priority":U},{".priority":wt}))}return new Rt(S,Yt(u),Gr.Default)}}Object.defineProperties(On,{MIN:{value:new On(Mr,Rt.EMPTY_NODE)},MAX:{value:new On(Ii,mi)}}),va.__EMPTY_NODE=Rt.EMPTY_NODE,M.__childrenNodeConstructor=Rt,qt=mi,X=mi,function(d){$=d}(Yt);class Uc extends Au{constructor(u){super(),this.indexPath_=u,(0,he.hu)(!nn(u)&&".priority"!==Tn(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,l){const p=this.extractChild(u.node),v=this.extractChild(l.node),S=p.compareTo(v);return 0===S?Ds(u.name,l.name):S}makePost(u,l){const p=Yt(u),v=Rt.EMPTY_NODE.updateChild(this.indexPath_,p);return new On(l,v)}maxPost(){const u=Rt.EMPTY_NODE.updateChild(this.indexPath_,mi);return new On(Ii,u)}toString(){return So(this.indexPath_,0).join("/")}}const Bc=new class extends Au{compare(u,l){const p=u.node.compareTo(l.node);return 0===p?Ds(u.name,l.name):p}isDefinedOn(u){return!0}indexedValueChanged(u,l){return!u.equals(l)}minPost(){return On.MIN}maxPost(){return On.MAX}makePost(u,l){const p=Yt(u);return new On(l,p)}toString(){return".value"}},wr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ql=function(){let d=0;const u=[];return function(l){const p=l===d;let v;d=l;const S=new Array(8);for(v=7;v>=0;v--)S[v]=wr.charAt(l%64),l=Math.floor(l/64);(0,he.hu)(0===l,"Cannot push at time == 0");let U=S.join("");if(p){for(v=11;v>=0&&63===u[v];v--)u[v]=0;u[v]++}else for(v=0;v<12;v++)u[v]=Math.floor(64*Math.random());for(v=0;v<12;v++)U+=wr.charAt(u[v]);return(0,he.hu)(20===U.length,"nextPushId: Length should be 20."),U}}(),wf=function(d){if(d===""+ui)return"-";const u=Ts(d);if(null!=u)return""+(u+1);const l=new Array(d.length);for(let U=0;U<l.length;U++)l[U]=d.charAt(U);if(l.length<786)return l.push("-"),l.join("");let p=l.length-1;for(;p>=0&&"z"===l[p];)p--;if(-1===p)return Ii;const S=wr.charAt(wr.indexOf(l[p])+1);return l[p]=S,l.slice(0,p+1).join("")},ts=function(d){if(d===""+Ui)return Mr;const u=Ts(d);if(null!=u)return""+(u-1);const l=new Array(d.length);for(let p=0;p<l.length;p++)l[p]=d.charAt(p);return"-"===l[l.length-1]?1===l.length?""+ui:(delete l[l.length-1],l.join("")):(l[l.length-1]=wr.charAt(wr.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function Ef(d){return{type:"value",snapshotNode:d}}function go(d,u){return{type:"child_added",snapshotNode:u,childName:d}}function _i(d,u){return{type:"child_removed",snapshotNode:u,childName:d}}function wa(d,u,l){return{type:"child_changed",snapshotNode:u,childName:d,oldSnap:l}}class Va{constructor(u){this.index_=u}updateChild(u,l,p,v,S,U){(0,he.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const J=u.getImmediateChild(l);return J.getChild(v).equals(p.getChild(v))&&J.isEmpty()===p.isEmpty()||(null!=U&&(p.isEmpty()?u.hasChild(l)?U.trackChildChange(_i(l,J)):(0,he.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):J.isEmpty()?U.trackChildChange(go(l,p)):U.trackChildChange(wa(l,p,J))),u.isLeafNode()&&p.isEmpty())?u:u.updateImmediateChild(l,p).withIndex(this.index_)}updateFullNode(u,l,p){return null!=p&&(u.isLeafNode()||u.forEachChild(wt,(v,S)=>{l.hasChild(v)||p.trackChildChange(_i(v,S))}),l.isLeafNode()||l.forEachChild(wt,(v,S)=>{if(u.hasChild(v)){const U=u.getImmediateChild(v);U.equals(S)||p.trackChildChange(wa(v,S,U))}else p.trackChildChange(go(v,S))})),l.withIndex(this.index_)}updatePriority(u,l){return u.isEmpty()?Rt.EMPTY_NODE:u.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Dl{constructor(u){this.indexedFilter_=new Va(u.getIndex()),this.index_=u.getIndex(),this.startPost_=Dl.getStartPost_(u),this.endPost_=Dl.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,l,p,v,S,U){return this.matches(new On(l,p))||(p=Rt.EMPTY_NODE),this.indexedFilter_.updateChild(u,l,p,v,S,U)}updateFullNode(u,l,p){l.isLeafNode()&&(l=Rt.EMPTY_NODE);let v=l.withIndex(this.index_);v=v.updatePriority(Rt.EMPTY_NODE);const S=this;return l.forEachChild(wt,(U,J)=>{S.matches(new On(U,J))||(v=v.updateImmediateChild(U,Rt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,v,p)}updatePriority(u,l){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const l=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),l)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const l=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),l)}return u.getIndex().maxPost()}}class zr{constructor(u){this.rangedFilter_=new Dl(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,l,p,v,S,U){return this.rangedFilter_.matches(new On(l,p))||(p=Rt.EMPTY_NODE),u.getImmediateChild(l).equals(p)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,l,p,v,S,U):this.fullLimitUpdateChild_(u,l,p,S,U)}updateFullNode(u,l,p){let v;if(l.isLeafNode()||l.isEmpty())v=Rt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let S;v=Rt.EMPTY_NODE.withIndex(this.index_),S=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let U=0;for(;S.hasNext()&&U<this.limit_;){const J=S.getNext();let de;if(de=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),J)<=0:this.index_.compare(J,this.rangedFilter_.getEndPost())<=0,!de)break;v=v.updateImmediateChild(J.name,J.node),U++}}else{let S,U,J,de;if(v=l.withIndex(this.index_),v=v.updatePriority(Rt.EMPTY_NODE),this.reverse_){de=v.getReverseIterator(this.index_),S=this.rangedFilter_.getEndPost(),U=this.rangedFilter_.getStartPost();const ze=this.index_.getCompare();J=(ut,$t)=>ze($t,ut)}else de=v.getIterator(this.index_),S=this.rangedFilter_.getStartPost(),U=this.rangedFilter_.getEndPost(),J=this.index_.getCompare();let be=0,Ye=!1;for(;de.hasNext();){const ze=de.getNext();!Ye&&J(S,ze)<=0&&(Ye=!0),Ye&&be<this.limit_&&J(ze,U)<=0?be++:v=v.updateImmediateChild(ze.name,Rt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,v,p)}updatePriority(u,l){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,l,p,v,S){let U;if(this.reverse_){const ze=this.index_.getCompare();U=(ut,$t)=>ze($t,ut)}else U=this.index_.getCompare();const J=u;(0,he.hu)(J.numChildren()===this.limit_,"");const de=new On(l,p),be=this.reverse_?J.getFirstChild(this.index_):J.getLastChild(this.index_),Ye=this.rangedFilter_.matches(de);if(J.hasChild(l)){const ze=J.getImmediateChild(l);let ut=v.getChildAfterChild(this.index_,be,this.reverse_);for(;null!=ut&&(ut.name===l||J.hasChild(ut.name));)ut=v.getChildAfterChild(this.index_,ut,this.reverse_);const $t=null==ut?1:U(ut,de);if(Ye&&!p.isEmpty()&&$t>=0)return null!=S&&S.trackChildChange(wa(l,p,ze)),J.updateImmediateChild(l,p);{null!=S&&S.trackChildChange(_i(l,ze));const or=J.updateImmediateChild(l,Rt.EMPTY_NODE);return null!=ut&&this.rangedFilter_.matches(ut)?(null!=S&&S.trackChildChange(go(ut.name,ut.node)),or.updateImmediateChild(ut.name,ut.node)):or}}return p.isEmpty()?u:Ye&&U(be,de)>=0?(null!=S&&(S.trackChildChange(_i(be.name,be.node)),S.trackChildChange(go(l,p))),J.updateImmediateChild(l,p).updateImmediateChild(be.name,Rt.EMPTY_NODE)):u}}class mo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,he.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,he.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,he.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,he.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ii}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,he.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wt}copy(){const u=new mo;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function yi(d,u,l){const p=d.copy();return p.startSet_=!0,void 0===u&&(u=null),p.indexStartValue_=u,null!=l?(p.startNameSet_=!0,p.indexStartName_=l):(p.startNameSet_=!1,p.indexStartName_=""),p}function xo(d,u,l){const p=d.copy();return p.endSet_=!0,void 0===u&&(u=null),p.indexEndValue_=u,void 0!==l?(p.endNameSet_=!0,p.indexEndName_=l):(p.endNameSet_=!1,p.indexEndName_=""),p}function Ro(d,u){const l=d.copy();return l.index_=u,l}function ac(d){const u={};if(d.isDefault())return u;let l;return d.index_===wt?l="$priority":d.index_===Bc?l="$value":d.index_===xi?l="$key":((0,he.hu)(d.index_ instanceof Uc,"Unrecognized index type!"),l=d.index_.toString()),u.orderBy=(0,he.Pz)(l),d.startSet_&&(u.startAt=(0,he.Pz)(d.indexStartValue_),d.startNameSet_&&(u.startAt+=","+(0,he.Pz)(d.indexStartName_))),d.endSet_&&(u.endAt=(0,he.Pz)(d.indexEndValue_),d.endNameSet_&&(u.endAt+=","+(0,he.Pz)(d.indexEndName_))),d.limitSet_&&(d.isViewFromLeft()?u.limitToFirst=d.limit_:u.limitToLast=d.limit_),u}function Yl(d){const u={};if(d.startSet_&&(u.sp=d.indexStartValue_,d.startNameSet_&&(u.sn=d.indexStartName_)),d.endSet_&&(u.ep=d.indexEndValue_,d.endNameSet_&&(u.en=d.indexEndName_)),d.limitSet_){u.l=d.limit_;let l=d.viewFrom_;""===l&&(l=d.isViewFromLeft()?"l":"r"),u.vf=l}return d.index_!==wt&&(u.i=d.index_.toString()),u}class xu extends Xi{constructor(u,l,p,v){super(),this.repoInfo_=u,this.onDataUpdate_=l,this.authTokenProvider_=p,this.appCheckTokenProvider_=v,this.log_=cs("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,l){return void 0!==l?"tag$"+l:((0,he.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,l,p,v){const S=u._path.toString();this.log_("Listen called for "+S+" "+u._queryIdentifier);const U=xu.getListenId_(u,p),J={};this.listens_[U]=J;const de=ac(u._queryParams);this.restRequest_(S+".json",de,(be,Ye)=>{let ze=Ye;if(404===be&&(ze=null,be=null),null===be&&this.onDataUpdate_(S,ze,!1,p),(0,he.DV)(this.listens_,U)===J){let ut;ut=be?401===be?"permission_denied":"rest_error:"+be:"ok",v(ut,null)}})}unlisten(u,l){const p=xu.getListenId_(u,l);delete this.listens_[p]}get(u){const l=ac(u._queryParams),p=u._path.toString(),v=new he.BH;return this.restRequest_(p+".json",l,(S,U)=>{let J=U;404===S&&(J=null,S=null),null===S?(this.onDataUpdate_(p,J,!1,null),v.resolve(J)):v.reject(new Error(J))}),v.promise}refreshAuthToken(u){}restRequest_(u,l={},p){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([v,S])=>{v&&v.accessToken&&(l.auth=v.accessToken),S&&S.token&&(l.ac=S.token);const U=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,he.xO)(l);this.log_("Sending REST request for "+U);const J=new XMLHttpRequest;J.onreadystatechange=()=>{if(p&&4===J.readyState){this.log_("REST Response for "+U+" received. status:",J.status,"response:",J.responseText);let de=null;if(J.status>=200&&J.status<300){try{de=(0,he.cI)(J.responseText)}catch(be){Kn("Failed to parse JSON response for "+U+": "+J.responseText)}p(null,de)}else 401!==J.status&&404!==J.status&&Kn("Got unsuccessful REST response for "+U+" Status: "+J.status),p(J.status);p=null}},J.open("GET",U,!0),J.send()})}}class jc{constructor(){this.rootNode_=Rt.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,l){this.rootNode_=this.rootNode_.updateChild(u,l)}}function Hc(){return{value:null,children:new Map}}function Ua(d,u,l){if(nn(u))d.value=l,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(u,l);else{const p=Tn(u);d.children.has(p)||d.children.set(p,Hc()),Ua(d.children.get(p),u=ir(u),l)}}function ns(d,u){if(nn(u))return d.value=null,d.children.clear(),!0;if(null!==d.value){if(d.value.isLeafNode())return!1;{const l=d.value;return d.value=null,l.forEachChild(wt,(p,v)=>{Ua(d,new Bn(p),v)}),ns(d,u)}}if(d.children.size>0){const l=Tn(u);return u=ir(u),d.children.has(l)&&ns(d.children.get(l),u)&&d.children.delete(l),0===d.children.size}return!0}function ol(d,u,l){null!==d.value?l(u,d.value):function(d,u){d.children.forEach((l,p)=>{u(p,l)})}(d,(p,v)=>{ol(v,new Bn(u.toString()+"/"+p),l)})}class Cf{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),l=Object.assign({},u);return this.last_&&Dr(this.last_,(p,v)=>{l[p]=l[p]-v}),this.last_=u,l}}class Ql{constructor(u,l){this.server_=l,this.statsToReport_={},this.statsListener_=new Cf(u);const p=1e4+2e4*Math.random();B(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const u=this.statsListener_.get(),l={};let p=!1;Dr(u,(v,S)=>{S>0&&(0,he.r3)(this.statsToReport_,v)&&(l[v]=S,p=!0)}),p&&this.server_.reportStats(l),B(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Jo=(()=>(function(d){d[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Jo||(Jo={})),Jo))();function ms(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}class Xl{constructor(u,l,p){this.path=u,this.affectedTree=l,this.revert=p,this.type=Jo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(nn(this.path)){if(null!=this.affectedTree.value)return(0,he.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new Bn(u));return new Xl(fr(),l,this.revert)}}return(0,he.hu)(Tn(this.path)===u,"operationForChild called for unrelated child."),new Xl(ir(this.path),this.affectedTree,this.revert)}}class Ru{constructor(u,l){this.source=u,this.path=l,this.type=Jo.LISTEN_COMPLETE}operationForChild(u){return nn(this.path)?new Ru(this.source,fr()):new Ru(this.source,ir(this.path))}}class ba{constructor(u,l,p){this.source=u,this.path=l,this.snap=p,this.type=Jo.OVERWRITE}operationForChild(u){return nn(this.path)?new ba(this.source,fr(),this.snap.getImmediateChild(u)):new ba(this.source,ir(this.path),this.snap)}}class Tl{constructor(u,l,p){this.source=u,this.path=l,this.children=p,this.type=Jo.MERGE}operationForChild(u){if(nn(this.path)){const l=this.children.subtree(new Bn(u));return l.isEmpty()?null:l.value?new ba(this.source,fr(),l.value):new Tl(this.source,fr(),l)}return(0,he.hu)(Tn(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new Tl(this.source,ir(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Gs{constructor(u,l,p){this.node_=u,this.fullyInitialized_=l,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(nn(u))return this.isFullyInitialized()&&!this.filtered_;const l=Tn(u);return this.isCompleteForChild(l)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class bf{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function eu(d,u,l,p,v,S){const U=p.filter(J=>J.type===l);U.sort((J,de)=>function(d,u,l){if(null==u.childName||null==l.childName)throw(0,he.g5)("Should only compare child_ events.");const p=new On(u.childName,u.snapshotNode),v=new On(l.childName,l.snapshotNode);return d.index_.compare(p,v)}(d,J,de)),U.forEach(J=>{const de=function(d,u,l){return"value"===u.type||"child_removed"===u.type||(u.prevName=l.getPredecessorChildName(u.childName,u.snapshotNode,d.index_)),u}(d,J,S);v.forEach(be=>{be.respondsTo(J.type)&&u.push(be.createEvent(de,d.query_))})})}function Xo(d,u){return{eventCache:d,serverCache:u}}function zs(d,u,l,p){return Xo(new Gs(u,l,p),d.serverCache)}function Al(d,u,l,p){return Xo(d.eventCache,new Gs(u,l,p))}function tu(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function Kr(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}let Oo;class tr{constructor(u,l=(()=>(Oo||(Oo=new sr(hs)),Oo))()){this.value=u,this.children=l}static fromObject(u){let l=new tr(null);return Dr(u,(p,v)=>{l=l.set(new Bn(p),v)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,l){if(null!=this.value&&l(this.value))return{path:fr(),value:this.value};if(nn(u))return null;{const p=Tn(u),v=this.children.get(p);if(null!==v){const S=v.findRootMostMatchingPathAndValue(ir(u),l);return null!=S?{path:pr(new Bn(p),S.path),value:S.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(nn(u))return this;{const l=Tn(u),p=this.children.get(l);return null!==p?p.subtree(ir(u)):new tr(null)}}set(u,l){if(nn(u))return new tr(l,this.children);{const p=Tn(u),S=(this.children.get(p)||new tr(null)).set(ir(u),l),U=this.children.insert(p,S);return new tr(this.value,U)}}remove(u){if(nn(u))return this.children.isEmpty()?new tr(null):new tr(null,this.children);{const l=Tn(u),p=this.children.get(l);if(p){const v=p.remove(ir(u));let S;return S=v.isEmpty()?this.children.remove(l):this.children.insert(l,v),null===this.value&&S.isEmpty()?new tr(null):new tr(this.value,S)}return this}}get(u){if(nn(u))return this.value;{const l=Tn(u),p=this.children.get(l);return p?p.get(ir(u)):null}}setTree(u,l){if(nn(u))return l;{const p=Tn(u),S=(this.children.get(p)||new tr(null)).setTree(ir(u),l);let U;return U=S.isEmpty()?this.children.remove(p):this.children.insert(p,S),new tr(this.value,U)}}fold(u){return this.fold_(fr(),u)}fold_(u,l){const p={};return this.children.inorderTraversal((v,S)=>{p[v]=S.fold_(pr(u,v),l)}),l(u,this.value,p)}findOnPath(u,l){return this.findOnPath_(u,fr(),l)}findOnPath_(u,l,p){const v=!!this.value&&p(l,this.value);if(v)return v;if(nn(u))return null;{const S=Tn(u),U=this.children.get(S);return U?U.findOnPath_(ir(u),pr(l,S),p):null}}foreachOnPath(u,l){return this.foreachOnPath_(u,fr(),l)}foreachOnPath_(u,l,p){if(nn(u))return this;{this.value&&p(l,this.value);const v=Tn(u),S=this.children.get(v);return S?S.foreachOnPath_(ir(u),pr(l,v),p):new tr(null)}}foreach(u){this.foreach_(fr(),u)}foreach_(u,l){this.children.inorderTraversal((p,v)=>{v.foreach_(pr(u,p),l)}),this.value&&l(u,this.value)}foreachChild(u){this.children.inorderTraversal((l,p)=>{p.value&&u(l,p.value)})}}class As{constructor(u){this.writeTree_=u}static empty(){return new As(new tr(null))}}function al(d,u,l){if(nn(u))return new As(new tr(l));{const p=d.writeTree_.findRootMostValueAndPath(u);if(null!=p){const v=p.path;let S=p.value;const U=Hr(v,u);return S=S.updateChild(U,l),new As(d.writeTree_.set(v,S))}{const v=new tr(l),S=d.writeTree_.setTree(u,v);return new As(S)}}}function Sl(d,u,l){let p=d;return Dr(l,(v,S)=>{p=al(p,pr(u,v),S)}),p}function lc(d,u){if(nn(u))return As.empty();{const l=d.writeTree_.setTree(u,new tr(null));return new As(l)}}function Wc(d,u){return null!=Vs(d,u)}function Vs(d,u){const l=d.writeTree_.findRootMostValueAndPath(u);return null!=l?d.writeTree_.get(l.path).getChild(Hr(l.path,u)):null}function vi(d){const u=[],l=d.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(wt,(p,v)=>{u.push(new On(p,v))}):d.writeTree_.children.inorderTraversal((p,v)=>{null!=v.value&&u.push(new On(p,v.value))}),u}function ea(d,u){if(nn(u))return d;{const l=Vs(d,u);return new As(null!=l?new tr(l):d.writeTree_.subtree(u))}}function yo(d){return d.writeTree_.isEmpty()}function xl(d,u){return uc(fr(),d.writeTree_,u)}function uc(d,u,l){if(null!=u.value)return l.updateChild(d,u.value);{let p=null;return u.children.inorderTraversal((v,S)=>{".priority"===v?((0,he.hu)(null!==S.value,"Priority writes must always be leaf nodes"),p=S.value):l=uc(pr(d,v),S,l)}),!l.getChild(d).isEmpty()&&null!==p&&(l=l.updateChild(pr(d,".priority"),p)),l}}function Po(d,u){return Fu(u,d)}function nu(d,u){if(d.snap)return $r(d.path,u);for(const l in d.children)if(d.children.hasOwnProperty(l)&&$r(pr(d.path,l),u))return!0;return!1}function Df(d){return d.visible}function Tf(d,u,l){let p=As.empty();for(let v=0;v<d.length;++v){const S=d[v];if(u(S)){const U=S.path;let J;if(S.snap)$r(l,U)?(J=Hr(l,U),p=al(p,J,S.snap)):$r(U,l)&&(J=Hr(U,l),p=al(p,fr(),S.snap.getChild(J)));else{if(!S.children)throw(0,he.g5)("WriteRecord should have .snap or .children");if($r(l,U))J=Hr(l,U),p=Sl(p,J,S.children);else if($r(U,l))if(J=Hr(U,l),nn(J))p=Sl(p,fr(),S.children);else{const de=(0,he.DV)(S.children,Tn(J));if(de){const be=de.getChild(ir(J));p=al(p,fr(),be)}}}}}return p}function Pu(d,u,l,p,v){if(p||v){const S=ea(d.visibleWrites,u);return!v&&yo(S)?l:v||null!=l||Wc(S,fr())?xl(Tf(d.allWrites,function(be){return(be.visible||v)&&(!p||!~p.indexOf(be.writeId))&&($r(be.path,u)||$r(u,be.path))},u),l||Rt.EMPTY_NODE):null}{const S=Vs(d.visibleWrites,u);if(null!=S)return S;{const U=ea(d.visibleWrites,u);return yo(U)?l:null!=l||Wc(U,fr())?xl(U,l||Rt.EMPTY_NODE):null}}}function iu(d,u,l,p){return Pu(d.writeTree,d.treePath,u,l,p)}function ll(d,u){return function(d,u,l){let p=Rt.EMPTY_NODE;const v=Vs(d.visibleWrites,u);if(v)return v.isLeafNode()||v.forEachChild(wt,(S,U)=>{p=p.updateImmediateChild(S,U)}),p;if(l){const S=ea(d.visibleWrites,u);return l.forEachChild(wt,(U,J)=>{const de=xl(ea(S,new Bn(U)),J);p=p.updateImmediateChild(U,de)}),vi(S).forEach(U=>{p=p.updateImmediateChild(U.name,U.node)}),p}return vi(ea(d.visibleWrites,u)).forEach(U=>{p=p.updateImmediateChild(U.name,U.node)}),p}(d.writeTree,d.treePath,u)}function ku(d,u,l,p){return function(d,u,l,p,v){(0,he.hu)(p||v,"Either existingEventSnap or existingServerSnap must exist");const S=pr(u,l);if(Wc(d.visibleWrites,S))return null;{const U=ea(d.visibleWrites,S);return yo(U)?v.getChild(l):xl(U,v.getChild(l))}}(d.writeTree,d.treePath,u,l,p)}function Gc(d,u){return function(d,u){return Vs(d.visibleWrites,u)}(d.writeTree,pr(d.treePath,u))}function oi(d,u,l){return function(d,u,l,p){const v=pr(u,l),S=Vs(d.visibleWrites,v);return null!=S?S:p.isCompleteForChild(l)?xl(ea(d.visibleWrites,v),p.getNode().getImmediateChild(l)):null}(d.writeTree,d.treePath,u,l)}function ul(d,u){return Fu(pr(d.treePath,u),d.writeTree)}function Fu(d,u){return{treePath:d,writeTree:u}}class Rd{constructor(){this.changeMap=new Map}trackChildChange(u){const l=u.type,p=u.childName;(0,he.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,he.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const v=this.changeMap.get(p);if(v){const S=v.type;if("child_added"===l&&"child_removed"===S)this.changeMap.set(p,wa(p,u.snapshotNode,v.snapshotNode));else if("child_removed"===l&&"child_added"===S)this.changeMap.delete(p);else if("child_removed"===l&&"child_changed"===S)this.changeMap.set(p,_i(p,v.oldSnap));else if("child_changed"===l&&"child_added"===S)this.changeMap.set(p,go(p,u.snapshotNode));else{if("child_changed"!==l||"child_changed"!==S)throw(0,he.g5)("Illegal combination of changes: "+u+" occurred after "+v);this.changeMap.set(p,wa(p,u.snapshotNode,v.oldSnap))}}else this.changeMap.set(p,u)}getChanges(){return Array.from(this.changeMap.values())}}const ja=new class{getCompleteChild(u){return null}getChildAfterChild(u,l,p){return null}};class Kc{constructor(u,l,p=null){this.writes_=u,this.viewCache_=l,this.optCompleteServerCache_=p}getCompleteChild(u){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(u))return l.getNode().getImmediateChild(u);{const p=null!=this.optCompleteServerCache_?new Gs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oi(this.writes_,u,p)}}getChildAfterChild(u,l,p){const v=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Kr(this.viewCache_),S=function(d,u,l,p,v,S){return function(d,u,l,p,v,S,U){let J;const de=ea(d.visibleWrites,u),be=Vs(de,fr());if(null!=be)J=be;else{if(null==l)return[];J=xl(de,l)}if(J=J.withIndex(U),J.isEmpty()||J.isLeafNode())return[];{const Ye=[],ze=U.getCompare(),ut=S?J.getReverseIteratorFrom(p,U):J.getIteratorFrom(p,U);let $t=ut.getNext();for(;$t&&Ye.length<v;)0!==ze($t,p)&&Ye.push($t),$t=ut.getNext();return Ye}}(d.writeTree,d.treePath,u,l,p,v,S)}(this.writes_,v,l,1,p,u);return 0===S.length?null:S[0]}}function Ia(d,u,l,p,v,S){const U=u.eventCache;if(null!=Gc(p,l))return u;{let J,de;if(nn(l))if((0,he.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const be=Kr(u),ze=ll(p,be instanceof Rt?be:Rt.EMPTY_NODE);J=d.filter.updateFullNode(u.eventCache.getNode(),ze,S)}else{const be=iu(p,Kr(u));J=d.filter.updateFullNode(u.eventCache.getNode(),be,S)}else{const be=Tn(l);if(".priority"===be){(0,he.hu)(1===Ai(l),"Can't have a priority with additional path components");const Ye=U.getNode();de=u.serverCache.getNode();const ze=ku(p,l,Ye,de);J=null!=ze?d.filter.updatePriority(Ye,ze):U.getNode()}else{const Ye=ir(l);let ze;if(U.isCompleteForChild(be)){de=u.serverCache.getNode();const ut=ku(p,l,U.getNode(),de);ze=null!=ut?U.getNode().getImmediateChild(be).updateChild(Ye,ut):U.getNode().getImmediateChild(be)}else ze=oi(p,be,u.serverCache);J=null!=ze?d.filter.updateChild(U.getNode(),be,ze,Ye,v,S):U.getNode()}}return zs(u,J,U.isFullyInitialized()||nn(l),d.filter.filtersNodes())}}function cl(d,u,l,p,v,S,U,J){const de=u.serverCache;let be;const Ye=U?d.filter:d.filter.getIndexedFilter();if(nn(l))be=Ye.updateFullNode(de.getNode(),p,null);else if(Ye.filtersNodes()&&!de.isFiltered()){const $t=de.getNode().updateChild(l,p);be=Ye.updateFullNode(de.getNode(),$t,null)}else{const $t=Tn(l);if(!de.isCompleteForPath(l)&&Ai(l)>1)return u;const fn=ir(l),ss=de.getNode().getImmediateChild($t).updateChild(fn,p);be=".priority"===$t?Ye.updatePriority(de.getNode(),ss):Ye.updateChild(de.getNode(),$t,ss,fn,ja,null)}const ze=Al(u,be,de.isFullyInitialized()||nn(l),Ye.filtersNodes());return Ia(d,ze,l,v,new Kc(v,ze,S),J)}function vo(d,u,l,p,v,S,U){const J=u.eventCache;let de,be;const Ye=new Kc(v,u,S);if(nn(l))be=d.filter.updateFullNode(u.eventCache.getNode(),p,U),de=zs(u,be,!0,d.filter.filtersNodes());else{const ze=Tn(l);if(".priority"===ze)be=d.filter.updatePriority(u.eventCache.getNode(),p),de=zs(u,be,J.isFullyInitialized(),J.isFiltered());else{const ut=ir(l),$t=J.getNode().getImmediateChild(ze);let fn;if(nn(ut))fn=p;else{const or=Ye.getCompleteChild(ze);fn=null!=or?".priority"===Zo(ut)&&or.getChild(Si(ut)).isEmpty()?or:or.updateChild(ut,p):Rt.EMPTY_NODE}de=$t.equals(fn)?u:zs(u,d.filter.updateChild(J.getNode(),ze,fn,ut,Ye,U),J.isFullyInitialized(),d.filter.filtersNodes())}}return de}function qc(d,u){return d.eventCache.isCompleteForChild(u)}function wi(d,u,l){return l.foreach((p,v)=>{u=u.updateChild(p,v)}),u}function cr(d,u,l,p,v,S,U,J){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let be,de=u;be=nn(l)?p:new tr(null).setTree(l,p);const Ye=u.serverCache.getNode();return be.children.inorderTraversal((ze,ut)=>{if(Ye.hasChild(ze)){const fn=wi(0,u.serverCache.getNode().getImmediateChild(ze),ut);de=cl(d,de,new Bn(ze),fn,v,S,U,J)}}),be.children.inorderTraversal((ze,ut)=>{const $t=!u.serverCache.isCompleteForChild(ze)&&void 0===ut.value;if(!Ye.hasChild(ze)&&!$t){const or=wi(0,u.serverCache.getNode().getImmediateChild(ze),ut);de=cl(d,de,new Bn(ze),or,v,S,U,J)}}),de}class Vu{constructor(u,l){this.query_=u,this.eventRegistrations_=[];const p=this.query_._queryParams,v=new Va(p.getIndex()),S=function(d){return d.loadsAllData()?new Va(d.getIndex()):d.hasLimit()?new zr(d):new Dl(d)}(p);this.processor_=function(d){return{filter:d}}(S);const U=l.serverCache,J=l.eventCache,de=v.updateFullNode(Rt.EMPTY_NODE,U.getNode(),null),be=S.updateFullNode(Rt.EMPTY_NODE,J.getNode(),null),Ye=new Gs(de,U.isFullyInitialized(),v.filtersNodes()),ze=new Gs(be,J.isFullyInitialized(),S.filtersNodes());this.viewCache_=Xo(ze,Ye),this.eventGenerator_=new bf(this.query_)}get query(){return this.query_}}function Md(d,u){const l=Kr(d.viewCache_);return l&&(d.query._queryParams.loadsAllData()||!nn(u)&&!l.getImmediateChild(Tn(u)).isEmpty())?l.getChild(u):null}function Ch(d){return 0===d.eventRegistrations_.length}function Nd(d,u,l){const p=[];if(l){(0,he.hu)(null==u,"A cancel should cancel all event registrations.");const v=d.query._path;d.eventRegistrations_.forEach(S=>{const U=S.createCancelEvent(l,v);U&&p.push(U)})}if(u){let v=[];for(let S=0;S<d.eventRegistrations_.length;++S){const U=d.eventRegistrations_[S];if(U.matches(u)){if(u.hasAnyCallback()){v=v.concat(d.eventRegistrations_.slice(S+1));break}}else v.push(U)}d.eventRegistrations_=v}else d.eventRegistrations_=[];return p}function Mo(d,u,l,p){u.type===Jo.MERGE&&null!==u.source.queryId&&((0,he.hu)(Kr(d.viewCache_),"We should always have a full cache before handling merges"),(0,he.hu)(tu(d.viewCache_),"Missing event cache, even though we have a server cache"));const v=d.viewCache_,S=function(d,u,l,p,v){const S=new Rd;let U,J;if(l.type===Jo.OVERWRITE){const be=l;be.source.fromUser?U=vo(d,u,be.path,be.snap,p,v,S):((0,he.hu)(be.source.fromServer,"Unknown source."),J=be.source.tagged||u.serverCache.isFiltered()&&!nn(be.path),U=cl(d,u,be.path,be.snap,p,v,J,S))}else if(l.type===Jo.MERGE){const be=l;be.source.fromUser?U=function(d,u,l,p,v,S,U){let J=u;return p.foreach((de,be)=>{const Ye=pr(l,de);qc(u,Tn(Ye))&&(J=vo(d,J,Ye,be,v,S,U))}),p.foreach((de,be)=>{const Ye=pr(l,de);qc(u,Tn(Ye))||(J=vo(d,J,Ye,be,v,S,U))}),J}(d,u,be.path,be.children,p,v,S):((0,he.hu)(be.source.fromServer,"Unknown source."),J=be.source.tagged||u.serverCache.isFiltered(),U=cr(d,u,be.path,be.children,p,v,J,S))}else if(l.type===Jo.ACK_USER_WRITE){const be=l;U=be.revert?function(d,u,l,p,v,S){let U;if(null!=Gc(p,l))return u;{const J=new Kc(p,u,v),de=u.eventCache.getNode();let be;if(nn(l)||".priority"===Tn(l)){let Ye;if(u.serverCache.isFullyInitialized())Ye=iu(p,Kr(u));else{const ze=u.serverCache.getNode();(0,he.hu)(ze instanceof Rt,"serverChildren would be complete if leaf node"),Ye=ll(p,ze)}Ye=Ye,be=d.filter.updateFullNode(de,Ye,S)}else{const Ye=Tn(l);let ze=oi(p,Ye,u.serverCache);null==ze&&u.serverCache.isCompleteForChild(Ye)&&(ze=de.getImmediateChild(Ye)),be=null!=ze?d.filter.updateChild(de,Ye,ze,ir(l),J,S):u.eventCache.getNode().hasChild(Ye)?d.filter.updateChild(de,Ye,Rt.EMPTY_NODE,ir(l),J,S):de,be.isEmpty()&&u.serverCache.isFullyInitialized()&&(U=iu(p,Kr(u)),U.isLeafNode()&&(be=d.filter.updateFullNode(be,U,S)))}return U=u.serverCache.isFullyInitialized()||null!=Gc(p,fr()),zs(u,be,U,d.filter.filtersNodes())}}(d,u,be.path,p,v,S):function(d,u,l,p,v,S,U){if(null!=Gc(v,l))return u;const J=u.serverCache.isFiltered(),de=u.serverCache;if(null!=p.value){if(nn(l)&&de.isFullyInitialized()||de.isCompleteForPath(l))return cl(d,u,l,de.getNode().getChild(l),v,S,J,U);if(nn(l)){let be=new tr(null);return de.getNode().forEachChild(xi,(Ye,ze)=>{be=be.set(new Bn(Ye),ze)}),cr(d,u,l,be,v,S,J,U)}return u}{let be=new tr(null);return p.foreach((Ye,ze)=>{const ut=pr(l,Ye);de.isCompleteForPath(ut)&&(be=be.set(Ye,de.getNode().getChild(ut)))}),cr(d,u,l,be,v,S,J,U)}}(d,u,be.path,be.affectedTree,p,v,S)}else{if(l.type!==Jo.LISTEN_COMPLETE)throw(0,he.g5)("Unknown operation type: "+l.type);U=function(d,u,l,p,v){const S=u.serverCache;return Ia(d,Al(u,S.getNode(),S.isFullyInitialized()||nn(l),S.isFiltered()),l,p,ja,v)}(d,u,l.path,p,S)}const de=S.getChanges();return function(d,u,l){const p=u.eventCache;if(p.isFullyInitialized()){const v=p.getNode().isLeafNode()||p.getNode().isEmpty(),S=tu(d);(l.length>0||!d.eventCache.isFullyInitialized()||v&&!p.getNode().equals(S)||!p.getNode().getPriority().equals(S.getPriority()))&&l.push(Ef(tu(u)))}}(u,U,de),{viewCache:U,changes:de}}(d.processor_,v,u,l,p);return function(d,u){(0,he.hu)(u.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,he.hu)(u.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,S.viewCache),(0,he.hu)(S.viewCache.serverCache.isFullyInitialized()||!v.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=S.viewCache,hc(d,S.changes,S.viewCache.eventCache.getNode(),null)}function hc(d,u,l,p){return function(d,u,l,p){const v=[],S=[];return u.forEach(U=>{"child_changed"===U.type&&d.index_.indexedValueChanged(U.oldSnap,U.snapshotNode)&&S.push(function(d,u){return{type:"child_moved",snapshotNode:u,childName:d}}(U.childName,U.snapshotNode))}),eu(d,v,"child_removed",u,p,l),eu(d,v,"child_added",u,p,l),eu(d,v,"child_moved",S,p,l),eu(d,v,"child_changed",u,p,l),eu(d,v,"value",u,p,l),v}(d.eventGenerator_,u,l,p?[p]:d.eventRegistrations_)}let su,pc;class Cr{constructor(){this.views=new Map}}function dl(d,u,l,p){const v=u.source.queryId;if(null!==v){const S=d.views.get(v);return(0,he.hu)(null!=S,"SyncTree gave us an op for an invalid query."),Mo(S,u,l,p)}{let S=[];for(const U of d.views.values())S=S.concat(Mo(U,u,l,p));return S}}function ou(d,u,l,p,v){const U=d.views.get(u._queryIdentifier);if(!U){let J=iu(l,v?p:null),de=!1;J?de=!0:p instanceof Rt?(J=ll(l,p),de=!1):(J=Rt.EMPTY_NODE,de=!1);const be=Xo(new Gs(J,de,!1),new Gs(p,v,!1));return new Vu(u,be)}return U}function bh(d){const u=[];for(const l of d.views.values())l.query._queryParams.loadsAllData()||u.push(l);return u}function hl(d,u){let l=null;for(const p of d.views.values())l=l||Md(p,u);return l}function Yc(d,u){return u._queryParams.loadsAllData()?Qc(d):d.views.get(u._queryIdentifier)}function kd(d,u){return null!=Yc(d,u)}function Pl(d){return null!=Qc(d)}function Qc(d){for(const u of d.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let Jc=1;class ys{constructor(u){this.listenProvider_=u,this.syncPointTree_=new tr(null),this.pendingWriteTree_={visibleWrites:As.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Jr(d,u,l,p,v){return function(d,u,l,p,v){(0,he.hu)(p>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===v&&(v=!0),d.allWrites.push({path:u,snap:l,writeId:p,visible:v}),v&&(d.visibleWrites=al(d.visibleWrites,u,l)),d.lastWriteId=p}(d.pendingWriteTree_,u,l,p,v),v?Ei(d,new ba({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,l)):[]}function ta(d,u,l=!1){const p=function(d,u){for(let l=0;l<d.allWrites.length;l++){const p=d.allWrites[l];if(p.writeId===u)return p}return null}(d.pendingWriteTree_,u);if(function(d,u){const l=d.allWrites.findIndex(J=>J.writeId===u);(0,he.hu)(l>=0,"removeWrite called with nonexistent writeId.");const p=d.allWrites[l];d.allWrites.splice(l,1);let v=p.visible,S=!1,U=d.allWrites.length-1;for(;v&&U>=0;){const J=d.allWrites[U];J.visible&&(U>=l&&nu(J,p.path)?v=!1:$r(p.path,J.path)&&(S=!0)),U--}return!!v&&(S?(function(d){d.visibleWrites=Tf(d.allWrites,Df,fr()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(p.snap?d.visibleWrites=lc(d.visibleWrites,p.path):Dr(p.children,de=>{d.visibleWrites=lc(d.visibleWrites,pr(p.path,de))}),!0))}(d.pendingWriteTree_,u)){let S=new tr(null);return null!=p.snap?S=S.set(fr(),!0):Dr(p.children,U=>{S=S.set(new Bn(U),!0)}),Ei(d,new Xl(p.path,S,l))}return[]}function Bs(d,u,l){return Ei(d,new ba({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,l))}function ed(d,u,l,p){const v=u._path,S=d.syncPointTree_.get(v);let U=[];if(S&&("default"===u._queryIdentifier||kd(S,u))){const J=function(d,u,l,p){const v=u._queryIdentifier,S=[];let U=[];const J=Pl(d);if("default"===v)for(const[de,be]of d.views.entries())U=U.concat(Nd(be,l,p)),Ch(be)&&(d.views.delete(de),be.query._queryParams.loadsAllData()||S.push(be.query));else{const de=d.views.get(v);de&&(U=U.concat(Nd(de,l,p)),Ch(de)&&(d.views.delete(v),de.query._queryParams.loadsAllData()||S.push(de.query)))}return J&&!Pl(d)&&S.push(new((0,he.hu)(su,"Reference.ts has not been loaded"),su)(u._repo,u._path)),{removed:S,events:U}}(S,u,l,p);(function(d){return 0===d.views.size})(S)&&(d.syncPointTree_=d.syncPointTree_.remove(v));const de=J.removed;U=J.events;const be=-1!==de.findIndex(ze=>ze._queryParams.loadsAllData()),Ye=d.syncPointTree_.findOnPath(v,(ze,ut)=>Pl(ut));if(be&&!Ye){const ze=d.syncPointTree_.subtree(v);if(!ze.isEmpty()){const ut=function(d){return d.fold((u,l,p)=>{if(l&&Pl(l))return[Qc(l)];{let v=[];return l&&(v=bh(l)),Dr(p,(S,U)=>{v=v.concat(U)}),v}})}(ze);for(let $t=0;$t<ut.length;++$t){const fn=ut[$t],or=fn.query,ss=mc(d,fn);d.listenProvider_.startListening($u(or),rs(d,or),ss.hashFn,ss.onComplete)}}}if(!Ye&&de.length>0&&!p)if(be){const ze=null;d.listenProvider_.stopListening($u(u),ze)}else de.forEach(ze=>{const ut=d.queryToTagMap.get(eo(ze));d.listenProvider_.stopListening($u(ze),ut)});!function(d,u){for(let l=0;l<u.length;++l){const p=u[l];if(!p._queryParams.loadsAllData()){const v=eo(p),S=d.queryToTagMap.get(v);d.queryToTagMap.delete(v),d.tagToQueryMap.delete(S)}}}(d,de)}return U}function gc(d,u,l){const p=u._path;let v=null,S=!1;d.syncPointTree_.foreachOnPath(p,(ze,ut)=>{const $t=Hr(ze,p);v=v||hl(ut,$t),S=S||Pl(ut)});let J,U=d.syncPointTree_.get(p);U?(S=S||Pl(U),v=v||hl(U,fr())):(U=new Cr,d.syncPointTree_=d.syncPointTree_.set(p,U)),null!=v?J=!0:(J=!1,v=Rt.EMPTY_NODE,d.syncPointTree_.subtree(p).foreachChild((ut,$t)=>{const fn=hl($t,fr());fn&&(v=v.updateImmediateChild(ut,fn))}));const de=kd(U,u);if(!de&&!u._queryParams.loadsAllData()){const ze=eo(u);(0,he.hu)(!d.queryToTagMap.has(ze),"View does not exist, but we have a tag");const ut=Jc++;d.queryToTagMap.set(ze,ut),d.tagToQueryMap.set(ut,ze)}let Ye=function(d,u,l,p,v,S){const U=ou(d,u,p,v,S);return d.views.has(u._queryIdentifier)||d.views.set(u._queryIdentifier,U),function(d,u){d.eventRegistrations_.push(u)}(U,l),function(d,u){const l=d.viewCache_.eventCache,p=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(wt,(S,U)=>{p.push(go(S,U))}),l.isFullyInitialized()&&p.push(Ef(l.getNode())),hc(d,p,l.getNode(),u)}(U,l)}(U,u,l,Po(d.pendingWriteTree_,p),v,J);if(!de&&!S){const ze=Yc(U,u);Ye=Ye.concat(function(d,u,l){const p=u._path,v=rs(d,u),S=mc(d,l),U=d.listenProvider_.startListening($u(u),v,S.hashFn,S.onComplete),J=d.syncPointTree_.subtree(p);if(v)(0,he.hu)(!Pl(J.value),"If we're adding a query, it shouldn't be shadowed");else{const de=J.fold((be,Ye,ze)=>{if(!nn(be)&&Ye&&Pl(Ye))return[Qc(Ye).query];{let ut=[];return Ye&&(ut=ut.concat(bh(Ye).map($t=>$t.query))),Dr(ze,($t,fn)=>{ut=ut.concat(fn)}),ut}});for(let be=0;be<de.length;++be){const Ye=de[be];d.listenProvider_.stopListening($u(Ye),rs(d,Ye))}}return U}(d,u,ze))}return Ye}function nd(d,u,l){const v=d.pendingWriteTree_,S=d.syncPointTree_.findOnPath(u,(U,J)=>{const be=hl(J,Hr(U,u));if(be)return be});return Pu(v,u,S,l,!0)}function Ei(d,u){return Hu(u,d.syncPointTree_,null,Po(d.pendingWriteTree_,fr()))}function Hu(d,u,l,p){if(nn(d.path))return rd(d,u,l,p);{const v=u.get(fr());null==l&&null!=v&&(l=hl(v,fr()));let S=[];const U=Tn(d.path),J=d.operationForChild(U),de=u.children.get(U);if(de&&J){const be=l?l.getImmediateChild(U):null,Ye=ul(p,U);S=S.concat(Hu(J,de,be,Ye))}return v&&(S=S.concat(dl(v,d,p,l))),S}}function rd(d,u,l,p){const v=u.get(fr());null==l&&null!=v&&(l=hl(v,fr()));let S=[];return u.children.inorderTraversal((U,J)=>{const de=l?l.getImmediateChild(U):null,be=ul(p,U),Ye=d.operationForChild(U);Ye&&(S=S.concat(rd(Ye,J,de,be)))}),v&&(S=S.concat(dl(v,d,p,l))),S}function mc(d,u){const l=u.query,p=rs(d,l);return{hashFn:()=>(function(d){return d.viewCache_.serverCache.getNode()}(u)||Rt.EMPTY_NODE).hash(),onComplete:v=>{if("ok"===v)return p?function(d,u,l){const p=lu(d,l);if(p){const v=id(p),S=v.path,U=v.queryId,J=Hr(S,u);return sd(d,S,new Ru(ms(U),J))}return[]}(d,l._path,p):function(d,u){return Ei(d,new Ru({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(d,l._path);{const S=function(d,u){let l="Unknown Error";"too_big"===d?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===d?l="Client doesn't have permission to access the desired data.":"unavailable"===d&&(l="The service is unavailable");const p=new Error(d+" at "+u._path.toString()+": "+l);return p.code=d.toUpperCase(),p}(v,l);return ed(d,l,null,S)}}}}function rs(d,u){const l=eo(u);return d.queryToTagMap.get(l)}function eo(d){return d._path.toString()+"$"+d._queryIdentifier}function lu(d,u){return d.tagToQueryMap.get(u)}function id(d){const u=d.indexOf("$");return(0,he.hu)(-1!==u&&u<d.length-1,"Bad queryKey."),{queryId:d.substr(u+1),path:new Bn(d.substr(0,u))}}function sd(d,u,l){const p=d.syncPointTree_.get(u);return(0,he.hu)(p,"Missing sync point for query tag that we're tracking"),dl(p,l,Po(d.pendingWriteTree_,u),null)}function $u(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new((0,he.hu)(pc,"Reference.ts has not been loaded"),pc)(d._repo,d._path):d}class Ld{constructor(u){this.node_=u}getImmediateChild(u){const l=this.node_.getImmediateChild(u);return new Ld(l)}node(){return this.node_}}class Ta{constructor(u,l){this.syncTree_=u,this.path_=l}getImmediateChild(u){const l=pr(this.path_,u);return new Ta(this.syncTree_,l)}node(){return nd(this.syncTree_,this.path_)}}const Eo=function(d,u,l){return d&&"object"==typeof d?((0,he.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?ad(d[".sv"],u,l):"object"==typeof d[".sv"]?_c(d[".sv"],u):void(0,he.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},ad=function(d,u,l){switch(d){case"timestamp":return l.timestamp;default:(0,he.hu)(!1,"Unexpected server value: "+d)}},_c=function(d,u,l){d.hasOwnProperty("increment")||(0,he.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const p=d.increment;"number"!=typeof p&&(0,he.hu)(!1,"Unexpected increment value: "+p);const v=u.node();if((0,he.hu)(null!=v,"Expected ChildrenNode.EMPTY_NODE for nulls"),!v.isLeafNode())return p;const U=v.getValue();return"number"!=typeof U?p:U+p},Ha=function(d,u,l,p){return qs(u,new Ta(l,d),p)},Th=function(d,u,l){return qs(d,new Ld(u),l)};function qs(d,u,l){const p=d.getPriority().val(),v=Eo(p,u.getImmediateChild(".priority"),l);let S;if(d.isLeafNode()){const U=d,J=Eo(U.getValue(),u,l);return J!==U.getValue()||v!==U.getPriority().val()?new M(J,Yt(v)):d}{const U=d;return S=U,v!==U.getPriority().val()&&(S=S.updatePriority(new M(v))),U.forEachChild(wt,(J,de)=>{const be=qs(de,u.getImmediateChild(J),l);be!==de&&(S=S.updateImmediateChild(J,be))}),S}}class No{constructor(u="",l=null,p={children:{},childCount:0}){this.name=u,this.parent=l,this.node=p}}function b(d,u){let l=u instanceof Bn?u:new Bn(u),p=d,v=Tn(l);for(;null!==v;){const S=(0,he.DV)(p.node.children,v)||{children:{},childCount:0};p=new No(v,p,S),l=ir(l),v=Tn(l)}return p}function g(d){return d.node.value}function m(d,u){d.node.value=u,kt(d)}function T(d){return d.node.childCount>0}function ne(d,u){Dr(d.node.children,(l,p)=>{u(new No(l,d,p))})}function Ne(d,u,l,p){l&&!p&&u(d),ne(d,v=>{Ne(v,u,!0,p)}),l&&p&&u(d)}function Et(d){return new Bn(null===d.parent?d.name:Et(d.parent)+"/"+d.name)}function kt(d){null!==d.parent&&function(d,u,l){const p=function(d){return void 0===g(d)&&!T(d)}(l),v=(0,he.r3)(d.node.children,u);p&&v?(delete d.node.children[u],d.node.childCount--,kt(d)):!p&&!v&&(d.node.children[u]=l.node,d.node.childCount++,kt(d))}(d.parent,d.name,d)}const en=/[\[\].#$\/\u0000-\u001F\u007F]/,hi=/[\[\].#$\u0000-\u001F\u007F]/,Co=10485760,uu=function(d){return"string"==typeof d&&0!==d.length&&!en.test(d)},yc=function(d){return"string"==typeof d&&0!==d.length&&!hi.test(d)},fl=function(d){return null===d||"string"==typeof d||"number"==typeof d&&!ds(d)||d&&"object"==typeof d&&(0,he.r3)(d,".sv")},Wi=function(d,u,l,p){p&&void 0===u||na((0,he.gK)(d,"value"),u,l)},na=function(d,u,l){const p=l instanceof Bn?new R(l,d):l;if(void 0===u)throw new Error(d+"contains undefined "+dt(p));if("function"==typeof u)throw new Error(d+"contains a function "+dt(p)+" with contents = "+u.toString());if(ds(u))throw new Error(d+"contains "+u.toString()+" "+dt(p));if("string"==typeof u&&u.length>Co/3&&(0,he.ug)(u)>Co)throw new Error(d+"contains a string greater than "+Co+" utf8 bytes "+dt(p)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let v=!1,S=!1;if(Dr(u,(U,J)=>{if(".value"===U)v=!0;else if(".priority"!==U&&".sv"!==U&&(S=!0,!uu(U)))throw new Error(d+" contains an invalid key ("+U+") "+dt(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(d,u){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(u),d.byteLength_+=(0,he.ug)(u),we(d)})(p,U),na(d,J,p),function(d){const u=d.parts_.pop();d.byteLength_-=(0,he.ug)(u),d.parts_.length>0&&(d.byteLength_-=1)}(p)}),v&&S)throw new Error(d+' contains ".value" child '+dt(p)+" in addition to actual children.")}},kl=function(d,u,l,p){if(p&&void 0===u)return;const v=(0,he.gK)(d,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(v+" must be an object containing the children to replace.");const S=[];Dr(u,(U,J)=>{const de=new Bn(U);if(na(v,J,pr(l,de)),".priority"===Zo(de)&&!fl(J))throw new Error(v+"contains an invalid value for '"+de.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");S.push(de)}),function(d,u){let l,p;for(l=0;l<u.length;l++){p=u[l];const S=So(p);for(let U=0;U<S.length;U++)if((".priority"!==S[U]||U!==S.length-1)&&!uu(S[U]))throw new Error(d+"contains an invalid key ("+S[U]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(ps);let v=null;for(l=0;l<u.length;l++){if(p=u[l],null!==v&&$r(v,p))throw new Error(d+"contains a path "+v.toString()+" that is ancestor of another path "+p.toString());v=p}}(v,S)},ld=function(d,u,l){if(!l||void 0!==u){if(ds(u))throw new Error((0,he.gK)(d,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fl(u))throw new Error((0,he.gK)(d,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ko=function(d,u,l,p){if(!(p&&void 0===l||uu(l)))throw new Error((0,he.gK)(d,u)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},vc=function(d,u,l,p){if(!(p&&void 0===l||yc(l)))throw new Error((0,he.gK)(d,u)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},no=function(d,u){if(".info"===Tn(u))throw new Error(d+" failed = Can't modify data under /.info/")},ro=function(d,u){const l=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!uu(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==l.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),yc(d)}(l))throw new Error((0,he.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class xf{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wc(d,u){let l=null;for(let p=0;p<u.length;p++){const v=u[p],S=v.getPath();null!==l&&!gs(S,l.path)&&(d.eventLists_.push(l),l=null),null===l&&(l={events:[],path:S}),l.events.push(v)}l&&d.eventLists_.push(l)}function ra(d,u,l){wc(d,l),Vd(d,p=>gs(p,u))}function ia(d,u,l){wc(d,l),Vd(d,p=>$r(p,u)||$r(u,p))}function Vd(d,u){d.recursionDepth_++;let l=!0;for(let p=0;p<d.eventLists_.length;p++){const v=d.eventLists_[p];v&&(u(v.path)?(Ah(d.eventLists_[p]),d.eventLists_[p]=null):l=!1)}l&&(d.eventLists_=[]),d.recursionDepth_--}function Ah(d){for(let u=0;u<d.events.length;u++){const l=d.events[u];if(null!==l){d.events[u]=null;const p=l.getEventRunner();Ns&&Vr("event: "+l.toString()),Bi(p)}}}const ud="repo_interrupt";class Ud{constructor(u,l,p,v){this.repoInfo_=u,this.forceRestClient_=l,this.authTokenProvider_=p,this.appCheckProvider_=v,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hc(),this.transactionQueueTree_=new No,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cu(d){const l=d.infoData_.getNode(new Bn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Fl(d){return function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d}({timestamp:cu(d)})}function Of(d,u,l,p,v){d.dataUpdateCount++;const S=new Bn(u);l=d.interceptServerDataCallback_?d.interceptServerDataCallback_(u,l):l;let U=[];if(v)if(p){const de=(0,he.UI)(l,be=>Yt(be));U=function(d,u,l,p){const v=lu(d,p);if(v){const S=id(v),U=S.path,J=S.queryId,de=Hr(U,u),be=tr.fromObject(l);return sd(d,U,new Tl(ms(J),de,be))}return[]}(d.serverSyncTree_,S,de,v)}else{const de=Yt(l);U=function(d,u,l,p){const v=lu(d,p);if(null!=v){const S=id(v),U=S.path,J=S.queryId,de=Hr(U,u);return sd(d,U,new ba(ms(J),de,l))}return[]}(d.serverSyncTree_,S,de,v)}else if(p){const de=(0,he.UI)(l,be=>Yt(be));U=function(d,u,l){const p=tr.fromObject(l);return Ei(d,new Tl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,p))}(d.serverSyncTree_,S,de)}else{const de=Yt(l);U=Bs(d.serverSyncTree_,S,de)}let J=S;U.length>0&&(J=Aa(d,S)),ia(d.eventQueue_,J,U)}function cd(d,u){Sh(d,"connected",u),!1===u&&function(d){Gu(d,"onDisconnectEvents");const u=Fl(d),l=Hc();ol(d.onDisconnect_,fr(),(v,S)=>{const U=Ha(v,S,d.serverSyncTree_,u);Ua(l,v,U)});let p=[];ol(l,fr(),(v,S)=>{p=p.concat(Bs(d.serverSyncTree_,v,S));const U=Mh(d,v);Aa(d,U)}),d.onDisconnect_=Hc(),ia(d.eventQueue_,fr(),p)}(d)}function Sh(d,u,l){const p=new Bn("/.info/"+u),v=Yt(l);d.infoData_.updateSnapshot(p,v);const S=Bs(d.infoSyncTree_,p,v);ia(d.eventQueue_,p,S)}function Bd(d){return d.nextWriteId_++}function jd(d,u,l,p,v){Gu(d,"set",{path:u.toString(),value:l,priority:p});const S=Fl(d),U=Yt(l,p),J=nd(d.serverSyncTree_,u),de=Th(U,J,S),be=Bd(d),Ye=Jr(d.serverSyncTree_,u,de,be,!0);wc(d.eventQueue_,Ye),d.server_.put(u.toString(),U.val(!0),(ut,$t)=>{const fn="ok"===ut;fn||Kn("set at "+u+" failed: "+ut);const or=ta(d.serverSyncTree_,be,!fn);ia(d.eventQueue_,u,or),Fo(0,v,ut,$t)});const ze=Mh(d,u);Aa(d,ze),ia(d.eventQueue_,ze,[])}function xh(d,u,l){d.server_.onDisconnectCancel(u.toString(),(p,v)=>{"ok"===p&&ns(d.onDisconnect_,u),Fo(0,l,p,v)})}function Io(d,u,l,p){const v=Yt(l);d.server_.onDisconnectPut(u.toString(),v.val(!0),(S,U)=>{"ok"===S&&Ua(d.onDisconnect_,u,v),Fo(0,p,S,U)})}function Hd(d,u,l){let p;p=".info"===Tn(u._path)?ed(d.infoSyncTree_,u,l):ed(d.serverSyncTree_,u,l),ra(d.eventQueue_,u._path,p)}function Ll(d){d.persistentConnection_&&d.persistentConnection_.interrupt(ud)}function Gu(d,...u){let l="";d.persistentConnection_&&(l=d.persistentConnection_.id+":"),Vr(l,...u)}function Fo(d,u,l,p){u&&Bi(()=>{if("ok"===l)u(null);else{const v=(l||"error").toUpperCase();let S=v;p&&(S+=": "+p);const U=new Error(S);U.code=v,u(U)}})}function gl(d,u,l){return nd(d.serverSyncTree_,u,l)||Rt.EMPTY_NODE}function $d(d,u=d.transactionQueueTree_){if(u||Ec(d,u),g(u)){const l=Nf(d,u);(0,he.hu)(l.length>0,"Sending zero length transaction queue"),l.every(v=>0===v.status)&&function(d,u,l){const p=l.map(be=>be.currentWriteId),v=gl(d,u,p);let S=v;const U=v.hash();for(let be=0;be<l.length;be++){const Ye=l[be];(0,he.hu)(0===Ye.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ye.status=1,Ye.retryCount++;const ze=Hr(u,Ye.path);S=S.updateChild(ze,Ye.currentOutputSnapshotRaw)}const J=S.val(!0),de=u;d.server_.put(de.toString(),J,be=>{Gu(d,"transaction put response",{path:de.toString(),status:be});let Ye=[];if("ok"===be){const ze=[];for(let ut=0;ut<l.length;ut++)l[ut].status=2,Ye=Ye.concat(ta(d.serverSyncTree_,l[ut].currentWriteId)),l[ut].onComplete&&ze.push(()=>l[ut].onComplete(null,!0,l[ut].currentOutputSnapshotResolved)),l[ut].unwatcher();Ec(d,b(d.transactionQueueTree_,u)),$d(d,d.transactionQueueTree_),ia(d.eventQueue_,u,Ye);for(let ut=0;ut<ze.length;ut++)Bi(ze[ut])}else{if("datastale"===be)for(let ze=0;ze<l.length;ze++)l[ze].status=3===l[ze].status?4:0;else{Kn("transaction at "+de.toString()+" failed: "+be);for(let ze=0;ze<l.length;ze++)l[ze].status=4,l[ze].abortReason=be}Aa(d,u)}},U)}(d,Et(u),l)}else T(u)&&ne(u,l=>{$d(d,l)})}function Aa(d,u){const l=Wd(d,u),p=Et(l);return function(d,u,l){if(0===u.length)return;const p=[];let v=[];const U=u.filter(J=>0===J.status).map(J=>J.currentWriteId);for(let J=0;J<u.length;J++){const de=u[J],be=Hr(l,de.path);let ze,Ye=!1;if((0,he.hu)(null!==be,"rerunTransactionsUnderNode_: relativePath should not be null."),4===de.status)Ye=!0,ze=de.abortReason,v=v.concat(ta(d.serverSyncTree_,de.currentWriteId,!0));else if(0===de.status)if(de.retryCount>=25)Ye=!0,ze="maxretry",v=v.concat(ta(d.serverSyncTree_,de.currentWriteId,!0));else{const ut=gl(d,de.path,U);de.currentInputSnapshot=ut;const $t=u[J].update(ut.val());if(void 0!==$t){na("transaction failed: Data returned ",$t,de.path);let fn=Yt($t);"object"==typeof $t&&null!=$t&&(0,he.r3)($t,".priority")||(fn=fn.updatePriority(ut.getPriority()));const ss=de.currentWriteId,Hl=Fl(d),ml=Th(fn,ut,Hl);de.currentOutputSnapshotRaw=fn,de.currentOutputSnapshotResolved=ml,de.currentWriteId=Bd(d),U.splice(U.indexOf(ss),1),v=v.concat(Jr(d.serverSyncTree_,de.path,ml,de.currentWriteId,de.applyLocally)),v=v.concat(ta(d.serverSyncTree_,ss,!0))}else Ye=!0,ze="nodata",v=v.concat(ta(d.serverSyncTree_,de.currentWriteId,!0))}ia(d.eventQueue_,l,v),v=[],Ye&&(u[J].status=2,setTimeout(u[J].unwatcher,Math.floor(0)),u[J].onComplete&&p.push("nodata"===ze?()=>u[J].onComplete(null,!1,u[J].currentInputSnapshot):()=>u[J].onComplete(new Error(ze),!1,null)))}Ec(d,d.transactionQueueTree_);for(let J=0;J<p.length;J++)Bi(p[J]);$d(d,d.transactionQueueTree_)}(d,Nf(d,l),p),p}function Wd(d,u){let l,p=d.transactionQueueTree_;for(l=Tn(u);null!==l&&void 0===g(p);)p=b(p,l),l=Tn(u=ir(u));return p}function Nf(d,u){const l=[];return Gd(d,u,l),l.sort((p,v)=>p.order-v.order),l}function Gd(d,u,l){const p=g(u);if(p)for(let v=0;v<p.length;v++)l.push(p[v]);ne(u,v=>{Gd(d,v,l)})}function Ec(d,u){const l=g(u);if(l){let p=0;for(let v=0;v<l.length;v++)2!==l[v].status&&(l[p]=l[v],p++);l.length=p,m(u,l.length>0?l:void 0)}ne(u,p=>{Ec(d,p)})}function Mh(d,u){const l=Et(Wd(d,u)),p=b(d.transactionQueueTree_,u);return function(d,u,l){let p=d.parent;for(;null!==p;){if(u(p))return!0;p=p.parent}}(p,v=>{zu(d,v)}),zu(d,p),Ne(p,v=>{zu(d,v)}),l}function zu(d,u){const l=g(u);if(l){const p=[];let v=[],S=-1;for(let U=0;U<l.length;U++)3===l[U].status||(1===l[U].status?((0,he.hu)(S===U-1,"All SENT items should be at beginning of queue."),S=U,l[U].status=3,l[U].abortReason="set"):((0,he.hu)(0===l[U].status,"Unexpected transaction status in abort"),l[U].unwatcher(),v=v.concat(ta(d.serverSyncTree_,l[U].currentWriteId,!0)),l[U].onComplete&&p.push(l[U].onComplete.bind(null,new Error("set"),!1,null))));-1===S?m(u,void 0):l.length=S+1,ia(d.eventQueue_,Et(u),v);for(let U=0;U<p.length;U++)Bi(p[U])}}const bc=function(d,u){const l=Qg(d),p=l.namespace;return"firebase.com"===l.domain&&Yr(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==l.domain&&Yr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Kn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Di(l.host,l.secure,p,u,"ws"===l.scheme||"wss"===l.scheme,"",p!==l.subdomain),path:new Bn(l.pathString)}},Qg=function(d){let u="",l="",p="",v="",S="",U=!0,J="https",de=443;if("string"==typeof d){let be=d.indexOf("//");be>=0&&(J=d.substring(0,be-1),d=d.substring(be+2));let Ye=d.indexOf("/");-1===Ye&&(Ye=d.length);let ze=d.indexOf("?");-1===ze&&(ze=d.length),u=d.substring(0,Math.min(Ye,ze)),Ye<ze&&(v=function(d){let u="";const l=d.split("/");for(let p=0;p<l.length;p++)if(l[p].length>0){let v=l[p];try{v=decodeURIComponent(v.replace(/\+/g," "))}catch(S){}u+="/"+v}return u}(d.substring(Ye,ze)));const ut=function(d){const u={};"?"===d.charAt(0)&&(d=d.substring(1));for(const l of d.split("&")){if(0===l.length)continue;const p=l.split("=");2===p.length?u[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):Kn(`Invalid query segment '${l}' in query '${d}'`)}return u}(d.substring(Math.min(d.length,ze)));be=u.indexOf(":"),be>=0?(U="https"===J||"wss"===J,de=parseInt(u.substring(be+1),10)):be=u.length;const $t=u.slice(0,be);if("localhost"===$t.toLowerCase())l="localhost";else if($t.split(".").length<=2)l=$t;else{const fn=u.indexOf(".");p=u.substring(0,fn).toLowerCase(),l=u.substring(fn+1),S=p}"ns"in ut&&(S=ut.ns)}return{host:u,port:de,domain:l,subdomain:p,secure:U,scheme:J,pathString:v,namespace:S}};class kh{constructor(u,l,p,v){this.eventType=u,this.eventRegistration=l,this.snapshot=p,this.prevName=v}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,he.Pz)(this.snapshot.exportVal())}}class hu{constructor(u,l,p){this.eventRegistration=u,this.error=l,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class zd{constructor(u,l){this.snapshotCallback=u,this.cancelCallback=l}onValue(u,l){this.snapshotCallback.call(null,u,l)}onCancel(u){return(0,he.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class kf{constructor(u,l){this._repo=u,this._path=l}cancel(){const u=new he.BH;return xh(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){no("OnDisconnect.remove",this._path);const u=new he.BH;return Io(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){no("OnDisconnect.set",this._path),Wi("OnDisconnect.set",u,this._path,!1);const l=new he.BH;return Io(this._repo,this._path,u,l.wrapCallback(()=>{})),l.promise}setWithPriority(u,l){no("OnDisconnect.setWithPriority",this._path),Wi("OnDisconnect.setWithPriority",u,this._path,!1),ld("OnDisconnect.setWithPriority",l,!1);const p=new he.BH;return function(d,u,l,p,v){const S=Yt(l,p);d.server_.onDisconnectPut(u.toString(),S.val(!0),(U,J)=>{"ok"===U&&Ua(d.onDisconnect_,u,S),Fo(0,v,U,J)})}(this._repo,this._path,u,l,p.wrapCallback(()=>{})),p.promise}update(u){no("OnDisconnect.update",this._path),kl("OnDisconnect.update",u,this._path,!1);const l=new he.BH;return function(d,u,l,p){if((0,he.xb)(l))return Vr("onDisconnect().update() called with empty data.  Don't do anything."),void Fo(0,p,"ok",void 0);d.server_.onDisconnectMerge(u.toString(),l,(v,S)=>{"ok"===v&&Dr(l,(U,J)=>{const de=Yt(J);Ua(d.onDisconnect_,pr(u,U),de)}),Fo(0,p,v,S)})}(this._repo,this._path,u,l.wrapCallback(()=>{})),l.promise}}class io{constructor(u,l,p,v){this._repo=u,this._path=l,this._queryParams=p,this._orderByCalled=v}get key(){return nn(this._path)?null:Zo(this._path)}get ref(){return new Lo(this._repo,this._path)}get _queryIdentifier(){const u=Yl(this._queryParams),l=$s(u);return"{}"===l?"default":l}get _queryObject(){return Yl(this._queryParams)}isEqual(u){if(!((u=(0,he.m9)(u))instanceof io))return!1;const l=this._repo===u._repo,p=gs(this._path,u._path);return l&&p&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(d){let u="";for(let l=d.pieceNum_;l<d.pieces_.length;l++)""!==d.pieces_[l]&&(u+="/"+encodeURIComponent(String(d.pieces_[l])));return u||"/"}(this._path)}}function Ic(d,u){if(!0===d._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function fu(d){let u=null,l=null;if(d.hasStart()&&(u=d.getIndexStartValue()),d.hasEnd()&&(l=d.getIndexEndValue()),d.getIndex()===xi){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",v="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(d.hasStart()){if(d.getIndexStartName()!==Mr)throw new Error(p);if("string"!=typeof u)throw new Error(v)}if(d.hasEnd()){if(d.getIndexEndName()!==Ii)throw new Error(p);if("string"!=typeof l)throw new Error(v)}}else if(d.getIndex()===wt){if(null!=u&&!fl(u)||null!=l&&!fl(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,he.hu)(d.getIndex()instanceof Uc||d.getIndex()===Bc,"unknown index type."),null!=u&&"object"==typeof u||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function pu(d){if(d.hasStart()&&d.hasEnd()&&d.hasLimit()&&!d.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Lo extends io{constructor(u,l){super(u,l,new mo,!1)}get parent(){const u=Si(this._path);return null===u?null:new Lo(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class Vl{constructor(u,l,p){this._node=u,this.ref=l,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const l=new Bn(u),p=js(this.ref,u);return new Vl(this._node.getChild(l),p,wt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,v)=>u(new Vl(v,js(this.ref,p),wt)))}hasChild(u){const l=new Bn(u);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function jp(d,u){return(d=(0,he.m9)(d))._checkNotDeleted("ref"),void 0!==u?js(d._root,u):d._root}function Ff(d,u){(d=(0,he.m9)(d))._checkNotDeleted("refFromURL");const l=bc(u,d._repo.repoInfo_.nodeAdmin);ro("refFromURL",l);const p=l.repoInfo;return!d._repo.repoInfo_.isCustomHost()&&p.host!==d._repo.repoInfo_.host&&Yr("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+d._repo.repoInfo_.host+")"),jp(d,l.path.toString())}function js(d,u){return null===Tn((d=(0,he.m9)(d))._path)?((l=u)&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),vc("child","path",l,!1)):vc("child","path",u,!1),new Lo(d._repo,pr(d._path,u));var l}function Fh(d,u){d=(0,he.m9)(d),no("set",d._path),Wi("set",u,d._path,!1);const l=new he.BH;return jd(d._repo,d._path,u,null,l.wrapCallback(()=>{})),l.promise}function Vf(d,u){kl("update",u,d._path,!1);const l=new he.BH;return function(d,u,l,p){Gu(d,"update",{path:u.toString(),value:l});let v=!0;const S=Fl(d),U={};if(Dr(l,(J,de)=>{v=!1,U[J]=Ha(pr(u,J),Yt(de),d.serverSyncTree_,S)}),v)Vr("update() called with empty data.  Don't do anything."),Fo(0,p,"ok",void 0);else{const J=Bd(d),de=function(d,u,l,p){!function(d,u,l,p){(0,he.hu)(p>d.lastWriteId,"Stacking an older merge on top of newer ones"),d.allWrites.push({path:u,children:l,writeId:p,visible:!0}),d.visibleWrites=Sl(d.visibleWrites,u,l),d.lastWriteId=p}(d.pendingWriteTree_,u,l,p);const v=tr.fromObject(l);return Ei(d,new Tl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,v))}(d.serverSyncTree_,u,U,J);wc(d.eventQueue_,de),d.server_.merge(u.toString(),l,(be,Ye)=>{const ze="ok"===be;ze||Kn("update at "+u+" failed: "+be);const ut=ta(d.serverSyncTree_,J,!ze),$t=ut.length>0?Aa(d,u):u;ia(d.eventQueue_,$t,ut),Fo(0,p,be,Ye)}),Dr(l,be=>{const Ye=Mh(d,pr(u,be));Aa(d,Ye)}),ia(d.eventQueue_,u,[])}}(d._repo,d._path,u,l.wrapCallback(()=>{})),l.promise}function em(d){return function(d,u){const l=function(d,u){const l=u._path;let p=null;d.syncPointTree_.foreachOnPath(l,(be,Ye)=>{const ze=Hr(be,l);p=p||hl(Ye,ze)});let v=d.syncPointTree_.get(l);v?p=p||hl(v,fr()):(v=new Cr,d.syncPointTree_=d.syncPointTree_.set(l,v));const S=null!=p,U=S?new Gs(p,!0,!1):null;return function(d){return tu(d.viewCache_)}(ou(v,u,Po(d.pendingWriteTree_,u._path),S?U.getNode():Rt.EMPTY_NODE,S))}(d.serverSyncTree_,u);return null!=l?Promise.resolve(l):d.server_.get(u).then(p=>{const v=Yt(p).withIndex(u._queryParams.getIndex()),S=Bs(d.serverSyncTree_,u._path,v);return ra(d.eventQueue_,u._path,S),Promise.resolve(v)},p=>(Gu(d,"get for query "+(0,he.Pz)(u)+" failed: "+p),Promise.reject(new Error(p))))}((d=(0,he.m9)(d))._repo,d).then(u=>new Vl(u,new Lo(d._repo,d._path),d._queryParams.getIndex()))}class Kd{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,l){const p=l._queryParams.getIndex();return new kh("value",this,new Vl(u.snapshotNode,new Lo(l._repo,l._path),p))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,l){return this.callbackContext.hasCancelCallback?new hu(this,u,l):null}matches(u){return u instanceof Kd&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Lh{constructor(u,l){this.eventType=u,this.callbackContext=l}respondsTo(u){let l="children_added"===u?"child_added":u;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(u,l){return this.callbackContext.hasCancelCallback?new hu(this,u,l):null}createEvent(u,l){(0,he.hu)(null!=u.childName,"Child events should have a childName.");const p=js(new Lo(l._repo,l._path),u.childName),v=l._queryParams.getIndex();return new kh(u.type,this,new Vl(u.snapshotNode,p,v),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof Lh&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function En(d,u,l,p,v){let S;if("object"==typeof p&&(S=void 0,v=p),"function"==typeof p&&(S=p),v&&v.onlyOnce){const de=l,be=(Ye,ze)=>{Hd(d._repo,d,J),de(Ye,ze)};be.userCallback=l.userCallback,be.context=l.context,l=be}const U=new zd(l,S||void 0),J="value"===u?new Kd(U):new Lh(u,U);return function(d,u,l){let p;p=".info"===Tn(u._path)?gc(d.infoSyncTree_,u,l):gc(d.serverSyncTree_,u,l),ra(d.eventQueue_,u._path,p)}(d._repo,d,J),()=>Hd(d._repo,d,J)}function gu(d,u,l,p){return En(d,"value",u,l,p)}function qd(d,u,l,p){return En(d,"child_added",u,l,p)}function Ku(d,u,l,p){return En(d,"child_changed",u,l,p)}function Sa(d,u,l,p){return En(d,"child_moved",u,l,p)}function Vh(d,u,l,p){return En(d,"child_removed",u,l,p)}function Wp(d,u,l){let p=null;const v=l?new zd(l):null;"value"===u?p=new Kd(v):u&&(p=new Lh(u,v)),Hd(d._repo,d,p)}class Vo{}class Ul extends Vo{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Wi("endAt",this._value,u._path,!0);const l=xo(u._queryParams,this._value,this._key);if(pu(l),fu(l),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new io(u._repo,u._path,l,u._orderByCalled)}}class Gp extends Vo{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Wi("endBefore",this._value,u._path,!1);const l=function(d,u,l){let p,v;return d.index_===xi?("string"==typeof u&&(u=ts(u)),v=xo(d,u,l)):(p=null==l?Mr:ts(l),v=xo(d,u,p)),v.endBeforeSet_=!0,v}(u._queryParams,this._value,this._key);if(pu(l),fu(l),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new io(u._repo,u._path,l,u._orderByCalled)}}class tm extends Vo{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Wi("startAt",this._value,u._path,!0);const l=yi(u._queryParams,this._value,this._key);if(pu(l),fu(l),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new io(u._repo,u._path,l,u._orderByCalled)}}class so extends Vo{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Wi("startAfter",this._value,u._path,!1);const l=function(d,u,l){let p;if(d.index_===xi)"string"==typeof u&&(u=wf(u)),p=yi(d,u,l);else{let v;v=null==l?Ii:wf(l),p=yi(d,u,v)}return p.startAfterSet_=!0,p}(u._queryParams,this._value,this._key);if(pu(l),fu(l),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new io(u._repo,u._path,l,u._orderByCalled)}}class Bh extends Vo{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new io(u._repo,u._path,function(d,u){const l=d.copy();return l.limitSet_=!0,l.limit_=u,l.viewFrom_="l",l}(u._queryParams,this._limit),u._orderByCalled)}}class Uf extends Vo{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new io(u._repo,u._path,function(d,u){const l=d.copy();return l.limitSet_=!0,l.limit_=u,l.viewFrom_="r",l}(u._queryParams,this._limit),u._orderByCalled)}}class nm extends Vo{constructor(u){super(),this._path=u}_apply(u){Ic(u,"orderByChild");const l=new Bn(this._path);if(nn(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new Uc(l),v=Ro(u._queryParams,p);return fu(v),new io(u._repo,u._path,v,!0)}}class rm extends Vo{_apply(u){Ic(u,"orderByKey");const l=Ro(u._queryParams,xi);return fu(l),new io(u._repo,u._path,l,!0)}}class Kp extends Vo{_apply(u){Ic(u,"orderByPriority");const l=Ro(u._queryParams,wt);return fu(l),new io(u._repo,u._path,l,!0)}}class dd extends Vo{_apply(u){Ic(u,"orderByValue");const l=Ro(u._queryParams,Bc);return fu(l),new io(u._repo,u._path,l,!0)}}class Jd extends Vo{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){if(Wi("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ul(this._value,this._key)._apply(new tm(this._value,this._key)._apply(u))}}function Wa(d,...u){let l=(0,he.m9)(d);for(const p of u)l=p._apply(l);return l}(function(d){(0,he.hu)(!su,"__referenceConstructor has already been defined"),su=d})(Lo),function(d){(0,he.hu)(!pc,"__referenceConstructor has already been defined"),pc=d}(Lo);const Zp={};function sm(d,u,l,p,v){let S=p||d.options.databaseURL;void 0===S&&(d.options.projectId||Yr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vr("Using default host for project ",d.options.projectId),S=`${d.options.projectId}-default-rtdb.firebaseio.com`);let de,be,U=bc(S,v),J=U.repoInfo;"undefined"!=typeof process&&(be=process.env.FIREBASE_DATABASE_EMULATOR_HOST),be?(de=!0,S=`http://${be}?ns=${J.namespace}`,U=bc(S,v),J=U.repoInfo):de=!U.repoInfo.secure;const Ye=v&&de?new te(te.OWNER):new H(d.name,d.options,u);ro("Invalid Firebase Database URL",U),nn(U.path)||Yr("Database URL must point to the root of a Firebase Database (not including a child path).");const ze=function(d,u,l,p){let v=Zp[u.name];v||(v={},Zp[u.name]=v);let S=v[d.toURLString()];return S&&Yr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),S=new Ud(d,false,l,p),v[d.toURLString()]=S,S}(J,d,Ye,new Q(d.name,l));return new Wh(ze,d)}class Wh{constructor(u,l){this._repoInternal=u,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(d,u,l){if(d.stats_=ha(d.repoInfo_),d.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)d.server_=new xu(d.repoInfo_,(p,v,S,U)=>{Of(d,p,v,S,U)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>cd(d,!0),0);else{if(null!=l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,he.Pz)(l)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}d.persistentConnection_=new Ws(d.repoInfo_,u,(p,v,S,U)=>{Of(d,p,v,S,U)},p=>{cd(d,p)},p=>{!function(d,u){Dr(u,(l,p)=>{Sh(d,l,p)})}(d,p)},d.authTokenProvider_,d.appCheckProvider_,l),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(p=>{d.server_.refreshAuthToken(p)}),d.appCheckProvider_.addTokenChangeListener(p=>{d.server_.refreshAppCheckToken(p.token)}),d.statsReporter_=function(d,u){const l=d.toString();return Qi[l]||(Qi[l]=u()),Qi[l]}(d.repoInfo_,()=>new Ql(d.stats_,d.server_)),d.infoData_=new jc,d.infoSyncTree_=new ys({startListening:(p,v,S,U)=>{let J=[];const de=d.infoData_.getNode(p._path);return de.isEmpty()||(J=Bs(d.infoSyncTree_,p._path,de),setTimeout(()=>{U("ok")},0)),J},stopListening:()=>{}}),Sh(d,"connected",!1),d.serverSyncTree_=new ys({startListening:(p,v,S,U)=>(d.server_.listen(p,S,v,(J,de)=>{const be=U(J,de);ia(d.eventQueue_,p._path,be)}),[]),stopListening:(p,v)=>{d.server_.unlisten(p,v)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Lo(this._repo,fr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(d,u){const l=Zp[u];(!l||l[d.key]!==d)&&Yr(`Database ${u}(${d.repoInfo_}) has already been deleted.`),Ll(d),delete l[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&Yr("Cannot call "+u+" on a deleted database.")}}function jf(d,u){Do(d,u)}class Dc{constructor(u,l){this.committed=u,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ws.prototype.simpleListen=function(d,u){this.sendRequest("q",{p:d},u)},Ws.prototype.echo=function(d,u){this.sendRequest("echo",{d},u)},Li(Fi.SDK_VERSION),(0,Fi._registerComponent)(new er.wA("database",(u,{instanceIdentifier:l})=>sm(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,Fi.registerVersion)(ti,"0.12.4",void 0),(0,Fi.registerVersion)(ti,"0.12.4","esm2017");const zf=new ls.Yd("@firebase/database-compat"),zh=function(d){zf.warn("FIREBASE WARNING: "+d)};class Kf{constructor(u){this._delegate=u}cancel(u){(0,he.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,he.Wj)("OnDisconnect.cancel","onComplete",u,!0);const l=this._delegate.cancel();return u&&l.then(()=>u(null),p=>u(p)),l}remove(u){(0,he.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,he.Wj)("OnDisconnect.remove","onComplete",u,!0);const l=this._delegate.remove();return u&&l.then(()=>u(null),p=>u(p)),l}set(u,l){(0,he.Dv)("OnDisconnect.set",1,2,arguments.length),(0,he.Wj)("OnDisconnect.set","onComplete",l,!0);const p=this._delegate.set(u);return l&&p.then(()=>l(null),v=>l(v)),p}setWithPriority(u,l,p){(0,he.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,he.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const v=this._delegate.setWithPriority(u,l);return p&&v.then(()=>p(null),S=>p(S)),v}update(u,l){if((0,he.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const v={};for(let S=0;S<u.length;++S)v[""+S]=u[S];u=v,zh("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,he.Wj)("OnDisconnect.update","onComplete",l,!0);const p=this._delegate.update(u);return l&&p.then(()=>l(null),v=>l(v)),p}}class qu{constructor(u,l){this.committed=u,this.snapshot=l}toJSON(){return(0,he.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class za{constructor(u,l){this._database=u,this._delegate=l}val(){return(0,he.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,he.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,he.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,he.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,he.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),vc("DataSnapshot.child","path",u,!1),new za(this._database,this._delegate.child(u))}hasChild(u){return(0,he.Dv)("DataSnapshot.hasChild",1,1,arguments.length),vc("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,he.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,he.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,he.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(l=>u(new za(this._database,l)))}hasChildren(){return(0,he.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,he.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,he.Dv)("DataSnapshot.ref",0,0,arguments.length),new xa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Pi{constructor(u,l){this.database=u,this._delegate=l}on(u,l,p,v){var S;(0,he.Dv)("Query.on",2,4,arguments.length),(0,he.Wj)("Query.on","callback",l,!1);const U=Pi.getCancelAndContextArgs_("Query.on",p,v),J=(be,Ye)=>{l.call(U.context,new za(this.database,be),Ye)};J.userCallback=l,J.context=U.context;const de=null===(S=U.cancel)||void 0===S?void 0:S.bind(U.context);switch(u){case"value":return gu(this._delegate,J,de),l;case"child_added":return qd(this._delegate,J,de),l;case"child_removed":return Vh(this._delegate,J,de),l;case"child_changed":return Ku(this._delegate,J,de),l;case"child_moved":return Sa(this._delegate,J,de),l;default:throw new Error((0,he.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,l,p){if((0,he.Dv)("Query.off",0,3,arguments.length),function(d,u,l){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,he.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,he.Wj)("Query.off","callback",l,!0),(0,he.lb)("Query.off","context",p,!0),l){const v=()=>{};v.userCallback=l,v.context=p,Wp(this._delegate,u,v)}else Wp(this._delegate,u)}get(){return em(this._delegate).then(u=>new za(this.database,u))}once(u,l,p,v){(0,he.Dv)("Query.once",1,4,arguments.length),(0,he.Wj)("Query.once","callback",l,!0);const S=Pi.getCancelAndContextArgs_("Query.once",p,v),U=new he.BH,J=(be,Ye)=>{const ze=new za(this.database,be);l&&l.call(S.context,ze,Ye),U.resolve(ze)};J.userCallback=l,J.context=S.context;const de=be=>{S.cancel&&S.cancel.call(S.context,be),U.reject(be)};switch(u){case"value":gu(this._delegate,J,de,{onlyOnce:!0});break;case"child_added":qd(this._delegate,J,de,{onlyOnce:!0});break;case"child_removed":Vh(this._delegate,J,de,{onlyOnce:!0});break;case"child_changed":Ku(this._delegate,J,de,{onlyOnce:!0});break;case"child_moved":Sa(this._delegate,J,de,{onlyOnce:!0});break;default:throw new Error((0,he.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return U.promise}limitToFirst(u){return(0,he.Dv)("Query.limitToFirst",1,1,arguments.length),new Pi(this.database,Wa(this._delegate,function(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Bh(d)}(u)))}limitToLast(u){return(0,he.Dv)("Query.limitToLast",1,1,arguments.length),new Pi(this.database,Wa(this._delegate,function(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Uf(d)}(u)))}orderByChild(u){return(0,he.Dv)("Query.orderByChild",1,1,arguments.length),new Pi(this.database,Wa(this._delegate,function(d){if("$key"===d)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===d)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===d)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return vc("orderByChild","path",d,!1),new nm(d)}(u)))}orderByKey(){return(0,he.Dv)("Query.orderByKey",0,0,arguments.length),new Pi(this.database,Wa(this._delegate,new rm))}orderByPriority(){return(0,he.Dv)("Query.orderByPriority",0,0,arguments.length),new Pi(this.database,Wa(this._delegate,new Kp))}orderByValue(){return(0,he.Dv)("Query.orderByValue",0,0,arguments.length),new Pi(this.database,Wa(this._delegate,new dd))}startAt(u=null,l){return(0,he.Dv)("Query.startAt",0,2,arguments.length),new Pi(this.database,Wa(this._delegate,function(d=null,u){return ko("startAt","key",u,!0),new tm(d,u)}(u,l)))}startAfter(u=null,l){return(0,he.Dv)("Query.startAfter",0,2,arguments.length),new Pi(this.database,Wa(this._delegate,function(d,u){return ko("startAfter","key",u,!0),new so(d,u)}(u,l)))}endAt(u=null,l){return(0,he.Dv)("Query.endAt",0,2,arguments.length),new Pi(this.database,Wa(this._delegate,function(d,u){return ko("endAt","key",u,!0),new Ul(d,u)}(u,l)))}endBefore(u=null,l){return(0,he.Dv)("Query.endBefore",0,2,arguments.length),new Pi(this.database,Wa(this._delegate,function(d,u){return ko("endBefore","key",u,!0),new Gp(d,u)}(u,l)))}equalTo(u,l){return(0,he.Dv)("Query.equalTo",1,2,arguments.length),new Pi(this.database,Wa(this._delegate,function(d,u){return ko("equalTo","key",u,!0),new Jd(d,u)}(u,l)))}toString(){return(0,he.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,he.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,he.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof Pi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,l,p){const v={cancel:void 0,context:void 0};if(l&&p)v.cancel=l,(0,he.Wj)(u,"cancel",v.cancel,!0),v.context=p,(0,he.lb)(u,"context",v.context,!0);else if(l)if("object"==typeof l&&null!==l)v.context=l;else{if("function"!=typeof l)throw new Error((0,he.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");v.cancel=l}return v}get ref(){return new xa(this.database,new Lo(this._delegate._repo,this._delegate._path))}}class xa extends Pi{constructor(u,l){super(u,new io(l._repo,l._path,new mo,!1)),this.database=u,this._delegate=l}getKey(){return(0,he.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,he.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new xa(this.database,js(this._delegate,u))}getParent(){(0,he.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new xa(this.database,u):null}getRoot(){return(0,he.Dv)("Reference.root",0,0,arguments.length),new xa(this.database,this._delegate.root)}set(u,l){(0,he.Dv)("Reference.set",1,2,arguments.length),(0,he.Wj)("Reference.set","onComplete",l,!0);const p=Fh(this._delegate,u);return l&&p.then(()=>l(null),v=>l(v)),p}update(u,l){if((0,he.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const v={};for(let S=0;S<u.length;++S)v[""+S]=u[S];u=v,zh("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}no("Reference.update",this._delegate._path),(0,he.Wj)("Reference.update","onComplete",l,!0);const p=Vf(this._delegate,u);return l&&p.then(()=>l(null),v=>l(v)),p}setWithPriority(u,l,p){(0,he.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,he.Wj)("Reference.setWithPriority","onComplete",p,!0);const v=function(d,u,l){if(no("setWithPriority",d._path),Wi("setWithPriority",u,d._path,!1),ld("setWithPriority",l,!1),".length"===d.key||".keys"===d.key)throw"setWithPriority failed: "+d.key+" is a read-only object.";const p=new he.BH;return jd(d._repo,d._path,u,l,p.wrapCallback(()=>{})),p.promise}(this._delegate,u,l);return p&&v.then(()=>p(null),S=>p(S)),v}remove(u){(0,he.Dv)("Reference.remove",0,1,arguments.length),(0,he.Wj)("Reference.remove","onComplete",u,!0);const l=function(d){return no("remove",d._path),Fh(d,null)}(this._delegate);return u&&l.then(()=>u(null),p=>u(p)),l}transaction(u,l,p){(0,he.Dv)("Reference.transaction",1,3,arguments.length),(0,he.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,he.Wj)("Reference.transaction","onComplete",l,!0),function(d,u,l,p){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,he.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const v=function(d,u,l){var p;if(d=(0,he.m9)(d),no("Reference.transaction",d._path),".length"===d.key||".keys"===d.key)throw"Reference.transaction failed: "+d.key+" is a read-only object.";const v=null===(p=null==l?void 0:l.applyLocally)||void 0===p||p,S=new he.BH,J=gu(d,()=>{});return function(d,u,l,p,v,S){Gu(d,"transaction on "+u);const U={path:u,update:l,onComplete:p,status:null,order:us(),applyLocally:S,retryCount:0,unwatcher:v,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},J=gl(d,u,void 0);U.currentInputSnapshot=J;const de=U.update(J.val());if(void 0===de)U.unwatcher(),U.currentOutputSnapshotRaw=null,U.currentOutputSnapshotResolved=null,U.onComplete&&U.onComplete(null,!1,U.currentInputSnapshot);else{na("transaction failed: Data returned ",de,U.path),U.status=0;const be=b(d.transactionQueueTree_,u),Ye=g(be)||[];let ze;Ye.push(U),m(be,Ye),"object"==typeof de&&null!==de&&(0,he.r3)(de,".priority")?(ze=(0,he.DV)(de,".priority"),(0,he.hu)(fl(ze),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):ze=(nd(d.serverSyncTree_,u)||Rt.EMPTY_NODE).getPriority().val();const ut=Fl(d),$t=Yt(de,ze),fn=Th($t,J,ut);U.currentOutputSnapshotRaw=$t,U.currentOutputSnapshotResolved=fn,U.currentWriteId=Bd(d);const or=Jr(d.serverSyncTree_,u,fn,U.currentWriteId,U.applyLocally);ia(d.eventQueue_,u,or),$d(d,d.transactionQueueTree_)}}(d._repo,d._path,u,(de,be,Ye)=>{let ze=null;de?S.reject(de):(ze=new Vl(Ye,new Lo(d._repo,d._path),wt),S.resolve(new Dc(be,ze)))},J,v),S.promise}(this._delegate,u,{applyLocally:p}).then(S=>new qu(S.committed,new za(this.database,S.snapshot)));return l&&v.then(S=>l(null,S.committed,S.snapshot),S=>l(S,!1,null)),v}setPriority(u,l){(0,he.Dv)("Reference.setPriority",1,2,arguments.length),(0,he.Wj)("Reference.setPriority","onComplete",l,!0);const p=function(d,u){d=(0,he.m9)(d),no("setPriority",d._path),ld("setPriority",u,!1);const l=new he.BH;return jd(d._repo,pr(d._path,".priority"),u,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,u);return l&&p.then(()=>l(null),v=>l(v)),p}push(u,l){(0,he.Dv)("Reference.push",0,2,arguments.length),(0,he.Wj)("Reference.push","onComplete",l,!0);const p=function(d,u){d=(0,he.m9)(d),no("push",d._path),Wi("push",u,d._path,!0);const l=cu(d._repo),p=ql(l),v=js(d,p),S=js(d,p);let U;return U=null!=u?Fh(S,u).then(()=>S):Promise.resolve(S),v.then=U.then.bind(U),v.catch=U.then.bind(U,void 0),v}(this._delegate,u),v=p.then(U=>new xa(this.database,U));l&&v.then(()=>l(null),U=>l(U));const S=new xa(this.database,p);return S.then=v.then.bind(v),S.catch=v.catch.bind(v,void 0),S}onDisconnect(){return no("Reference.onDisconnect",this._delegate._path),new Kf(new kf(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Zu{constructor(u,l){this._delegate=u,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(u,l,p={}){!function(d,u,l,p={}){(d=(0,he.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&Yr("Cannot call useEmulator() after instance has already been initialized.");const v=d._repoInternal;let S;if(v.repoInfo_.nodeAdmin)p.mockUserToken&&Yr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),S=new te(te.OWNER);else if(p.mockUserToken){const U="string"==typeof p.mockUserToken?p.mockUserToken:(0,he.Sg)(p.mockUserToken,d.app.options.projectId);S=new te(U)}!function(d,u,l,p){d.repoInfo_=new Di(`${u}:${l}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams),p&&(d.authTokenProvider_=p)}(v,u,l,S)}(this._delegate,u,l,p)}ref(u){if((0,he.Dv)("database.ref",0,1,arguments.length),u instanceof xa){const l=Ff(this._delegate,u.toString());return new xa(this,l)}{const l=jp(this._delegate,u);return new xa(this,l)}}refFromURL(u){(0,he.Dv)("database.refFromURL",1,1,arguments.length);const p=Ff(this._delegate,u);return new xa(this,p)}goOffline(){return(0,he.Dv)("database.goOffline",0,0,arguments.length),function(d){(d=(0,he.m9)(d))._checkNotDeleted("goOffline"),Ll(d._repo)}(this._delegate)}goOnline(){return(0,he.Dv)("database.goOnline",0,0,arguments.length),function(d){(d=(0,he.m9)(d))._checkNotDeleted("goOnline"),function(d){d.persistentConnection_&&d.persistentConnection_.resume(ud)}(d._repo)}(this._delegate)}}Zu.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:d=>function(d){return{".sv":{increment:d}}}(d)};var th=Object.freeze({__proto__:null,initStandalone:function({app:d,url:u,version:l,customAuthImpl:p,namespace:v,nodeAdmin:S=!1}){Li(l);const U=new er.zt("auth-internal",new er.H0("database-standalone"));return U.setComponent(new er.wA("auth-internal",()=>p,"PRIVATE")),{instance:new Zu(sm(d,U,void 0,u,S),d),namespace:v}}});const Kh=Zu.ServerValue;!function(d){d.INTERNAL.registerComponent(new er.wA("database-compat",(u,{instanceIdentifier:l})=>{const p=u.getProvider("app-compat").getImmediate(),v=u.getProvider("database").getImmediate({identifier:l});return new Zu(v,p)},"PUBLIC").setServiceProps({Reference:xa,Query:Pi,Database:Zu,DataSnapshot:za,enableLogging:jf,INTERNAL:th,ServerValue:Kh}).setMultipleInstances(!0)),d.registerVersion("@firebase/database-compat","0.1.4")}(Xn.Z);var Ka=V(2673);function tg(d){return null==d}function qh(d){return"function"==typeof d.set}function qf(d,u){return qh(u)?u:d.ref(u)}function Zh(d,u){if(function(d){return"string"==typeof d}(d))return u.stringCase();if(qh(d))return u.firebaseCase();if(function(d){return"function"==typeof d.exportVal}(d))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof d)}function fd(d,u,l="on",p=os.z){return new bs.y(v=>{let S=null;return S=d[l](u,(U,J)=>{p.schedule(()=>{v.next({snapshot:U,prevKey:J})}),"once"===l&&p.schedule(()=>v.complete())},U=>{p.schedule(()=>v.error(U))}),"on"===l?{unsubscribe(){null!=S&&d.off(u,S)}}:{unsubscribe(){}}}).pipe((0,as.U)(v=>{const{snapshot:S,prevKey:U}=v;let J=null;return S.exists()&&(J=S.key),{type:u,payload:S,prevKey:U,key:J}}),(0,ki.B)())}function ng(d,u){const l=d.length;for(let p=0;p<l;p++)if(d[p].payload.key===u)return p;return-1}function um(d,u){const{payload:l,prevKey:p,key:v}=u,S=ng(d,v),U=function(d,u){if(tg(u))return 0;{const l=ng(d,u);return-1===l?d.length:l+1}}(d,p);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let J=null;u.payload.forEach(de=>{const be={payload:de,type:"value",prevKey:J,key:de.key};return J=de.key,d=[...d,be],!1})}return d;case"child_added":if(S>-1){const J=d[S-1];(J&&J.key||null)!==p&&(d=d.filter(de=>de.payload.key!==l.key)).splice(U,0,u)}else{if(null==p)return[u,...d];(d=d.slice()).splice(U,0,u)}return d;case"child_removed":return d.filter(J=>J.payload.key!==l.key);case"child_changed":return d.map(J=>J.payload.key===v?u:J);case"child_moved":if(S>-1){const J=d.splice(S,1)[0];return(d=d.slice()).splice(U,0,J),d}return d;default:return d}}function Yh(d){return(tg(d)||0===d.length)&&(d=["child_added","child_removed","child_changed","child_moved"]),d}function Yf(d,u,l){return function(d,u,l){return fd(d,"value","once",l).pipe((0,ye.w)(p=>{const v=[(0,Os.of)(p)];return u.forEach(S=>v.push(fd(d,S,"on",l))),(0,Pr.T)(...v).pipe((0,Ge.R)(um,[]))}),(0,Ue.x)())}(d,u=Yh(u),l)}function Qf(d,u,l){const p=(u=Yh(u)).map(v=>fd(d,v,"on",l));return(0,Pr.T)(...p)}function yu(d,u){return function(p,v){return Zh(p,{stringCase:()=>d.child(p)[u](v),firebaseCase:()=>p[u](v),snapshotCase:()=>p.ref[u](v)})}}function Rc(d){return function(l){return l?Zh(l,{stringCase:()=>d.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):d.remove()}}function Oc(d,u){return function(){return fd(d,"value","on",u)}}const ig=new x.OlP("angularfire2.realtimeDatabaseURL"),Xf=new x.OlP("angularfire2.database.use-emulator");let Qh=(()=>{class d{constructor(l,p,v,S,U,J,de,be,Ye,ze,ut,$t,fn,or){this.schedulers=J;const ss=de,Hl=(0,Or.on)(l,U,p);if(be){const ml=ze;(0,In.cc)(`${Hl.name}.auth`,"AngularFireAuth",Hl.name,()=>{const Oa=U.runOutsideAngular(()=>Hl.auth());if(Ye&&Oa.useEmulator(...Ye),ut&&(Oa.tenantId=ut),Oa.languageCode=$t,fn&&Oa.useDeviceLanguage(),ml)for(const[hg,dp]of Object.entries(ml))Oa.settings[hg]=dp;return or&&Oa.setPersistence(or),Oa},[Ye,ut,$t,fn,ml,or])}this.database=(0,In.cc)(`${Hl.name}.database.${v}`,"AngularFireDatabase",Hl.name,()=>{const ml=U.runOutsideAngular(()=>Hl.database(v||void 0));return ss&&ml.useEmulator(...ss),ml},[ss])}list(l,p){const v=this.schedulers.ngZone.runOutsideAngular(()=>qf(this.database,l));let S=v;return p&&(S=p(v)),function(d,u){const l=u.schedulers.outsideAngular,p=u.schedulers.ngZone.run(()=>d.ref);return{query:d,update:yu(p,"update"),set:yu(p,"set"),push:v=>p.push(v),remove:Rc(p),snapshotChanges:v=>Yf(d,v,l).pipe(In.iC),stateChanges:v=>Qf(d,v,l).pipe(In.iC),auditTrail:v=>function(d,u,l){return function(d,u,l){return function(d,u){return fd(d,"value","on",u).pipe((0,as.U)(l=>{let p;return l.payload.forEach(v=>(p=v.key,!1)),{data:l,lastKeyToLoad:p}}))}(d,l).pipe((0,Je.M)(u),(0,as.U)(([v,S])=>{const U=v.lastKeyToLoad,J=S.map(de=>de.key);return{actions:S,lastKeyToLoad:U,loadedKeys:J}}),function(d){return u=>u.lift(new un(d))}(v=>-1===v.loadedKeys.indexOf(v.lastKeyToLoad)),(0,as.U)(v=>v.actions))}(d,Qf(d,u).pipe((0,Ge.R)((v,S)=>[...v,S],[])),l)}(d,v,l).pipe(In.iC),valueChanges:(v,S)=>Yf(d,v,l).pipe((0,as.U)(J=>J.map(de=>S&&S.idField?Object.assign(Object.assign({},de.payload.val()),{[S.idField]:de.key}):de.payload.val())),In.iC)}}(S,this)}object(l){return function(d,u){return{query:d,snapshotChanges:()=>Oc(d,u.schedulers.outsideAngular)().pipe(In.iC),update:l=>d.ref.update(l),set:l=>d.ref.set(l),remove:()=>d.ref.remove(),valueChanges:()=>Oc(d,u.schedulers.outsideAngular)().pipe(In.iC,(0,as.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>qf(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return d.\u0275fac=function(l){return new(l||d)(x.LFG(Or.Dh),x.LFG(Or.xv,8),x.LFG(ig,8),x.LFG(x.Lbi),x.LFG(x.R0b),x.LFG(In.HU),x.LFG(Xf,8),x.LFG(Ka.zQ,8),x.LFG(Ka.Qv,8),x.LFG(Ka.L6,8),x.LFG(Ka._Q,8),x.LFG(Ka.rT,8),x.LFG(Ka.lh,8),x.LFG(Ka.f7,8))},d.\u0275prov=x.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),ep=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=x.oAB({type:d}),d.\u0275inj=x.cJS({providers:[Qh]}),d})();var tp=V(2278),jl=V(9493),Gi=V(665),np=V(8259),Ra=V.n(np),Yu=V(5299),rp=V(5319),Jh=V(4595),vu=V(9771);function ip(d,u){1&d&&x._UZ(0,"i",19)}function sg(d,u){1&d&&x._UZ(0,"i",19)}function og(d,u){if(1&d&&(x.TgZ(0,"button",20),x._uU(1,"Login"),x.qZA()),2&d){const l=x.oxw();x.Q6J("disabled",l.loginForm.invalid)}}function dm(d,u){1&d&&(x.TgZ(0,"button",20),x._UZ(1,"i",21),x._uU(2," Espere... "),x.qZA()),2&d&&x.Q6J("disabled",!0)}let sp=(()=>{class d{constructor(l,p,v,S){this.fb=l,this.authService=p,this.router=v,this.store=S,this.cargando=!1,this.uiSubscription=new rp.w,this.loginForm=this.fb.group({correo:["",[Gi.kI.required,Gi.kI.email]],password:["",Gi.kI.required]})}ngOnInit(){this.uiSubscription=this.store.select("ui").subscribe(l=>{this.cargando=l.isLoading})}ngOnDestroy(){this.uiSubscription.unsubscribe()}loginUser(){if(this.loginForm.invalid)return;const{correo:l,password:p}=this.loginForm.value;this.store.dispatch(Yu.h()),this.authService.loginUsuario(l,p).then(v=>{console.log(v),this.store.dispatch(Yu.V()),this.router.navigate(["/"])}).catch(v=>{Ra().fire({icon:"error",title:"Error...",text:v.message})})}}return d.\u0275fac=function(l){return new(l||d)(x.Y36(Gi.qu),x.Y36(Jh.e),x.Y36(jl.F0),x.Y36(vu.yh))},d.\u0275cmp=x.Xpm({type:d,selectors:[["app-login"]],decls:33,vars:5,consts:[[1,"page-body-wrapper","full-page-wrapper","auth-page"],[1,"content-wrapper","d-flex","align-items-center","auth","auth-bg-1","theme-one"],[1,"row","w-100"],[1,"col-lg-4","mx-auto"],[1,"text-center","mb-4",2,"color","white"],[1,"auto-form-wrapper"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"label"],[1,"input-group"],["type","email","placeholder","Email","formControlName","correo",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],["class","fa fa-check-circle",4,"ngIf"],["type","password","placeholder","*********","formControlName","password",1,"form-control"],["type","submit","class","btn btn-primary submit-btn btn-block",3,"disabled",4,"ngIf"],[1,"text-block","text-center","my-3"],[1,"text-small","font-weight-semibold"],["routerLink","/register",1,"text-black","text-small"],[1,"fa","fa-check-circle"],["type","submit",1,"btn","btn-primary","submit-btn","btn-block",3,"disabled"],[1,"fa","fa-spin","fa-sync"]],template:function(l,p){if(1&l&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"h2",4),x._uU(5,"Ingresar"),x.qZA(),x.TgZ(6,"div",5),x.TgZ(7,"form",6),x.NdJ("ngSubmit",function(){return p.loginUser()}),x.TgZ(8,"div",7),x.TgZ(9,"label",8),x._uU(10,"Usuario"),x.qZA(),x.TgZ(11,"div",9),x._UZ(12,"input",10),x.TgZ(13,"div",11),x.TgZ(14,"span",12),x.YNc(15,ip,1,0,"i",13),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(16,"div",7),x.TgZ(17,"label",8),x._uU(18,"Contrase\xf1a"),x.qZA(),x.TgZ(19,"div",9),x._UZ(20,"input",14),x.TgZ(21,"div",11),x.TgZ(22,"span",12),x.YNc(23,sg,1,0,"i",13),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(24,"div",7),x.YNc(25,og,2,1,"button",15),x.YNc(26,dm,3,1,"button",15),x.qZA(),x.TgZ(27,"div",16),x.TgZ(28,"span",17),x._uU(29,"No estas registrado? "),x.qZA(),x._UZ(30,"br"),x.TgZ(31,"a",18),x._uU(32,"Crear una cuenta"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()),2&l){let v,S;x.xp6(7),x.Q6J("formGroup",p.loginForm),x.xp6(8),x.Q6J("ngIf",null==(v=p.loginForm.get("correo"))?null:v.valid),x.xp6(8),x.Q6J("ngIf",null==(S=p.loginForm.get("password"))?null:S.valid),x.xp6(2),x.Q6J("ngIf",!p.cargando),x.xp6(1),x.Q6J("ngIf",p.cargando)}},directives:[Gi._Y,Gi.JL,Gi.sg,Gi.Fj,Gi.JJ,Gi.u,w.O5,jl.yS],encapsulation:2}),d})();function hm(d,u){1&d&&x._UZ(0,"i",19)}function fm(d,u){1&d&&x._UZ(0,"i",19)}function pd(d,u){1&d&&x._UZ(0,"i",19)}function nh(d,u){if(1&d&&(x.TgZ(0,"button",20),x._uU(1,"Crear cuenta"),x.qZA()),2&d){const l=x.oxw();x.Q6J("disabled",l.registerForm.invalid)}}function op(d,u){1&d&&(x.TgZ(0,"button",20),x._UZ(1,"i",21),x._uU(2," Espere... "),x.qZA()),2&d&&x.Q6J("disabled",!0)}let ap=(()=>{class d{constructor(l,p,v,S){this.fb=l,this.authService=p,this.router=v,this.store=S,this.cargando=!1,this.uiSubscription=new rp.w,this.registerForm=this.fb.group({nombre:["",Gi.kI.required],correo:["",[Gi.kI.required,Gi.kI.email]],password:["",Gi.kI.required]})}ngOnInit(){this.uiSubscription=this.store.select("ui").subscribe(l=>{this.cargando=l.isLoading})}ngOnDestroy(){this.uiSubscription.unsubscribe()}crearUsuario(){if(this.registerForm.invalid)return;const{nombre:l,correo:p,password:v}=this.registerForm.value;this.store.dispatch(Yu.h()),this.authService.crearUsuario(l,p,v).then(S=>{console.log(S),this.store.dispatch(Yu.V()),this.router.navigate(["/"])}).catch(S=>{Ra().fire({icon:"error",title:"Error...",text:S.message})})}}return d.\u0275fac=function(l){return new(l||d)(x.Y36(Gi.qu),x.Y36(Jh.e),x.Y36(jl.F0),x.Y36(vu.yh))},d.\u0275cmp=x.Xpm({type:d,selectors:[["app-register"]],decls:35,vars:6,consts:[[1,"page-body-wrapper","full-page-wrapper","auth-page"],[1,"content-wrapper","d-flex","align-items-center","auth","register-bg-1","theme-one"],[1,"row","w-100"],[1,"col-lg-4","mx-auto"],[1,"text-center","mb-4"],[1,"auto-form-wrapper"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"input-group"],["type","text","formControlName","nombre","placeholder","Nombre",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],["class","fa fa-check-circle",4,"ngIf"],["type","email","formControlName","correo","placeholder","Correo",1,"form-control"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],["type","submit","class","btn btn-primary submit-btn btn-block",3,"disabled",4,"ngIf"],[1,"text-block","text-center","my-3"],[1,"text-small","font-weight-semibold"],["routerLink","/login",1,"text-black","text-small"],[1,"fa","fa-check-circle"],["type","submit",1,"btn","btn-primary","submit-btn","btn-block",3,"disabled"],[1,"fa","fa-spin","fa-sync"]],template:function(l,p){if(1&l&&(x.TgZ(0,"div",0),x.TgZ(1,"div",1),x.TgZ(2,"div",2),x.TgZ(3,"div",3),x.TgZ(4,"h2",4),x._uU(5,"Registro"),x.qZA(),x.TgZ(6,"div",5),x.TgZ(7,"form",6),x.NdJ("ngSubmit",function(){return p.crearUsuario()}),x.TgZ(8,"div",7),x.TgZ(9,"div",8),x._UZ(10,"input",9),x.TgZ(11,"div",10),x.TgZ(12,"span",11),x.YNc(13,hm,1,0,"i",12),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(14,"div",7),x.TgZ(15,"div",8),x._UZ(16,"input",13),x.TgZ(17,"div",10),x.TgZ(18,"span",11),x.YNc(19,fm,1,0,"i",12),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(20,"div",7),x.TgZ(21,"div",8),x._UZ(22,"input",14),x.TgZ(23,"div",10),x.TgZ(24,"span",11),x.YNc(25,pd,1,0,"i",12),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.TgZ(26,"div",7),x.YNc(27,nh,2,1,"button",15),x.YNc(28,op,3,1,"button",15),x.qZA(),x.TgZ(29,"div",16),x.TgZ(30,"span",17),x._uU(31,"ya tienes una cuenta?"),x.qZA(),x._UZ(32,"br"),x.TgZ(33,"a",18),x._uU(34,"Login"),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA(),x.qZA()),2&l){let v,S,U;x.xp6(7),x.Q6J("formGroup",p.registerForm),x.xp6(6),x.Q6J("ngIf",null==(v=p.registerForm.get("nombre"))?null:v.valid),x.xp6(6),x.Q6J("ngIf",null==(S=p.registerForm.get("correo"))?null:S.valid),x.xp6(6),x.Q6J("ngIf",null==(U=p.registerForm.get("password"))?null:U.valid),x.xp6(2),x.Q6J("ngIf",!p.cargando),x.xp6(1),x.Q6J("ngIf",p.cargando)}},directives:[Gi._Y,Gi.JL,Gi.sg,Gi.Fj,Gi.JJ,Gi.u,w.O5,jl.yS],encapsulation:2}),d})();var gd=V(3342),ag=V(5257);const ug=[{path:"login",component:sp},{path:"register",component:ap},{path:"",canLoad:[(()=>{class d{constructor(l,p){this.auth=l,this.router=p}canLoad(){return this.auth.isAuth().pipe((0,gd.b)(l=>{l||this.router.navigate(["/login"])}),(0,ag.q)(1))}canActivate(){return this.auth.isAuth().pipe((0,gd.b)(l=>{l||this.router.navigate(["/login"])}))}}return d.\u0275fac=function(l){return new(l||d)(x.LFG(Jh.e),x.LFG(jl.F0))},d.\u0275prov=x.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()],loadChildren:()=>V.e(711).then(V.bind(V,1711)).then(d=>d.IngresoEgresoModule)},{path:"**",redirectTo:""}];let rh=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=x.oAB({type:d}),d.\u0275inj=x.cJS({imports:[[jl.Bz.forRoot(ug)],jl.Bz]}),d})(),pm=(()=>{class d{constructor(l){this.authService=l,this.title="ingreso-egreso-app",l.initAuthListener()}}return d.\u0275fac=function(l){return new(l||d)(x.Y36(Jh.e))},d.\u0275cmp=x.Xpm({type:d,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container-scroller"]],template:function(l,p){1&l&&(x.TgZ(0,"div",0),x._UZ(1,"router-outlet"),x.qZA())},directives:[jl.lC],styles:[""]}),d})();const cg_firebase={projectId:"ingreso-egreso-app-239e4",appId:"1:399427954691:web:413a87a9962960311fc636",storageBucket:"ingreso-egreso-app-239e4.appspot.com",locationId:"us-central",apiKey:"AIzaSyD5RN-Z7un5uwBQj0l2AmN7wc7BPdjd62k",authDomain:"ingreso-egreso-app-239e4.firebaseapp.com",messagingSenderId:"399427954691"},dg=(0,vu.Lq)({isLoading:!1},(0,vu.on)(Yu.h,d=>Object.assign(Object.assign({},d),{isLoading:!0})),(0,vu.on)(Yu.V,d=>Object.assign(Object.assign({},d),{isLoading:!1})));var lp=V(3259);const wu=(0,vu.Lq)({user:null},(0,vu.on)(lp.a,(d,{user:u})=>Object.assign(Object.assign({},d),{user:Object.assign({},u)})),(0,vu.on)(lp.g,d=>Object.assign(Object.assign({},d),{user:null}))),up={ui:function(d,u){return dg(d,u)},user:function(d,u){return wu(d,u)}};var cp=V(9565),ih=V(4466);let Pc=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=x.oAB({type:d}),d.\u0275inj=x.cJS({imports:[[w.ez,jl.Bz,Gi.UX]]}),d})(),nf=(()=>{class d{}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=x.oAB({type:d,bootstrap:[pm]}),d.\u0275inj=x.cJS({providers:[],imports:[[xs,ih.m,Pc,rh,Or.hO.initializeApp(cg_firebase),tp.yb,ep,vu.Aw.forRoot(up),cp.FT.instrument({maxAge:25,logOnly:true})]]}),d})();(0,x.G48)(),ai().bootstrapModule(nf).catch(d=>console.error(d))},4762:(Pe,fe,V)=>{"use strict";function De(Be,Ae){var $e={};for(var xe in Be)Object.prototype.hasOwnProperty.call(Be,xe)&&Ae.indexOf(xe)<0&&($e[xe]=Be[xe]);if(null!=Be&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(xe=Object.getOwnPropertySymbols(Be);He<xe.length;He++)Ae.indexOf(xe[He])<0&&Object.prototype.propertyIsEnumerable.call(Be,xe[He])&&($e[xe[He]]=Be[xe[He]])}return $e}V.d(fe,{_T:()=>De})},9565:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7716),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9771),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9193),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7574),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(5917),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6682),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(7771),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(8229),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8819),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5435),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8002),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4612),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2965),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(4395),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(5304),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5257),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(6782),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3190),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(3653),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(6136),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(7057),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2145);class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(Pe){const fe={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},V="function"==typeof Pe?Pe():Pe,se=Object.assign({},fe,{features:V.features||!!V.logOnly&&{pause:!0,export:!0,test:!0}||fe.features},V);if(se.maxAge&&se.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${se.maxAge}`);return se}const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(fe,V){if(this.action=fe,this.timestamp=V,this.type=PERFORM_ACTION,void 0===fe.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(fe){this.timestamp=fe,this.type=RESET}}class Rollback{constructor(fe){this.timestamp=fe,this.type=ROLLBACK}}class Commit{constructor(fe){this.timestamp=fe,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(fe){this.id=fe,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(fe,V,w=!0){this.start=fe,this.end=V,this.active=w,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(fe){this.index=fe,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(fe){this.actionId=fe,this.type=JUMP_TO_ACTION}}class ImportState{constructor(fe){this.nextLiftedState=fe,this.type=IMPORT_STATE}}class LockChanges{constructor(fe){this.status=fe,this.type=LOCK_CHANGES}}class PauseRecording{constructor(fe){this.status=fe,this.type=PAUSE_RECORDING}}function difference(Pe,fe){return Pe.filter(V=>fe.indexOf(V)<0)}function unliftState(Pe){const{computedStates:fe,currentStateIndex:V}=Pe;if(V>=fe.length){const{state:x}=fe[fe.length-1];return x}const{state:w}=fe[V];return w}function unliftAction(Pe){return Pe.actionsById[Pe.nextActionId-1]}function liftAction(Pe){return new PerformAction(Pe,+Date.now())}function sanitizeActions(Pe,fe){return Object.keys(fe).reduce((V,w)=>{const x=Number(w);return V[x]=sanitizeAction(Pe,fe[x],x),V},{})}function sanitizeAction(Pe,fe,V){return Object.assign(Object.assign({},fe),{action:Pe(fe.action,V)})}function sanitizeStates(Pe,fe){return fe.map((V,w)=>({state:sanitizeState(Pe,V.state,w),error:V.error}))}function sanitizeState(Pe,fe,V){return Pe(fe,V)}function shouldFilterActions(Pe){return Pe.predicate||Pe.actionsSafelist||Pe.actionsBlocklist}function filterLiftedState(Pe,fe,V,w){const x=[],se={},De=[];return Pe.stagedActionIds.forEach((pe,ee)=>{const ge=Pe.actionsById[pe];!ge||ee&&isActionFiltered(Pe.computedStates[ee],ge,fe,V,w)||(se[pe]=ge,x.push(pe),De.push(Pe.computedStates[ee]))}),Object.assign(Object.assign({},Pe),{stagedActionIds:x,actionsById:se,computedStates:De})}function isActionFiltered(Pe,fe,V,w,x){const se=V&&!V(Pe,fe.action),De=w&&!fe.action.type.match(w.map(ee=>escapeRegExp(ee)).join("|")),pe=x&&fe.action.type.match(x.map(ee=>escapeRegExp(ee)).join("|"));return se||De||pe}function escapeRegExp(Pe){return Pe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(Pe,fe,V,w,x){if(w)return{state:V,error:"Interrupted by an error up the chain"};let De,se=V;try{se=Pe(V,fe)}catch(pe){De=pe.toString(),x.handleError(pe)}return{state:se,error:De}}function recomputeStates(Pe,fe,V,w,x,se,De,pe,ee){if(fe>=Pe.length&&Pe.length===se.length)return Pe;const ge=Pe.slice(0,fe),oe=se.length-(ee?1:0);for(let le=fe;le<oe;le++){const Y=se[le],ie=x[Y].action,Z=ge[le-1],me=Z?Z.state:w,Ke=Z?Z.error:void 0,Me=De.indexOf(Y)>-1?Z:computeNextEntry(V,ie,me,Ke,pe);ge.push(Me)}return ee&&ge.push(Pe[Pe.length-1]),ge}function liftInitialState(Pe,fe){return{monitorState:fe(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:Pe,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(Pe,fe,V,w,x={}){return se=>(De,pe)=>{let{monitorState:ee,actionsById:ge,nextActionId:oe,stagedActionIds:le,skippedActionIds:Y,committedState:ie,currentStateIndex:Z,computedStates:me,isLocked:Ke,isPaused:qe}=De||fe;function Me(Qe){let et=Qe,Ie=le.slice(1,et+1);for(let lt=0;lt<Ie.length;lt++){if(me[lt+1].error){et=lt,Ie=le.slice(1,et+1);break}delete ge[Ie[lt]]}Y=Y.filter(lt=>-1===Ie.indexOf(lt)),le=[0,...le.slice(et+1)],ie=me[et].state,me=me.slice(et),Z=Z>et?Z-et:0}function it(){ge={0:liftAction(INIT_ACTION)},oe=1,le=[0],Y=[],ie=me[Z].state,Z=0,me=[]}De||(ge=Object.create(ge));let ce=0;switch(pe.type){case LOCK_CHANGES:Ke=pe.status,ce=1/0;break;case PAUSE_RECORDING:qe=pe.status,qe?(le=[...le,oe],ge[oe]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),oe++,ce=le.length-1,me=me.concat(me[me.length-1]),Z===le.length-2&&Z++,ce=1/0):it();break;case RESET:ge={0:liftAction(INIT_ACTION)},oe=1,le=[0],Y=[],ie=Pe,Z=0,me=[];break;case COMMIT:it();break;case ROLLBACK:ge={0:liftAction(INIT_ACTION)},oe=1,le=[0],Y=[],Z=0,me=[];break;case TOGGLE_ACTION:{const{id:Qe}=pe;Y=-1===Y.indexOf(Qe)?[Qe,...Y]:Y.filter(Ie=>Ie!==Qe),ce=le.indexOf(Qe);break}case SET_ACTIONS_ACTIVE:{const{start:Qe,end:et,active:Ie}=pe,lt=[];for(let Mt=Qe;Mt<et;Mt++)lt.push(Mt);Y=Ie?difference(Y,lt):[...Y,...lt],ce=le.indexOf(Qe);break}case JUMP_TO_STATE:Z=pe.index,ce=1/0;break;case JUMP_TO_ACTION:{const Qe=le.indexOf(pe.actionId);-1!==Qe&&(Z=Qe),ce=1/0;break}case SWEEP:le=difference(le,Y),Y=[],Z=Math.min(Z,le.length-1);break;case PERFORM_ACTION:{if(Ke)return De||fe;if(qe||De&&isActionFiltered(De.computedStates[Z],pe,x.predicate,x.actionsSafelist,x.actionsBlocklist)){const et=me[me.length-1];me=[...me.slice(0,-1),computeNextEntry(se,pe.action,et.state,et.error,V)],ce=1/0;break}x.maxAge&&le.length===x.maxAge&&Me(1),Z===le.length-1&&Z++;const Qe=oe++;ge[Qe]=pe,le=[...le,Qe],ce=le.length-1;break}case IMPORT_STATE:({monitorState:ee,actionsById:ge,nextActionId:oe,stagedActionIds:le,skippedActionIds:Y,committedState:ie,currentStateIndex:Z,computedStates:me,isLocked:Ke,isPaused:qe}=pe.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:ce=0,x.maxAge&&le.length>x.maxAge&&(me=recomputeStates(me,ce,se,ie,ge,le,Y,V,qe),Me(le.length-x.maxAge),ce=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(me.filter(et=>et.error).length>0)ce=0,x.maxAge&&le.length>x.maxAge&&(me=recomputeStates(me,ce,se,ie,ge,le,Y,V,qe),Me(le.length-x.maxAge),ce=1/0);else{if(!qe&&!Ke){Z===le.length-1&&Z++;const et=oe++;ge[et]=new PerformAction(pe,+Date.now()),le=[...le,et],ce=le.length-1,me=recomputeStates(me,ce,se,ie,ge,le,Y,V,qe)}me=me.map(et=>Object.assign(Object.assign({},et),{state:se(et.state,RECOMPUTE_ACTION)})),Z=le.length-1,x.maxAge&&le.length>x.maxAge&&Me(le.length-x.maxAge),ce=1/0}break;default:ce=1/0}return me=recomputeStates(me,ce,se,ie,ge,le,Y,V,qe),ee=w(ee,pe),{monitorState:ee,actionsById:ge,nextActionId:oe,stagedActionIds:le,skippedActionIds:Y,committedState:ie,currentStateIndex:Z,computedStates:me,isLocked:Ke,isPaused:qe}}}let DevtoolsDispatcher=(()=>{class Pe extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return Pe.\u0275fac=function(){let fe;return function(w){return(fe||(fe=_angular_core__WEBPACK_IMPORTED_MODULE_0__.n5z(Pe)))(w||Pe)}}(),Pe.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(Pe,fe,V){this.config=fe,this.dispatcher=V,this.devtoolsExtension=Pe,this.createActionStreams()}notify(Pe,fe){if(this.devtoolsExtension)if(Pe.type===PERFORM_ACTION){if(fe.isLocked||fe.isPaused)return;const V=unliftState(fe);if(shouldFilterActions(this.config)&&isActionFiltered(V,Pe,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const w=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,V,fe.currentStateIndex):V,x=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,Pe,fe.nextActionId):Pe;this.sendToReduxDevtools(()=>this.extensionConnection.send(x,w))}else{const V=Object.assign(Object.assign({},fe),{stagedActionIds:fe.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,fe.actionsById):fe.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,fe.computedStates):fe.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,V,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(Pe=>{const fe=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=fe,fe.init(),fe.subscribe(V=>Pe.next(V)),fe.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const Pe=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),fe=Pe.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(pe=>pe.type===ExtensionActionTypes.START)),V=Pe.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(pe=>pe.type===ExtensionActionTypes.STOP)),w=Pe.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(pe=>pe.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(pe=>this.unwrapAction(pe.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(pe=>pe.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(ee=>ee.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>pe),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(pe)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(pe))),se=Pe.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(pe=>pe.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(pe=>this.unwrapAction(pe.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(V)),De=w.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(V));this.start$=fe.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(V)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>se)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>De))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(Pe){var fe;const V={name:Pe.name,features:Pe.features,serialize:Pe.serialize,autoPause:null!==(fe=Pe.autoPause)&&void 0!==fe&&fe};return!1!==Pe.maxAge&&(V.maxAge=Pe.maxAge),V}sendToReduxDevtools(Pe){try{Pe()}catch(fe){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",fe)}}}return DevtoolsExtension.\u0275fac=function(fe){return new(fe||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})(),StoreDevtools=(()=>{class Pe{constructor(V,w,x,se,De,pe,ee,ge){const oe=liftInitialState(ee,ge.monitor),le=liftReducerWith(ee,oe,pe,ge.monitor,ge),Y=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(w.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),se.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),V,se.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.QV)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),ie=x.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(le)),Z=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),me=Y.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(ie),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:it},[ce,Qe])=>{let et=Qe(it,ce);return ce.type!==PERFORM_ACTION&&shouldFilterActions(ge)&&(et=filterLiftedState(et,ge.predicate,ge.actionsSafelist,ge.actionsBlocklist)),se.notify(ce,et),{state:et,action:ce}},{state:oe,action:null})).subscribe(({state:it,action:ce})=>{Z.next(it),ce.type===PERFORM_ACTION&&De.next(ce.action)}),Ke=se.start$.subscribe(()=>{this.refresh()}),qe=Z.asObservable(),Me=qe.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=Ke,this.stateSubscription=me,this.dispatcher=V,this.liftedState=qe,this.state=Me}dispatch(V){this.dispatcher.next(V)}next(V){this.dispatcher.next(V)}error(V){}complete(){}performAction(V){this.dispatch(new PerformAction(V,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(V){this.dispatch(new ToggleAction(V))}jumpToAction(V){this.dispatch(new JumpToAction(V))}jumpToState(V){this.dispatch(new JumpToState(V))}importState(V){this.dispatch(new ImportState(V))}lockChanges(V){this.dispatch(new LockChanges(V))}pauseRecording(V){this.dispatch(new PauseRecording(V))}}return Pe.\u0275fac=function(V){return new(V||Pe)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_0__.qLn),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG))},Pe.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(Pe,fe){return Boolean(Pe)||fe.monitor!==noMonitor}function createReduxDevtoolsExtension(){const Pe="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&void 0!==window[Pe]?window[Pe]:null}function createStateObservable(Pe){return Pe.state}let StoreDevtoolsModule=(()=>{class Pe{static instrument(V={}){return{ngModule:Pe,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:V},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}}return Pe.\u0275fac=function(V){return new(V||Pe)},Pe.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:Pe}),Pe.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),Pe})()},9771:(Pe,fe,V)=>{"use strict";V.d(fe,{UO:()=>et,qg:()=>Qe,Y6:()=>Wt,mK:()=>Gn,n$:()=>Gt,Y$:()=>Qn,FR:()=>ar,yh:()=>jt,Aw:()=>Cs,wb:()=>Yn,PH:()=>qe,Lq:()=>ki,on:()=>as,Ky:()=>Me});var w=V(7716),x=V(6215),se=V(7574),De=V(9765),pe=V(7771),ee=V(8002),le=V(6136),Y=V(7057),ie=V(2145),Z=V(7519);const me={};function qe(ye,Ge){if(me[ye]=(me[ye]||0)+1,"function"==typeof Ge)return ce(ye,(...Je)=>Object.assign(Object.assign({},Ge(...Je)),{type:ye}));switch(Ge?Ge._as:"empty"){case"empty":return ce(ye,()=>({type:ye}));case"props":return ce(ye,Je=>Object.assign(Object.assign({},Je),{type:ye}));default:throw new Error("Unexpected config.")}}function Me(){return{_as:"props",_p:void 0}}function ce(ye,Ge){return Object.defineProperty(Ge,"type",{value:ye,writable:!1})}const Qe="@ngrx/store/init";let et=(()=>{class ye extends x.X{constructor(){super({type:Qe})}next(Ue){if("function"==typeof Ue)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===Ue)throw new TypeError("Actions must be objects");if(void 0===Ue.type)throw new TypeError("Actions must have a type property");super.next(Ue)}complete(){}ngOnDestroy(){super.complete()}}return ye.\u0275fac=function(Ue){return new(Ue||ye)},ye.\u0275prov=w.Yz7({token:ye,factory:ye.\u0275fac}),ye})();const Ie=[et],lt=new w.OlP("@ngrx/store Internal Root Guard"),Mt=new w.OlP("@ngrx/store Internal Initial State"),Wt=new w.OlP("@ngrx/store Initial State"),xt=new w.OlP("@ngrx/store Reducer Factory"),rt=new w.OlP("@ngrx/store Internal Reducer Factory Provider"),Be=new w.OlP("@ngrx/store Initial Reducers"),Ae=new w.OlP("@ngrx/store Internal Initial Reducers"),$e=new w.OlP("@ngrx/store Store Features"),xe=new w.OlP("@ngrx/store Internal Store Reducers"),He=new w.OlP("@ngrx/store Internal Feature Reducers"),Le=new w.OlP("@ngrx/store Internal Feature Configs"),at=new w.OlP("@ngrx/store Internal Store Features"),Ot=new w.OlP("@ngrx/store Internal Feature Reducers Token"),zt=new w.OlP("@ngrx/store Feature Reducers"),Dt=new w.OlP("@ngrx/store User Provided Meta Reducers"),Ft=new w.OlP("@ngrx/store Meta Reducers"),Ht=new w.OlP("@ngrx/store Internal Resolved Meta Reducers"),dn=new w.OlP("@ngrx/store User Runtime Checks Config"),nr=new w.OlP("@ngrx/store Internal User Runtime Checks Config"),Jt=new w.OlP("@ngrx/store Internal Runtime Checks"),rn=new w.OlP("@ngrx/store Check if Action types are unique");function mn(ye,Ge={}){const Ue=Object.keys(ye),Je={};for(let Ct=0;Ct<Ue.length;Ct++){const un=Ue[Ct];"function"==typeof ye[un]&&(Je[un]=ye[un])}const mt=Object.keys(Je);return function(un,Un){un=void 0===un?Ge:un;let In=!1;const Pt={};for(let Xn=0;Xn<mt.length;Xn++){const er=mt[Xn],Fi=un[er],he=(0,Je[er])(Fi,Un);Pt[er]=he,In=In||he!==Fi}return In?Pt:un}}function Kt(...ye){return function(Ge){if(0===ye.length)return Ge;const Ue=ye[ye.length-1];return ye.slice(0,-1).reduceRight((mt,Ct)=>Ct(mt),Ue(Ge))}}function Fn(ye,Ge){return Array.isArray(Ge)&&Ge.length>0&&(ye=Kt.apply(null,[...Ge,ye])),(Ue,Je)=>{const mt=ye(Ue);return(Ct,un)=>mt(Ct=void 0===Ct?Je:Ct,un)}}class Gt extends se.y{}class Gn extends et{}const Yn="@ngrx/store/update-reducers";let Xr=(()=>{class ye extends x.X{constructor(Ue,Je,mt,Ct){super(Ct(mt,Je)),this.dispatcher=Ue,this.initialState=Je,this.reducers=mt,this.reducerFactory=Ct}get currentReducers(){return this.reducers}addFeature(Ue){this.addFeatures([Ue])}addFeatures(Ue){const Je=Ue.reduce((mt,{reducers:Ct,reducerFactory:un,metaReducers:Un,initialState:In,key:Pt})=>{const Xn="function"==typeof Ct?function(ye){const Ge=Array.isArray(ye)&&ye.length>0?Kt(...ye):Ue=>Ue;return(Ue,Je)=>(Ue=Ge(Ue),(mt,Ct)=>Ue(mt=void 0===mt?Je:mt,Ct))}(Un)(Ct,In):Fn(un,Un)(Ct,In);return mt[Pt]=Xn,mt},{});this.addReducers(Je)}removeFeature(Ue){this.removeFeatures([Ue])}removeFeatures(Ue){this.removeReducers(Ue.map(Je=>Je.key))}addReducer(Ue,Je){this.addReducers({[Ue]:Je})}addReducers(Ue){this.reducers=Object.assign(Object.assign({},this.reducers),Ue),this.updateReducers(Object.keys(Ue))}removeReducer(Ue){this.removeReducers([Ue])}removeReducers(Ue){Ue.forEach(Je=>{this.reducers=function(ye,Ge){return Object.keys(ye).filter(Ue=>Ue!==Ge).reduce((Ue,Je)=>Object.assign(Ue,{[Je]:ye[Je]}),{})}(this.reducers,Je)}),this.updateReducers(Ue)}updateReducers(Ue){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Yn,features:Ue})}ngOnDestroy(){this.complete()}}return ye.\u0275fac=function(Ue){return new(Ue||ye)(w.LFG(Gn),w.LFG(Wt),w.LFG(Be),w.LFG(xt))},ye.\u0275prov=w.Yz7({token:ye,factory:ye.\u0275fac}),ye})();const Nt=[Xr,{provide:Gt,useExisting:Xr},{provide:Gn,useExisting:et}];let Qn=(()=>{class ye extends De.xQ{ngOnDestroy(){this.complete()}}return ye.\u0275fac=function(){let Ge;return function(Je){return(Ge||(Ge=w.n5z(ye)))(Je||ye)}}(),ye.\u0275prov=w.Yz7({token:ye,factory:ye.\u0275fac}),ye})();const Tt=[Qn];class ar extends se.y{}let zn=(()=>{class ye extends x.X{constructor(Ue,Je,mt,Ct){super(Ct);const Pt=Ue.pipe((0,le.QV)(pe.N)).pipe((0,Y.M)(Je)).pipe((0,ie.R)(jn,{state:Ct}));this.stateSubscription=Pt.subscribe(({state:Xn,action:er})=>{this.next(Xn),mt.next(er)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return ye.INIT=Qe,ye.\u0275fac=function(Ue){return new(Ue||ye)(w.LFG(et),w.LFG(Gt),w.LFG(Qn),w.LFG(Wt))},ye.\u0275prov=w.Yz7({token:ye,factory:ye.\u0275fac}),ye})();function jn(ye={state:void 0},[Ge,Ue]){const{state:Je}=ye;return{state:Ue(Je,Ge),action:Ge}}const Qt=[zn,{provide:ar,useExisting:zn}];let jt=(()=>{class ye extends se.y{constructor(Ue,Je,mt){super(),this.actionsObserver=Je,this.reducerManager=mt,this.source=Ue}select(Ue,...Je){return Dn.call(null,Ue,...Je)(this)}lift(Ue){const Je=new ye(this,this.actionsObserver,this.reducerManager);return Je.operator=Ue,Je}dispatch(Ue){this.actionsObserver.next(Ue)}next(Ue){this.actionsObserver.next(Ue)}error(Ue){this.actionsObserver.error(Ue)}complete(){this.actionsObserver.complete()}addReducer(Ue,Je){this.reducerManager.addReducer(Ue,Je)}removeReducer(Ue){this.reducerManager.removeReducer(Ue)}}return ye.\u0275fac=function(Ue){return new(Ue||ye)(w.LFG(ar),w.LFG(et),w.LFG(Xr))},ye.\u0275prov=w.Yz7({token:ye,factory:ye.\u0275fac}),ye})();const sn=[jt];function Dn(ye,Ge,...Ue){return function(mt){let Ct;if("string"==typeof ye){const un=[Ge,...Ue].filter(Boolean);Ct=mt.pipe(function(...ye){const Ge=ye.length;if(0===Ge)throw new Error("list of properties cannot be empty.");return Ue=>(0,ee.U)(function(ye,Ge){return Je=>{let mt=Je;for(let Ct=0;Ct<Ge;Ct++){const un=null!=mt?mt[ye[Ct]]:void 0;if(void 0===un)return;mt=un}return mt}}(ye,Ge))(Ue)}(ye,...un))}else{if("function"!=typeof ye)throw new TypeError(`Unexpected type '${typeof ye}' in select operator, expected 'string' or 'function'`);Ct=mt.pipe((0,ee.U)(un=>ye(un,Ge)))}return Ct.pipe((0,Z.x)())}}const Sn="https://ngrx.io/guide/store/configuration/runtime-checks";function It(ye){return void 0===ye}function yt(ye){return null===ye}function ei(ye){return Array.isArray(ye)}function qr(ye){return"object"==typeof ye&&null!==ye}function _e(ye){return"function"==typeof ye}function yn(ye){Object.freeze(ye);const Ge=_e(ye);return Object.getOwnPropertyNames(ye).forEach(Ue=>{if(!Ue.startsWith("\u0275")&&function(ye,Ge){return Object.prototype.hasOwnProperty.call(ye,Ge)}(ye,Ue)&&(!Ge||"caller"!==Ue&&"callee"!==Ue&&"arguments"!==Ue)){const Je=ye[Ue];(qr(Je)||_e(Je))&&!Object.isFrozen(Je)&&yn(Je)}}),ye}function hr(ye,Ge=[]){return(It(ye)||yt(ye))&&0===Ge.length?{path:["root"],value:ye}:Object.keys(ye).reduce((Je,mt)=>{if(Je)return Je;const Ct=ye[mt];return function(ye){return _e(ye)&&ye.hasOwnProperty("\u0275cmp")}(Ct)?Je:!(It(Ct)||yt(Ct)||function(ye){return"number"==typeof ye}(Ct)||function(ye){return"boolean"==typeof ye}(Ct)||function(ye){return"string"==typeof ye}(Ct)||ei(Ct))&&(function(ye){if(!function(ye){return qr(ye)&&!ei(ye)}(ye))return!1;const Ge=Object.getPrototypeOf(ye);return Ge===Object.prototype||null===Ge}(Ct)?hr(Ct,[...Ge,mt]):{path:[...Ge,mt],value:Ct})},!1)}function Jn(ye,Ge){if(!1===ye)return;const Ue=ye.path.join("."),Je=new Error(`Detected unserializable ${Ge} at "${Ue}". ${Sn}#strict${Ge}serializability`);throw Je.value=ye.value,Je.unserializablePath=Ue,Je}function qi(ye){return(0,w.X6Q)()?Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},ye):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Er({strictActionSerializability:ye,strictStateSerializability:Ge}){return Ue=>ye||Ge?function(ye,Ge){return function(Ue,Je){Ge.action(Je)&&Jn(hr(Je),"action");const mt=ye(Ue,Je);return Ge.state()&&Jn(hr(mt),"state"),mt}}(Ue,{action:Je=>ye&&!gn(Je),state:()=>Ge}):Ue}function vt({strictActionImmutability:ye,strictStateImmutability:Ge}){return Ue=>ye||Ge?function(ye,Ge){return function(Ue,Je){const mt=Ge.action(Je)?yn(Je):Je,Ct=ye(Ue,mt);return Ge.state()?yn(Ct):Ct}}(Ue,{action:Je=>ye&&!gn(Je),state:()=>Ge}):Ue}function gn(ye){return ye.type.startsWith("@ngrx")}function Rn({strictActionWithinNgZone:ye}){return Ge=>ye?function(ye,Ge){return function(Ue,Je){if(Ge.action(Je)&&!w.R0b.isInAngularZone())throw new Error(`Action '${Je.type}' running outside NgZone. ${Sn}#strictactionwithinngzone`);return ye(Ue,Je)}}(Ge,{action:Ue=>ye&&!gn(Ue)}):Ge}function Rr(ye){return[{provide:nr,useValue:ye},{provide:dn,useFactory:wn,deps:[nr]},{provide:Jt,deps:[dn],useFactory:qi},{provide:Ft,multi:!0,deps:[Jt],useFactory:vt},{provide:Ft,multi:!0,deps:[Jt],useFactory:Er},{provide:Ft,multi:!0,deps:[Jt],useFactory:Rn}]}function Ln(){return[{provide:rn,multi:!0,deps:[Jt],useFactory:Hn}]}function wn(ye){return ye}function Hn(ye){if(!ye.strictActionTypeUniqueness)return;const Ge=Object.entries(me).filter(([,Ue])=>Ue>1).map(([Ue])=>Ue);if(Ge.length)throw new Error(`Action types are registered more than once, ${Ge.map(Ue=>`"${Ue}"`).join(", ")}. ${Sn}#strictactiontypeuniqueness`)}let Vn=(()=>{class ye{constructor(Ue,Je,mt,Ct,un,Un){}}return ye.\u0275fac=function(Ue){return new(Ue||ye)(w.LFG(et),w.LFG(Gt),w.LFG(Qn),w.LFG(jt),w.LFG(lt,8),w.LFG(rn,8))},ye.\u0275mod=w.oAB({type:ye}),ye.\u0275inj=w.cJS({}),ye})(),Rs=(()=>{class ye{constructor(Ue,Je,mt,Ct,un){this.features=Ue,this.featureReducers=Je,this.reducerManager=mt;const Un=Ue.map((In,Pt)=>{const er=Je.shift()[Pt];return Object.assign(Object.assign({},In),{reducers:er,initialState:bs(In.initialState)})});mt.addFeatures(Un)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return ye.\u0275fac=function(Ue){return new(Ue||ye)(w.LFG(at),w.LFG(zt),w.LFG(Xr),w.LFG(Vn),w.LFG(rn,8))},ye.\u0275mod=w.oAB({type:ye}),ye.\u0275inj=w.cJS({}),ye})(),Cs=(()=>{class ye{static forRoot(Ue,Je={}){return{ngModule:Vn,providers:[{provide:lt,useFactory:Pr,deps:[[jt,new w.FiY,new w.tp0]]},{provide:Mt,useValue:Je.initialState},{provide:Wt,useFactory:bs,deps:[Mt]},{provide:Ae,useValue:Ue},{provide:xe,useExisting:Ue instanceof w.OlP?Ue:Ae},{provide:Be,deps:[w.zs3,Ae,[new w.tBr(xe)]],useFactory:ln},{provide:Dt,useValue:Je.metaReducers?Je.metaReducers:[]},{provide:Ht,deps:[Ft,Dt],useFactory:Os},{provide:rt,useValue:Je.reducerFactory?Je.reducerFactory:mn},{provide:xt,deps:[rt,Ht],useFactory:Fn},Ie,Nt,Tt,Qt,sn,Rr(Je.runtimeChecks),Ln()]}}static forFeature(Ue,Je,mt={}){return{ngModule:Rs,providers:[{provide:Le,multi:!0,useValue:Ue instanceof Object?{}:mt},{provide:$e,multi:!0,useValue:{key:Ue instanceof Object?Ue.name:Ue,reducerFactory:mt instanceof w.OlP||!mt.reducerFactory?mn:mt.reducerFactory,metaReducers:mt instanceof w.OlP||!mt.metaReducers?[]:mt.metaReducers,initialState:mt instanceof w.OlP||!mt.initialState?void 0:mt.initialState}},{provide:at,deps:[w.zs3,Le,$e],useFactory:Or},{provide:He,multi:!0,useValue:Ue instanceof Object?Ue.reducer:Je},{provide:Ot,multi:!0,useExisting:Je instanceof w.OlP?Je:He},{provide:zt,multi:!0,deps:[w.zs3,He,[new w.tBr(Ot)]],useFactory:os},Ln()]}}}return ye.\u0275fac=function(Ue){return new(Ue||ye)},ye.\u0275mod=w.oAB({type:ye}),ye.\u0275inj=w.cJS({}),ye})();function ln(ye,Ge){return Ge instanceof w.OlP?ye.get(Ge):Ge}function Or(ye,Ge,Ue){return Ue.map((Je,mt)=>{if(Ge[mt]instanceof w.OlP){const Ct=ye.get(Ge[mt]);return{key:Je.key,reducerFactory:Ct.reducerFactory?Ct.reducerFactory:mn,metaReducers:Ct.metaReducers?Ct.metaReducers:[],initialState:Ct.initialState}}return Je})}function os(ye,Ge){return Ge.map(Je=>Je instanceof w.OlP?ye.get(Je):Je)}function bs(ye){return"function"==typeof ye?ye():ye}function Os(ye,Ge){return ye.concat(Ge)}function Pr(ye){if(ye)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function as(...ye){return{reducer:ye.pop(),types:ye.map(Je=>Je.type)}}function ki(ye,...Ge){const Ue=new Map;for(const Je of Ge)for(const mt of Je.types){const Ct=Ue.get(mt);Ue.set(mt,Ct?(Un,In)=>Je.reducer(Ct(Un,In),In):Je.reducer)}return function(Je=ye,mt){const Ct=Ue.get(mt.type);return Ct?Ct(Je,mt):Je}}},3394:(Pe,fe,V)=>{"use strict";V.d(fe,{Z:()=>qe});var w=V(3854),x=V(3910),se=V(8026),De=V(5422);class pe{constructor(it,ce){this._delegate=it,this.firebase=ce,(0,se._addComponent)(it,new x.wA("app-compat",()=>this,"PUBLIC")),this.container=it.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this._delegate.automaticDataCollectionEnabled=it}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(it=>{this._delegate.checkDestroyed(),it()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,se.deleteApp)(this._delegate)))}_getService(it,ce=se._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(it);return!et.isInitialized()&&"EXPLICIT"===(null===(Qe=et.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&et.initialize(),et.getImmediate({identifier:ce})}_removeServiceInstance(it,ce=se._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(it).clearInstance(ce)}_addComponent(it){(0,se._addComponent)(this._delegate,it)}_addOrOverwriteComponent(it){(0,se._addOrOverwriteComponent)(this._delegate,it)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Y=function le(){const Me=function(Me){const it={},ce={__esModule:!0,initializeApp:function(xt,rt={}){const Be=se.initializeApp(xt,rt);if((0,w.r3)(it,Be.name))return it[Be.name];const Ae=new Me(Be,ce);return it[Be.name]=Ae,Ae},app:et,registerVersion:se.registerVersion,setLogLevel:se.setLogLevel,onLog:se.onLog,apps:null,SDK_VERSION:se.SDK_VERSION,INTERNAL:{registerComponent:function(xt){const rt=xt.name,Be=rt.replace("-compat","");if(se._registerComponent(xt)&&"PUBLIC"===xt.type){const Ae=($e=et())=>{if("function"!=typeof $e[Be])throw ge.create("invalid-app-argument",{appName:rt});return $e[Be]()};void 0!==xt.serviceProps&&(0,w.ZB)(Ae,xt.serviceProps),ce[Be]=Ae,Me.prototype[Be]=function(...$e){return this._getService.bind(this,rt).apply(this,xt.multipleInstances?$e:[])}}return"PUBLIC"===xt.type?ce[Be]:null},removeApp:function(xt){delete it[xt]},useAsService:function(xt,rt){return"serverAuth"===rt?null:rt},modularAPIs:se}};function et(xt){if(!(0,w.r3)(it,xt=xt||se._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:xt});return it[xt]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function(){return Object.keys(it).map(xt=>it[xt])}}),et.App=Me,ce}(pe);return Me.INTERNAL=Object.assign(Object.assign({},Me.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function(ce){(0,w.ZB)(Me,ce)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),Me}(),ie=new De.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Me=self.firebase.SDK_VERSION;Me&&Me.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=Y;(0,se.registerVersion)("@firebase/app-compat","0.1.12",undefined)},8026:(Pe,fe,V)=>{"use strict";V.r(fe),V.d(fe,{FirebaseError:()=>De.ZR,SDK_VERSION:()=>Gt,_DEFAULT_ENTRY_NAME:()=>zt,_addComponent:()=>dn,_addOrOverwriteComponent:()=>nr,_apps:()=>Ft,_clearComponents:()=>Lt,_components:()=>Ht,_getProvider:()=>rn,_registerComponent:()=>Jt,_removeServiceInstance:()=>mn,deleteApp:()=>Nt,getApp:()=>Yn,getApps:()=>Xr,initializeApp:()=>Gn,onLog:()=>ar,registerVersion:()=>Tt,setLogLevel:()=>zn});var w=V(8239),x=V(3910),se=V(5422),De=V(3854);class pe{constructor(jt){this.container=jt}getPlatformInfoString(){return this.container.getProviders().map(sn=>{if(function(Qt){const jt=Qt.getComponent();return"VERSION"===(null==jt?void 0:jt.type)}(sn)){const Dn=sn.getImmediate();return`${Dn.library}/${Dn.version}`}return null}).filter(sn=>sn).join(" ")}}const ge="@firebase/app",le=new se.Yd("@firebase/app"),zt="[DEFAULT]",Dt={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ft=new Map,Ht=new Map;function dn(Qt,jt){try{Qt.container.addComponent(jt)}catch(sn){le.debug(`Component ${jt.name} failed to register with FirebaseApp ${Qt.name}`,sn)}}function nr(Qt,jt){Qt.container.addOrOverwriteComponent(jt)}function Jt(Qt){const jt=Qt.name;if(Ht.has(jt))return le.debug(`There were multiple attempts to register component ${jt}.`),!1;Ht.set(jt,Qt);for(const sn of Ft.values())dn(sn,Qt);return!0}function rn(Qt,jt){return Qt.container.getProvider(jt)}function mn(Qt,jt,sn=zt){rn(Qt,jt).clearInstance(sn)}function Lt(){Ht.clear()}const Fn=new De.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class dr{constructor(jt,sn,Dn){this._isDeleted=!1,this._options=Object.assign({},jt),this._config=Object.assign({},sn),this._name=sn.name,this._automaticDataCollectionEnabled=sn.automaticDataCollectionEnabled,this._container=Dn,this.container.addComponent(new x.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(jt){this.checkDestroyed(),this._automaticDataCollectionEnabled=jt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(jt){this._isDeleted=jt}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}const Gt="9.6.1";function Gn(Qt,jt={}){"object"!=typeof jt&&(jt={name:jt});const sn=Object.assign({name:zt,automaticDataCollectionEnabled:!1},jt),Dn=sn.name;if("string"!=typeof Dn||!Dn)throw Fn.create("bad-app-name",{appName:String(Dn)});const Ar=Ft.get(Dn);if(Ar){if((0,De.vZ)(Qt,Ar.options)&&(0,De.vZ)(sn,Ar.config))return Ar;throw Fn.create("duplicate-app",{appName:Dn})}const Sn=new x.H0(Dn);for(const yt of Ht.values())Sn.addComponent(yt);const It=new dr(Qt,sn,Sn);return Ft.set(Dn,It),It}function Yn(Qt=zt){const jt=Ft.get(Qt);if(!jt)throw Fn.create("no-app",{appName:Qt});return jt}function Xr(){return Array.from(Ft.values())}function Nt(Qt){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,w.Z)(function*(Qt){const jt=Qt.name;Ft.has(jt)&&(Ft.delete(jt),yield Promise.all(Qt.container.getProviders().map(sn=>sn.delete())),Qt.isDeleted=!0)})).apply(this,arguments)}function Tt(Qt,jt,sn){var Dn;let Ar=null!==(Dn=Dt[Qt])&&void 0!==Dn?Dn:Qt;sn&&(Ar+=`-${sn}`);const Sn=Ar.match(/\s|\//),It=jt.match(/\s|\//);if(Sn||It){const yt=[`Unable to register library "${Ar}" with version "${jt}":`];return Sn&&yt.push(`library name "${Ar}" contains illegal characters (whitespace or "/")`),Sn&&It&&yt.push("and"),It&&yt.push(`version name "${jt}" contains illegal characters (whitespace or "/")`),void le.warn(yt.join(" "))}Jt(new x.wA(`${Ar}-version`,()=>({library:Ar,version:jt}),"VERSION"))}function ar(Qt,jt){if(null!==Qt&&"function"!=typeof Qt)throw Fn.create("invalid-log-argument");(0,se.Am)(Qt,jt)}function zn(Qt){(0,se.Ub)(Qt)}Jt(new x.wA("platform-logger",jt=>new pe(jt),"PRIVATE")),Tt(ge,"0.7.11",""),Tt(ge,"0.7.11","esm2017"),Tt("fire-js","")},3910:(Pe,fe,V)=>{"use strict";V.d(fe,{wA:()=>se,H0:()=>oe,zt:()=>pe});var w=V(8239),x=V(3854);class se{constructor(Y,ie,Z){this.name=Y,this.instanceFactory=ie,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const De="[DEFAULT]";class pe{constructor(Y,ie){this.name=Y,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const ie=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(ie)){const Z=new x.BH;if(this.instancesDeferred.set(ie,Z),this.isInitialized(ie)||this.shouldAutoInitialize())try{const me=this.getOrInitializeService({instanceIdentifier:ie});me&&Z.resolve(me)}catch(me){}}return this.instancesDeferred.get(ie).promise}getImmediate(Y){var ie;const Z=this.normalizeInstanceIdentifier(null==Y?void 0:Y.identifier),me=null!==(ie=null==Y?void 0:Y.optional)&&void 0!==ie&&ie;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(me)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Ke){if(me)return null;throw Ke}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if("EAGER"===Y.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:De})}catch(ie){}for(const[ie,Z]of this.instancesDeferred.entries()){const me=this.normalizeInstanceIdentifier(ie);try{const Ke=this.getOrInitializeService({instanceIdentifier:me});Z.resolve(Ke)}catch(Ke){}}}}clearInstance(Y=De){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,w.Z)(function*(){const ie=Array.from(Y.instances.values());yield Promise.all([...ie.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...ie.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=De){return this.instances.has(Y)}getOptions(Y=De){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:ie={}}=Y,Z=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const me=this.getOrInitializeService({instanceIdentifier:Z,options:ie});for(const[Ke,qe]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Ke)&&qe.resolve(me);return me}onInit(Y,ie){var Z;const me=this.normalizeInstanceIdentifier(ie),Ke=null!==(Z=this.onInitCallbacks.get(me))&&void 0!==Z?Z:new Set;Ke.add(Y),this.onInitCallbacks.set(me,Ke);const qe=this.instances.get(me);return qe&&Y(qe,me),()=>{Ke.delete(Y)}}invokeOnInitCallbacks(Y,ie){const Z=this.onInitCallbacks.get(ie);if(Z)for(const me of Z)try{me(Y,ie)}catch(Ke){}}getOrInitializeService({instanceIdentifier:Y,options:ie={}}){let Z=this.instances.get(Y);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(le=Y,le===De?void 0:le),options:ie}),this.instances.set(Y,Z),this.instancesOptions.set(Y,ie),this.invokeOnInitCallbacks(Z,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,Z)}catch(me){}var le;return Z||null}normalizeInstanceIdentifier(Y=De){return this.component?this.component.multipleInstances?Y:De:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const ie=this.getProvider(Y.name);if(ie.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);ie.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const ie=new pe(Y,this);return this.providers.set(Y,ie),ie}getProviders(){return Array.from(this.providers.values())}}},5422:(Pe,fe,V)=>{"use strict";V.d(fe,{in:()=>x,Yd:()=>ge,Ub:()=>oe,Am:()=>le});const w=[];var x=(()=>{return(Y=x||(x={}))[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",x;var Y})();const se={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},De=x.INFO,pe={[x.DEBUG]:"log",[x.VERBOSE]:"log",[x.INFO]:"info",[x.WARN]:"warn",[x.ERROR]:"error"},ee=(Y,ie,...Z)=>{if(ie<Y.logLevel)return;const me=(new Date).toISOString(),Ke=pe[ie];if(!Ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[Ke](`[${me}]  ${Y.name}:`,...Z)};class ge{constructor(ie){this.name=ie,this._logLevel=De,this._logHandler=ee,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in x))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?se[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,x.DEBUG,...ie),this._logHandler(this,x.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,x.VERBOSE,...ie),this._logHandler(this,x.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,x.INFO,...ie),this._logHandler(this,x.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,x.WARN,...ie),this._logHandler(this,x.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,x.ERROR,...ie),this._logHandler(this,x.ERROR,...ie)}}function oe(Y){w.forEach(ie=>{ie.setLogLevel(Y)})}function le(Y,ie){for(const Z of w){let me=null;ie&&ie.level&&(me=se[ie.level]),Z.userLogHandler=null===Y?null:(Ke,qe,...Me)=>{const it=Me.map(ce=>{if(null==ce)return null;if("string"==typeof ce)return ce;if("number"==typeof ce||"boolean"==typeof ce)return ce.toString();if(ce instanceof Error)return ce.message;try{return JSON.stringify(ce)}catch(Qe){return null}}).filter(ce=>ce).join(" ");qe>=(null!=me?me:Ke.logLevel)&&Y({level:x[qe].toLowerCase(),message:it,args:Me,type:Ke.name})}}}},8239:(Pe,fe,V)=>{"use strict";function w(se,De,pe,ee,ge,oe,le){try{var Y=se[oe](le),ie=Y.value}catch(Z){return void pe(Z)}Y.done?De(ie):Promise.resolve(ie).then(ee,ge)}function x(se){return function(){var De=this,pe=arguments;return new Promise(function(ee,ge){var oe=se.apply(De,pe);function le(ie){w(oe,ee,ge,le,Y,"next",ie)}function Y(ie){w(oe,ee,ge,le,Y,"throw",ie)}le(void 0)})}}V.d(fe,{Z:()=>x})}},Pe=>{Pe(Pe.s=8667)}]);